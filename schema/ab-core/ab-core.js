(function(){var EV=Ext.lib.Event;Ext.ux.ManagedIFrame=function(){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||document.body,Ext.apply({tag:"iframe",src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:""},config.autoCreate))):null}if(!el||el.dom.tagName!="IFRAME"){return el}el.dom.name||(el.dom.name=el.dom.id);this.addEvents({focus:true,blur:true,unload:true,domready:true,documentloaded:true,exception:true,message:true});if(config.listeners){this.listeners=config.listeners;Ext.ux.ManagedIFrame.superclass.constructor.call(this)}Ext.apply(el,this);el.addClass("x-managed-iframe");if(config.style){el.applyStyles(config.style)}el._maskEl=el.parent(".x-managed-iframe-mask")||el.parent().addClass("x-managed-iframe-mask");Ext.apply(el,{disableMessaging:config.disableMessaging===true,loadMask:Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:el._maskEl,hideOnReady:true,disabled:!config.loadMask},config.loadMask),_eventName:Ext.isIE?"onreadystatechange":"onload",_windowContext:null,eventsFollowFrameLinks:typeof config.eventsFollowFrameLinks=="undefined"?true:config.eventsFollowFrameLinks});el.dom[el._eventName]=el.loadHandler.createDelegate(el);if(document.addEventListener){Ext.EventManager.on(window,"DOMFrameContentLoaded",el.dom[el._eventName])}var um=el.updateManager=new Ext.UpdateManager(el,true);um.showLoadIndicator=config.showLoadIndicator||false;if(config.src){el.setSrc(config.src)}else{var content=config.html||config.content||false;if(content){el.update.defer(10,el,[content])}}return Ext.ux.ManagedIFrame.Manager.register(el)};var MIM=Ext.ux.ManagedIFrame.Manager=function(){var frames={};return{shimCls:"x-frame-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.dom.name]={ref:frame,elCache:{}};return frame},deRegister:function(frame){frame._unHook();delete frames[frame.id];delete frames[frame.dom.name]},hideShims:function(){if(!this.shimApplied){return }Ext.select("."+this.shimCls,true).removeClass(this.shimCls+"-on");this.shimApplied=false},showShims:function(){if(!this.shimApplied){this.shimApplied=true;Ext.select("."+this.shimCls,true).addClass(this.shimCls+"-on")}},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frame.id?frames[frame.id]:null},eventProxy:function(e){e=Ext.lib.Event.getEvent(e);if(!e){return }var be=e.browserEvent||e;if(e.type=="unload"){this._unHook()}if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){return this.fireEvent(e.type,e)}},_flyweights:{},removeNode:Ext.isIE?function(frame,n){frame=MIM.getFrameHash(frame);if(frame&&n&&n.tagName!="BODY"){d=frame.scratchDiv||(frame.scratchDiv=frame.getDocument().createElement("div"));d.appendChild(n);d.innerHTML=""}}:function(frame,n){if(n&&n.parentNode&&n.tagName!="BODY"){n.parentNode.removeChild(n)}}}}();MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;MIM.El=function(frame,el,forceNew){var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});var dom=frame.getDom(el);if(!dom){return null}var id=dom.id;if(forceNew!==true&&id&&elCache[id]){return elCache[id]}this.dom=dom;this.id=id||Ext.id(dom)};MIM.El.get=function(frame,el){var ex,elm,id,doc;if(!frame||!el){return null}var frameObj;frame=(frameObj=MIM.getFrameHash(frame))?frameObj.ref:null;if(!frame){return null}var elCache=frameObj.elCache||(frameObj.elCache={});if(!(doc=frame.getDocument())){return null}if(typeof el=="string"){if(!(elm=frame.getDom(el))){return null}if(ex=elCache[el]){ex.dom=elm}else{ex=elCache[el]=new MIM.El(frame,elm)}return ex}else{if(el.tagName){if(!(id=el.id)){id=Ext.id(el)}if(ex=elCache[id]){ex.dom=el}else{ex=elCache[id]=new MIM.El(frame,el)}return ex}else{if(el instanceof MIM.El){if(el!=frameObj.docEl){el.dom=frame.getDom(el.id)||el.dom;elCache[el.id]=el}return el}else{if(el.isComposite){return el}else{if(Ext.isArray(el)){return frame.select(el)}else{if(el==doc){if(!frameObj.docEl){var f=function(){};f.prototype=MIM.El.prototype;frameObj.docEl=new f();frameObj.docEl.dom=doc}return frameObj.docEl}}}}}}return null};Ext.apply(MIM.El.prototype,Ext.Element.prototype);Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,setSrc:function(url,discardUrl,callback){var reset=Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"";var src=url||this.src||reset;if(Ext.isOpera){this.dom.src=reset}this._windowContext=null;this._unHook();this._callBack=callback||false;this.showMask();(function(){var s=typeof src=="function"?src()||"":src;try{this._frameAction=true;this.dom.src=s;this.frameInit=true;this.checkDOM()}catch(ex){this.fireEvent("exception",this,ex)}}).defer(10,this);if(discardUrl!==true){this.src=src}return this},reset:function(src,callback){this.setSrc(src||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:""),true,callback)},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback){loadScripts=loadScripts||this.getUpdateManager().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if(doc=this.getDocument()){this._frameAction=!!content.length;this._windowContext=this.src=null;this._callBack=callback||false;this._unHook();this.showMask();doc.open();doc.write(content);doc.close();this.frameInit=true;if(this._frameAction){this.checkDOM()}else{this.hideMask(true);if(this._callBack){this._callBack()}}}else{this.hideMask(true);if(this._callBack){this._callBack()}}return this},disableMessaging:true,_XFrameMessaging:function(){var tagStack={"$":[]};var isEmpty=function(v,allowBlank){return v===null||v===undefined||(!allowBlank?v==="":false)};window.sendMessage=function(message,tag,origin){var MIF;if(MIF=arguments.callee.manager){if(message._fromHost){var fn,result;var compTag=message.tag||tag||null;var mstack=!isEmpty(compTag)?tagStack[compTag.toLowerCase()]||[]:tagStack["$"];for(var i=0,l=mstack.length;i<l;i++){if(fn=mstack[i]){result=fn.apply(fn.__scope,arguments)===false?false:result;if(fn.__single){mstack[i]=null}if(result===false){break}}}return result}else{message={type:isEmpty(tag)?"message":"message:"+tag.toLowerCase().replace(/^\s+|\s+$/g,""),data:message,domain:origin||document.domain,uri:document.documentURI,source:window,tag:isEmpty(tag)?null:tag.toLowerCase()};try{return MIF.disableMessaging!==true?MIF.fireEvent.call(MIF,message.type,MIF,message):null}catch(ex){}return null}}};window.onhostmessage=function(fn,scope,single,tag){if(typeof fn=="function"){if(!isEmpty(fn.__index)){throw"onhostmessage: duplicate handler definition"+(tag?" for tag:"+tag:"")}var k=isEmpty(tag)?"$":tag.toLowerCase();tagStack[k]||(tagStack[k]=[]);Ext.apply(fn,{__tag:k,__single:single||false,__scope:scope||window,__index:tagStack[k].length});tagStack[k].push(fn)}else{throw"onhostmessage: function required"}};window.unhostmessage=function(fn){if(typeof fn=="function"&&typeof fn.__index!="undefined"){var k=fn.__tag||"$";tagStack[k][fn.__index]=null}}},get:function(el){return MIM.El.get(this,el)},fly:function(el,named){named=named||"_global";el=this.getDom(el);if(!el){return null}if(!MIM._flyweights[named]){MIM._flyweights[named]=new Ext.Element.Flyweight()}MIM._flyweights[named].dom=el;return MIM._flyweights[named]},getDom:function(el){var d;if(!el||!(d=this.getDocument())){return null}return el.dom?el.dom:(typeof el=="string"?d.getElementById(el):el)},select:function(selector,unique){var d;return(d=this.getDocument())?Ext.Element.select(selector,unique,d):null},query:function(selector){var d;return(d=this.getDocument())?Ext.DomQuery.select(selector,d):null},getDoc:function(){return this.get(this.getDocument())},removeNode:function(node){MIM.removeNode(this,this.getDom(node))},_unHook:function(){var elcache,h=MIM.getFrameHash(this)||{};if(this._hooked&&h&&(elcache=h.elCache)){for(var id in elcache){var el=elcache[id];delete elcache[id];if(el.removeAllListeners){el.removeAllListeners()}}if(h.docEl){h.docEl.removeAllListeners();h.docEl=null;delete h.docEl}}this._hooked=this._domReady=this._domFired=false},_renderHook:function(){this._windowContext=null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+this.dom.id+'"))._windowContext='+(Ext.isIE?"window":"{eval:function(s){return eval(s);}}")+";})();")){this._frameProxy||(this._frameProxy=MIM.eventProxy.createDelegate(this));EV.doAdd(this.getWindow(),"focus",this._frameProxy);EV.doAdd(this.getWindow(),"blur",this._frameProxy);EV.doAdd(this.getWindow(),"unload",this._frameProxy);if(this.disableMessaging!==true){this.loadFunction({name:"XMessage",fn:this._XFrameMessaging},false,true);var sm;if(sm=this.getWindow().sendMessage){sm.manager=this}}this.CSS=new CSSInterface(this.getDocument())}return this.domWritable()}catch(ex){}return false},sendMessage:function(message,tag,origin){var win;if(this.disableMessaging!==true&&(win=this.getWindow())){tag||(tag=message.tag||"");tag=tag.toLowerCase();message=Ext.applyIf(message.data?message:{data:message},{type:Ext.isEmpty(tag)?"message":"message:"+tag,domain:origin||document.domain,uri:document.documentURI,source:window,tag:tag||null,_fromHost:this});return win.sendMessage?win.sendMessage.call(null,message,tag,origin):null}return null},_windowContext:null,getDocument:function(){var win;return(win=this.getWindow())?win.document:null},getBody:function(){var d;return(d=this.getDocument())?d.body:null},getDocumentURI:function(){var URI;try{URI=this.src?this.getDocument().location.href:null}catch(ex){}return URI||this.src},getWindow:function(){var dom=this.dom;if(Ext.isIE){if(dom&&window.frames){return window.frames[dom.name]}else{return null}}else{return dom?dom.contentWindow||window.frames[dom.name]:null}},print:function(){try{var win=this.getWindow();if(Ext.isIE){win.focus()}win.print()}catch(ex){throw"print exception: "+(ex.description||ex.message||ex)}},destroy:function(){this.removeAllListeners();if(this.dom){if(document.addEventListener){Ext.EventManager.un(window,"DOMFrameContentLoaded",this.dom[this._eventName])}this.dom[this._eventName]=null;Ext.ux.ManagedIFrame.Manager.deRegister(this);this._windowContext=null;if(Ext.isIE&&this.dom.src){this.dom.src="javascript:false"}this._maskEl=null;Ext.removeNode(this.dom)}Ext.apply(this.loadMask,{masker:null,maskEl:null})},domWritable:function(){return !!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw"execScript:non-secure context"}}catch(ex){this.fireEvent("exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getDocument();if(doc&&doc.getElementsByTagName){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this.fireEvent("exception",this,ex)}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fn=fn.fn||window[fn];this.execScript(name+"="+fn,useDOM);if(invokeIt){this.execScript(name+"()")}},showMask:function(msg,msgCls,forced){var lmask;if((lmask=this.loadMask)&&(!lmask.disabled||forced)){if(lmask._vis){return }lmask.masker||(lmask.masker=Ext.get(lmask.maskEl||this.dom.parentNode||this.wrap({tag:"div",style:{position:"relative"}})));lmask._vis=true;lmask.masker.mask.defer(lmask.delay||5,lmask.masker,[msg||lmask.msg,msgCls||lmask.msgCls])}},hideMask:function(forced){var tlm;if((tlm=this.loadMask)&&!tlm.disabled&&tlm.masker){if(!forced&&(tlm.hideOnReady!==true&&this._domReady)){return }tlm._vis=false;tlm.masker.unmask.defer(tlm.delay||5,tlm.masker)}},loadHandler:function(e){if(!this.frameInit||(!this._frameAction&&!this.eventsFollowFrameLinks)){return }var rstatus=(e&&typeof e.type!=="undefined"?e.type:this.dom.readyState);switch(rstatus){case"loading":case"interactive":break;case"DOMFrameContentLoaded":if(this._domFired||(e&&e.target!==this.dom)){return }case"domready":if(this._domFired){return }if(this._domFired=this._hooked=this._renderHook()){this._frameAction=(this.fireEvent("domready",this)===false?false:this._frameAction)}case"domfail":this._domReady=true;this.hideMask();break;case"load":case"complete":if(!this._domFired){this.loadHandler({type:"domready"})}this.hideMask(true);if(this._frameAction||this.eventsFollowFrameLinks){this.fireEvent.defer(50,this,["documentloaded",this])}this._frameAction=false;if(this.eventsFollowFrameLinks){this._domFired=this._domReady=false}if(this._callBack){this._callBack(this)}break;default:}},checkDOM:function(win){if(Ext.isOpera){return }var n=0,win=win||this.getWindow(),manager=this,domReady=false,max=100;var poll=function(){try{domReady=false;var doc=win.document,body;if(!manager._domReady){domReady=(doc&&doc.getElementsByTagName);domReady=domReady&&(body=doc.getElementsByTagName("body")[0])&&!!body.innerHTML.length}}catch(ex){n=max}if(!manager._frameAction||manager._domReady){return }if(n++<max&&!domReady){setTimeout(arguments.callee,10);return }manager.loadHandler({type:domReady?"domready":"domfail"})};setTimeout(poll,50)}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};var CSSInterface=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,createStyleSheet:function(cssText,id){var ss;if(!doc){return }var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");if(id){rules.setAttribute("id",id)}if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc){return }var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){this.removeStyleSheet(id);if(!doc){return }var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss){if(this.rules){this.rules={}}try{var ssRules=ss.cssRules||ss.rules;for(var j=ssRules.length-1;j>=0;--j){this.rules[ssRules[j].selectorText]=ssRules[j]}}catch(e){}},getRules:function(refreshCache){if(this.rules==null||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector]}for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i]]}}return null},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(styleCamelRe,styleCamelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true}}}return false}}}};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{height:"100%",width:"100%",position:"relative"},frameStyle:{overflow:"auto"},frameConfig:null,hideMode:!Ext.isIE?"nosize":"display",shimCls:Ext.ux.ManagedIFrame.Manager.shimCls,shimUrl:null,loadMask:false,animCollapse:Ext.isIE,autoScroll:false,closable:true,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:false,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",initComponent:function(){var unsup=this.unsupportedText?{html:this.unsupportedText}:false;this.bodyCfg||(this.bodyCfg={tag:"div",cls:"x-panel-body",children:[{cls:"x-managed-iframe-mask",children:[Ext.apply(Ext.apply({tag:"iframe",frameborder:0,cls:"x-managed-iframe",style:this.frameStyle||null},this.frameConfig),unsup,Ext.isIE&&Ext.isSecure?{src:Ext.SSL_SECURE_URL}:false),{tag:"img",src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls}]}]});this.autoScroll=false;this.items=null;if(this.stateful!==false){this.stateEvents||(this.stateEvents=["documentloaded"])}Ext.ux.ManagedIframePanel.superclass.initComponent.call(this);this.monitorResize||(this.monitorResize=this.fitToParent);this.addEvents({documentloaded:true,domready:true,message:true,exception:true});this.addListener=this.on},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments)},beforeDestroy:function(){if(this.rendered){if(this.tools){for(var k in this.tools){Ext.destroy(this.tools[k])}}if(this.header&&this.headerAsText){var s;if(s=this.header.child("span")){s.remove()}this.header.update("")}Ext.each(["iframe","shim","header","topToolbar","bottomToolbar","footer","loadMask","body","bwrap"],function(elName){if(this[elName]){if(typeof this[elName].destroy=="function"){this[elName].destroy()}else{Ext.destroy(this[elName])}this[elName]=null;delete this[elName]}},this)}Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this)},onRender:function(ct,position){Ext.ux.ManagedIframePanel.superclass.onRender.call(this,ct,position);if(this.iframe=this.body.child("iframe.x-managed-iframe")){var El=Ext.Element;var mode=El[this.hideMode.toUpperCase()]||"x-hide-nosize";Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(el){if(el){el.setVisibilityMode(mode)}},this);if(this.loadMask){this.loadMask=Ext.apply({disabled:false,maskEl:this.body,hideOnReady:true},this.loadMask)}if(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle})){this.loadMask=this.iframe.loadMask;this.iframe.ownerCt=this;this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[]));delete this._msgTagHandlers}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){var MIM=Ext.ux.ManagedIFrame.Manager,st=false;Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.splitEl){st=true;if(!reg.split._splitTrapped){reg.split.on("beforeresize",MIM.showShims,MIM);reg.split._splitTrapped=true}}},this);if(st&&!this._splitTrapped){this.on("resize",MIM.hideShims,MIM);this._splitTrapped=true}},this,{single:true});ownerCt=ownerCt.ownerCt}}this.shim=Ext.get(this.body.child("."+this.shimCls))},toggleShim:function(){if(this.shim&&this.shimCls){this.shim.toggleClass(this.shimCls+"-on")}},afterRender:function(container){var html=this.html;delete this.html;Ext.ux.ManagedIframePanel.superclass.afterRender.call(this);if(this.iframe){if(this.defaultSrc){this.setSrc()}else{if(html){this.iframe.update(typeof html=="object"?Ext.DomHelper.markup(html):html)}}}},sendMessage:function(){if(this.iframe){this.iframe.sendMessage.apply(this.iframe,arguments)}},on:function(name){var tagRE=/^message\:/i,n=null;if(typeof name=="object"){for(var na in name){if(!this.filterOptRe.test(na)&&tagRE.test(na)){n||(n=[]);n.push(na.toLowerCase())}}}else{if(tagRE.test(name)){n=[name.toLowerCase()]}}if(this.getFrame()&&n){this.relayEvents(this.iframe,n)}else{this._msgTagHandlers||(this._msgTagHandlers=[]);if(n){this._msgTagHandlers=this._msgTagHandlers.concat(n)}}Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments)},setSrc:function(url,discardUrl,callback){url=url||this.defaultSrc||false;if(!url){return this}if(url.url){callback=url.callback||false;discardUrl=url.discardUrl||false;url=url.url||false}var src=url||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"");if(this.rendered&&this.iframe){this.iframe.setSrc(src,discardUrl,callback)}return this},getState:function(){var URI=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},URI?{defaultSrc:typeof URI=="function"?URI():URI}:null)},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},doAutoLoad:function(){this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})}});Ext.reg("iframepanel",Ext.ux.ManagedIframePanel);Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",Ext.ux.ManagedIframePortlet);Ext.apply(Ext.Element.prototype,{setVisible:function(visible,animate){if(!animate||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(visible)}else{if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=visible?"visible":"hidden"}else{this[visible?"removeClass":"addClass"](String(this.visibilityMode))}}}else{var dom=this.dom;var visMode=this.visibilityMode;if(visible){this.setOpacity(0.01);this.setVisible(true)}this.anim({opacity:{to:(visible?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!visible){if(visMode==Ext.Element.DISPLAY){dom.style.display="none"}else{if(visMode==Ext.Element.VISIBILITY){dom.style.visibility="hidden"}else{Ext.get(dom).addClass(String(visMode))}}Ext.get(dom).setOpacity(1)}})}return this},isVisible:function(deep){var vis=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"||this.hasClass(this.visibilityMode));if(deep!==true||!vis){return vis}var p=this.dom.parentNode;while(p&&p.tagName.toLowerCase()!="body"){if(!Ext.fly(p,"_isVisible").isVisible()){return false}p=p.parentNode}return true}});Ext.onReady(function(){var CSS=Ext.util.CSS,rules=[];CSS.getRule(".x-managed-iframe")||(rules.push(".x-managed-iframe {height:100%;width:100%;overflow:auto;}"));CSS.getRule(".x-managed-iframe-mask")||(rules.push(".x-managed-iframe-mask{width:100%;height:100%;position:relative;}"));if(!CSS.getRule(".x-frame-shim")){rules.push(".x-frame-shim {z-index:9000;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}")}CSS.getRule(".x-hide-nosize")||(rules.push(".x-hide-nosize,.x-hide-nosize object,.x-hide-nosize iframe{height:0px!important;width:0px!important;border:none;}"));if(!!rules.length){CSS.createStyleSheet(rules.join(" "))}})})();var Debug=false;function SetDebugVariable(A){Debug=A}var z_MESSAGE_CANT_FIND_FRAME="Cannot find frame named by";var mozillaFireFoxBrowser=(navigator.userAgent.toUpperCase()).indexOf("FIREFOX")>0;var microsoftIEBrowser=(navigator.userAgent.toUpperCase()).indexOf("MSIE")>0;var afmHiddenFormName="afmHiddenForm";var xmlName="xml";var afmInputsFormName="afmInputsForm";var strSerializedStartTag="<";var strSerializedCloseTag=">";var strSerializedInsertingDataFirstPart="";var strSerializedInsertingDataRestPart="";var strPdfAfmActionSerialized="";var strExcelAfmActionSerialized="";var strPdfGeneratingViewUrl="";function $(D){var C=Ext.get(D);if(C!=null){C=C.dom}if((typeof C=="undefined"||C==null)&&AFM.view.View.version=="2.0"){for(var B=0,A;A=AFM.view.View.panels.items[B];B++){if(A.type!="form"){continue}var E=Ext.get(A.id+"_"+D);if(E!=null){C=E.dom;break}}}return C}function valueExists(A){return(typeof (A)!="undefined"&&A!=null)}function getValueIfExists(B,A){return valueExists(B)?B:A}function valueExistsNotEmpty(A){return(valueExists(A)&&(typeof A!="string"||trim(A)!=""))}function objectsEqual(C,B){var A=true;if(typeof C=="object"&&typeof B=="object"){for(var D in C){if(C[D]!=B[D]){A=false;break}}}else{A=(C==B)}return A}function getBoolean(B){var A=false;if(valueExists(B)&&B!=""){if(typeof B=="boolean"){A=B}else{if(typeof B=="string"){A=(B=="true")}}}return A}function sendingDataFromHiddenForm(H,B,G,A,E,F){var D=document.forms[afmHiddenFormName];var K="";var I="";if(E){setSerializedInsertingDataVariables(B);K=gettingRecordsData();if(K==null){return }if(K!=""){if(K.indexOf("<userInputRecordsFlag>")<0){K="<userInputRecordsFlag>"+K+"</userInputRecordsFlag>"}I=strSerializedInsertingDataFirstPart+K+strSerializedInsertingDataRestPart}else{I=B}}else{I=B}if(D!=null){if(G=="_blank"||G=="blank"){var C="newTargetWindow";var L="titlebar=no,toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=1000,height=650";if(F!=""){L=F}var J=window.open("",C,L);J.moveTo(10,10);G=C}if(H==""){H="login.axvw"}D.elements[xmlName].value=I;D.target=G;D.action=H;D.submit();if(A!=""){reloadFrameWindow(A)}}}function setSerializedInsertingDataVariables(G){var F=0;var D=0;var B=">";var E="<";var A="&gt;";var C="&lt;";F=G.indexOf(B);if(F>0){strSerializedInsertingDataFirstPart=G.substring(0,F+B.length);strSerializedInsertingDataRestPart=G.substring(F+B.length)}else{D=G.indexOf(A);if(D>0){strSerializedInsertingDataFirstPart=G.substring(0,D+A.length);strSerializedInsertingDataRestPart=G.substring(D+A.length)}}}function sendingAfmActionRequestWithClientDataXMLString2Server(B,D,A){if(A!=""){if(A.indexOf("<userInputRecordsFlag>")<0){A="<userInputRecordsFlag>"+A+"</userInputRecordsFlag>"}}var C="";setSerializedInsertingDataVariables(D);C=strSerializedInsertingDataFirstPart+A+strSerializedInsertingDataRestPart;sendingDataFromHiddenForm("",C,B,"",false,"")}function reloadFrameWindow(A){var B=null;B=getFrameObject(window,A);if(B!=null){if(Debug){alert(B.name+" href: "+B.location.href)}if(document.images){B.location.reload()}else{B.location.href=B.location.href}}else{if(Debug){alert(Ab.view.View.getLocalizedString(z_MESSAGE_CANT_FIND_FRAME)+" "+A)}}}function getFrameObject(F,C){var B=null;if(F!=null){if(F.frames!=null){for(var E=0;E<F.frames.length;E++){var A=[];var D=F.frames[E].name;if(D!=null||D!=""){A=D.match(C)}if(A!=null){B=F.frames[E];break}}}if(B==null){if(F!=window.top&&F.parent!=window.top){B=getFrameObject(F.parent,C)}}}return B}function OpenSelectVWindow(D){var C="selectValueWindow";var A="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=500,height=600";var B=window.open("",C,A);sendingDataFromHiddenForm("dynamic-content.axvw",D,C,"",false)}var objErrorMsgWindow=null;function OpenErrorMessageWindow(M,H,B,F,L,E,I,G,D,N,J,A,K){if(objErrorMsgWindow==null||objErrorMsgWindow.closed){objErrorMsgWindow=window.open("","errorMessageDisplayWindow","menubar=no,scrollbars=yes,resizable=yes,status=yes,width=300,height=300")}var C="<html><head><title>"+M+"</title>";C=C+'<script language="JavaScript">function showMessage(){var obj_originalException=document.getElementById("originalException");obj_originalException.style.display="";var obj_stackTrace=document.getElementById("stackTrace");obj_stackTrace.style.display="";}; self.moveTo(0,0); setInterval("popupItself()",100); self.focus(); function popupItself(){self.focus();};<\/script>';C=C+'</head><body style="margin: 0px; font-family: verdana; font-size: 12px"><center>';C=C+'<div style="width: 100%; height: 23px; background-color: #AEBAB6; color: #FFFFFF; font-weight: bold; padding-top: 3px; margin-bottom: 12px">'+K+"</div>";C=C+'<div style="width: 80%; margin-bottom: 12px">'+N+"</div>";C=C+'<div style="width: 80%; margin-bottom: 12px"><input name="detailButton" type="button" value="'+H+'" onclick="showMessage();" style="margin-right: 8px">';C=C+'<script language="JavaScript">if(opener!=null){var stackTraceAllowed=opener.document.forms["'+E+'"].elements["'+D+'"].value;var detailButtonObj=document.getElementById("detailButton");if( undefined !=detailButtonObj) { if(stackTraceAllowed=="true"){detailButtonObj.style.display="";} else {detailButtonObj.style.display="none";}}}<\/script>';C=C+'<input type="button" value="'+L+'" onclick="window.close()"></div>';C=C+'<div style="width: 80%; margin-bottom: 12px; display: none" id="originalException">'+B+' : <script language="JavaScript">if(opener!=null)document.write(opener.document.forms["'+E+'"].elements["'+I+'"].value);<\/script></div>';C=C+'<div style="width: 80%; margin-bottom: 12px; display: none" id="stackTrace">'+F+' : <script language="JavaScript">if(opener!=null)document.write(opener.document.forms["'+E+'"].elements["'+G+'"].value);<\/script></div></center></body></html>';objErrorMsgWindow.document.write(C);if(A=="true"){window.history.go(-1)}}function setCookie(C,D,B){var A=new Date();if(B==null){A.setTime(A.getTime()-1)}document.cookie=C+"="+escape(D)+((B==null)?("; expires="+A.toGMTString()):("; expires="+B.toGMTString()))}function getCookie(A){var B=new RegExp(A+"=([^;]+)");var C=B.exec(document.cookie);return(C!=null)?unescape(C[1]):null}function trimLeft(A){return A.replace(/^\s+/,"")}function trimRight(A){return A.replace(/\s+$/,"")}function trim(B){if(B){var A=trimLeft(B);return trimRight(A)}return B}function openNewContent(A,B){openNewContent(A,B,"")}function openNewContent(B,F,D){var A="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=450,height=450,left=10,top=10";if(D!=null&&D!=""){A=D}if(F=="_blank"||F==""){var E="newWindow";var C=window.open(B,E,A);return C}else{var G=document.forms[afmHiddenFormName];G.target=F;G.action=B;G.submit()}}function disableInputEnterKeyEvent(A){var B=A.keyCode?A.keyCode:A.which?A.which:A.charCode;if(B==13){return false}else{return true}}function convert2validXMLValue(A){A=A.replace(/&amp;/g,"&");A=A.replace(/&/g,"&amp;");A=A.replace(/>/g,"&gt;");A=A.replace(/</g,"&lt;");A=A.replace(/\'/g,"&apos;");A=A.replace(/\"/g,"&quot;");return A}function convertFromXMLValue(A){if(valueExistsNotEmpty(A)){A=A.replace(/&amp;/g,"&");A=A.replace(/&gt;/g,">");A=A.replace(/&lt;/g,"<");A=A.replace(/&apos;/g,"'");A=A.replace(/&quot;/g,'"')}return A}function convert2validXMLValueAndLiteralizeValue(A){A=A.replace(/&amp;/g,"&");A=A.replace(/&/g,"&amp;");A=A.replace(/>/g,"&gt;");A=A.replace(/</g,"&lt;");A=A.replace(/\'/g,"&apos;&apos;");A=A.replace(/\"/g,"&quot;");return A}function convertMemo2validateXMLValue(D){D=convert2validXMLValue(D);var A=new RegExp("\r\n","gi");D=D.replace(A,"#AFM_FLAG_NEWLINE#");var C=new RegExp("\n","gi");D=D.replace(C,"#AFM_FLAG_NEWLINE#");var B=new RegExp("\r","gi");D=D.replace(B,"#AFM_FLAG_NEWLINE#");return D}function insertRenderedAXVWFile2AfmAction(C,B){var E=parseXml(unescape(C),null,true);var D=E.getElementsByTagName("afmAction");for(var A=0;A<D.length;A++){var F=D[A].getAttribute("state");if(!F){F=E.createAttribute("state");F.value=B;D[A].setAttributeNode(F)}else{D[A].setAttribute("state",B)}}return serializingXML(E)}function openNoneAXVWFile(C,E,G){if(C!=""&&E!=""){var B=C+"/"+E+"?a=1";if(G){var A="newWindow";var D="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=450,height=450";var F=window.open(B,A,D)}else{window.location.href=B}}}var loadingPdfGeneratingView=false;function openPdfGeneratingView(B){if(B!=null&&B!=""){loadingPdfGeneratingView=true;strPdfAfmActionSerialized=B;var A="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=800,height=600";strPdfGeneratingViewUrl="ab-generating-pdf.axvw";openNewContent(strPdfGeneratingViewUrl,"_blank",A)}}var loadingExcelGeneratingView=false;function openExcelGeneratingView(B){if(B!=null&&B!=""){loadingExcelGeneratingView=true;strExcelAfmActionSerialized=B;var A="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=800,height=600";var C="ab-generating-excel.axvw";openNewContent(C,"_blank",A)}}function insertXML2AfmActionXML(A,B){setSerializedInsertingDataVariables(A);if(B!=""){A=strSerializedInsertingDataFirstPart+B+strSerializedInsertingDataRestPart}return A}function getXmlAttribute(B,A,C){var D=selectSingleNode(null,B,A);if(D==null){return }return D.getAttribute(C)}function setXmlAttribute(E,F,A,I){var H=$(E);if(H==null){return }var D=H.value;var G=parseXml(D,null,true);var B=selectNodes(G,null,F);if(B==null||B.length==0){return }for(var C=0;C<B.length;C++){B[C].setAttribute(A,I)}H.value=serializingXML(G)}function parseXml(G,A,F){var C="";if(G!=null&&G!=""){C=G}else{var D=$(A);if(D==null){return null}C=D.value}if(C==null||C==""){return }if(F){C=C.replace(/&gt;/g,">");C=C.replace(/&lt;/g,"<");C=C.replace(/&quot;/g,'"');C=C.replace(/\'\'/g,'"')}var H=null;if(window.ActiveXObject){H=new ActiveXObject("Microsoft.XMLDOM");H.async=false;var B=H.loadXML(C)}else{if(document.implementation&&document.implementation.createDocument){H=document.implementation.createDocument("","",null);H.async=false;var E=new DOMParser();H=E.parseFromString(C,"text/xml");E=null}}return H}function serializingXML(C){var A="";if(window.ActiveXObject){A=C.xml}else{if(document.implementation&&document.implementation.createDocument){var B=new XMLSerializer;A=B.serializeToString(C);B=null}}return A}function selectNodes(F,C,B){var A=[];if(F==null){F=parseXml(null,C,true)}if(F==null){return null}if(window.ActiveXObject){A=F.selectNodes(B)}else{if(document.implementation&&document.implementation.createDocument){var D=F.evaluate(B,F,null,XPathResult.ANY_TYPE,null);var E=0;while(tempNode=D.iterateNext()){A[E++]=tempNode}}}return A}function selectSingleNode(E,D,C){var A=null;var B=selectNodes(E,D,C);if(B!=null){A=B[0]}return A}function getMessage(B){var A=B;var C=View.messages[B];if(valueExists(C)){A=C}return replaceHTMLPlaceholders(A)}function replaceHTMLPlaceholders(A){result=A.replace(/\[/g,"<");result=result.replace(/\]/g,">");result=result.replace(/&apos;/g,"'");return result}function setPanelTitle(C,B){var A=$(C+"_title");if(A!=null){A.innerHTML=B}}function getPanelTitle(C){var B="";var A=$(C+"_title");if(A!=null){B=A.innerHTML}return B}function endsWith(B,A){return B.indexOf(A,B.length-A.length)!==-1}function convert2SafeSqlString(A){if(valueExistsNotEmpty(A)){A=A.replace(/\'/g,"''")}return A}var arrMonthNames=new Array();var arrDateShortPattern=new Array();var strCurrencySign="$";var strDecimalSeparator=".";var strDateShortPattern="";var strDateLongPattern="dddd, MMMM dd, yyyy";var strGroupingSeparator=",";var timePattern="H:MM:SS TT";var arrTimeAmPmSigns=new Array();var bDefaultDateShortFormat=true;var bDefaultTimeFormat=true;var strLocaleName="en_US";var intFirstDayOfWeek=1;function SetLocaleCommonJSVariables(B,D,A){var C=B.toUpperCase();var E=""+D;if(valueExists(A)){intFirstDayOfWeek=A}if(C=="DECIMALSEPARATOR"){strDecimalSeparator=E}else{if(C=="GROUPINGSEPARATOR"){strGroupingSeparator=E.toUpperCase()}else{if(C=="NAME"){strLocaleName=E}}}}function SetLocaleDateJSVariables(A,D){var C=A.toUpperCase();var E=""+D;if(C=="MONTHNAMES"){arrMonthNames=E.split(",");if(arrMonthNames[1]==null){arrMonthNames=E.split(";")}}else{if(C=="FORMAT"&&E!=""){strDateShortPattern=E.toUpperCase();strDateShortPattern=trim(strDateShortPattern);bDefaultDateShortFormat=false;SetDateShortArray()}else{if(C=="SHORT"&&E!=""&&bDefaultDateShortFormat){strDateShortPattern=E.toUpperCase();strDateShortPattern=strDateShortPattern.replace(/\'MM/g," MM");strDateShortPattern=strDateShortPattern.replace(/\'DD/g," DD");strDateShortPattern=strDateShortPattern.replace(/\'M/g," M");strDateShortPattern=strDateShortPattern.replace(/\'D/g," D");if(bRemovingSingleQuotaFromDateFormat(E.toUpperCase())){strDateShortPattern=strDateShortPattern.replace(/\'/g,"")}strDateShortPattern=trim(strDateShortPattern);SetDateShortArray()}else{if(C=="LONG"){E=E.toUpperCase();var B=E;E=E.replace(/\'MM/g," MM");E=E.replace(/\'DD/g," DD");E=E.replace(/\'M/g," M");E=E.replace(/\'D/g," D");if(bRemovingSingleQuotaFromDateFormat(B)){E=E.replace(/\'/g,"")}E=E.replace("EEEE,","");E=E.replace("EEEE","");E=E.replace("(EE)","");E=E.replace("EE","");E=E.replace("'MMMM'","MM");E=E.replace("'YYYY","YYYY");E=E.replace("D'","D");E=trim(E);strDateLongPattern=E}}}}}function SetLocaleTimeJSVariables(A,C){var B=A.toUpperCase();var D=""+C;if(D!=""){D=D.replace("H.","H:");if(B=="FORMAT"){timePattern=D;bDefaultTimeFormat=false}else{if(B=="SHORT"&&bDefaultTimeFormat){if(D.indexOf("H:")==0){D="H"+D}timePattern=D}else{if(B=="AMPMSTRINGS"){arrTimeAmPmSigns=D.split(",");if(arrTimeAmPmSigns[1]==null){arrTimeAmPmSigns=D.split(";")}}}}}}function GetDateSeparator(C){C=C.toUpperCase();var D="";var A="";for(var B=0;B<C.length;B++){D=C.charAt(B);if(D!="Y"&&D!="M"&&D!="D"){A=D;break}}return A}function SetDateShortArray(){var strDateSeparator=GetDateSeparator(strDateShortPattern);var strTemp="strDateShortPattern.split(/\\"+strDateSeparator+"/)";arrDateShortPattern=eval(strTemp)}function bRemovingSingleQuotaFromDateFormat(A){return((A.match("'MMMM'")!=null)||(A.match("YYYY'")!=null))}function FormattingDate(I,D,G,J){var H=J+"";var F="";var K=0;var E="";var B="";var A=new Array();I=parseInt(I,10);D=parseInt(D,10);G=parseInt(G,10);if(G<=999){G=2000+G}G=G+"";A.YYYY=A.YYY=A.Y=G;A.YY=G.substring(2,4);if(D>12){D=12}A.M=D;A.MM=(D<10)?("0"+D):D;A.MMM=A.MMMM=arrMonthNames[D-1];A.DDD=A.DDDD="";A.DD=(I<10)?("0"+I):I;var C=(J.match("DE"));if(C!=null){A.DE="de";A.E=""}A.D=I;while(K<H.length){E=H.charAt(K);B="";while((H.charAt(K)==E)&&(K<H.length)){B+=H.charAt(K++)}if((C!=null)&&(H.charAt(K)=="E")){B=B+"E"}if(A[B]!=null){if(B=="DDD"||B=="DDDD"){K=K+1}F=F+A[B]}else{F=F+B}}return F}function FormattingTime(D,C,G,I){I=I.toUpperCase();var H=I+"";var F="";var J=0;var E="";var B="";var A=new Array();D=parseInt(D,10);C=parseInt(C,10);if(isInteger(D)){if(H.search("HH")>=0){while(D>24){D=(D>24)?(D-24):D}}else{if(H.search("H")>=0){while(D>12){D=(D>12)?(D-12):D}}}}if(isInteger(D)){A.H=(D==0)?12:D;A.HH=(D<10)?("0"+D):D}else{A.H="H";A.HH="HH"}if(isInteger(C)){A.MM=(C<10)?("0"+C):C;A.M=C}else{A.MM="MM";A.M="M"}A.TT=A.T=A.A=A.AM=A.P=A.PM=G;A.Z=A.ZZZZ="";A.S=A.SS="";while(J<H.length){E=H.charAt(J);B="";while((H.charAt(J)==E)&&(J<H.length)){B+=H.charAt(J++)}if(A[B]!=null){if(B=="SS"||B=="S"){if(F.length>1){F=F.substring(0,F.length-1)}}F=F+A[B]}else{F=F+B}}return F}function MonthNameToMonthNum(D){var C="";var E="";var A=0;for(var B=0;B<12;B++){E=(arrMonthNames[B]).toLowerCase();C=D.toLowerCase();if(E.substring(0,C.length)==C){A=B+1;break}}return A}function GetMonthMaxDays(D,B){var C=-1;if(D<0){D=1}if(D>12){D=12}if(B<0){B=0}for(var A=0;A<12;A++){if((D-1)==A){if(A==0||A==2||A==4||A==6||A==7||A==9||A==11){C=31}else{if(A==3||A==5||A==8||A==10){C=30}else{if((B%4==0)||(B%100==0)||(B%400==0)){C=29}else{C=28}}}break}}return C}function validationAndConvertionDateInput(J,F,D,C,L,G){var I=false;if(C=="true"){I=true}else{I=false}var O=J.value;O=trim(O);var B=new Date();var H="";var T="";var Q="";var N=new Array();if(D!=null){H=D[0];T=D[1];Q=D[2]}else{if(O!=null&&O!=""){if(isBeingISODateFormat(O)){N.year=O.split("-")[0];N.month=O.split("-")[1];N.day=O.split("-")[2]}else{N=gettingYearMonthDayFromDate(O)}H=N.year;T=N.month;Q=N.day}}if((G&&O!=null&&O!=""||G&&D!=null&&D.length>1)||I){if(H==""){H=B.getFullYear()}if(T==""){T=B.getMonth()+1}if(Q==""){Q=B.getDate()}J.value=FormattingDate(Q,T,H,strDateShortPattern);O=J.value;var R="Show"+F+"_short";var M=document.getElementById(R);if(M!=null){M.innerHTML=FormattingDate(Q,T,H,strDateShortPattern)}var S="Show"+F+"_long";var A=document.getElementById(S);if(A!=null){A.innerHTML=FormattingDate(Q,T,H,strDateLongPattern)}}if(L){var P;if(I||(O!=null&&O!="")){if(H==""){H=B.getFullYear()}if(T==""){T=B.getMonth()+1}if(Q==""){Q=B.getDate()}P=FormattingDate(Q,T,H,strDateLongPattern)}else{if(arrFieldsInformation[F]!=null&&arrFieldsInformation[F]["readOnly"]=="true"){P=""}else{P=strDateShortPattern}}var K="Show"+F+"_long";var E=null;if(document.all){E=document.all[K]}else{if(!document.all&&document.getElementById){E=document.getElementById(K)}}if(E!=null){E.innerHTML=P}}}function validationAndConvertionTimeInput(Q,C,m,p,f,B){var c=false;if(p=="true"){c=true}else{c=false}var h=Q.value;h=trim(h);var I=new Date();var O=I.getHours();var D=I.getMinutes();var a=h.match(/\w+/g);var A=I.getSeconds();var M=parseInt(A);if(M>=0&&M<10){A="0"+A}var J="AM";var P="PM";if(arrTimeAmPmSigns!=null){if(arrTimeAmPmSigns[0]!=null&&arrTimeAmPmSigns[0]!=""){J=arrTimeAmPmSigns[0]}if(arrTimeAmPmSigns[1]!=null&&arrTimeAmPmSigns[1]!=""){P=arrTimeAmPmSigns[1]}}var t="";if(m!=null){if(m[0]!=null&&m[0]!=""){var l=0;O=m[0];l=parseInt(O);t=((l>=0)&&(l<12))?J:P}if(m[1]!=null&&m[1]!=""){D=m[1];D=D.substring(0,2);var F=m[1].length;if(F>2){var H=m[1].substring(F-2,F);if(H==J||H==P){t=H}}}if(m[2]!=null&&m[2]!=""){A=m[2]}else{A="00"}}else{if(h!=null&&h!=""){if(a){A="00";if(a.length==1){var K="";var U="";var Y=0;for(var r=0;r<h.length;r++){var X=h.charAt(r);if(isInteger(X)){K=K+X}else{U=U+X}}if((U!="")||(U==h)){t=U}if(K!=""){if(K.length==4){O=K.substring(0,2);D=K.substring(2)}else{if(K.length==3){O=K.substring(0,1);D=K.substring(1)}else{if(K.length<=2){O=K;D=0}}}}}else{if(a.length==2){if(isInteger(a[0])){if(a[0].length==4){O=a[0].substring(0,2);D=a[0].substring(2);if(!isInteger(a[1])){t=a[1]}}else{if(a[0].length==3){O=a[0].substring(0,1);D=a[0].substring(1);if(!isInteger(a[1])){t=a[1];D=0}}else{if(a[0].length<=2){O=a[0];if(isInteger(a[1])){D=a[1]}else{D=0;if(!isInteger(a[1].substring(0,1))){t=a[1]}else{if(!isInteger(a[1].substring(1,2))){D=a[1].substring(0,1);t=a[1].substring(1)}else{D=a[1].substring(0,2);t=a[1].substring(2)}}}}}}}}else{if(a.length==3){var W=0;for(var q=0;q<a.length;q++){if(!isInteger(a[q])){t=a[q];W=q}}if(W==2){if(isInteger(a[0])){O=a[0]}if(isInteger(a[1])){D=a[1]}}else{if(W==0){if(isInteger(a[1])){O=a[1]}if(isInteger(a[2])){D=a[2]}}else{if(isInteger(a[0])){O=a[0]}if(isInteger(a[2])){D=a[2]}}}}}}}O=parseInt(O,10);D=parseInt(D,10);if(D>=60){O=O+Math.floor(D/60);D=(D%60)}if(O%24==0){t=J}if(O%24>12){t=P}var k=t.toUpperCase();if(k==""){var u="Show"+C;var b=document.getElementById(u);if(b!=null){var S=b.innerHTML.match(/\w+/g);if(typeof S!="undefined"&&S!=null&&a[0]==S[0]&&a[1]==S[1]){t=S[2]}else{t=J}}else{t=J}}else{if(k=="A"||J.toUpperCase().match(k)){t=J}else{if(k=="P"||P.toUpperCase().match(k)){t=P}else{var s=I.format1();t=(s.indexOf("AM")!=-1)?J:P}}}if(isNaN(O)){O=I.getHours()}if(isNaN(D)){D=I.getMinutes()}}}var G=(O<12&&t==P)?(O+12):O;G=(G==12&&t==J)?0:G;var T="Stored"+Q.name;var N=null;if(document.all){N=document.all[T]}else{if(!document.all&&document.getElementById){N=document.getElementById(T)}}if(N!=null){if(B&&(h==null||h=="")&&m!=null&&m[0]!=null){Q.value=FormattingTime(O,D,"",timePattern)}var v=Q.value;if(v!=""){var g=N.value;if(!valueExists(g)){g=""}var w=FormattingTime(G,D,"","HH:MM");w=w+"."+A+".000";w=trim(w);g=trim(g);if(g!=""){if(g.substring(0,5)!=w){N.value=w}}else{N.value=w}}else{N.value=""}}if(B&&(c||(h!=null&&h!="")||((h==null||h=="")&&m!=null&&m[0]!=null))){Q.value=FormattingTime(O,D,"",timePattern);var e="Show"+C+"_long";var E=document.getElementById(e);if(E!=null){E.innerHTML=FormattingTime(O,D,t,timePattern)}else{var o="Show"+C;var V=document.getElementById(o);if(V!=null){V.innerHTML=FormattingTime(O,D,t,timePattern)}}}if(f){var Z;if(c||(h!=null&&h!="")||(B&&(h==null||h=="")&&m!=null&&m[0]!=null)){Z=FormattingTime(O,D,t,timePattern)}else{Z=timePattern}var R="Show"+C;var L=null;if(document.all){L=document.all[R]}else{if(!document.all&&document.getElementById){L=document.getElementById(R)}}if(L!=null){L.innerHTML=Z}}}function getDateWithISOFormat(B){var D=GetDateSeparator(strDateShortPattern);var A=new Array();var C=new Date();var F=C.getMonth()+1;var H=C.getDate();var G=C.getFullYear();if(B!=""){A=B.split(D);for(var E=0;E<A.length;E++){var I=arrDateShortPattern[E];if(I!=null){if(I.indexOf("Y")>=0){G=A[E]}else{if(I.indexOf("M")>=0){F=A[E]}else{if(I.indexOf("D")>=0){H=A[E]}}}}}H=parseInt(H,10);F=parseInt(F,10);G=parseInt(G,10);if(G<=999){G=2000+G}F=(F<10)?("0"+F):F;H=(H<10)?("0"+H):H;B=G+"-"+F+"-"+H}return B}function getTimeWith24Format(F){if(F!=""){var A,H;var G=new Array();var D=timePattern;D=D.toUpperCase();var B=D.indexOf("HH");F=trim(F);if(B>=0){return F}else{G=F.split(".");if(G[1]==null){G=F.split(":")}if(G[1]==null){G=F.split("-")}if(G[1]==null){G=F.split(" ")}if(G!=null&&G[0]!=null&&G[0]!=""){A=G[0]}if(G!=null&&G[1]!=null&&G[1]!=""){H=G[1]}var E="AM";var C="PM";if(arrTimeAmPmSigns!=null){if(arrTimeAmPmSigns[0]!=null&&arrTimeAmPmSigns[0]!=""){E=arrTimeAmPmSigns[0]}if(arrTimeAmPmSigns[1]!=null&&arrTimeAmPmSigns[1]!=""){C=arrTimeAmPmSigns[1]}}if(G!=null&&G[2]!=null&&G[2]!=""){if(G[2].indexOf(C)>=0&&parseInt(A,10)<12){A=parseInt(A,10)+12;A=A.toString()}}F=FormattingTime(A,H,"","HH:MM")}}return F}function isInteger(C){var A=/\d\d*$/;var B=true;if(C!=""){if(!A.test(C)){B=false}}return B}function bDateIsBefore(D,C){var B=new Date(D);var A=new Date(C);if(typeof arguments[2]!="undefined"&&arguments[2]){return(B<=A)}else{return(B<A)}}function compareLocalizedDates(I,H){var D=getDateArray(I);var F=D.year;var J=D.month;var B=D.day;I=J+"/"+B+"/"+F;var C=getDateArray(H);var E=C.year;var G=C.month;var A=C.day;H=G+"/"+A+"/"+E;if(typeof arguments[2]!="undefined"&&arguments[2]){return bDateIsBefore(I,H,true)}else{return bDateIsBefore(I,H)}}function compareISODates(B,A){return bDateIsBefore(B,A)}function getDateArray(H){var D=new Array();var A=new Date();var E=A.getMonth()+1;var G=A.getDate();var F=A.getFullYear();D.year=F;D.month=E;D.day=G;if(H!=null||H!=""){strDateSeparator=GetDateSeparator(strDateShortPattern);var B=new Array();B=H.split(strDateSeparator);if(B!=null&&B.length==3){for(var C=0;C<B.length;C++){var I=arrDateShortPattern[C];if(I.indexOf("y")>=0||I.indexOf("Y")>=0){D.year=B[C]}else{if(I.indexOf("m")>=0||I.indexOf("M")>=0){D.month=B[C]}else{D.day=B[C]}}}}}return D}function gettingYearMonthDayFromDate(P){var B=new Array();var L=P.match(/\w+/g);var E=new Date();var J=E.getMonth()+1;var O=E.getDate();var M=E.getFullYear();var G="";if(L){if(L.length==1){var D="";var A=0;for(var H=0;H<P.length;H++){var F=P.charAt(H);if(!isInteger(F)){D=D+F}}A=P.indexOf(D);if(D!=""&&A>=0){if(MonthNameToMonthNum(D)>0){J=MonthNameToMonthNum(D)}var I=P.substring(0,A)+P.substring(A+D.length);if(I!=""&&strDateShortPattern.indexOf("D")<strDateShortPattern.indexOf("Y")){if(isInteger(I.substring(0,2))){O=I.substring(0,2)}if(isInteger(I.substring(2,6))){M=I.substring(2,6)}}else{if(I!=""){if(isInteger(I.substring(0,4))){M=I.substring(0,4)}if(isInteger(I.substring(4,6))){O=I.substring(4,6)}}}}else{for(var H=0;H<arrDateShortPattern.length;H++){G=arrDateShortPattern[H].toUpperCase();if(G.indexOf("Y")>=0){if(isInteger(P.substring(H*2,H*2+4))){M=P.substring(H*2,H*2+4)}var I=P.substring(0,H*2)+P.substring(H*2+4);if(strDateShortPattern.indexOf("D")<strDateShortPattern.indexOf("M")){if(isInteger(I.substring(0,2))){O=I.substring(0,2)}if(isInteger(I.substring(2,4))){J=I.substring(2,4)}}else{if(isInteger(I.substring(0,2))){J=I.substring(0,2)}if(isInteger(I.substring(2,4))){O=I.substring(2,4)}}}}}}else{if(L.length==2){G=arrDateShortPattern[2].toUpperCase();var N="";if(G.indexOf("Y")>=0){if(isInteger(L[1])){M=L[1]}N=L[0]}else{if(isInteger(L[0])){M=L[0]}N=L[1]}var D="";var A=0;for(var H=0;H<N.length;H++){var F=N.charAt(H);if(!isInteger(F)){D=D+F}}A=N.indexOf(D);if(D!=""&&A>=0){if(MonthNameToMonthNum(D)>0){J=MonthNameToMonthNum(D)}var K=N.substring(0,A)+N.substring(A+D.length);K=K.substring(0,2);if(isInteger(K)){O=K}}else{if(strDateShortPattern.indexOf("D")<strDateShortPattern.indexOf("M")){if(isInteger(N.substring(0,2))){O=N.substring(0,2)}if(isInteger(N.substring(2,4))){J=N.substring(2,4)}}else{if(isInteger(N.substring(0,2))){J=N.substring(0,2)}if(isInteger(N.substring(2,4))){O=N.substring(2,4)}}}}else{for(var H=0;H<arrDateShortPattern.length;H++){G=arrDateShortPattern[H].toUpperCase();if(G.indexOf("M")>=0){if(isNaN(L[H])){if(MonthNameToMonthNum(L[H])>0){J=MonthNameToMonthNum(L[H])}}else{if(isInteger(L[H])){J=L[H]}}}else{if(G.indexOf("D")>=0){if(!isNaN(L[H])&&(isInteger(L[H]))){O=L[H]}}else{if(!isNaN(L[H])&&(isInteger(L[H]))){M=L[H]}}}}}}}O=parseInt(O,10);J=parseInt(J,10);M=parseInt(M,10);if(isNaN(O)){O=E.getDate()}if(isNaN(J)){J=E.getMonth()+1}if(isNaN(M)){M=E.getFullYear()}O=(O<=0)?(E.getDate()):(O);J=(J<=0)?(E.getMonth()+1):(J);M=(M<=0)?(E.getFullYear()):(M);if(M>9999){M=""+M;M=M.substring(0,4);M=parseInt(M,10)}var C=GetMonthMaxDays(J,M);O=(C<O)?(C):(O);B.year=M;B.month=J;B.day=O;return B}function gettingHourMinuteFromHHMMFormattedTime(C){var A=new Array();var B=new Array();B=C.split(":");A.HH=B[0];A.MM=B[1];return A}function isBeingISODateFormat(B){var C=false;var A=B.split("-");if(A[1]!=null){if(A[0].length==4){C=true}}return C}function getIsoFormatDate(B){var C=B.getMonth()+1;if(C<10){C="0"+C}var A=B.getDate();if(A<10){A="0"+A}return B.getFullYear()+"-"+C+"-"+A}function getCurrentDateInISOFormat(){return getIsoFormatDate(new Date())}function getCurrentTimeIn24HourFormat(){var D="";var C=new Date();var B=C.getHours();var A=C.getMinutes();D=FormattingTime(B,A,"","HH:MM");D=D+".00.000";return D}DateMath={HOUR:"H",DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,add:function(B,E,D){var G=new Date(B.getTime());switch(E){case this.MONTH:var F=B.getMonth()+D;var C=0;if(F<0){while(F<0){F+=12;C-=1}}else{if(F>11){while(F>11){F-=12;C+=1}}}G.setMonth(F);G.setFullYear(B.getFullYear()+C);break;case this.DAY:G.setDate(B.getDate()+D);break;case this.YEAR:G.setFullYear(B.getFullYear()+D);break;case this.WEEK:G.setDate(B.getDate()+(D*7));break;case this.HOUR:var A=B.getHours()+D;var H=Math.floor(A/24);if(H>0){G.setDate(B.getDate()+D);A=A-H*24}G.setHours(B.getHours()+D);break}return G},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return new Date(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(C,F){C=this.clearTime(C);var E=new Date(C.getTime()+(4*this.ONE_DAY_MS)-((C.getDay())*this.ONE_DAY_MS));var B=new Date(E.getFullYear(),0,1);var A=((E.getTime()-B.getTime())/this.ONE_DAY_MS)-1;var D=Math.ceil((A)/7);return D},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=new Date(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(0,0,0,0);return A}};var sNeutralDecimalSeparator=".";var sNeutralGroupingSeparator=",";var arrFieldsInformation=new Array();function setupArrFieldsInformation(B,A){arrFieldsInformation[B]=A}function validationUPPERALPHAString(A){var D=true;var C=A.value;if(typeof C!="undefined"&&C!=null&&C!=""){C=trim(C);if(C!=""&&unescape(encodeURIComponent(C))==C){var B=/[A-Z]+$/;if(!B.test(C)){D=false}}}return D}function validationUPPERALPHANUMString(A,C,D){if(!valueExists(C)){C=true}var G=true;var F=A.value;if(typeof F!="undefined"&&F!=null&&F!=""){F=trim(F);if(F!=""&&unescape(encodeURIComponent(F))==F){var B=/^[A-Z0-9]+$/;if(!B.test(F)){G=false}}if(!G&&C){var E=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_UPPERALPHANUM);E=String.format(E,D.title);View.alert(E)}}return G}function validationIntegerOrSmallint(A,C,D){if(!valueExists(C)){C=true}var G=true;var F=A.value;var H="";if(typeof F!="undefined"&&F!=null&&F!=""){F=trim(F);F=removeGroupingSeparator(F);var B=/^-?\d+$/;if(!B.test(F)){G=false}}else{}if(!G){if(C){var E=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_INTEGERORSMALLINT);E=String.format(E,D.title);View.alert(E);if(!mozillaFireFoxBrowser){setElementFocus(A)}}}return G}function validationNumeric(tempObj,decimal,showValidationMessage,defaultValue,fieldDef){if(!valueExists(showValidationMessage)){showValidationMessage=true}var bReturned=true;var value=tempObj.value;var warning_message_invalid_input="";if(typeof value!="undefined"&&value!=null&&value!=""){value=trim(value);if(value.charAt(0)==strDecimalSeparator){value="0"+value;tempObj.value=value}if(value.charAt(0)=="+"&&value.length>1){value=value.substring(1);tempObj.value=value}value=removeCurrencySign(value);value=removeGroupingSeparator(value);if(!isNumeric(value)){if(showValidationMessage){var message=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC);message=String.format(message,fieldDef.title);View.alert(message);if(!mozillaFireFoxBrowser){setElementFocus(tempObj)}}bReturned=false}else{var objRegExp="";if(parseInt(decimal+"")>=1){objRegExp="/(^-?\\d\\d*\\"+strDecimalSeparator+"\\d{1,"+decimal+"}$)|(^-?\\d\\d*$)|(^-?\\"+strDecimalSeparator+"\\r\\d\\d{1,"+decimal+"}$)/"}else{objRegExp="/(^-?\\d\\d*\\"+strDecimalSeparator+"\\d$)|(^-?\\d\\d*$)|(^-?\\"+strDecimalSeparator+"\\r\\d\\d$)/"}objRegExp=eval(objRegExp);value=removeGroupingSeparator(value);if(!objRegExp.test(value)){if(showValidationMessage){var message=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC_DECIMAL);message=String.format(message,fieldDef.title,decimal);View.alert(message);if(!mozillaFireFoxBrowser){setElementFocus(tempObj)}}bReturned=false}}}else{if(valueExistsNotEmpty(defaultValue)){tempObj.value=defaultValue}}return bReturned}function validationRequiredField(A,E){var C=A.value;C=trim(C);E=E.toUpperCase();var B=true;if(E=="TRUE"&&(C==null||C=="")){try{setElementFocus(A)}catch(D){setElementFocus(A.parentNode)}B=false}return B}function validationEmailAddress(A){}function removeCurrencySign(A){if(A.indexOf(strCurrencySign)>=0){A=A.replace(strCurrencySign,"");A=trim(A)}return A}function insertCurrencySign(A){A=strCurrencySign+A;return A}function removeGroupingSeparator(D,C){var A=D;var B=strGroupingSeparator;if(typeof C!="undefined"&&C===false){B=sNeutralGroupingSeparator}B=trim(B);if(B.length==0){A=A.replace(/\s+/g,"")}else{A=A.replace(new RegExp("\\"+B+"(?=[0-9])","g"),"");A=trim(A)}return A}function insertGroupingSeparator(H,D,A){if(H===undefined||H===null||H===""){return H}var B=H;H=""+H;var I=new RegExp("(-?[0-9]+)([0-9]{3})");var F=strGroupingSeparator;var G=strDecimalSeparator;var E=strDecimalSeparator;if(typeof D!="undefined"&&D===true){E=sNeutralDecimalSeparator}if(typeof A!="undefined"&&A===false){F=sNeutralGroupingSeparator;G=sNeutralDecimalSeparator}var C=H.indexOf(E);var K=H;var J="";if(C>0){K=H.substring(0,C);J=G+H.substring(C+1,H.length)}while(I.test(K)){K=K.replace(I,"$1"+F+"$2")}B=K+J;return B}function validationDataMaxSize(K,Q,L){if(!valueExists(L)){L=true}var T=Q.size;T=parseInt(T,10);var O=Q.format;var F=Q.type;var D=Q.decimal;if(typeof this.Ab!="undefined"&&Ab.view.View.version=="2.0"){D=Q.decimals}D=parseInt(D,10);var R=Q.afmType;var N=Q.readOnly;var V=F.toUpperCase();var G=O.toUpperCase();var A=true;var U=K.value;U=trim(U);var B=false;var W=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC_TOO_LARGE);var I=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC_TOO_SMALL);if(U!=""){if(T>0){if(V=="JAVA.LANG.INTEGER"){A=validationIntegerOrSmallint(K,false);if(A){if(U.charAt(0)=="-"){B=true;U=U.substring(1,U.length)}U=removeGroupingSeparator(U);var C="";for(var M=0;M<T;M++){C=C+"0"}C="1"+C;if(Number(C)>2147483647){C="2147483647"}C=insertGroupingSeparator(C);if((N!="true")&&(U.length>T)||(U>2147483647)){if(L){if(B){I=String.format(I,Q.title,C);View.alert(I)}else{W=String.format(W,Q.title,C);View.alert(W)}}if(!mozillaFireFoxBrowser){setElementFocus(K)}A=false}if(G!="NOSEPARATOR"){U=insertGroupingSeparator(U);var E="Show"+K.name+"_numeric";var S=document.getElementById(E);if(S!=null){S.innerHTML=insertGroupingSeparator(U)}}if(B){U="-"+U}}}else{if(V=="JAVA.LANG.DOUBLE"||V=="JAVA.LANG.FLOAT"){A=validationNumeric(K,D,false);if(A){if(U.charAt(0)=="-"){B=true;U=U.substring(1,U.length)}T=T+1;U=removeGroupingSeparator(U);U=removeCurrencySign(U);var H=U.indexOf(strDecimalSeparator);var J="";for(var M=0;M<(T-1-D);M++){J=J+"0"}J="1"+J;J=insertGroupingSeparator(J);if(H>0){var P=U.substring(0,H);if((N!="true")&&(P.length>(T-1-D))){if(L){if(B){I=String.format(I,Q.title,J);View.alert(I)}else{W=String.format(W,Q.title,J);View.alert(W)}}if(!mozillaFireFoxBrowser){setElementFocus(K)}A=false}}else{if((N!="true")&&(U.length>(T-1-D))){if(L){if(B){I=String.format(I,Q.title,J);View.alert(I)}else{W=String.format(W,Q.title,J);View.alert(W)}}if(!mozillaFireFoxBrowser){setElementFocus(K)}A=false}}if(B){U="-"+U}if(G!="NOSEPARATOR"){U=insertGroupingSeparator(U);var E="Show"+K.name+"_numeric";var S=document.getElementById(E);if(S!=null){S.innerHTML=insertGroupingSeparator(U)}}}}else{if(V=="JAVA.LANG.STRING"){if(U.length>T){U=U.substring(0,T);A=false}}}}K.value=U}}return A}function doMaxAndMinValidation(D,B,A){if(!valueExistsNotEmpty(D)||!valueExists(B)){return true}if(!valueExists(A)){A=true}D=removeGroupingSeparator(D);D=removeCurrencySign(D);D=D.replace(strDecimalSeparator,".");if(valueExistsNotEmpty(B.maxValue)){if(D>B.maxValue){if(A){var C=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC_MAX);C=String.format(C,B.title,B.formatValue(B.maxValue+"",true));View.alert(C)}return false}}if(valueExistsNotEmpty(B.minValue)){if(D<B.minValue){if(A){var C=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_NUMERIC_MIN);C=String.format(C,B.title,B.formatValue(B.minValue+"",true));View.alert(C)}return false}}return true}function convertFieldValueIntoValidFormat(A,C,B){B=trim(B);if(B!=null&&B!=""){if(A=="JAVA.LANG.INTEGER"||A=="JAVA.LANG.DOUBLE"||A=="JAVA.LANG.FLOAT"){B=removeGroupingSeparator(B);B=replaceLocalizedDecimalSeparatorByDot(B)}if(A=="JAVA.SQL.DATE"){B=getDateWithISOFormat(B)}if(A=="JAVA.SQL.TIME"){B=getTimeWith24Format(B)}}return B}function replaceLocalizedDecimalSeparatorByDot(A){if(A===undefined||A===null||A===""){return A}A=""+A;A=A.replace(new RegExp("\\"+strDecimalSeparator+"(?=[0-9])","g"),sNeutralDecimalSeparator);return A}function localizeDecimalSeparator(A){if(A===undefined||A===null||A===""){return A}A=""+A;return A.replace(sNeutralDecimalSeparator,strDecimalSeparator)}function isNumeric(B){if(B.charAt(0)=="-"){B=B.substring(1,B.length)}var D="0123456789"+strDecimalSeparator+""+strGroupingSeparator;var C=true;var A;var E=-1;E=B.indexOf(strDecimalSeparator);for(i=0;i<B.length&&C==true;i++){A=B.charAt(i);if(D.indexOf(A)==-1){C=false}}if(E==0){C=false}return C}function checkMemoMaxSize(E,C){C=C+"";C=parseInt(C,10);var D=E.value;D=replaceNewlinesTextarea(D);var A=D.length;if(A>C){var B=View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_MEMO_TOO_LARGE);B=B.replace("{0}",C);View.alert(B);E.value=D.substring(0,C)}}function setElementFocus(A){try{A.focus()}catch(B){}}function replaceNewlinesTextarea(A){if(A.indexOf("\r\n")!=-1){}else{if(A.indexOf("\r")!=-1){A=A.replace(/\r/g,"\r\n")}else{if(A.indexOf("\n")!=-1){A=A.replace(/\n/g,"\r\n")}else{}}}return A}Calendar=function(){};Calendar.MMID="MM";Calendar.YYYYID="YYYY";Calendar.CalendarAreaID="Calendar";Calendar.DateButton="But";Calendar.abSchemaSystemGraphicsFolder="/schema/ab-system/graphics";Calendar.mode="controller";Calendar.containerName="AFM_CALENDAR";Calendar.width=260;Calendar.height=250;Calendar.anchorObject=null;Calendar.calendar_available=false;Calendar.MESSAGE_CANT_BE_FOUND="cannot be found!";Calendar.MESSAGE_TODAY="Today";Calendar.MESSAGE_CLOSE="Close";Calendar.MESSAGE_SUN="Sun";Calendar.MESSAGE_MON="Mon";Calendar.MESSAGE_TUE="Tue";Calendar.MESSAGE_WED="Wed";Calendar.MESSAGE_THUR="Thur";Calendar.MESSAGE_FRI="Fri";Calendar.MESSAGE_SAT="Sat";Calendar.getDialog=function(C,B,A){this.mode="dialog";if(typeof B!="undefined"){this.width=B}if(typeof A!="undefined"){this.height=A}this.requireCalendar(C);if(typeof objSelectedValueInput!="undefined"){this.setCalenderPosition(objSelectedValueInput);this.anchorObject=objSelectedValueInput}this.setCalendarVisibility(true)};Calendar.getController=function(B,D,C,A){this.getControllerForEvent(null,B,D,C,A)};Calendar.getControllerForEvent=function(E,B,F,D,A){this.mode="controller";if(!this.calendar_available){if(typeof D!="undefined"){this.width=D}else{this.width=230}if(typeof A!="undefined"){this.height=A}else{this.height=200}this.requireCalendar(F);this.calendar_available=true}this.anchorObject=$(B,false);if(this.anchorObject.disabled){return }if(this.anchorObject==null){alert(B+" "+Ab.view.View.getLocalizedString(Calendar.MESSAGE_CANT_BE_FOUND));return }if(valueExists(E)){this.setCalenderPositionForEvent(E,this.anchorObject)}else{this.setCalenderPosition(this.anchorObject)}if(valueExistsNotEmpty(this.anchorObject.value)){var C=getDateWithISOFormat(this.anchorObject.value);C=C.split("-");C[1]=(C[1]+"").replace(/^0/,"");C[2]=(C[2]+"").replace(/^0/,"");Calendar.formatCalendar(C[0],C[1],C[2],true)}this.setCalendarVisibility(true)};Calendar.requireCalendar=function(D){if(typeof D!="undefined"&&D!=""){this.abSchemaSystemGraphicsFolder=D}var B=new Date();var C=B.getFullYear();var E=B.getMonth()+1;var A=B.getDate();this.writeCalendar(E);this.formatCalendar(C,E,A)};Calendar.releaseCalendar=function(){var B=new Date();var C=B.getFullYear();var D=B.getMonth()+1;var A=B.getDate();this.formatCalendar(C,D,A);this.setCalendarVisibility(false)};Calendar.SetDate=function(D){var E=$(D);var A=E.innerHTML;A=parseInt(A,10);var C=$(this.MMID).value;C=parseInt(C,10);var B=$(this.YYYYID).innerHTML;B=parseInt(B,10);this.fillDate2Anchor(A,C,B)};Calendar.fillDate2Anchor=function(A,C,B){this.setupDateInputFieldValue(A,C,B);if(this.mode=="controller"){this.releaseCalendar()}else{self.close()}};Calendar.formatCalendar=function(F,N,J,B){N=N+"";N=parseInt(N,10);var R=$(this.MMID,false);if(R!=null){for(var K=0;K<R.length;K++){if(R[K]!=null&&R[K].value==N){R[K].selected=1;break}}}var H=$(this.YYYYID,false);if(H!=null){H.innerHTML=F}var I=31;if(N==4||N==6||N==9||N==11){I=30}else{if(N==2){I=28;if((F%4==0&&F%100!=0)||(F%400==0)){I=29}}}var L=new Date(F,N-1,1);var O=L.getDay();var P=1;var M;var Q=new Date();var G=Q.getFullYear();var A=Q.getMonth()+1;var E=Q.getDate();if(typeof J=="undefined"){J=E}if(valueExists(B)&&B){G=F;A=N}var C=41;if(intFirstDayOfWeek==2){C=42;if(O==0){O=7}}for(var K=0;K<=C;K++){var D=$(this.DateButton+(K+1),false);if(intFirstDayOfWeek==2){D=$(this.DateButton+(K),false)}if(D!=null){if((K<O)||(P>I)){if(document.all||(!document.all&&document.getElementById)){if(D.style!=null){D.style.visibility="hidden"}}}else{M=P;D.innerHTML=M;if(D.style!=null){D.style.visibility="visible";if(G==F&&A==N&&M==J){D.style.backgroundColor="#FFCC66";D.style.borderStyle="solid";D.style.borderColor="#FF9900";D.style.borderWidth="thin"}else{D.style.backgroundColor="";D.style.borderStyle="";D.style.borderColor="";D.style.borderWidth=""}P=P+1}}}}};Calendar.getMM_YYYY=function(E){var B=$(this.YYYYID,false);var D=B.innerHTML;var A=$(this.MMID,false);var F=A.value;if(E){F=this.getPrevMonth(F);if(F<1){F=12;D=this.getPrevYear(D)}}else{F=this.getNextMonth(F);if(F>12){F=1;D=this.getNextYear(D)}}for(var C=0;C<A.length;C++){if(A[C].value==F){A[C].selected=1;break}}B.innerHTML=D;this.formatCalendar(D,F)};Calendar.getPrevYear=function(A){A=A+"";A=parseInt(A,10);if(A>1900){A=A-1}else{A=9999}return A};Calendar.getNextYear=function(A){A=A+"";A=parseInt(A,10);if(A<9999){A=A+1}else{A=1900}return A};Calendar.getPrevMonth=function(A){A=A+"";A=parseInt(A,10);A=A-1;return A};Calendar.getNextMonth=function(A){A=A+"";A=parseInt(A,10);A=A+1;return A};Calendar.setCalendarVisibility=function(B){var A=$(this.containerName,false);if(A!=null){var D=$("AFM_CALENDAR_IFRAME");if(B){A.style.display="";if(D!=null){A.style.display="block";D.style.width=A.offsetWidth;D.style.height=A.offsetHeight;D.style.top=A.style.top;D.style.left=A.style.left;D.style.zIndex=A.style.zIndex-1;D.style.display="block"}var C=$("But_today");if(C!=null){if(typeof C.setAttribute=="function"){C.setAttribute("autocomplete","off")}C.focus()}if(this.mode=="dialog"){document.body.style.overflowY="hidden";document.body.style.overflowX="hidden"}}else{if(A.style!=null){A.style.display="none";if(D!=null){D.style.display="none"}}}}};Calendar.writeCalendar=function(B){var A=$(this.containerName,false);if(A==null){alert(this.containerName+" "+Ab.view.View.getLocalizedString(Calendar.MESSAGE_CANT_BE_FOUND));return }var C='<table CELLSPACING="0" valign="top" width="100%">';C=C+"<tbody><tr><td>"+this.getCalendarTop(B)+"</td></tr>";C=C+"<tr><td>"+this.getCalendarTable()+"</td></tr>";C=C+"</tbody></table>";A.innerHTML=C};Calendar.getCalendarTop=function(A){var B='<table id="AFMCALENDARTOP" name="AFMCALENDARTOP" CELLSPACING="0"   class="calendarTop" valign="top" width="100%">';B=B+'<tr nowrap="1"><td style="padding-top: 5px; padding-left: 4px"><input  id="AFMCALENDAR_but_up" name="AFMCALENDAR_but_year_up" onclick="Calendar.getMM_YYYY(true);return false;" WIDTH="18" HEIGHT="18" HSPACE="1" type="image" src="'+this.abSchemaSystemGraphicsFolder+'/but_prev.gif"/>';B=B+"</td>";B=B+'<td class="calendarmmyyyyA" style="padding-top: 3px">';B=B+this.getMonthNames(A);B=B+"</td><td></td>";B=B+'<td class="calendarmmyyyyA" style="padding-top: 2px">';B=B+'<span id="'+this.YYYYID+'">2003</span>';B=B+"</td><td>";B=B+'<INPUT  id="AFMCALENDAR_but_year_up" name="AFMCALENDAR_but_year_up" TYPE="image" SRC="'+this.abSchemaSystemGraphicsFolder+'/but_yeard.gif" WIDTH="18" HEIGHT="9" onClick=\'var y=$("'+this.YYYYID+'").innerHTML;y=parseInt(y,10)+1;$("'+this.YYYYID+'", false).innerHTML=y;var m=$("'+this.MMID+"\", false).value;m=parseInt(m,10);Calendar.formatCalendar(y,m);return false;'/>";B=B+'<hr style="height:0px; visibility:hidden; margin-top: -1px; margin-bottom:-10px;">';B=B+'<INPUT  id="AFMCALENDAR_but_year_down" name="AFMCALENDAR_but_year_down" TYPE="image" SRC="'+this.abSchemaSystemGraphicsFolder+'/but_yearu.gif" WIDTH="18" HEIGHT="9" onClick=\'var y=$("'+this.YYYYID+'").innerHTML;y=parseInt(y,10)-1;$("'+this.YYYYID+'", false).innerHTML=y;var m=$("'+this.MMID+"\", false).value;m=parseInt(m,10);Calendar.formatCalendar(y,m);return false;'/>";B=B+"</td>";B=B+'<td style="padding-top: 5px">';B=B+'<input id="AFMCALENDAR_but_down" name="AFMCALENDAR_but_down" onclick="Calendar.getMM_YYYY(false);return false;" WIDTH="18" HEIGHT="18" HSPACE="1" type="image" src="'+this.abSchemaSystemGraphicsFolder+'/but_next.gif"/>';B=B+"</td></tr>";B=B+"</table>";return B};Calendar.getMonthNames=function(B){var C="";for(var A=0;A<arrMonthNames.length;A++){if(arrMonthNames[A]!=""){if(B==(A+1)){C=C+'<option selected="1" value="'+(A+1)+'">'+arrMonthNames[A]+"</option>"}else{C=C+'<option  value="'+(A+1)+'">'+arrMonthNames[A]+"</option>"}}}C='<select name="'+this.MMID+'" id="'+this.MMID+'" style="visibility:visible" onchange="var y=$(\''+this.YYYYID+"').innerHTML;y=parseInt(y,10);Calendar.formatCalendar(y,this.value);return false;\">"+C+"</select>";return C};Calendar.getCalendarTable=function(){var C=Ab.view.View.getLocalizedString(Calendar.MESSAGE_SUN);var M=Ab.view.View.getLocalizedString(Calendar.MESSAGE_MON);var Q=Ab.view.View.getLocalizedString(Calendar.MESSAGE_TUE);var B=Ab.view.View.getLocalizedString(Calendar.MESSAGE_WED);var E=Ab.view.View.getLocalizedString(Calendar.MESSAGE_THUR);var U=Ab.view.View.getLocalizedString(Calendar.MESSAGE_FRI);var D=Ab.view.View.getLocalizedString(Calendar.MESSAGE_SAT);var J=["sun","mon","tue","wed","thur","fri","sat"];var F=[C,M,Q,B,E,U,D];var G=0;if(intFirstDayOfWeek==2){F=[M,Q,B,E,U,D,C];J=["mon","tue","wed","thur","fri","sat","sun"]}var T=new Date();var H=T.getFullYear();var S=T.getMonth()+1;var R=T.getDate();var I='<table  id="AFMCALENDARAREA" name="AFMCALENDARAREA" class="calendarTable" BORDER="0" CELLPADDING="2" CELLSPACING="0" width="100%">';I=I+'<tr class="calendarTableDays" ALIGN="center">';for(var P=0;P<J.length;P++){var O=$(J[P],false);if(O==null){O=F[P]}else{O=O.innerHTML}I=I+"<td>"+O+"</td>"}I=I+"</tr>";for(var P=0;P<6;P++){I=I+'<tr ALIGN="center">';for(var L=0;L<7;L++){G+=1;I=I+'<td class="calendar"><A  id="But'+G+'" href="#" onClick=\'Calendar.SetDate("But'+G+"\"); return false;'>"+G+"</A></td>"}I=I+"</tr>"}I=I+'<tr  ALIGN="center"><td colspan="7"  ALIGN="center">';var A=Ab.view.View.getLocalizedString(Calendar.MESSAGE_TODAY);I=I+'<input id="But_today" name="But_today" type="button" class="perRowButton" value="'+A+'" title="'+A+'" onclick="Calendar.fillDate2Anchor('+R+","+S+","+H+');return false;"/>';var K=Ab.view.View.getLocalizedString(Calendar.MESSAGE_CLOSE);var N="";if(this.mode=="controller"){N="Calendar.releaseCalendar();"}else{N="self.close();"}I=I+'<input id="But_close" name="But_close" type="button" class="perRowButton" value="'+K+'" title="'+K+'" onclick="'+N+'"/>';I=I+"</td></tr>";I=I+"</table>";return I};Calendar.setCalenderPosition=function(B){if(typeof B!="undefined"&&B!=null&&this.mode=="dialog"){var A=this.getAnchorPosition(opener.window,B);window.resizeTo(this.width,this.height);window.moveTo(A.x,A.y)}else{if(typeof B!="undefined"&&B!=null&&this.mode=="controller"){var A=this.getAnchorPosition(window,B);var C=$(this.containerName,false);C.style.left=A.x+"px";C.style.top=A.y+"px";C.style.width=this.width+"px";C.style.height=this.height+"px"}}};Calendar.setCalenderPositionForEvent=function(F,B){var D=$(this.containerName,false);var E=D.parentNode.offsetHeight;var C=D.parentNode.offsetWidth;var A=this.getAnchorPosition(window,B);A.y=F.clientY+B.offsetHeight/2;if((A.y+this.height)>E){A.y=F.clientY-(this.height+B.offsetHeight/2)}if((A.x+this.width)>C){A.x=F.clientX-(this.width)}D.style.top=A.y+"px";D.style.left=A.x+"px";D.style.width=this.width+"px";D.style.height=this.height+"px"};Calendar.getAnchorPosition=function(E,D){var C=new Object();C.x=0;C.y=0;try{targetElement=D;if(targetElement.x&&targetElement.y){C.x=targetElement.x;C.y=targetElement.y}else{if(targetElement.offsetParent){C.x+=targetElement.offsetLeft;C.y+=targetElement.offsetTop;while(targetElement=targetElement.offsetParent){C.x+=targetElement.offsetLeft;C.y+=targetElement.offsetTop}}}var A=windowY=0;if(window.innerHeight){A=E.outerWidth-E.innerWidth;windowY=E.innerHeight}else{A=E.screenLeft;windowY=E.screenTop}if(this.mode=="dialog"&&screen&&screen.availHeight&&(screen.availHeight-windowY<this.height+D.offsetHeight)){C.y-=this.height}else{C.y+=D.offsetHeight;C.y+=2}if(this.mode=="dialog"){C.y+=windowY;C.x+=A;C.x-=140}else{C.x-=80}if(C.x<0){C.x=0}return C}catch(B){alert(B.msg)}};Calendar.setupDateInputFieldValue=function(B,D,C){if(this.anchorObject!=null){var A=FormattingDate(B,D,C,strDateShortPattern);if(typeof afm_form_values_changed!="undefined"&&this.anchorObject.value!=A){if(afm_form_values_changed!=null){afm_form_values_changed=true}}this.anchorObject.value=A;if(this.anchorObject.onchange){this.anchorObject.onchange()}if(typeof this.anchorObject.setAttribute=="function"){this.anchorObject.setAttribute("autocomplete","off")}this.anchorObject.focus();this.anchorObject.blur();this.anchorObject.focus()}};Calendar.handeCalendarController_mouse=function(D){if(Calendar.mode=="controller"){var C=true;var B=null;if(window.event){B=window.event.srcElement}else{B=D.target}if(B!=null){while((B.parentElement&&B.parentElement!=null)||(B.parentNode&&B.parentNode!=null)){if(B.id!=null&&(B.id=="AFMCALENDARAREA"||B.id=="AFMCALENDARTOP")){C=false;break}if(B.parentElement){B=B.parentElement}else{B=B.parentNode}}if(C){C=!(B.id!=null&&(B.id.indexOf("AFMCALENDAR")>=0))}}if(C){var A=$(Calendar.containerName,false);if(typeof A!="undefined"&&A!=null){Calendar.releaseCalendar()}}}};Calendar.handeCalendarController_key=function(C){if(Calendar.mode=="controller"){var A=27;var B;if(window.event){B=window.event.keyCode}else{B=C.which}if(B==A){Calendar.releaseCalendar()}}};Calendar.disableInputEnterKeyEvent=function(E){var A=13;var C;var B;var D;if(window.event){B=window.event.srcElement.name;D=window.event.srcElement.type;C=window.event.keyCode}else{C=E.which;B=E.target.name;D=E.target.type}if(D!="textarea"&&C==A&&B!="But_today"){return false}else{return true}};document.onmousedown=Calendar.handeCalendarController_mouse;document.onkeyup=Calendar.handeCalendarController_key;document.onkeypress=Calendar.disableInputEnterKeyEvent;var abSchemaSystemGraphicsFolder="";var strIMGDirectory="";var previouSelectedNodeImgID="";var strPreviousSelectedIcon="ab-icon-tree-deselected.gif";var strBeingSelectedIcon="ab-icon-tree-exp.gif";var strNotBeingSelectedIcon="ab-icon-task-dflt.gif";var strBSelectCheckBoxName="bSelect";var arrSelectionActionButtonNames=new Array();function CheckSelectionAfmReportForm(D){var A=false;var C=D.elements[strBSelectCheckBoxName];if(C!=null){if(C.length!=null){for(var B=0;B<C.length;B++){if(C[B].checked){A=true;break}}}else{if(C.checked){A=true}}}return A}function insertingRecodDataString(B,D){var C=D;var H=document.forms[B];var F="";setSerializedInsertingDataVariables(D);var G=CheckSelectionAfmReportForm(H);if(G&&strSerializedInsertingDataFirstPart!=""&&strSerializedInsertingDataRestPart!=""){var E=H.elements[strBSelectCheckBoxName];if(E!=null){for(var A=0;A<E.length;A++){if(E[A].checked){F=F+strSerializedStartTag+"record"+E[A].value+" /"+strSerializedCloseTag}}}C=strSerializedInsertingDataFirstPart+F+strSerializedInsertingDataRestPart}return C}function sendingRequestToServer(B,D,E,A){var C=D;if(A){C=insertingRecodDataString(B,D)}sendingDataFromHiddenForm("",C,E,"",false,"");onLoadTableRefreshChildren(B,E)}function EnableSelectionActionButtons(D){var G=arrSelectionActionButtonNames[D];if(G!=null){var F=document.forms[D];var B=CheckSelectionAfmReportForm(F);for(var C=0;C<G.length;C++){var E=G[C];var A=F.elements[E];if(A!=null){if(B){A.disabled=0}else{A.disabled=1}}}}}function printOutView(D,A){var B=document.getElementById(D);var C=document.getElementById(A);if(B!=null&&C!=null){if(document.all||(!document.all&&document.getElementById)){B.style.visibility="hidden";C.style.visibility="hidden"}}self.print();if(B!=null&&C!=null){if(document.all||(!document.all&&document.getElementById)){B.style.visibility="visible";C.style.visibility="visible"}}return false}function ChangeItToActiveItem(B,F,G,E){strIMGDirectory=abSchemaSystemGraphicsFolder+"/";sendingDataFromHiddenForm(F,G,E,"",false,"");if(previouSelectedNodeImgID!=""){var D=document.getElementById(previouSelectedNodeImgID);if(D!=null){D.src=strIMGDirectory+strPreviousSelectedIcon}}if(B!=""){var A="IMG_"+B;previouSelectedNodeImgID=A;var C=document.getElementById(A);if(C!=null){C.src=strIMGDirectory+strBeingSelectedIcon}}}function getRowPKs(F,A){var B="";var C=A;if(typeof arguments[0]=="undefined"){C=document.forms[1].name}var E=document.forms[C];var D=E.elements[strBSelectCheckBoxName];if(D.length!=null){B=D[F].value}else{B=D.value}return B}function getRowsPKs(B){var C=B;if(typeof arguments[0]=="undefined"){C=document.forms[1].name}var E="";var G=document.forms[C];var D=G.elements[strBSelectCheckBoxName];if(D!=null){if(D.length!=null){for(var A=0;A<D.length;A++){if(D[A].checked){var F=D[A].value;F=generateRecordXML(F);if(F!=""){E=E+F}}}}else{if(D.checked){var F=D.value;F=generateRecordXML(F);if(F!=""){E=E+F}}}}if(E!=""){E="<userInputRecordsFlag>"+E+"</userInputRecordsFlag>"}return E}function generateRecordXML(A){A=trim(A);if(A!=""){A=convert2validXMLValue(A);A=A.replace(/AFM_FLAG::QUOTE/g,'"');A=A.replace(/AFM_FLAG::GROUP/g,"");A="<record "+A+"><keys "+A+"/></record>"}return A}function getSQLRestrictionMultiSelection(M){var B=M;if(typeof arguments[0]=="undefined"){B=document.forms[1].name}var C="";var G=document.forms[B];var J=G.elements[strBSelectCheckBoxName];if(J!=null){if(J.length!=null){for(var E=0;E<J.length;E++){if(J[E].checked){var F=J[E].value;F=trim(F);if(F!=""){F=convert2validXMLValue(F);F=F.replace(/AFM_FLAG::QUOTE/g,"'");var L=F.split("AFM_FLAG::GROUP");var I="";for(var D=0;D<L.length;D++){var H=L[D];if(H!=""){var A=H.split("=")[0];A=trim(A);var K=H.split("=")[1];K=trim(K);if(I==""){I="("+A+"="+K}else{I=I+" AND "+A+"="+K}}}if(I!=""){I=I+") "}if(C==""){C=C+I}else{C=C+" OR "+I}}}}}else{if(J.checked){var F=J.value;F=trim(F);if(F!=""){F=convert2validXMLValue(F);F=F.replace(/AFM_FLAG::QUOTE/g,"'");var L=F.split("AFM_FLAG::GROUP");var I="";for(var D=0;D<L.length;D++){var H=L[D];if(H!=""){var A=H.split("=")[0];A=trim(A);var K=H.split("=")[1];K=trim(K);if(I==""){I="("+A+"="+K}else{I=I+" AND "+A+"="+K}}}if(I!=""){I=I+") "}if(C==""){C=C+I}else{C=C+" OR "+I}}}}}if(C!=""){C='<userInputRecordsFlag><restrictions><restriction type="sql" sql="'+C+'"/></restrictions></userInputRecordsFlag>'}return C}function getParsedRestrictionFromRowPrimaryKeys(D,C,A){var B="";if(typeof (D)=="string"&&D.indexOf("AFM_FLAG::QUOTE")>=0){B=getClausesFromRowKeys(D,C,A)}else{if(typeof (D)=="string"&&D.indexOf("<record")>=0){B=getClausesFromPrimaryKeys(D,C,A)}else{B=getClausesFromPrimaryKeyObject(D,C,A)}}if(B!=""){B='<userInputRecordsFlag><restrictions><restriction type="parsed">'+B+"</restriction></restrictions></userInputRecordsFlag>"}return B}function getClausesFromRowKeys(D,J,I){var B="";D=trim(D);if(D!=""){D=convert2validXMLValue(D);D=D.replace(/AFM_FLAG::QUOTE/g,'"');var H=D.split("AFM_FLAG::GROUP");for(var C=0;C<H.length;C++){var E=H[C];if(E!=""){var A=E.split("=")[0];A=trim(A);var K=A.split(".")[0];var F=A.split(".")[1];if(typeof J!="undefined"&&J!=""){F=J}if(typeof I!="undefined"&&I!=""){K=I}var G=E.split("=")[1];G=trim(G);G=convert2validXMLValue(G);B=B+'<clause relop="AND" op="=" value='+G+'><field name="'+F+'" table="'+K+'"/></clause>'}}}return B}function getParsedRestrictionFromRowKeys(D,C,A){var B=getClausesFromRowKeys(D,C,A);if(B!=""){B='<userInputRecordsFlag><restrictions><restriction type="parsed">'+B+"</restriction></restrictions></userInputRecordsFlag>"}return B}function getClausesFromPrimaryKeys(E,L,K){var H="";var B="AFM_FLAG::GROUP";E=trim(E);if(E!=""){E=convert2validXMLValue(E);var D=E.indexOf("keys");if(D>0){E=E.substring(D+4)}D=E.indexOf("/&gt;&lt;/record&gt;");if(D>0){E=E.substring(0,D)}while(E.indexOf("&apos;")>0){E=E.replace("&apos;",'"')}var J=E.split(B);for(var C=0;C<J.length;C++){var F=J[C];if(F!=""){var A=F.split("=")[0];A=trim(A);var M=A.split(".")[0];var G=A.split(".")[1];if(typeof L!="undefined"&&L!=""){G=L}if(typeof K!="undefined"&&K!=""){M=K}var I=F.split("=")[1];I=trim(I);I=convert2validXMLValue(I);H=H+'<clause relop="AND" op="=" value='+I+'><field name="'+G+'" table="'+M+'"/></clause>'}}}return H}function getParsedRestrictionFromPrimaryKeys(D,C,A){var B=getClausesFromPrimaryKeys(D,C,A);if(B!=""){B='<userInputRecordsFlag><restrictions><restriction type="parsed">'+B+"</restriction></restrictions></userInputRecordsFlag>"}return B}function getClausesFromPrimaryKeyObject(H,G,A){var F="";if(H.constructor==Array){for(var B in H){F=F+getClausesFromPrimaryKeyObject(H[B],G,A)}}else{for(var B in H){var D=H[B];B=trim(B);var C=B.split(".")[0];var E=B.split(".")[1];if(typeof G!="undefined"&&G!=""){E=G}if(typeof A!="undefined"&&A!=""){C=A}D=trim(D);D=convert2validXMLValue(D);F=F+'<clause relop="AND" op="=" value="'+D+'"><field name="'+E+'" table="'+C+'"/></clause>'}}return F}function getRestrictionObjectFromRowKeys(G){var C=new Array();G=trim(G);if(G!=""){G=convert2validXMLValue(G);G=G.replace(/AFM_FLAG::QUOTE/g,"");var E=G.split("AFM_FLAG::GROUP");for(var B=0,F;F=E[B];B++){if(F!=""){var A=trim(F.split("=")[0]);var D=trim(F.split("=")[1]);C[A]=D}}}return new Ab.view.Restriction(C)}function sendSelectedRequest2Server(D,A,B,E){var C="";if(E==null){C=getSQLRestrictionMultiSelection(B)}else{C=getParsedRestrictionFromRowKeys(E)}if(C!=""&&A!=""){sendingAfmActionRequestWithClientDataXMLString2Server(D,A,C)}}function sendAction(B,A,C){sendingAfmActionRequestWithClientDataXMLString2Server(C,B,A)}function sendActionWithRestrictionForRow(B,D,C){var A=getParsedRestrictionFromRowKeys(D);sendAction(B,A,C)}function sendActionWithRestrictionForSelectedRows(C,B,D){var A=getSQLRestrictionMultiSelection(B);sendAction(C,A,D)}function getRecordForRow(A){return generateRecordXML(A)}function getRecordsForSelectedRows(D){var B="<userInputRecordsFlag><records>";var G=getForm(D);var E=G.elements[strBSelectCheckBoxName];if(E!=null){if(E.length!=null){for(var C=0;C<E.length;C++){if(E[C].checked){var F=E[C].value;var A=getRecordForRow(F);B=B+A}}}else{if(E.checked){var F=E.value;var A=getRecordForRow(F);B=B+A}}}B=B+"</records></userInputRecordsFlag>";return B}function getRecordsForAllRows(E){var B="<userInputRecordsFlag><records>";var F=$(E);var C=F.childNodes[0];for(var D=1;D<C.childNodes.length;D++){var G=C.childNodes[D];var A=getRecordForRow(G.id);B=B+A}B=B+"</records></userInputRecordsFlag>";return B}function getNumberOfRows(B){var C=$(B);var A=C.childNodes[0];return A.childNodes.length-1}function getCellContent(B,F,C){var D=$(B);var A=D.childNodes[0];var E=A.childNodes[F+1];var G=E.childNodes[C];return G.childNodes[0]}function getForm(B){var A=B;if(typeof arguments[0]=="undefined"){A=document.forms[1].name}return document.forms[A]}function Base(){}Base.version="1.0.1";Base.prototype={extend:function(B,H){var G=Base.prototype.extend;if(arguments.length==2){var F=this[B];if((F instanceof Function)&&(H instanceof Function)&&F.valueOf()!=H.valueOf()&&/\binherit\b/.test(H)){var A=H;H=function(){var K=this.inherit;this.inherit=F;var J=A.apply(this,arguments);this.inherit=K;return J};H.valueOf=function(){return A};H.toString=function(){return String(A)}}return this[B]=H}else{if(B){var I={toSource:null};var D=["toString","valueOf"];if(Base._prototyping){D[2]="constructor"}for(var E=0;(C=D[E]);E++){if(B[C]!=I[C]){G.call(this,C,B[C])}}for(var C in B){if(!I[C]){G.call(this,C,B[C])}}}}return this},inherit:function(){}};Base.extend=function(B,F){var G=Base.prototype.extend;if(!B){B={}}if(B.constructor==Object){B.constructor=new Function}Base._prototyping=true;var E=new this;G.call(E,B);var D=E.constructor;E.constructor=this;delete Base._prototyping;var A=function(){if(!Base._prototyping){D.apply(this,arguments)}this.constructor=A};A.prototype=E;A.extend=this.extend;A.toString=function(){return String(D)};G.call(A,F);var C=D?A:E;if(C.init instanceof Function){C.init()}return C};escapeJSONChar=function escapeJSONChar(B){if(B=='"'||B=="\\"){return"\\"+B}else{if(B=="\b"){return"\\b"}else{if(B=="\f"){return"\\f"}else{if(B=="\n"){return"\\n"}else{if(B=="\r"){return"\\r"}else{if(B=="\t"){return"\\t"}}}}}}var A=B.charCodeAt(0).toString(16);if(A.length==1){return"\\u000"+A}else{if(A.length==2){return"\\u00"+A}else{if(A.length==3){return"\\u0"+A}else{return"\\u"+A}}}};escapeJSONString=function escapeJSONString(B){var C=B.split("");for(var A=0;A<C.length;A++){var D=C[A];if(D=='"'||D=="\\"||D.charCodeAt(0)<32||D.charCodeAt(0)>=128){C[A]=escapeJSONChar(C[A])}}return'"'+C.join("")+'"'};toJSON=function toJSON(C){if(C==null){return"null"}else{if(C.constructor==String){return escapeJSONString(C)}else{if(C.constructor==Number){return C.toString()}else{if(C.constructor==Boolean){return C.toString()}else{if(C.constructor==Date){return'{javaClass: "java.util.Date", time: '+C.valueOf()+"}"}else{if(C.constructor==Array||typeof (C.length)!="undefined"){var A=[];for(var B=0;B<C.length;B++){A.push(toJSON(C[B]))}return"["+A.join(", ")+"]"}else{var A=[];for(attr in C){if(C[attr]==null){A.push('"'+attr+'": null')}else{if(typeof C[attr]=="function"){}else{A.push(escapeJSONString(attr)+": "+toJSON(C[attr]))}}}return"{"+A.join(", ")+"}"}}}}}}};(function(){var B="&nbsp;&nbsp;";var H="<br/>";var F=false;var D=0;var C=function(J){if(!F){return J}for(var I=0;I<D;I++){J[J.length]=B}return J};var E=function(I){if(F){I[I.length]=H}return I};var A={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},G={array:function(J){var L=["["],I,O,N,K=J.length,M;L=E(L);D++;for(N=0;N<K;N+=1){M=J[N];O=G[typeof M];if(O){M=O(M);if(typeof M=="string"){if(I){L[L.length]=",";L=E(L)}L=C(L);L[L.length]=M;I=true}}}D--;L=E(L);L=C(L);L[L.length]="]";return L.join("")},"boolean":function(I){return String(I)},"null":function(I){return"null"},number:function(I){return isFinite(I)?String(I):"null"},object:function(J,N){if(J){if(J instanceof Array){return G.array(J)}var K=["{"],I,O,M,L;K=E(K);D++;for(M in J){L=J[M];O=G[typeof L];if(O){L=O(L);if(typeof L=="string"){if(I){K[K.length]=",";K=E(K)}K=C(K);K.push(G.string(M),((F)?" : ":":"),L);I=true}}}D--;K=E(K);K=C(K);K[K.length]="}";return K.join("")}return"null"},string:function(I){if(/["\\\x00-\x1f]/.test(I)){I=I.replace(/([\x00-\x1f\\"])/g,function(K,J){var L=A[J];if(L){return L}L=J.charCodeAt();return"\\u00"+Math.floor(L/16).toString(16)+(L%16).toString(16)})}return'"'+I+'"'}};prettyPrintJson=function(I){F=true;if(I.constructor==String){return I}else{if(I.constructor==Array){return G.array(I)}else{return G.object(I)}}}})();var TrimPath;(function(){if(TrimPath==null){TrimPath=new Object()}if(TrimPath.evalEx==null){TrimPath.evalEx=function(src){return eval(src)}}var UNDEFINED;if(Array.prototype.pop==null){Array.prototype.pop=function(){if(this.length===0){return UNDEFINED}return this[--this.length]}}if(Array.prototype.push==null){Array.prototype.push=function(){for(var i=0;i<arguments.length;++i){this[this.length]=arguments[i]}return this.length}}TrimPath.parseTemplate=function(tmplContent,optTmplName,optEtc){if(optEtc==null){optEtc=TrimPath.parseTemplate_etc}var funcSrc=parse(tmplContent,optTmplName,optEtc);var func=TrimPath.evalEx(funcSrc,optTmplName,1);if(func!=null){return new optEtc.Template(optTmplName,tmplContent,funcSrc,func,optEtc)}return null};try{String.prototype.process=function(context,optFlags){var template=TrimPath.parseTemplate(this,null);if(template!=null){return template.process(context,optFlags)}return this}}catch(e){}TrimPath.parseTemplate_etc={};TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro";TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(stmtParts,state,tmplName,etc){if(stmtParts[2]!="in"){throw new etc.ParseError(tmplName,state.line,"bad for loop statement: "+stmtParts.join(" "))}var iterVar=stmtParts[1];var listVar="__LIST__"+iterVar;return["var ",listVar," = ",stmtParts[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",listVar,") != null) { ","var ",iterVar,"_ct = 0;","for (var ",iterVar,"_index in ",listVar,") { ",iterVar,"_ct++;","if (typeof(",listVar,"[",iterVar,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",iterVar," = ",listVar,"[",iterVar,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(stmtParts,state,tmplName,etc){var macroName=stmtParts[1].split("(")[0];return["var ",macroName," = function",stmtParts.slice(1).join(" ").substring(macroName.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}};TrimPath.parseTemplate_etc.modifierDef={eat:function(v){return""},escape:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(s){return String(s).toUpperCase()},"default":function(s,d){return s!=null?s:d}};TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape;TrimPath.parseTemplate_etc.Template=function(tmplName,tmplContent,funcSrc,func,etc){this.process=function(context,flags){if(context==null){context={}}if(context._MODIFIERS==null){context._MODIFIERS={}}if(context.defined==null){context.defined=function(str){return(context[str]!=undefined)}}for(var k in etc.modifierDef){if(context._MODIFIERS[k]==null){context._MODIFIERS[k]=etc.modifierDef[k]}}if(flags==null){flags={}}var resultArr=[];var resultOut={write:function(m){resultArr.push(m)}};try{func(resultOut,context,flags)}catch(e){if(flags.throwExceptions==true){throw e}var result=new String(resultArr.join("")+"[ERROR: "+e.toString()+(e.message?"; "+e.message:"")+"]");result.exception=e;return result}return resultArr.join("")};this.name=tmplName;this.source=tmplContent;this.sourceFunc=funcSrc;this.toString=function(){return"TrimPath.Template ["+tmplName+"]"}};TrimPath.parseTemplate_etc.ParseError=function(name,line,message){this.name=name;this.line=line;this.message=message};TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return("TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message)};var parse=function(body,tmplName,etc){body=cleanWhiteSpace(body);var funcText=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"];var state={stack:[],line:1};var endStmtPrev=-1;while(endStmtPrev+1<body.length){var begStmt=endStmtPrev;begStmt=body.indexOf("{",begStmt+1);while(begStmt>=0){var endStmt=body.indexOf("}",begStmt+1);var stmt=body.substring(begStmt,endStmt);var blockrx=stmt.match(/^\{(cdata|minify|eval)/);if(blockrx){var blockType=blockrx[1];var blockMarkerBeg=begStmt+blockType.length+1;var blockMarkerEnd=body.indexOf("}",blockMarkerBeg);if(blockMarkerEnd>=0){var blockMarker;if(blockMarkerEnd-blockMarkerBeg<=0){blockMarker="{/"+blockType+"}"}else{blockMarker=body.substring(blockMarkerBeg+1,blockMarkerEnd)}var blockEnd=body.indexOf(blockMarker,blockMarkerEnd+1);if(blockEnd>=0){emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);var blockText=body.substring(blockMarkerEnd+1,blockEnd);if(blockType=="cdata"){emitText(blockText,funcText)}else{if(blockType=="minify"){emitText(scrubWhiteSpace(blockText),funcText)}else{if(blockType=="eval"){if(blockText!=null&&blockText.length>0){funcText.push("_OUT.write( (function() { "+blockText+" })() );")}}}}begStmt=endStmtPrev=blockEnd+blockMarker.length-1}}}else{if(body.charAt(begStmt-1)!="$"&&body.charAt(begStmt-1)!="\\"){var offset=(body.charAt(begStmt+1)=="/"?2:1);if(body.substring(begStmt+offset,begStmt+10+offset).search(TrimPath.parseTemplate_etc.statementTag)==0){break}}}begStmt=body.indexOf("{",begStmt+1)}if(begStmt<0){break}var endStmt=body.indexOf("}",begStmt+1);if(endStmt<0){break}emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);emitStatement(body.substring(begStmt,endStmt+1),state,funcText,tmplName,etc);endStmtPrev=endStmt}emitSectionText(body.substring(endStmtPrev+1),funcText);if(state.stack.length!=0){throw new etc.ParseError(tmplName,state.line,"unclosed, unmatched statement(s): "+state.stack.join(","))}funcText.push("}}; TrimPath_Template_TEMP");return funcText.join("")};var emitStatement=function(stmtStr,state,funcText,tmplName,etc){var parts=stmtStr.slice(1,-1).split(" ");var stmt=etc.statementDef[parts[0]];if(stmt==null){emitSectionText(stmtStr,funcText);return }if(stmt.delta<0){if(state.stack.length<=0){throw new etc.ParseError(tmplName,state.line,"close tag does not match any previous statement: "+stmtStr)}state.stack.pop()}if(stmt.delta>0){state.stack.push(stmtStr)}if(stmt.paramMin!=null&&stmt.paramMin>=parts.length){throw new etc.ParseError(tmplName,state.line,"statement needs more parameters: "+stmtStr)}if(stmt.prefixFunc!=null){funcText.push(stmt.prefixFunc(parts,state,tmplName,etc))}else{funcText.push(stmt.prefix)}if(stmt.suffix!=null){if(parts.length<=1){if(stmt.paramDefault!=null){funcText.push(stmt.paramDefault)}}else{for(var i=1;i<parts.length;i++){if(i>1){funcText.push(" ")}funcText.push(parts[i])}}funcText.push(stmt.suffix)}};var emitSectionText=function(text,funcText){if(text.length<=0){return }var nlPrefix=0;var nlSuffix=text.length-1;while(nlPrefix<text.length&&(text.charAt(nlPrefix)=="\n")){nlPrefix++}while(nlSuffix>=0&&(text.charAt(nlSuffix)==" "||text.charAt(nlSuffix)=="\t")){nlSuffix--}if(nlSuffix<nlPrefix){nlSuffix=nlPrefix}if(nlPrefix>0){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(0,nlPrefix).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}var lines=text.substring(nlPrefix,nlSuffix+1).split("\n");for(var i=0;i<lines.length;i++){emitSectionTextLine(lines[i],funcText);if(i<lines.length-1){funcText.push('_OUT.write("\\n");\n')}}if(nlSuffix+1<text.length){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(nlSuffix+1).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}};var emitSectionTextLine=function(line,funcText){var endMarkPrev="}";var endExprPrev=-1;while(endExprPrev+endMarkPrev.length<line.length){var begMark="${",endMark="}";var begExpr=line.indexOf(begMark,endExprPrev+endMarkPrev.length);if(begExpr<0){break}if(line.charAt(begExpr+2)=="%"){begMark="${%";endMark="%}"}var endExpr=line.indexOf(endMark,begExpr+begMark.length);if(endExpr<0){break}emitText(line.substring(endExprPrev+endMarkPrev.length,begExpr),funcText);var exprArr=line.substring(begExpr+begMark.length,endExpr).replace(/\|\|/g,"#@@#").split("|");for(var k in exprArr){if(exprArr[k].replace){exprArr[k]=exprArr[k].replace(/#@@#/g,"||")}}funcText.push("_OUT.write(");emitExpression(exprArr,exprArr.length-1,funcText);funcText.push(");");endExprPrev=endExpr;endMarkPrev=endMark}emitText(line.substring(endExprPrev+endMarkPrev.length),funcText)};var emitText=function(text,funcText){if(text==null||text.length<=0){return }text=text.replace(/\\/g,"\\\\");text=text.replace(/\n/g,"\\n");text=text.replace(/"/g,'\\"');funcText.push('_OUT.write("');funcText.push(text);funcText.push('");')};var emitExpression=function(exprArr,index,funcText){var expr=exprArr[index];if(index<=0){funcText.push(expr);return }var parts=expr.split(":");funcText.push('_MODIFIERS["');funcText.push(parts[0]);funcText.push('"](');emitExpression(exprArr,index-1,funcText);if(parts.length>1){funcText.push(",");funcText.push(parts[1])}funcText.push(")")};var cleanWhiteSpace=function(result){result=result.replace(/\t/g,"    ");result=result.replace(/\r\n/g,"\n");result=result.replace(/\r/g,"\n");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};var scrubWhiteSpace=function(result){result=result.replace(/^\s+/g,"");result=result.replace(/\s+$/g,"");result=result.replace(/\s+/g," ");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};TrimPath.parseDOMTemplate=function(elementId,optDocument,optEtc){if(optDocument==null){optDocument=document}var element=optDocument.getElementById(elementId);var content=element.value;if(content==null){content=element.innerHTML}content=content.replace(/&lt;/g,"<").replace(/&gt;/g,">");return TrimPath.parseTemplate(content,elementId,optEtc)};TrimPath.processDOMTemplate=function(elementId,context,optFlags,optDocument,optEtc){return TrimPath.parseDOMTemplate(elementId,optDocument,optEtc).process(context,optFlags)}})();if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=(""+A[C]).split(".");E=YAHOO;for(B=(D[0]=="YAHOO")?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]]}}return E};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log){return B.log(D,A,C)}else{return false}};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules,B,H,G,F,C;if(!I[A]){I[A]={versions:[],builds:[]}}B=I[A];H=D.version;G=D.build;F=YAHOO.env.listeners;B.name=A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(C=0;C<F.length;C=C+1){F[C](B)}if(E){E.VERSION=H;E.BUILD=G}else{YAHOO.log("mainClass is undefined for module "+A,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null};YAHOO.env.ua=function(){var D=function(H){var I=0;return parseFloat(H.replace(/\./g,function(){return(I++==1)?"":"."}))},G=navigator,F={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:G.cajaVersion,secure:false,os:null},C=navigator&&navigator.userAgent,E=window&&window.location,B=E&&E.href,A;F.secure=B&&(B.toLowerCase().indexOf("https")===0);if(C){if((/windows|win32/i).test(C)){F.os="windows"}else{if((/macintosh/i).test(C)){F.os="macintosh"}}if((/KHTML/).test(C)){F.webkit=1}A=C.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){F.webkit=D(A[1]);if(/ Mobile\//.test(C)){F.mobile="Apple"}else{A=C.match(/NokiaN[^\/]*/);if(A){F.mobile=A[0]}}A=C.match(/AdobeAIR\/([^\s]*)/);if(A){F.air=A[0]}}if(!F.webkit){A=C.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){F.opera=D(A[1]);A=C.match(/Opera Mini[^;]*/);if(A){F.mobile=A[0]}}else{A=C.match(/MSIE\s([^;]*)/);if(A&&A[1]){F.ie=D(A[1])}else{A=C.match(/Gecko\/([^\s]*)/);if(A){F.gecko=1;A=C.match(/rv:([^\s\)]*)/);if(A&&A[1]){F.gecko=D(A[1])}}}}}}return F}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C++){if(A[C]==B){D=false;break}}if(D){A.push(B)}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var B=YAHOO.lang,A=Object.prototype,H="[object Array]",C="[object Function]",G="[object Object]",E=[],F=["toString","valueOf"],D={isArray:function(I){return A.toString.apply(I)===H},isBoolean:function(I){return typeof I==="boolean"},isFunction:function(I){return(typeof I==="function")||A.toString.apply(I)===C},isNull:function(I){return I===null},isNumber:function(I){return typeof I==="number"&&isFinite(I)},isObject:function(I){return(I&&(typeof I==="object"||B.isFunction(I)))||false},isString:function(I){return typeof I==="string"},isUndefined:function(I){return typeof I==="undefined"},_IEEnumFix:(YAHOO.env.ua.ie)?function(K,J){var I,M,L;for(I=0;I<F.length;I=I+1){M=F[I];L=J[M];if(B.isFunction(L)&&L!=A[M]){K[M]=L}}}:function(){},extend:function(L,M,K){if(!M||!L){throw new Error("extend failed, please check that all dependencies are included.")}var J=function(){},I;J.prototype=M.prototype;L.prototype=new J();L.prototype.constructor=L;L.superclass=M.prototype;if(M.prototype.constructor==A.constructor){M.prototype.constructor=M}if(K){for(I in K){if(B.hasOwnProperty(K,I)){L.prototype[I]=K[I]}}B._IEEnumFix(L.prototype,K)}},augmentObject:function(M,L){if(!L||!M){throw new Error("Absorb failed, verify dependencies.")}var I=arguments,K,N,J=I[2];if(J&&J!==true){for(K=2;K<I.length;K=K+1){M[I[K]]=L[I[K]]}}else{for(N in L){if(J||!(N in M)){M[N]=L[N]}}B._IEEnumFix(M,L)}},augmentProto:function(L,K){if(!K||!L){throw new Error("Augment failed, verify dependencies.")}var I=[L.prototype,K.prototype],J;for(J=2;J<arguments.length;J=J+1){I.push(arguments[J])}B.augmentObject.apply(this,I)},dump:function(I,N){var K,M,P=[],Q="{...}",J="f(){...}",O=", ",L=" => ";if(!B.isObject(I)){return I+""}else{if(I instanceof Date||("nodeType" in I&&"tagName" in I)){return I}else{if(B.isFunction(I)){return J}}}N=(B.isNumber(N))?N:3;if(B.isArray(I)){P.push("[");for(K=0,M=I.length;K<M;K=K+1){if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q)}else{P.push(I[K])}P.push(O)}if(P.length>1){P.pop()}P.push("]")}else{P.push("{");for(K in I){if(B.hasOwnProperty(I,K)){P.push(K+L);if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q)}else{P.push(I[K])}P.push(O)}}if(P.length>1){P.pop()}P.push("}")}return P.join("")},substitute:function(Y,J,R){var N,M,L,U,V,X,T=[],K,O="dump",S=" ",I="{",W="}",Q,P;for(;;){N=Y.lastIndexOf(I);if(N<0){break}M=Y.indexOf(W,N);if(N+1>=M){break}K=Y.substring(N+1,M);U=K;X=null;L=U.indexOf(S);if(L>-1){X=U.substring(L+1);U=U.substring(0,L)}V=J[U];if(R){V=R(U,V,X)}if(B.isObject(V)){if(B.isArray(V)){V=B.dump(V,parseInt(X,10))}else{X=X||"";Q=X.indexOf(O);if(Q>-1){X=X.substring(4)}P=V.toString();if(P===G||Q>-1){V=B.dump(V,parseInt(X,10))}else{V=P}}}else{if(!B.isString(V)&&!B.isNumber(V)){V="~-"+T.length+"-~";T[T.length]=K}}Y=Y.substring(0,N)+V+Y.substring(M+1)}for(N=T.length-1;N>=0;N=N-1){Y=Y.replace(new RegExp("~-"+N+"-~"),"{"+T[N]+"}","g")}return Y},trim:function(I){try{return I.replace(/^\s+|\s+$/g,"")}catch(J){return I}},merge:function(){var L={},J=arguments,I=J.length,K;for(K=0;K<I;K=K+1){B.augmentObject(L,J[K],true)}return L},later:function(P,J,Q,L,M){P=P||0;J=J||{};var K=Q,O=L,N,I;if(B.isString(Q)){K=J[Q]}if(!K){throw new TypeError("method undefined")}if(O&&!B.isArray(O)){O=[L]}N=function(){K.apply(J,O||E)};I=(M)?setInterval(N,P):setTimeout(N,P);return{interval:M,cancel:function(){if(this.interval){clearInterval(I)}else{clearTimeout(I)}}}},isValue:function(I){return(B.isObject(I)||B.isString(I)||B.isNumber(I)||B.isBoolean(I))}};B.hasOwnProperty=(A.hasOwnProperty)?function(I,J){return I&&I.hasOwnProperty(J)}:function(I,J){return !B.isUndefined(I[J])&&I.constructor.prototype[J]!==I[J]};D.augmentObject(B,D,true);YAHOO.util.Lang=B;B.augment=B.augmentProto;YAHOO.augment=B.augmentProto;YAHOO.extend=B.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.1",build:"19"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var E=YAHOO.util,L=YAHOO.lang,q=YAHOO.env.ua,A=YAHOO.lang.trim,e={},k={},N=/^t(?:able|d|h)$/i,X=/color$/i,K=window.document,W=K.documentElement,f="ownerDocument",r="defaultView",z="documentElement",x="compatMode",b="offsetLeft",P="offsetTop",y="offsetParent",Z="parentNode",p="nodeType",C="tagName",O="scrollLeft",l="scrollTop",Q="getBoundingClientRect",AA="getComputedStyle",a="currentStyle",M="CSS1Compat",c="BackCompat",h="class",F="className",J="",B=" ",w="(?:^|\\s)",o="(?= |$)",U="g",t="position",g="fixed",V="relative",m="left",s="top",v="medium",u="borderLeftWidth",R="borderTopWidth",D=q.opera,I=q.webkit,H=q.gecko,T=q.ie;E.Dom={CUSTOM_ATTRIBUTES:(!W.hasAttribute)?{"for":"htmlFor","class":F}:{htmlFor:"for",className:h},DOT_ATTRIBUTES:{},get:function(AD){var AF,AB,AE,AC,Y,G;if(AD){if(AD[p]||AD.item){return AD}if(typeof AD==="string"){AF=AD;AD=K.getElementById(AD);G=(AD)?AD.attributes:null;if(AD&&G&&G.id&&G.id.value===AF){return AD}else{if(AD&&K.all){AD=null;AB=K.all[AF];for(AC=0,Y=AB.length;AC<Y;++AC){if(AB[AC].id===AF){return AB[AC]}}}}return AD}if(YAHOO.util.Element&&AD instanceof YAHOO.util.Element){AD=AD.get("element")}if("length" in AD){AE=[];for(AC=0,Y=AD.length;AC<Y;++AC){AE[AE.length]=E.Dom.get(AD[AC])}return AE}return AD}return null},getComputedStyle:function(G,Y){if(window[AA]){return G[f][r][AA](G,null)[Y]}else{if(G[a]){return E.Dom.IE_ComputedStyle.get(G,Y)}}},getStyle:function(G,Y){return E.Dom.batch(G,E.Dom._getStyle,Y)},_getStyle:function(){if(window[AA]){return function(G,AC){AC=(AC==="float")?AC="cssFloat":E.Dom._toCamel(AC);var AB=G.style[AC],Y;if(!AB){Y=G[f][r][AA](G,null);if(Y){AB=Y[AC]}}return AB}}else{if(W[a]){return function(G,AC){var AB;switch(AC){case"opacity":AB=100;try{AB=G.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(AD){try{AB=G.filters("alpha").opacity}catch(Y){}}return AB/100;case"float":AC="styleFloat";default:AC=E.Dom._toCamel(AC);AB=G[a]?G[a][AC]:null;return(G.style[AC]||AB)}}}}}(),setStyle:function(G,Y,AB){E.Dom.batch(G,E.Dom._setStyle,{prop:Y,val:AB})},_setStyle:function(){if(T){return function(Y,G){var AB=E.Dom._toCamel(G.prop),AC=G.val;if(Y){switch(AB){case"opacity":if(L.isString(Y.style.filter)){Y.style.filter="alpha(opacity="+AC*100+")";if(!Y[a]||!Y[a].hasLayout){Y.style.zoom=1}}break;case"float":AB="styleFloat";default:Y.style[AB]=AC}}else{}}}else{return function(Y,G){var AB=E.Dom._toCamel(G.prop),AC=G.val;if(Y){if(AB=="float"){AB="cssFloat"}Y.style[AB]=AC}else{}}}}(),getXY:function(G){return E.Dom.batch(G,E.Dom._getXY)},_canPosition:function(G){return(E.Dom._getStyle(G,"display")!=="none"&&E.Dom._inDoc(G))},_getXY:function(){if(K[z][Q]){return function(AC){var AD,Y,AE,AJ,AI,AH,AG,G,AB,AF=Math.floor,AK=false;if(E.Dom._canPosition(AC)){AE=AC[Q]();AJ=AC[f];AD=E.Dom.getDocumentScrollLeft(AJ);Y=E.Dom.getDocumentScrollTop(AJ);AK=[AF(AE[m]),AF(AE[s])];if(T&&q.ie<8){AI=2;AH=2;AG=AJ[x];if(q.ie===6){if(AG!==c){AI=0;AH=0}}if((AG===c)){G=S(AJ[z],u);AB=S(AJ[z],R);if(G!==v){AI=parseInt(G,10)}if(AB!==v){AH=parseInt(AB,10)}}AK[0]-=AI;AK[1]-=AH}if((Y||AD)){AK[0]+=AD;AK[1]+=Y}AK[0]=AF(AK[0]);AK[1]=AF(AK[1])}else{}return AK}}else{return function(AC){var AB,Y,AE,AF,AG,AD=false,G=AC;if(E.Dom._canPosition(AC)){AD=[AC[b],AC[P]];AB=E.Dom.getDocumentScrollLeft(AC[f]);Y=E.Dom.getDocumentScrollTop(AC[f]);AG=((H||q.webkit>519)?true:false);while((G=G[y])){AD[0]+=G[b];AD[1]+=G[P];if(AG){AD=E.Dom._calcBorders(G,AD)}}if(E.Dom._getStyle(AC,t)!==g){G=AC;while((G=G[Z])&&G[C]){AE=G[l];AF=G[O];if(H&&(E.Dom._getStyle(G,"overflow")!=="visible")){AD=E.Dom._calcBorders(G,AD)}if(AE||AF){AD[0]-=AF;AD[1]-=AE}}AD[0]+=AB;AD[1]+=Y}else{if(D){AD[0]-=AB;AD[1]-=Y}else{if(I||H){AD[0]+=AB;AD[1]+=Y}}}AD[0]=Math.floor(AD[0]);AD[1]=Math.floor(AD[1])}else{}return AD}}}(),getX:function(G){var Y=function(AB){return E.Dom.getXY(AB)[0]};return E.Dom.batch(G,Y,E.Dom,true)},getY:function(G){var Y=function(AB){return E.Dom.getXY(AB)[1]};return E.Dom.batch(G,Y,E.Dom,true)},setXY:function(G,AB,Y){E.Dom.batch(G,E.Dom._setXY,{pos:AB,noRetry:Y})},_setXY:function(G,AD){var AE=E.Dom._getStyle(G,t),AC=E.Dom.setStyle,AH=AD.pos,Y=AD.noRetry,AF=[parseInt(E.Dom.getComputedStyle(G,m),10),parseInt(E.Dom.getComputedStyle(G,s),10)],AG,AB;if(AE=="static"){AE=V;AC(G,t,AE)}AG=E.Dom._getXY(G);if(!AH||AG===false){return false}if(isNaN(AF[0])){AF[0]=(AE==V)?0:G[b]}if(isNaN(AF[1])){AF[1]=(AE==V)?0:G[P]}if(AH[0]!==null){AC(G,m,AH[0]-AG[0]+AF[0]+"px")}if(AH[1]!==null){AC(G,s,AH[1]-AG[1]+AF[1]+"px")}if(!Y){AB=E.Dom._getXY(G);if((AH[0]!==null&&AB[0]!=AH[0])||(AH[1]!==null&&AB[1]!=AH[1])){E.Dom._setXY(G,{pos:AH,noRetry:true})}}},setX:function(Y,G){E.Dom.setXY(Y,[G,null])},setY:function(G,Y){E.Dom.setXY(G,[null,Y])},getRegion:function(G){var Y=function(AB){var AC=false;if(E.Dom._canPosition(AB)){AC=E.Region.getRegion(AB)}else{}return AC};return E.Dom.batch(G,Y,E.Dom,true)},getClientWidth:function(){return E.Dom.getViewportWidth()},getClientHeight:function(){return E.Dom.getViewportHeight()},getElementsByClassName:function(AF,AJ,AG,AI,AB,AH){AJ=AJ||"*";AG=(AG)?E.Dom.get(AG):null||K;if(!AG){return[]}var Y=[],G=AG.getElementsByTagName(AJ),AD=E.Dom.hasClass;for(var AC=0,AE=G.length;AC<AE;++AC){if(AD(G[AC],AF)){Y[Y.length]=G[AC]}}if(AI){E.Dom.batch(Y,AI,AB,AH)}return Y},hasClass:function(Y,G){return E.Dom.batch(Y,E.Dom._hasClass,G)},_hasClass:function(AB,Y){var G=false,AC;if(AB&&Y){AC=E.Dom._getAttribute(AB,F)||J;if(Y.exec){G=Y.test(AC)}else{G=Y&&(B+AC+B).indexOf(B+Y+B)>-1}}else{}return G},addClass:function(Y,G){return E.Dom.batch(Y,E.Dom._addClass,G)},_addClass:function(AB,Y){var G=false,AC;if(AB&&Y){AC=E.Dom._getAttribute(AB,F)||J;if(!E.Dom._hasClass(AB,Y)){E.Dom.setAttribute(AB,F,A(AC+B+Y));G=true}}else{}return G},removeClass:function(Y,G){return E.Dom.batch(Y,E.Dom._removeClass,G)},_removeClass:function(AC,AB){var Y=false,AE,AD,G;if(AC&&AB){AE=E.Dom._getAttribute(AC,F)||J;E.Dom.setAttribute(AC,F,AE.replace(E.Dom._getClassRegex(AB),J));AD=E.Dom._getAttribute(AC,F);if(AE!==AD){E.Dom.setAttribute(AC,F,A(AD));Y=true;if(E.Dom._getAttribute(AC,F)===""){G=(AC.hasAttribute&&AC.hasAttribute(h))?h:F;AC.removeAttribute(G)}}}else{}return Y},replaceClass:function(AB,Y,G){return E.Dom.batch(AB,E.Dom._replaceClass,{from:Y,to:G})},_replaceClass:function(AC,AB){var Y,AF,AE,G=false,AD;if(AC&&AB){AF=AB.from;AE=AB.to;if(!AE){G=false}else{if(!AF){G=E.Dom._addClass(AC,AB.to)}else{if(AF!==AE){AD=E.Dom._getAttribute(AC,F)||J;Y=(B+AD.replace(E.Dom._getClassRegex(AF),B+AE)).split(E.Dom._getClassRegex(AE));Y.splice(1,0,B+AE);E.Dom.setAttribute(AC,F,A(Y.join(J)));G=true}}}}else{}return G},generateId:function(G,AB){AB=AB||"yui-gen";var Y=function(AC){if(AC&&AC.id){return AC.id}var AD=AB+YAHOO.env._id_counter++;if(AC){if(AC[f]&&AC[f].getElementById(AD)){return E.Dom.generateId(AC,AD+AB)}AC.id=AD}return AD};return E.Dom.batch(G,Y,E.Dom,true)||Y.apply(E.Dom,arguments)},isAncestor:function(Y,AB){Y=E.Dom.get(Y);AB=E.Dom.get(AB);var G=false;if((Y&&AB)&&(Y[p]&&AB[p])){if(Y.contains&&Y!==AB){G=Y.contains(AB)}else{if(Y.compareDocumentPosition){G=!!(Y.compareDocumentPosition(AB)&16)}}}else{}return G},inDocument:function(G,Y){return E.Dom._inDoc(E.Dom.get(G),Y)},_inDoc:function(Y,AB){var G=false;if(Y&&Y[C]){AB=AB||Y[f];G=E.Dom.isAncestor(AB[z],Y)}else{}return G},getElementsBy:function(Y,AJ,AF,AH,AC,AG,AI){AJ=AJ||"*";AF=(AF)?E.Dom.get(AF):null||K;if(!AF){return[]}var AB=[],G=AF.getElementsByTagName(AJ);for(var AD=0,AE=G.length;AD<AE;++AD){if(Y(G[AD])){if(AI){AB=G[AD];break}else{AB[AB.length]=G[AD]}}}if(AH){E.Dom.batch(AB,AH,AC,AG)}return AB},getElementBy:function(AB,G,Y){return E.Dom.getElementsBy(AB,G,Y,null,null,null,true)},batch:function(AB,AF,AE,AD){var AC=[],Y=(AD)?AE:window;AB=(AB&&(AB[C]||AB.item))?AB:E.Dom.get(AB);if(AB&&AF){if(AB[C]||AB.length===undefined){return AF.call(Y,AB,AE)}for(var G=0;G<AB.length;++G){AC[AC.length]=AF.call(Y,AB[G],AE)}}else{return false}return AC},getDocumentHeight:function(){var Y=(K[x]!=M||I)?K.body.scrollHeight:W.scrollHeight,G=Math.max(Y,E.Dom.getViewportHeight());return G},getDocumentWidth:function(){var Y=(K[x]!=M||I)?K.body.scrollWidth:W.scrollWidth,G=Math.max(Y,E.Dom.getViewportWidth());return G},getViewportHeight:function(){var G=self.innerHeight,Y=K[x];if((Y||T)&&!D){G=(Y==M)?W.clientHeight:K.body.clientHeight}return G},getViewportWidth:function(){var G=self.innerWidth,Y=K[x];if(Y||T){G=(Y==M)?W.clientWidth:K.body.clientWidth}return G},getAncestorBy:function(G,Y){while((G=G[Z])){if(E.Dom._testElement(G,Y)){return G}}return null},getAncestorByClassName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null}var AB=function(AC){return E.Dom.hasClass(AC,G)};return E.Dom.getAncestorBy(Y,AB)},getAncestorByTagName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null}var AB=function(AC){return AC[C]&&AC[C].toUpperCase()==G.toUpperCase()};return E.Dom.getAncestorBy(Y,AB)},getPreviousSiblingBy:function(G,Y){while(G){G=G.previousSibling;if(E.Dom._testElement(G,Y)){return G}}return null},getPreviousSibling:function(G){G=E.Dom.get(G);if(!G){return null}return E.Dom.getPreviousSiblingBy(G)},getNextSiblingBy:function(G,Y){while(G){G=G.nextSibling;if(E.Dom._testElement(G,Y)){return G}}return null},getNextSibling:function(G){G=E.Dom.get(G);if(!G){return null}return E.Dom.getNextSiblingBy(G)},getFirstChildBy:function(G,AB){var Y=(E.Dom._testElement(G.firstChild,AB))?G.firstChild:null;return Y||E.Dom.getNextSiblingBy(G.firstChild,AB)},getFirstChild:function(G,Y){G=E.Dom.get(G);if(!G){return null}return E.Dom.getFirstChildBy(G)},getLastChildBy:function(G,AB){if(!G){return null}var Y=(E.Dom._testElement(G.lastChild,AB))?G.lastChild:null;return Y||E.Dom.getPreviousSiblingBy(G.lastChild,AB)},getLastChild:function(G){G=E.Dom.get(G);return E.Dom.getLastChildBy(G)},getChildrenBy:function(Y,AC){var AB=E.Dom.getFirstChildBy(Y,AC),G=AB?[AB]:[];E.Dom.getNextSiblingBy(AB,function(AD){if(!AC||AC(AD)){G[G.length]=AD}return false});return G},getChildren:function(G){G=E.Dom.get(G);if(!G){}return E.Dom.getChildrenBy(G)},getDocumentScrollLeft:function(G){G=G||K;return Math.max(G[z].scrollLeft,G.body.scrollLeft)},getDocumentScrollTop:function(G){G=G||K;return Math.max(G[z].scrollTop,G.body.scrollTop)},insertBefore:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null}return G[Z].insertBefore(Y,G)},insertAfter:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null}if(G.nextSibling){return G[Z].insertBefore(Y,G.nextSibling)}else{return G[Z].appendChild(Y)}},getClientRegion:function(){var AB=E.Dom.getDocumentScrollTop(),Y=E.Dom.getDocumentScrollLeft(),AC=E.Dom.getViewportWidth()+Y,G=E.Dom.getViewportHeight()+AB;return new E.Region(AB,AC,G,Y)},setAttribute:function(Y,G,AB){E.Dom.batch(Y,E.Dom._setAttribute,{attr:G,val:AB})},_setAttribute:function(AB,Y){var G=E.Dom._toCamel(Y.attr),AC=Y.val;if(AB&&AB.setAttribute){if(E.Dom.DOT_ATTRIBUTES[G]){AB[G]=AC}else{G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;AB.setAttribute(G,AC)}}else{}},getAttribute:function(Y,G){return E.Dom.batch(Y,E.Dom._getAttribute,G)},_getAttribute:function(Y,G){var AB;G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;if(Y&&Y.getAttribute){AB=Y.getAttribute(G,2)}else{}return AB},_toCamel:function(Y){var AB=e;function G(AC,AD){return AD.toUpperCase()}return AB[Y]||(AB[Y]=Y.indexOf("-")===-1?Y:Y.replace(/-([a-z])/gi,G))},_getClassRegex:function(Y){var G;if(Y!==undefined){if(Y.exec){G=Y}else{G=k[Y];if(!G){Y=Y.replace(E.Dom._patterns.CLASS_RE_TOKENS,"\\$1");G=k[Y]=new RegExp(w+Y+o,U)}}}return G},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(G,Y){return G&&G[p]==1&&(!Y||Y(G))},_calcBorders:function(AB,AC){var Y=parseInt(E.Dom[AA](AB,R),10)||0,G=parseInt(E.Dom[AA](AB,u),10)||0;if(H){if(N.test(AB[C])){Y=0;G=0}}AC[0]+=G;AC[1]+=Y;return AC}};var S=E.Dom[AA];if(q.opera){E.Dom[AA]=function(Y,G){var AB=S(Y,G);if(X.test(G)){AB=E.Dom.Color.toRGB(AB)}return AB}}if(q.webkit){E.Dom[AA]=function(Y,G){var AB=S(Y,G);if(AB==="rgba(0, 0, 0, 0)"){AB="transparent"}return AB}}if(q.ie&&q.ie>=8&&K.documentElement.hasAttribute){E.Dom.DOT_ATTRIBUTES.type=true}})();YAHOO.util.Region=function(C,D,A,B){this.top=C;this.y=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this.x=B;this[0]=B;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom)};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left))};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top),D=Math.min(this.right,E.right),A=Math.min(this.bottom,E.bottom),B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new YAHOO.util.Region(C,D,A,B)}else{return null}};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top),D=Math.max(this.right,E.right),A=Math.max(this.bottom,E.bottom),B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B)};YAHOO.util.Region.prototype.toString=function(){return("Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}")};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D),C=F[1],E=F[0]+D.offsetWidth,A=F[1]+D.offsetHeight,B=F[0];return new YAHOO.util.Region(C,E,A,B)};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0]}YAHOO.util.Point.superclass.constructor.call(this,B,A,B,A)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var B=YAHOO.util,A="clientTop",F="clientLeft",J="parentNode",K="right",W="hasLayout",I="px",U="opacity",L="auto",D="borderLeftWidth",G="borderTopWidth",P="borderRightWidth",V="borderBottomWidth",S="visible",Q="transparent",N="height",E="width",H="style",T="currentStyle",R=/^width|height$/,O=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,M={get:function(X,Z){var Y="",a=X[T][Z];if(Z===U){Y=B.Dom.getStyle(X,U)}else{if(!a||(a.indexOf&&a.indexOf(I)>-1)){Y=a}else{if(B.Dom.IE_COMPUTED[Z]){Y=B.Dom.IE_COMPUTED[Z](X,Z)}else{if(O.test(a)){Y=B.Dom.IE.ComputedStyle.getPixel(X,Z)}else{Y=a}}}}return Y},getOffset:function(Z,f){var b=Z[T][f],X=f.charAt(0).toUpperCase()+f.substr(1),c="offset"+X,Y="pixel"+X,a="",e;if(b==L){e=Z[c];if(e===undefined){a=0}a=e;if(R.test(f)){Z[H][f]=e;if(Z[c]>e){a=e-(Z[c]-e)}Z[H][f]=L}}else{if(!Z[H][Y]&&!Z[H][f]){Z[H][f]=b}a=Z[H][Y]}return a+I},getBorderWidth:function(X,Z){var Y=null;if(!X[T][W]){X[H].zoom=1}switch(Z){case G:Y=X[A];break;case V:Y=X.offsetHeight-X.clientHeight-X[A];break;case D:Y=X[F];break;case P:Y=X.offsetWidth-X.clientWidth-X[F];break}return Y+I},getPixel:function(Y,X){var a=null,b=Y[T][K],Z=Y[T][X];Y[H][K]=Z;a=Y[H].pixelRight;Y[H][K]=b;return a+I},getMargin:function(Y,X){var Z;if(Y[T][X]==L){Z=0+I}else{Z=B.Dom.IE.ComputedStyle.getPixel(Y,X)}return Z},getVisibility:function(Y,X){var Z;while((Z=Y[T])&&Z[X]=="inherit"){Y=Y[J]}return(Z)?Z[X]:S},getColor:function(Y,X){return B.Dom.Color.toRGB(Y[T][X])||Q},getBorderColor:function(Y,X){var Z=Y[T],a=Z[X]||Z.color;return B.Dom.Color.toRGB(B.Dom.Color.toHex(a))}},C={};C.top=C.right=C.bottom=C.left=C[E]=C[N]=M.getOffset;C.color=M.getColor;C[G]=C[P]=C[V]=C[D]=M.getBorderWidth;C.marginTop=C.marginRight=C.marginBottom=C.marginLeft=M.getMargin;C.visibility=M.getVisibility;C.borderColor=C.borderTopColor=C.borderRightColor=C.borderBottomColor=C.borderLeftColor=M.getBorderColor;B.Dom.IE_COMPUTED=C;B.Dom.IE_ComputedStyle=M})();(function(){var C="toString",A=parseInt,B=RegExp,D=YAHOO.util;D.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(E){if(!D.Dom.Color.re_RGB.test(E)){E=D.Dom.Color.toHex(E)}if(D.Dom.Color.re_hex.exec(E)){E="rgb("+[A(B.$1,16),A(B.$2,16),A(B.$3,16)].join(", ")+")"}return E},toHex:function(H){H=D.Dom.Color.KEYWORDS[H]||H;if(D.Dom.Color.re_RGB.exec(H)){var G=(B.$1.length===1)?"0"+B.$1:Number(B.$1),F=(B.$2.length===1)?"0"+B.$2:Number(B.$2),E=(B.$3.length===1)?"0"+B.$3:Number(B.$3);H=[G[C](16),F[C](16),E[C](16)].join("")}if(H.length<6){H=H.replace(D.Dom.Color.re_hex3,"$1$1")}if(H!=="transparent"&&H.indexOf("#")<0){H="#"+H}return H.toLowerCase()}}}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.1",build:"19"});YAHOO.util.CustomEvent=function(D,C,B,A,E){this.type=D;this.scope=C||window;this.silent=B;this.fireOnce=E;this.fired=false;this.firedWith=null;this.signature=A||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var F="_YUICEOnSubscribe";if(D!==F){this.subscribeEvent=new YAHOO.util.CustomEvent(F,this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,D){if(!B){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(B,C,D)}var A=new YAHOO.util.Subscriber(B,C,D);if(this.fireOnce&&this.fired){this.notify(A,this.firedWith)}else{this.subscribers.push(A)}},unsubscribe:function(D,F){if(!D){return this.unsubscribeAll()}var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true}}return E},fire:function(){this.lastError=null;var H=[],A=this.subscribers.length;var D=[].slice.call(arguments,0),C=true,F,B=false;if(this.fireOnce){if(this.fired){return true}else{this.firedWith=D}}this.fired=true;if(!A&&this.silent){return true}if(!this.silent){}var E=this.subscribers.slice();for(F=0;F<A;++F){var G=E[F];if(!G){B=true}else{C=this.notify(G,D);if(false===C){if(!this.silent){}break}}}return(C!==false)},notify:function(F,C){var B,H=null,E=F.getScope(this.scope),A=YAHOO.util.Event.throwErrors;if(!this.silent){}if(this.signature==YAHOO.util.CustomEvent.FLAT){if(C.length>0){H=C[0]}try{B=F.fn.call(E,H,F.obj)}catch(G){this.lastError=G;if(A){throw G}}}else{try{B=F.fn.call(E,this.type,C,F.obj)}catch(D){this.lastError=D;if(A){throw D}}}return B},unsubscribeAll:function(){var A=this.subscribers.length,B;for(B=A-1;B>-1;B--){this._delete(B)}this.subscribers=[];return A},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj}this.subscribers.splice(A,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(A,B,C){this.fn=A;this.obj=YAHOO.lang.isUndefined(B)?null:B;this.overrideContext=C};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.overrideContext){if(this.overrideContext===true){return this.obj}else{return this.overrideContext}}return A};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B){return(this.fn==A&&this.obj==B)}else{return(this.fn==A)}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var G=false,H=[],J=[],A=0,E=[],B=0,C={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},D=YAHOO.env.ua.ie,F="focusin",I="focusout";return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:D,_interval:null,_dri:null,_specialTypes:{focusin:(D?"focusin":"focus"),focusout:(D?"focusout":"blur")},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)}},onAvailable:function(Q,M,O,P,N){var K=(YAHOO.lang.isString(Q))?[Q]:Q;for(var L=0;L<K.length;L=L+1){E.push({id:K[L],fn:M,obj:O,overrideContext:P,checkReady:N})}A=this.POLL_RETRYS;this.startInterval()},onContentReady:function(N,K,L,M){this.onAvailable(N,K,L,M,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(M,K,V,P,T,Y){if(!V||!V.call){return false}if(this._isValidCollection(M)){var W=true;for(var Q=0,S=M.length;Q<S;++Q){W=this.on(M[Q],K,V,P,T)&&W}return W}else{if(YAHOO.lang.isString(M)){var O=this.getEl(M);if(O){M=O}else{this.onAvailable(M,function(){YAHOO.util.Event._addListener(M,K,V,P,T,Y)});return true}}}if(!M){return false}if("unload"==K&&P!==this){J[J.length]=[M,K,V,P,T];return true}var L=M;if(T){if(T===true){L=P}else{L=T}}var N=function(Z){return V.call(L,YAHOO.util.Event.getEvent(Z,M),P)};var X=[M,K,V,N,L,P,T,Y];var R=H.length;H[R]=X;try{this._simpleAdd(M,K,N,Y)}catch(U){this.lastError=U;this.removeListener(M,K,V);return false}return true},_getType:function(K){return this._specialTypes[K]||K},addListener:function(M,P,L,N,O){var K=((P==F||P==I)&&!YAHOO.env.ua.ie)?true:false;return this._addListener(M,this._getType(P),L,N,O,K)},addFocusListener:function(L,K,M,N){return this.on(L,F,K,M,N)},removeFocusListener:function(L,K){return this.removeListener(L,F,K)},addBlurListener:function(L,K,M,N){return this.on(L,I,K,M,N)},removeBlurListener:function(L,K){return this.removeListener(L,I,K)},removeListener:function(L,K,R){var M,P,U;K=this._getType(K);if(typeof L=="string"){L=this.getEl(L)}else{if(this._isValidCollection(L)){var S=true;for(M=L.length-1;M>-1;M--){S=(this.removeListener(L[M],K,R)&&S)}return S}}if(!R||!R.call){return this.purgeElement(L,false,K)}if("unload"==K){for(M=J.length-1;M>-1;M--){U=J[M];if(U&&U[0]==L&&U[1]==K&&U[2]==R){J.splice(M,1);return true}}return false}var N=null;var O=arguments[3];if("undefined"===typeof O){O=this._getCacheIndex(H,L,K,R)}if(O>=0){N=H[O]}if(!L||!N){return false}var T=N[this.CAPTURE]===true?true:false;try{this._simpleRemove(L,K,N[this.WFN],T)}catch(Q){this.lastError=Q;return false}delete H[O][this.WFN];delete H[O][this.FN];H.splice(O,1);return true},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K)},resolveTextNode:function(L){try{if(L&&3==L.nodeType){return L.parentNode}}catch(K){}return L},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE){K+=this._getScrollLeft()}}return K},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE){L+=this._getScrollTop()}}return L},getXY:function(K){return[this.getPageX(K),this.getPageY(K)]},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K){if(L.type=="mouseout"){K=L.toElement}else{if(L.type=="mouseover"){K=L.fromElement}}}return this.resolveTextNode(K)},getTime:function(M){if(!M.time){var L=new Date().getTime();try{M.time=L}catch(K){this.lastError=K;return L}}return M.time},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K)},stopPropagation:function(K){if(K.stopPropagation){K.stopPropagation()}else{K.cancelBubble=true}},preventDefault:function(K){if(K.preventDefault){K.preventDefault()}else{K.returnValue=false}},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor){break}N=N.caller}}return L},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&(K in C)){K=C[K]}return K},_getCacheIndex:function(M,P,Q,O){for(var N=0,L=M.length;N<L;N=N+1){var K=M[N];if(K&&K[this.FN]==O&&K[this.EL]==P&&K[this.TYPE]==Q){return N}}return -1},generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+B;++B;K.id=L}return L},_isValidCollection:function(L){try{return(L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined")}catch(K){return false}},elCache:{},getEl:function(K){return(typeof K==="string")?document.getElementById(K):K},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(L){if(!G){G=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach()}},_ready:function(L){var K=YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready)}},_tryPreloadAttach:function(){if(E.length===0){A=0;if(this._interval){this._interval.cancel();this._interval=null}return }if(this.locked){return }if(this.isIE){if(!this.DOMReady){this.startInterval();return }}this.locked=true;var Q=!G;if(!Q){Q=(A>0&&E.length>0)}var P=[];var R=function(T,U){var S=T;if(U.overrideContext){if(U.overrideContext===true){S=U.obj}else{S=U.overrideContext}}U.fn.call(S,U.obj)};var L,K,O,N,M=[];for(L=0,K=E.length;L<K;L=L+1){O=E[L];if(O){N=this.getEl(O.id);if(N){if(O.checkReady){if(G||N.nextSibling||!Q){M.push(O);E[L]=null}}else{R(N,O);E[L]=null}}else{P.push(O)}}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O)}A--;if(Q){for(L=E.length-1;L>-1;L--){O=E[L];if(!O||!O.id){E.splice(L,1)}}this.startInterval()}else{if(this._interval){this._interval.cancel();this._interval=null}}this.locked=false},purgeElement:function(O,P,R){var M=(YAHOO.lang.isString(O))?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q){for(N=Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn)}}if(P&&M&&M.childNodes){for(N=0,K=M.childNodes.length;N<K;++N){this.purgeElement(M.childNodes[N],P,R)}}},getListeners:function(M,K){var P=[],L;if(!K){L=[H,J]}else{if(K==="unload"){L=[J]}else{K=this._getType(K);L=[H]}}var R=(YAHOO.lang.isString(M))?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T){for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE])){P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],scope:N[this.ADJ_SCOPE],index:Q})}}}}return(P.length)?P:null},_unload:function(R){var L=YAHOO.util.Event,O,N,M,Q,P,S=J.slice(),K;for(O=0,Q=J.length;O<Q;++O){M=S[O];if(M){K=window;if(M[L.ADJ_SCOPE]){if(M[L.ADJ_SCOPE]===true){K=M[L.UNLOAD_OBJ]}else{K=M[L.ADJ_SCOPE]}}M[L.FN].call(K,L.getEvent(R,M[L.EL]),M[L.UNLOAD_OBJ]);S[O]=null}}M=null;K=null;J=null;if(H){for(N=H.length-1;N>-1;N--){M=H[N];if(M){L.removeListener(M[L.EL],M[L.TYPE],M[L.FN],N)}}M=null}L._simpleRemove(window,"unload",L._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft)){return[K.scrollTop,K.scrollLeft]}else{if(L){return[L.scrollTop,L.scrollLeft]}else{return[0,0]}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(M,N,L,K){M.addEventListener(N,L,(K))}}else{if(window.attachEvent){return function(M,N,L,K){M.attachEvent("on"+N,L)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(M,N,L,K){M.removeEventListener(N,L,(K))}}else{if(window.detachEvent){return function(L,M,K){L.detachEvent("on"+M,K)}}else{return function(){}}}}()}}();(function(){var A=YAHOO.util.Event;A.on=A.addListener;A.onFocus=A.addFocusListener;A.onBlur=A.addBlurListener;if(A.isIE){if(self!==self.top){document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;A._ready()}}}else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var B=document.createElement("p");A._dri=setInterval(function(){try{B.doScroll("left");clearInterval(A._dri);A._dri=null;A._ready();B=null}catch(C){}},A.POLL_INTERVAL)}}else{if(A.webkit&&A.webkit<525){A._dri=setInterval(function(){var C=document.readyState;if("loaded"==C||"complete"==C){clearInterval(A._dri);A._dri=null;A._ready()}},A.POLL_INTERVAL)}else{A._simpleAdd(document,"DOMContentLoaded",A._ready)}}A._simpleAdd(window,"load",A._load);A._simpleAdd(window,"unload",A._unload);A._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[A];if(D){D.subscribe(C,F,E)}else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A]){B[A]=[]}B[A].push({fn:C,obj:F,overrideContext:E})}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F){return F.unsubscribe(E,G)}}else{var B=true;for(var D in A){if(YAHOO.lang.hasOwnProperty(A,D)){B=B&&A[D].unsubscribe(E,G)}}return B}return false},unsubscribeAll:function(A){return this.unsubscribe(A)},createEvent:function(B,G){this.__yui_events=this.__yui_events||{};var E=G||{},D=this.__yui_events,F;if(D[B]){}else{F=new YAHOO.util.CustomEvent(B,E.scope||this,E.silent,YAHOO.util.CustomEvent.FLAT,E.fireOnce);D[B]=F;if(E.onSubscribeCallback){F.subscribeEvent.subscribe(E.onSubscribeCallback)}this.__yui_subscribers=this.__yui_subscribers||{};var A=this.__yui_subscribers[B];if(A){for(var C=0;C<A.length;++C){F.subscribe(A[C].fn,A[C].obj,A[C].overrideContext)}}}return D[B]},fireEvent:function(B){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[B];if(!D){return null}var A=[];for(var C=1;C<arguments.length;++C){A.push(arguments[C])}return D.fire.apply(D,A)},hasEvent:function(A){if(this.__yui_events){if(this.__yui_events[A]){return true}}return false}};(function(){var A=YAHOO.util.Event,C=YAHOO.lang;YAHOO.util.KeyListener=function(D,I,E,F){if(!D){}else{if(!I){}else{if(!E){}}}if(!F){F=YAHOO.util.KeyListener.KEYDOWN}var G=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(C.isString(D)){D=document.getElementById(D)}if(C.isFunction(E)){G.subscribe(E)}else{G.subscribe(E.fn,E.scope,E.correctScope)}function H(O,N){if(!I.shift){I.shift=false}if(!I.alt){I.alt=false}if(!I.ctrl){I.ctrl=false}if(O.shiftKey==I.shift&&O.altKey==I.alt&&O.ctrlKey==I.ctrl){var J,M=I.keys,L;if(YAHOO.lang.isArray(M)){for(var K=0;K<M.length;K++){J=M[K];L=A.getCharCode(O);if(J==L){G.fire(L,O);break}}}else{L=A.getCharCode(O);if(M==L){G.fire(L,O)}}}}this.enable=function(){if(!this.enabled){A.on(D,F,H);this.enabledEvent.fire(I)}this.enabled=true};this.disable=function(){if(this.enabled){A.removeListener(D,F,H);this.disabledEvent.fire(I)}this.enabled=false};this.toString=function(){return"KeyListener ["+I.keys+"] "+D.tagName+(D.id?"["+D.id+"]":"")}};var B=YAHOO.util.KeyListener;B.KEYDOWN="keydown";B.KEYUP="keyup";B.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.1",build:"19"});(function(){var D=YAHOO.util.Dom,B=YAHOO.util.Event,F=YAHOO.lang,E=YAHOO.widget;YAHOO.widget.TreeView=function(H,G){if(H){this.init(H)}if(G){this.buildTreeFromObject(G)}else{if(F.trim(this._el.innerHTML)){this.buildTreeFromMarkup(H)}}};var C=E.TreeView;C.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,_hasDblClickSubscriber:false,_dblClickTimer:null,currentFocus:null,singleNodeHighlight:false,_currentlyHighlighted:null,setExpandAnim:function(G){this._expandAnim=(E.TVAnim.isValid(G))?G:null},setCollapseAnim:function(G){this._collapseAnim=(E.TVAnim.isValid(G))?G:null},animateExpand:function(I,J){if(this._expandAnim&&this._animCount<this.maxAnim){var G=this;var H=E.TVAnim.getAnim(this._expandAnim,I,function(){G.expandComplete(J)});if(H){++this._animCount;this.fireEvent("animStart",{node:J,type:"expand"});H.animate()}return true}return false},animateCollapse:function(I,J){if(this._collapseAnim&&this._animCount<this.maxAnim){var G=this;var H=E.TVAnim.getAnim(this._collapseAnim,I,function(){G.collapseComplete(J)});if(H){++this._animCount;this.fireEvent("animStart",{node:J,type:"collapse"});H.animate()}return true}return false},expandComplete:function(G){--this._animCount;this.fireEvent("animComplete",{node:G,type:"expand"})},collapseComplete:function(G){--this._animCount;this.fireEvent("animComplete",{node:G,type:"collapse"})},init:function(I){this._el=D.get(I);this.id=D.generateId(this._el,"yui-tv-auto-id-");this.createEvent("animStart",this);this.createEvent("animComplete",this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",this);this.createEvent("enterKeyPressed",this);this.createEvent("clickEvent",this);this.createEvent("focusChanged",this);var G=this;this.createEvent("dblClickEvent",{scope:this,onSubscribeCallback:function(){G._hasDblClickSubscriber=true}});this.createEvent("labelClick",this);this.createEvent("highlightEvent",this);this._nodes=[];C.trees[this.id]=this;this.root=new E.RootNode(this);var H=E.LogWriter;if(this._initEditor){this._initEditor()}},buildTreeFromObject:function(G){var H=function(P,M){var L,Q,K,J,O,I,N;for(L=0;L<M.length;L++){Q=M[L];if(F.isString(Q)){K=new E.TextNode(Q,P)}else{if(F.isObject(Q)){J=Q.children;delete Q.children;O=Q.type||"text";delete Q.type;switch(F.isString(O)&&O.toLowerCase()){case"text":K=new E.TextNode(Q,P);break;case"menu":K=new E.MenuNode(Q,P);break;case"html":K=new E.HTMLNode(Q,P);break;default:if(F.isString(O)){I=E[O]}else{I=O}if(F.isObject(I)){for(N=I;N&&N!==E.Node;N=N.superclass.constructor){}if(N){K=new I(Q,P)}else{}}else{}}if(J){H(K,J)}}else{}}}};if(!F.isArray(G)){G=[G]}H(this.root,G)},buildTreeFromMarkup:function(I){var H=function(J){var N,Q,M=[],L={},K,O;for(N=D.getFirstChild(J);N;N=D.getNextSibling(N)){switch(N.tagName.toUpperCase()){case"LI":K="";L={expanded:D.hasClass(N,"expanded"),title:N.title||N.alt||null,className:F.trim(N.className.replace(/\bexpanded\b/,""))||null};Q=N.firstChild;if(Q.nodeType==3){K=F.trim(Q.nodeValue.replace(/[\n\t\r]*/g,""));if(K){L.type="text";L.label=K}else{Q=D.getNextSibling(Q)}}if(!K){if(Q.tagName.toUpperCase()=="A"){L.type="text";L.label=Q.innerHTML;L.href=Q.href;L.target=Q.target;L.title=Q.title||Q.alt||L.title}else{L.type="html";var P=document.createElement("div");P.appendChild(Q.cloneNode(true));L.html=P.innerHTML;L.hasIcon=true}}Q=D.getNextSibling(Q);switch(Q&&Q.tagName.toUpperCase()){case"UL":case"OL":L.children=H(Q);break}if(YAHOO.lang.JSON){O=N.getAttribute("yuiConfig");if(O){O=YAHOO.lang.JSON.parse(O);L=YAHOO.lang.merge(L,O)}}M.push(L);break;case"UL":case"OL":L={type:"text",label:"",children:H(Q)};M.push(L);break}}return M};var G=D.getChildrenBy(D.get(I),function(K){var J=K.tagName.toUpperCase();return J=="UL"||J=="OL"});if(G.length){this.buildTreeFromObject(H(G[0]))}else{}},_getEventTargetTdEl:function(H){var I=B.getTarget(H);while(I&&!(I.tagName.toUpperCase()=="TD"&&D.hasClass(I.parentNode,"ygtvrow"))){I=D.getAncestorByTagName(I,"td")}if(F.isNull(I)){return null}if(/\bygtv(blank)?depthcell/.test(I.className)){return null}if(I.id){var G=I.id.match(/\bygtv([^\d]*)(.*)/);if(G&&G[2]&&this._nodes[G[2]]){return I}}return null},_onClickEvent:function(J){var H=this,L=this._getEventTargetTdEl(J),I,K,G=function(M){I.focus();if(M||!I.href){I.toggle();try{B.preventDefault(J)}catch(N){}}};if(!L){return }I=this.getNodeByElement(L);if(!I){return }K=B.getTarget(J);if(D.hasClass(K,I.labelStyle)||D.getAncestorByClassName(K,I.labelStyle)){this.fireEvent("labelClick",I)}if(/\bygtv[tl][mp]h?h?/.test(L.className)){G(true)}else{if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}else{if(this._hasDblClickSubscriber){this._dblClickTimer=window.setTimeout(function(){H._dblClickTimer=null;if(H.fireEvent("clickEvent",{event:J,node:I})!==false){G()}},200)}else{if(H.fireEvent("clickEvent",{event:J,node:I})!==false){G()}}}}},_onDblClickEvent:function(G){if(!this._hasDblClickSubscriber){return }var H=this._getEventTargetTdEl(G);if(!H){return }if(!(/\bygtv[tl][mp]h?h?/.test(H.className))){this.fireEvent("dblClickEvent",{event:G,node:this.getNodeByElement(H)});if(this._dblClickTimer){window.clearTimeout(this._dblClickTimer);this._dblClickTimer=null}}},_onMouseOverEvent:function(G){var H;if((H=this._getEventTargetTdEl(G))&&(H=this.getNodeByElement(H))&&(H=H.getToggleEl())){H.className=H.className.replace(/\bygtv([lt])([mp])\b/gi,"ygtv$1$2h")}},_onMouseOutEvent:function(G){var H;if((H=this._getEventTargetTdEl(G))&&(H=this.getNodeByElement(H))&&(H=H.getToggleEl())){H.className=H.className.replace(/\bygtv([lt])([mp])h\b/gi,"ygtv$1$2")}},_onKeyDownEvent:function(L){var N=B.getTarget(L),K=this.getNodeByElement(N),J=K,G=YAHOO.util.KeyListener.KEY;switch(L.keyCode){case G.UP:do{if(J.previousSibling){J=J.previousSibling}else{J=J.parent}}while(J&&!J._canHaveFocus());if(J){J.focus()}B.preventDefault(L);break;case G.DOWN:do{if(J.nextSibling){J=J.nextSibling}else{J.expand();J=(J.children.length||null)&&J.children[0]}}while(J&&!J._canHaveFocus);if(J){J.focus()}B.preventDefault(L);break;case G.LEFT:do{if(J.parent){J=J.parent}else{J=J.previousSibling}}while(J&&!J._canHaveFocus());if(J){J.focus()}B.preventDefault(L);break;case G.RIGHT:var I=this,M,H=function(O){I.unsubscribe("expandComplete",H);M(O)};M=function(O){do{if(O.isDynamic()&&!O.childrenRendered){I.subscribe("expandComplete",H);O.expand();O=null;break}else{O.expand();if(O.children.length){O=O.children[0]}else{O=O.nextSibling}}}while(O&&!O._canHaveFocus());if(O){O.focus()}};M(J);B.preventDefault(L);break;case G.ENTER:if(K.href){if(K.target){window.open(K.href,K.target)}else{window.location(K.href)}}else{K.toggle()}this.fireEvent("enterKeyPressed",K);B.preventDefault(L);break;case G.HOME:J=this.getRoot();if(J.children.length){J=J.children[0]}if(J._canHaveFocus()){J.focus()}B.preventDefault(L);break;case G.END:J=J.parent.children;J=J[J.length-1];if(J._canHaveFocus()){J.focus()}B.preventDefault(L);break;case 107:if(L.shiftKey){K.parent.expandAll()}else{K.expand()}break;case 109:if(L.shiftKey){K.parent.collapseAll()}else{K.collapse()}break;default:break}},render:function(){var G=this.root.getHtml(),H=this.getEl();H.innerHTML=G;if(!this._hasEvents){B.on(H,"click",this._onClickEvent,this,true);B.on(H,"dblclick",this._onDblClickEvent,this,true);B.on(H,"mouseover",this._onMouseOverEvent,this,true);B.on(H,"mouseout",this._onMouseOutEvent,this,true);B.on(H,"keydown",this._onKeyDownEvent,this,true)}if(this.root.children[0]&&this.root.children[0].treeControl&&this.root.children[0].treeControl.config.controlType=="table"){this.attachListenerToRootByType("button");this.attachListenerToRootByType("image")}this._hasEvents=true},attachListenerToRootByType:function(N){var H=Ext.query(".treeTable ."+N,this.root.children[0].getDivEl());for(var J=0;J<H.length;J++){var K=H[J];var P=K.parentElement.parentElement;var R=P.parentElement;if(valueExists(K)&&K.nodeType!=3){var O=K.id.replace(N,"");var M=this.id+"_on"+capitalizeFirst(this.root.children[0].treeControl._levels[0].visibleFields[O].name);var G=this.root.children[0].treeControl._panelsData[0];var Q=R.id.split("_");var L=Q[Q.length-1];var I=this._nodes[L];this.attachListenerToElement(M,K,R,G,I)}}},getEl:function(){if(!this._el){this._el=D.get(this.id)}return this._el},regNode:function(G){this._nodes[G.index]=G},getRoot:function(){return this.root},setDynamicLoad:function(G,H){this.root.setDynamicLoad(G,H)},expandAll:function(){if(!this.locked){this.root.expandAll()}},collapseAll:function(){if(!this.locked){this.root.collapseAll()}},getNodeByIndex:function(H){var G=this._nodes[H];return(G)?G:null},getNodeByProperty:function(I,H){for(var G in this._nodes){if(this._nodes.hasOwnProperty(G)){var J=this._nodes[G];if((I in J&&J[I]==H)||(J.data&&H==J.data[I])){return J}}}return null},getNodesByProperty:function(J,I){var G=[];for(var H in this._nodes){if(this._nodes.hasOwnProperty(H)){var K=this._nodes[H];if((J in K&&K[J]==I)||(K.data&&I==K.data[J])){G.push(K)}}}return(G.length)?G:null},getNodesBy:function(I){var G=[];for(var H in this._nodes){if(this._nodes.hasOwnProperty(H)){var J=this._nodes[H];if(I(J)){G.push(J)}}}return(G.length)?G:null},getNodeByElement:function(I){var J=I,G,H=/ygtv([^\d]*)(.*)/;do{if(J&&J.id){G=J.id.match(H);if(G&&G[2]){return this.getNodeByIndex(G[2])}}J=J.parentNode;if(!J||!J.tagName){break}}while(J.id!==this.id&&J.tagName.toLowerCase()!=="body");return null},getHighlightedNode:function(){return this._currentlyHighlighted},removeNode:function(H,G){if(H.isRoot()){return false}var I=H.parent;if(I.parent){I=I.parent}this._deleteNode(H);if(G&&I&&I.childrenRendered){I.refresh()}return true},_removeChildren_animComplete:function(G){this.unsubscribe(this._removeChildren_animComplete);this.removeChildren(G.node)},removeChildren:function(G){if(G.expanded){if(this._collapseAnim){this.subscribe("animComplete",this._removeChildren_animComplete,this,true);E.Node.prototype.collapse.call(G);return }G.collapse()}while(G.children.length){this._deleteNode(G.children[0])}if(G.isRoot()){E.Node.prototype.expand.call(G)}G.childrenRendered=false;G.dynamicLoadComplete=false;G.updateIcon()},_deleteNode:function(G){this.removeChildren(G);this.popNode(G)},popNode:function(J){var K=J.parent;var H=[];for(var I=0,G=K.children.length;I<G;++I){if(K.children[I]!=J){H[H.length]=K.children[I]}}K.children=H;K.childrenRendered=false;if(J.previousSibling){J.previousSibling.nextSibling=J.nextSibling}if(J.nextSibling){J.nextSibling.previousSibling=J.previousSibling}if(this.currentFocus==J){this.currentFocus=null}if(this._currentlyHighlighted==J){this._currentlyHighlighted=null}J.parent=null;J.previousSibling=null;J.nextSibling=null;J.tree=null;delete this._nodes[J.index]},destroy:function(){if(this._destroyEditor){this._destroyEditor()}var H=this.getEl();B.removeListener(H,"click");B.removeListener(H,"dblclick");B.removeListener(H,"mouseover");B.removeListener(H,"mouseout");B.removeListener(H,"keydown");for(var G=0;G<this._nodes.length;G++){var I=this._nodes[G];if(I&&I.destroy){I.destroy()}}H.innerHTML="";this._hasEvents=false},toString:function(){return"TreeView "+this.id},getNodeCount:function(){return this.getRoot().getNodeCount()},getTreeDefinition:function(){return this.getRoot().getNodeDefinition()},onExpand:function(G){},onCollapse:function(G){},setNodesProperty:function(G,I,H){this.root.setNodesProperty(G,I);if(H){this.root.refresh()}},onEventToggleHighlight:function(H){var G;if("node" in H&&H.node instanceof E.Node){G=H.node}else{if(H instanceof E.Node){G=H}else{return false}}G.toggleHighlight();return false}};var A=C.prototype;A.draw=A.render;YAHOO.augment(C,YAHOO.util.EventProvider);C.nodeCount=0;C.trees=[];C.getTree=function(H){var G=C.trees[H];return(G)?G:null};C.getNode=function(H,I){var G=C.getTree(H);return(G)?G.getNodeByIndex(I):null};C.FOCUS_CLASS_NAME="ygtvfocus"})();(function(){var B=YAHOO.util.Dom,C=YAHOO.lang,A=YAHOO.util.Event;YAHOO.widget.Node=function(F,E,D){if(F){this.init(F,E,D)}};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,isLeaf:false,contentStyle:"",contentElId:null,enableHighlight:true,highlightState:0,propagateHighlightUp:false,propagateHighlightDown:false,className:null,_type:"Node",init:function(G,F,D){this.data={};this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;this.contentElId="ygtvcontentel"+this.index;if(C.isObject(G)){for(var E in G){if(G.hasOwnProperty(E)){if(E.charAt(0)!="_"&&!C.isUndefined(this[E])&&!C.isFunction(this[E])){this[E]=G[E]}else{this.data[E]=G[E]}}}}if(!C.isUndefined(D)){this.expanded=D}this.createEvent("parentChange",this);if(F){F.appendChild(this)}},applyParent:function(E){if(!E){return false}this.tree=E.tree;this.parent=E;this.depth=E.depth+1;this.tree.regNode(this);E.childrenRendered=false;for(var F=0,D=this.children.length;F<D;++F){this.children[F].applyParent(this)}this.fireEvent("parentChange");return true},appendChild:function(E){if(this.hasChildren()){var D=this.children[this.children.length-1];D.nextSibling=E;E.previousSibling=D}this.children[this.children.length]=E;E.applyParent(this);if(this.childrenRendered&&this.expanded){this.getChildrenEl().style.display=""}return E},appendTo:function(D){return D.appendChild(this)},insertBefore:function(D){var F=D.parent;if(F){if(this.tree){this.tree.popNode(this)}var E=D.isChildOf(F);F.children.splice(E,0,this);if(D.previousSibling){D.previousSibling.nextSibling=this}this.previousSibling=D.previousSibling;this.nextSibling=D;D.previousSibling=this;this.applyParent(F)}return this},insertAfter:function(D){var F=D.parent;if(F){if(this.tree){this.tree.popNode(this)}var E=D.isChildOf(F);if(!D.nextSibling){this.nextSibling=null;return this.appendTo(F)}F.children.splice(E+1,0,this);D.nextSibling.previousSibling=this;this.previousSibling=D;this.nextSibling=D.nextSibling;D.nextSibling=this;this.applyParent(F)}return this},isChildOf:function(E){if(E&&E.children){for(var F=0,D=E.children.length;F<D;++F){if(E.children[F]===this){return F}}}return -1},getSiblings:function(){var D=this.parent.children.slice(0);for(var E=0;E<D.length&&D[E]!=this;E++){}D.splice(E,1);if(D.length){return D}return null},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this)){if(this.hasChildren()){this.getChildrenEl().style.display=""}}},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this)){this.getChildrenEl().style.display="none"}},getElId:function(){return"ygtv"+this.index},getChildrenElId:function(){return"ygtvc"+this.index},getToggleElId:function(){return"ygtvt"+this.index},getEl:function(){return B.get(this.getElId())},getChildrenEl:function(){return B.get(this.getChildrenElId())},getToggleEl:function(){return B.get(this.getToggleElId())},getContentEl:function(){return B.get(this.contentElId)},collapse:function(){if(!this.expanded){return }var D=this.tree.onCollapse(this);if(false===D){return }D=this.tree.fireEvent("collapse",this);if(false===D){return }if(!this.getEl()){this.expanded=false}else{this.hideChildren();this.expanded=false;this.updateIcon()}D=this.tree.fireEvent("collapseComplete",this)},expand:function(F){if(this.isLoading||(this.expanded&&!F)){return }var D=true;if(!F){D=this.tree.onExpand(this);if(false===D){return }D=this.tree.fireEvent("expand",this)}if(false===D){return }if(!this.getEl()){this.expanded=true;return }if(!this.childrenRendered){this.getChildrenEl().innerHTML=this.renderChildren()}else{}this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return }if(!this.multiExpand){var G=this.getSiblings();for(var E=0;G&&E<G.length;++E){if(G[E]!=this&&G[E].expanded){G[E].collapse()}}}this.showChildren();D=this.tree.fireEvent("expandComplete",this)},updateIcon:function(){if(this.hasIcon){var D=this.getToggleEl();if(D){D.className=D.className.replace(/\bygtv(([tl][pmn]h?)|(loading))\b/gi,this.getStyle())}}},getStyle:function(){if(this.isLoading){return"ygtvloading"}else{var E=(this.nextSibling)?"t":"l";var D="n";if(this.hasChildren(true)||(this.isDynamic()&&!this.getIconMode())){D=(this.expanded)?"m":"p"}return"ygtv"+E+D}},getHoverStyle:function(){var D=this.getStyle();if(this.hasChildren(true)&&!this.isLoading){D+="h"}return D},expandAll:function(){var D=this.children.length;for(var E=0;E<D;++E){var F=this.children[E];if(F.isDynamic()){break}else{if(!F.multiExpand){break}else{F.expand();F.expandAll()}}}},collapseAll:function(){for(var D=0;D<this.children.length;++D){this.children[D].collapse();this.children[D].collapseAll()}},setDynamicLoad:function(D,E){if(D){this.dataLoader=D;this._dynLoad=true}else{this.dataLoader=null;this._dynLoad=false}if(E){this.iconMode=E}},isRoot:function(){return(this==this.tree.root)},isDynamic:function(){if(this.isLeaf){return false}else{return(!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad))}},getIconMode:function(){return(this.iconMode||this.tree.root.iconMode)},hasChildren:function(D){if(this.isLeaf){return false}else{return(this.children.length>0||(D&&this.isDynamic()&&!this.dynamicLoadComplete))}},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||this.isDynamic())){if(this.expanded){this.collapse()}else{this.expand()}}},getHtml:function(){this.childrenRendered=false;return['<div class="ygtvitem" id="',this.getElId(),'">',this.getNodeHtml(),this.getChildrenHtml(),"</div>"].join("")},getChildrenHtml:function(){var D=[];D[D.length]='<div class="ygtvchildren" id="'+this.getChildrenElId()+'"';if(!this.expanded||!this.hasChildren()){D[D.length]=' style="display:none;"'}D[D.length]=">";if((this.hasChildren(true)&&this.expanded)||(this.renderHidden&&!this.isDynamic())){D[D.length]=this.renderChildren()}D[D.length]="</div>";return D.join("")},renderChildren:function(){var D=this;if(this.isDynamic()&&!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader){setTimeout(function(){D.dataLoader(D,function(){D.loadComplete()})},10)}else{if(this.tree.root.dataLoader){setTimeout(function(){D.tree.root.dataLoader(D,function(){D.loadComplete()})},10)}else{return"Error: data loader not found or not specified."}}return""}else{return this.completeRender()}},completeRender:function(){var E=[];for(var D=0;D<this.children.length;++D){E[E.length]=this.children[D].getHtml()}this.childrenRendered=true;return E.join("")},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.propagateHighlightDown){if(this.highlightState===1&&!this.tree.singleNodeHighlight){for(var D=0;D<this.children.length;D++){this.children[D].highlight(true)}}else{if(this.highlightState===0||this.tree.singleNodeHighlight){for(D=0;D<this.children.length;D++){this.children[D].unhighlight(true)}}}}this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=false},getAncestor:function(E){if(E>=this.depth||E<0){return null}var D=this.parent;while(D.depth>E){D=D.parent}return D},getDepthStyle:function(D){return(this.getAncestor(D).nextSibling)?"ygtvdepthcell":"ygtvblankdepthcell"},getNodeHtml:function(){var E=[];E[E.length]='<table id="ygtvtableel'+this.index+'" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth'+this.depth;if(this.enableHighlight){E[E.length]=" ygtv-highlight"+this.highlightState}if(this.className){E[E.length]=" "+this.className}E[E.length]='"><tr class="ygtvrow">';for(var D=0;D<this.depth;++D){E[E.length]='<td class="ygtvcell '+this.getDepthStyle(D)+'"><div class="ygtvspacer"></div></td>'}if(this.hasIcon){E[E.length]='<td id="'+this.getToggleElId();E[E.length]='" class="ygtvcell ';E[E.length]=this.getStyle();E[E.length]='"><a href="#" class="ygtvspacer">&#160;</a></td>'}E[E.length]='<td id="'+this.contentElId;E[E.length]='" class="ygtvcell ';E[E.length]=this.contentStyle+' ygtvcontent" ';E[E.length]=(this.nowrap)?' nowrap="nowrap" ':"";E[E.length]=" >";E[E.length]=this.getContentHtml();E[E.length]="</td></tr></table>";return E.join("")},getContentHtml:function(){return""},refresh:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.hasIcon){var D=this.getToggleEl();if(D){D.className=D.className.replace(/\bygtv[lt][nmp]h*\b/gi,this.getStyle())}}},toString:function(){return this._type+" ("+this.index+")"},_focusHighlightedItems:[],_focusedItem:null,_canHaveFocus:function(){return this.getEl().getElementsByTagName("a").length>0},_removeFocus:function(){if(this._focusedItem){A.removeListener(this._focusedItem,"blur");this._focusedItem=null}var D;while((D=this._focusHighlightedItems.shift())){B.removeClass(D,YAHOO.widget.TreeView.FOCUS_CLASS_NAME)}},focus:function(){var G=false,D=this;if(this.tree.currentFocus){this.tree.currentFocus._removeFocus()}var E=function(H){if(H.parent){E(H.parent);H.parent.expand()}};E(this);var F=null;if(D.getEl()!=null){F=D.getEl().firstChild}B.getElementsBy(function(H){return(/ygtv(([tl][pmn]h?)|(content))/).test(H.className)},"td",F,function(I){B.addClass(I,YAHOO.widget.TreeView.FOCUS_CLASS_NAME);if(!G){var H=I.getElementsByTagName("a");if(H.length){H=H[0];H.focus();D._focusedItem=H;A.on(H,"blur",function(){D.tree.fireEvent("focusChanged",{oldNode:D.tree.currentFocus,newNode:null});D.tree.currentFocus=null;D._removeFocus()});G=true}}D._focusHighlightedItems.push(I)});if(G){this.tree.fireEvent("focusChanged",{oldNode:this.tree.currentFocus,newNode:this});this.tree.currentFocus=this}else{this.tree.fireEvent("focusChanged",{oldNode:D.tree.currentFocus,newNode:null});this.tree.currentFocus=null;this._removeFocus()}return G},getNodeCount:function(){for(var D=0,E=0;D<this.children.length;D++){E+=this.children[D].getNodeCount()}return E+1},getNodeDefinition:function(){if(this.isDynamic()){return false}var G,D=C.merge(this.data),F=[];if(this.expanded){D.expanded=this.expanded}if(!this.multiExpand){D.multiExpand=this.multiExpand}if(!this.renderHidden){D.renderHidden=this.renderHidden}if(!this.hasIcon){D.hasIcon=this.hasIcon}if(this.nowrap){D.nowrap=this.nowrap}if(this.className){D.className=this.className}if(this.editable){D.editable=this.editable}if(this.enableHighlight){D.enableHighlight=this.enableHighlight}if(this.highlightState){D.highlightState=this.highlightState}if(this.propagateHighlightUp){D.propagateHighlightUp=this.propagateHighlightUp}if(this.propagateHighlightDown){D.propagateHighlightDown=this.propagateHighlightDown}D.type=this._type;for(var E=0;E<this.children.length;E++){G=this.children[E].getNodeDefinition();if(G===false){return false}F.push(G)}if(F.length){D.children=F}return D},getToggleLink:function(){return"return false;"},setNodesProperty:function(D,G,F){if(D.charAt(0)!="_"&&!C.isUndefined(this[D])&&!C.isFunction(this[D])){this[D]=G}else{this.data[D]=G}for(var E=0;E<this.children.length;E++){this.children[E].setNodesProperty(D,G)}if(F){this.refresh()}},toggleHighlight:function(){if(this.enableHighlight){if(this.highlightState==1){this.unhighlight()}else{this.highlight()}}},highlight:function(E){if(this.enableHighlight){if(this.tree.singleNodeHighlight){if(this.tree._currentlyHighlighted){this.tree._currentlyHighlighted.unhighlight(E)}this.tree._currentlyHighlighted=this}this.highlightState=1;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown){for(var D=0;D<this.children.length;D++){this.children[D].highlight(true)}}if(this.propagateHighlightUp){if(this.parent){this.parent._childrenHighlighted()}}}if(!E){this.tree.fireEvent("highlightEvent",this)}}},unhighlight:function(E){if(this.enableHighlight){this.tree._currentlyHighlighted=null;this.highlightState=0;this._setHighlightClassName();if(!this.tree.singleNodeHighlight){if(this.propagateHighlightDown){for(var D=0;D<this.children.length;D++){this.children[D].unhighlight(true)}}if(this.propagateHighlightUp){if(this.parent){this.parent._childrenHighlighted()}}}if(!E){this.tree.fireEvent("highlightEvent",this)}}},_childrenHighlighted:function(){var F=false,E=false;if(this.enableHighlight){for(var D=0;D<this.children.length;D++){switch(this.children[D].highlightState){case 0:E=true;break;case 1:F=true;break;case 2:F=E=true;break}}if(F&&E){this.highlightState=2}else{if(F){this.highlightState=1}else{this.highlightState=0}}this._setHighlightClassName();if(this.propagateHighlightUp){if(this.parent){this.parent._childrenHighlighted()}}}},_setHighlightClassName:function(){var D=B.get("ygtvtableel"+this.index);if(D){D.className=D.className.replace(/\bygtv-highlight\d\b/gi,"ygtv-highlight"+this.highlightState)}}};YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider)})();YAHOO.widget.RootNode=function(A){this.init(null,null,true);this.tree=A};YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{_type:"RootNode",getNodeHtml:function(){return""},toString:function(){return this._type},loadComplete:function(){this.tree.draw()},getNodeCount:function(){for(var A=0,B=0;A<this.children.length;A++){B+=this.children[A].getNodeCount()}return B},getNodeDefinition:function(){for(var C,A=[],B=0;B<this.children.length;B++){C=this.children[B].getNodeDefinition();if(C===false){return false}A.push(C)}return A},collapse:function(){},expand:function(){},getSiblings:function(){return null},focus:function(){}});(function(){var B=YAHOO.util.Dom,C=YAHOO.lang,A=YAHOO.util.Event;YAHOO.widget.TextNode=function(F,E,D){if(F){if(C.isString(F)){F={label:F}}this.init(F,E,D);this.setUpLabel(F)}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel",labelElId:null,label:null,title:null,href:null,target:"_self",_type:"TextNode",setUpLabel:function(D){if(C.isString(D)){D={label:D}}else{if(D.style){this.labelStyle=D.style}}this.label=D.label;this.labelElId="ygtvlabelel"+this.index},getLabelEl:function(){return B.get(this.labelElId)},getContentHtml:function(){var D=[];D[D.length]=this.href?"<a":"<span";D[D.length]=' id="'+this.labelElId+'"';D[D.length]=' class="'+this.labelStyle+'"';if(this.href){D[D.length]=' href="'+this.href+'"';D[D.length]=' target="'+this.target+'"'}if(this.title){D[D.length]=' title="'+this.title+'"'}D[D.length]=" >";D[D.length]=this.label;D[D.length]=this.href?"</a>":"</span>";return D.join("")},getNodeDefinition:function(){var D=YAHOO.widget.TextNode.superclass.getNodeDefinition.call(this);if(D===false){return false}D.label=this.label;if(this.labelStyle!="ygtvlabel"){D.style=this.labelStyle}if(this.title){D.title=this.title}if(this.href){D.href=this.href}if(this.target!="_self"){D.target=this.target}return D},toString:function(){return YAHOO.widget.TextNode.superclass.toString.call(this)+": "+this.label},onLabelClick:function(){return false},refresh:function(){YAHOO.widget.TextNode.superclass.refresh.call(this);var D=this.getLabelEl();D.innerHTML=this.label;if(D.tagName.toUpperCase()=="A"){D.href=this.href;D.target=this.target}}})})();YAHOO.widget.MenuNode=function(C,B,A){YAHOO.widget.MenuNode.superclass.constructor.call(this,C,B,A);this.multiExpand=false};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{_type:"MenuNode"});(function(){var B=YAHOO.util.Dom,C=YAHOO.lang,A=YAHOO.util.Event;YAHOO.widget.HTMLNode=function(G,F,E,D){if(G){this.init(G,F,E);this.initContent(G,D)}};YAHOO.extend(YAHOO.widget.HTMLNode,YAHOO.widget.Node,{contentStyle:"ygtvhtml",html:null,_type:"HTMLNode",initContent:function(E,D){this.setHtml(E);this.contentElId="ygtvcontentel"+this.index;if(!C.isUndefined(D)){this.hasIcon=D}},setHtml:function(E){this.html=(typeof E==="string")?E:E.html;var D=this.getContentEl();if(D){D.innerHTML=this.html}},getContentHtml:function(){return this.html},getNodeDefinition:function(){var D=YAHOO.widget.HTMLNode.superclass.getNodeDefinition.call(this);if(D===false){return false}D.html=this.html;return D}})})();(function(){var B=YAHOO.util.Dom,C=YAHOO.lang,A=YAHOO.util.Event,D=YAHOO.widget.Calendar;YAHOO.widget.DateNode=function(G,F,E){YAHOO.widget.DateNode.superclass.constructor.call(this,G,F,E)};YAHOO.extend(YAHOO.widget.DateNode,YAHOO.widget.TextNode,{_type:"DateNode",calendarConfig:null,fillEditorContainer:function(G){var H,F=G.inputContainer;if(C.isUndefined(D)){B.replaceClass(G.editorPanel,"ygtv-edit-DateNode","ygtv-edit-TextNode");YAHOO.widget.DateNode.superclass.fillEditorContainer.call(this,G);return }if(G.nodeType!=this._type){G.nodeType=this._type;G.saveOnEnter=false;G.node.destroyEditorContents(G);G.inputObject=H=new D(F.appendChild(document.createElement("div")));if(this.calendarConfig){H.cfg.applyConfig(this.calendarConfig,true);H.cfg.fireQueue()}H.selectEvent.subscribe(function(){this.tree._closeEditor(true)},this,true)}else{H=G.inputObject}G.oldValue=this.label;H.cfg.setProperty("selected",this.label,false);var I=H.cfg.getProperty("DATE_FIELD_DELIMITER");var E=this.label.split(I);H.cfg.setProperty("pagedate",E[H.cfg.getProperty("MDY_MONTH_POSITION")-1]+I+E[H.cfg.getProperty("MDY_YEAR_POSITION")-1]);H.cfg.fireQueue();H.render();H.oDomContainer.focus()},getEditorValue:function(F){if(C.isUndefined(D)){return F.inputElement.value}else{var H=F.inputObject,G=H.getSelectedDates()[0],E=[];E[H.cfg.getProperty("MDY_DAY_POSITION")-1]=G.getDate();E[H.cfg.getProperty("MDY_MONTH_POSITION")-1]=G.getMonth()+1;E[H.cfg.getProperty("MDY_YEAR_POSITION")-1]=G.getFullYear();return E.join(H.cfg.getProperty("DATE_FIELD_DELIMITER"))}},displayEditedValue:function(G,E){var F=E.node;F.label=G;F.getLabelEl().innerHTML=G},getNodeDefinition:function(){var E=YAHOO.widget.DateNode.superclass.getNodeDefinition.call(this);if(E===false){return false}if(this.calendarConfig){E.calendarConfig=this.calendarConfig}return E}})})();(function(){var E=YAHOO.util.Dom,F=YAHOO.lang,B=YAHOO.util.Event,D=YAHOO.widget.TreeView,C=D.prototype;D.editorData={active:false,whoHasIt:null,nodeType:null,editorPanel:null,inputContainer:null,buttonsContainer:null,node:null,saveOnEnter:true,oldValue:undefined};C.validator=null;C._initEditor=function(){this.createEvent("editorSaveEvent",this);this.createEvent("editorCancelEvent",this)};C._nodeEditing=function(M){if(M.fillEditorContainer&&M.editable){var I,K,L,J,H=D.editorData;H.active=true;H.whoHasIt=this;if(!H.nodeType){H.editorPanel=I=document.body.appendChild(document.createElement("div"));E.addClass(I,"ygtv-label-editor");L=H.buttonsContainer=I.appendChild(document.createElement("div"));E.addClass(L,"ygtv-button-container");J=L.appendChild(document.createElement("button"));E.addClass(J,"ygtvok");J.innerHTML=" ";J=L.appendChild(document.createElement("button"));E.addClass(J,"ygtvcancel");J.innerHTML=" ";B.on(L,"click",function(O){var P=B.getTarget(O);var N=D.editorData.node;if(E.hasClass(P,"ygtvok")){B.stopEvent(O);this._closeEditor(true)}if(E.hasClass(P,"ygtvcancel")){B.stopEvent(O);this._closeEditor(false)}},this,true);H.inputContainer=I.appendChild(document.createElement("div"));E.addClass(H.inputContainer,"ygtv-input");B.on(I,"keydown",function(P){var O=D.editorData,N=YAHOO.util.KeyListener.KEY;switch(P.keyCode){case N.ENTER:B.stopEvent(P);if(O.saveOnEnter){this._closeEditor(true)}break;case N.ESCAPE:B.stopEvent(P);this._closeEditor(false);break}},this,true)}else{I=H.editorPanel}H.node=M;if(H.nodeType){E.removeClass(I,"ygtv-edit-"+H.nodeType)}E.addClass(I," ygtv-edit-"+M._type);K=E.getXY(M.getContentEl());E.setStyle(I,"left",K[0]+"px");E.setStyle(I,"top",K[1]+"px");E.setStyle(I,"display","block");I.focus();M.fillEditorContainer(H);return true}};C.onEventEditNode=function(H){if(H instanceof YAHOO.widget.Node){H.editNode()}else{if(H.node instanceof YAHOO.widget.Node){H.node.editNode()}}};C._closeEditor=function(J){var H=D.editorData,I=H.node,K=true;if(J){K=H.node.saveEditorValue(H)!==false}else{this.fireEvent("editorCancelEvent",I)}if(K){E.setStyle(H.editorPanel,"display","none");H.active=false;I.focus()}};C._destroyEditor=function(){var H=D.editorData;if(H&&H.nodeType&&(!H.active||H.whoHasIt===this)){B.removeListener(H.editorPanel,"keydown");B.removeListener(H.buttonContainer,"click");H.node.destroyEditorContents(H);document.body.removeChild(H.editorPanel);H.nodeType=H.editorPanel=H.inputContainer=H.buttonsContainer=H.whoHasIt=H.node=null;H.active=false}};var G=YAHOO.widget.Node.prototype;G.editable=false;G.editNode=function(){this.tree._nodeEditing(this)};G.fillEditorContainer=null;G.destroyEditorContents=function(H){B.purgeElement(H.inputContainer,true);H.inputContainer.innerHTML=""};G.saveEditorValue=function(H){var J=H.node,K,I=J.tree.validator;K=this.getEditorValue(H);if(F.isFunction(I)){K=I(K,H.oldValue,J);if(F.isUndefined(K)){return false}}if(this.tree.fireEvent("editorSaveEvent",{newValue:K,oldValue:H.oldValue,node:J})!==false){this.displayEditedValue(K,H)}};G.getEditorValue=function(H){};G.displayEditedValue=function(I,H){};var A=YAHOO.widget.TextNode.prototype;A.fillEditorContainer=function(I){var H;if(I.nodeType!=this._type){I.nodeType=this._type;I.saveOnEnter=true;I.node.destroyEditorContents(I);I.inputElement=H=I.inputContainer.appendChild(document.createElement("input"))}else{H=I.inputElement}I.oldValue=this.label;H.value=this.label;H.focus();H.select()};A.getEditorValue=function(H){return H.inputElement.value};A.displayEditedValue=function(J,H){var I=H.node;I.label=J;I.getLabelEl().innerHTML=J};A.destroyEditorContents=function(H){H.inputContainer.innerHTML=""}})();YAHOO.widget.TVAnim=function(){return{FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(B,A,C){if(YAHOO.widget[B]){return new YAHOO.widget[B](A,C)}else{return null}},isValid:function(A){return(YAHOO.widget[A])}}}();YAHOO.widget.TVFadeIn=function(A,B){this.el=A;this.callback=B};YAHOO.widget.TVFadeIn.prototype={animate:function(){var D=this;var C=this.el.style;C.opacity=0.1;C.filter="alpha(opacity=10)";C.display="";var B=0.4;var A=new YAHOO.util.Anim(this.el,{opacity:{from:0.1,to:1,unit:""}},B);A.onComplete.subscribe(function(){D.onComplete()});A.animate()},onComplete:function(){this.callback()},toString:function(){return"TVFadeIn"}};YAHOO.widget.TVFadeOut=function(A,B){this.el=A;this.callback=B};YAHOO.widget.TVFadeOut.prototype={animate:function(){var C=this;var B=0.4;var A=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:0.1,unit:""}},B);A.onComplete.subscribe(function(){C.onComplete()});A.animate()},onComplete:function(){var A=this.el.style;A.display="none";A.opacity=1;A.filter="alpha(opacity=100)";this.callback()},toString:function(){return"TVFadeOut"}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"2.8.1",build:"19"});YAHOO.widget.LogMsg=function(A){this.msg=this.time=this.category=this.source=this.sourceDetail=null;if(A&&(A.constructor==Object)){for(var B in A){if(A.hasOwnProperty(B)){this[B]=A[B]}}}};YAHOO.widget.LogWriter=function(A){if(!A){YAHOO.log("Could not instantiate LogWriter due to invalid source.","error","LogWriter");return }this._source=A};YAHOO.widget.LogWriter.prototype.toString=function(){return"LogWriter "+this._sSource};YAHOO.widget.LogWriter.prototype.log=function(A,B){YAHOO.widget.Logger.log(A,B,this._source)};YAHOO.widget.LogWriter.prototype.getSource=function(){return this._source};YAHOO.widget.LogWriter.prototype.setSource=function(A){if(!A){YAHOO.log("Could not set source due to invalid source.","error",this.toString());return }else{this._source=A}};YAHOO.widget.LogWriter.prototype._source=null;if(!YAHOO.widget.Logger){YAHOO.widget.Logger={loggerEnabled:true,_browserConsoleEnabled:false,categories:["info","warn","error","time","window"],sources:["global"],_stack:[],maxStackEntries:2500,_startTime:new Date().getTime(),_lastTime:null,_windowErrorsHandled:false,_origOnWindowError:null};YAHOO.widget.Logger.log=function(B,F,G){if(this.loggerEnabled){if(!F){F="info"}else{F=F.toLocaleLowerCase();if(this._isNewCategory(F)){this._createNewCategory(F)}}var C="global";var A=null;if(G){var D=G.indexOf(" ");if(D>0){C=G.substring(0,D);A=G.substring(D,G.length)}else{C=G}if(this._isNewSource(C)){this._createNewSource(C)}}var H=new Date();var J=new YAHOO.widget.LogMsg({msg:B,time:H,category:F,source:C,sourceDetail:A});var I=this._stack;var E=this.maxStackEntries;if(E&&!isNaN(E)&&(I.length>=E)){I.shift()}I.push(J);this.newLogEvent.fire(J);if(this._browserConsoleEnabled){this._printToBrowserConsole(J)}return true}else{return false}};YAHOO.widget.Logger.reset=function(){this._stack=[];this._startTime=new Date().getTime();this.loggerEnabled=true;this.log("Logger reset");this.logResetEvent.fire()};YAHOO.widget.Logger.getStack=function(){return this._stack};YAHOO.widget.Logger.getStartTime=function(){return this._startTime};YAHOO.widget.Logger.disableBrowserConsole=function(){YAHOO.log("Logger output to the function console.log() has been disabled.");this._browserConsoleEnabled=false};YAHOO.widget.Logger.enableBrowserConsole=function(){this._browserConsoleEnabled=true;YAHOO.log("Logger output to the function console.log() has been enabled.")};YAHOO.widget.Logger.handleWindowErrors=function(){if(!YAHOO.widget.Logger._windowErrorsHandled){if(window.error){YAHOO.widget.Logger._origOnWindowError=window.onerror}window.onerror=YAHOO.widget.Logger._onWindowError;YAHOO.widget.Logger._windowErrorsHandled=true;YAHOO.log("Logger handling of window.onerror has been enabled.")}else{YAHOO.log("Logger handling of window.onerror had already been enabled.")}};YAHOO.widget.Logger.unhandleWindowErrors=function(){if(YAHOO.widget.Logger._windowErrorsHandled){if(YAHOO.widget.Logger._origOnWindowError){window.onerror=YAHOO.widget.Logger._origOnWindowError;YAHOO.widget.Logger._origOnWindowError=null}else{window.onerror=null}YAHOO.widget.Logger._windowErrorsHandled=false;YAHOO.log("Logger handling of window.onerror has been disabled.")}else{YAHOO.log("Logger handling of window.onerror had already been disabled.")}};YAHOO.widget.Logger.categoryCreateEvent=new YAHOO.util.CustomEvent("categoryCreate",this,true);YAHOO.widget.Logger.sourceCreateEvent=new YAHOO.util.CustomEvent("sourceCreate",this,true);YAHOO.widget.Logger.newLogEvent=new YAHOO.util.CustomEvent("newLog",this,true);YAHOO.widget.Logger.logResetEvent=new YAHOO.util.CustomEvent("logReset",this,true);YAHOO.widget.Logger._createNewCategory=function(A){this.categories.push(A);this.categoryCreateEvent.fire(A)};YAHOO.widget.Logger._isNewCategory=function(B){for(var A=0;A<this.categories.length;A++){if(B==this.categories[A]){return false}}return true};YAHOO.widget.Logger._createNewSource=function(A){this.sources.push(A);this.sourceCreateEvent.fire(A)};YAHOO.widget.Logger._isNewSource=function(A){if(A){for(var B=0;B<this.sources.length;B++){if(A==this.sources[B]){return false}}return true}};YAHOO.widget.Logger._printToBrowserConsole=function(C){if(window.console&&console.log){var E=C.category;var D=C.category.substring(0,4).toUpperCase();var G=C.time;var F;if(G.toLocaleTimeString){F=G.toLocaleTimeString()}else{F=G.toString()}var H=G.getTime();var B=(YAHOO.widget.Logger._lastTime)?(H-YAHOO.widget.Logger._lastTime):0;YAHOO.widget.Logger._lastTime=H;var A=F+" ("+B+"ms): "+C.source+": ";if(YAHOO.env.ua.webkit){A+=C.msg}console.log(A,C.msg)}};YAHOO.widget.Logger._onWindowError=function(A,C,B){try{YAHOO.widget.Logger.log(A+" ("+C+", line "+B+")","window");if(YAHOO.widget.Logger._origOnWindowError){YAHOO.widget.Logger._origOnWindowError()}}catch(D){return false}};YAHOO.widget.Logger.log("Logger initialized")}(function(){var C=YAHOO.widget.Logger,D=YAHOO.util,E=D.Dom,A=D.Event,G=document;function B(I,H){I=G.createElement(I);if(H){for(var J in H){if(H.hasOwnProperty(J)){I[J]=H[J]}}}return I}function F(I,H){this._sName=F._index;F._index++;this._init.apply(this,arguments);if(this.autoRender!==false){this.render()}}YAHOO.lang.augmentObject(F,{_index:0,ENTRY_TEMPLATE:(function(){return B("pre",{className:"yui-log-entry"})})(),VERBOSE_TEMPLATE:"<p><span class='{category}'>{label}</span> {totalTime}ms (+{elapsedTime}) {localTime}:</p><p>{sourceAndDetail}</p><p>{message}</p>",BASIC_TEMPLATE:"<p><span class='{category}'>{label}</span> {totalTime}ms (+{elapsedTime}) {localTime}: {sourceAndDetail}: {message}</p>"});F.prototype={logReaderEnabled:true,width:null,height:null,top:null,left:null,right:null,bottom:null,fontSize:null,footerEnabled:true,verboseOutput:true,entryFormat:null,newestOnTop:true,outputBuffer:100,thresholdMax:500,thresholdMin:100,isCollapsed:false,isPaused:false,draggable:true,toString:function(){return"LogReader instance"+this._sName},pause:function(){this.isPaused=true;this._timeout=null;this.logReaderEnabled=false;if(this._btnPause){this._btnPause.value="Resume"}},resume:function(){this.isPaused=false;this.logReaderEnabled=true;this._printBuffer();if(this._btnPause){this._btnPause.value="Pause"}},render:function(){if(this.rendered){return }this._initContainerEl();this._initHeaderEl();this._initConsoleEl();this._initFooterEl();this._initCategories();this._initSources();this._initDragDrop();C.newLogEvent.subscribe(this._onNewLog,this);C.logResetEvent.subscribe(this._onReset,this);C.categoryCreateEvent.subscribe(this._onCategoryCreate,this);C.sourceCreateEvent.subscribe(this._onSourceCreate,this);this.rendered=true;this._filterLogs()},destroy:function(){A.purgeElement(this._elContainer,true);this._elContainer.innerHTML="";this._elContainer.parentNode.removeChild(this._elContainer);this.rendered=false},hide:function(){this._elContainer.style.display="none"},show:function(){this._elContainer.style.display="block"},collapse:function(){this._elConsole.style.display="none";if(this._elFt){this._elFt.style.display="none"}this._btnCollapse.value="Expand";this.isCollapsed=true},expand:function(){this._elConsole.style.display="block";if(this._elFt){this._elFt.style.display="block"}this._btnCollapse.value="Collapse";this.isCollapsed=false},getCheckbox:function(H){return this._filterCheckboxes[H]},getCategories:function(){return this._categoryFilters},showCategory:function(I){var K=this._categoryFilters;if(K.indexOf){if(K.indexOf(I)>-1){return }}else{for(var H=0;H<K.length;H++){if(K[H]===I){return }}}this._categoryFilters.push(I);this._filterLogs();var J=this.getCheckbox(I);if(J){J.checked=true}},hideCategory:function(I){var K=this._categoryFilters;for(var H=0;H<K.length;H++){if(I==K[H]){K.splice(H,1);break}}this._filterLogs();var J=this.getCheckbox(I);if(J){J.checked=false}},getSources:function(){return this._sourceFilters},showSource:function(H){var K=this._sourceFilters;if(K.indexOf){if(K.indexOf(H)>-1){return }}else{for(var I=0;I<K.length;I++){if(H==K[I]){return }}}K.push(H);this._filterLogs();var J=this.getCheckbox(H);if(J){J.checked=true}},hideSource:function(H){var K=this._sourceFilters;for(var I=0;I<K.length;I++){if(H==K[I]){K.splice(I,1);break}}this._filterLogs();var J=this.getCheckbox(H);if(J){J.checked=false}},clearConsole:function(){this._timeout=null;this._buffer=[];this._consoleMsgCount=0;var H=this._elConsole;H.innerHTML=""},setTitle:function(H){this._title.innerHTML=this.html2Text(H)},getLastTime:function(){return this._lastTime},formatMsg:function(I){var H=this.entryFormat||(this.verboseOutput?F.VERBOSE_TEMPLATE:F.BASIC_TEMPLATE),J={category:I.category,label:I.category.substring(0,4).toUpperCase(),sourceAndDetail:I.sourceDetail?I.source+" "+I.sourceDetail:I.source,message:this.html2Text(I.msg||I.message||"")};if(I.time&&I.time.getTime){J.localTime=I.time.toLocaleTimeString?I.time.toLocaleTimeString():I.time.toString();J.elapsedTime=I.time.getTime()-this.getLastTime();J.totalTime=I.time.getTime()-C.getStartTime()}var K=F.ENTRY_TEMPLATE.cloneNode(true);if(this.verboseOutput){K.className+=" yui-log-verbose"}K.innerHTML=H.replace(/\{(\w+)\}/g,function(L,M){return(M in J)?J[M]:""});return K},html2Text:function(H){if(H){H+="";return H.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;")}return""},_sName:null,_buffer:null,_consoleMsgCount:0,_lastTime:null,_timeout:null,_filterCheckboxes:null,_categoryFilters:null,_sourceFilters:null,_elContainer:null,_elHd:null,_elCollapse:null,_btnCollapse:null,_title:null,_elConsole:null,_elFt:null,_elBtns:null,_elCategoryFilters:null,_elSourceFilters:null,_btnPause:null,_btnClear:null,_init:function(H,I){this._buffer=[];this._filterCheckboxes={};this._lastTime=C.getStartTime();if(I&&(I.constructor==Object)){for(var J in I){if(I.hasOwnProperty(J)){this[J]=I[J]}}}this._elContainer=E.get(H);YAHOO.log("LogReader initialized",null,this.toString())},_initContainerEl:function(){if(!this._elContainer||!/div$/i.test(this._elContainer.tagName)){this._elContainer=G.body.insertBefore(B("div"),G.body.firstChild);E.addClass(this._elContainer,"yui-log-container")}E.addClass(this._elContainer,"yui-log");var J=this._elContainer.style,H=["width","right","top","fontSize"],K,I;for(I=H.length-1;I>=0;--I){K=H[I];if(this[K]){J[K]=this[K]}}if(this.left){J.left=this.left;J.right="auto"}if(this.bottom){J.bottom=this.bottom;J.top="auto"}if(YAHOO.env.ua.opera){G.body.style+=""}},_initHeaderEl:function(){if(this._elHd){A.purgeElement(this._elHd,true);this._elHd.innerHTML=""}this._elHd=B("div",{id:"yui-log-hd"+this._sName,className:"yui-log-hd"});this._elCollapse=B("div",{className:"yui-log-btns"});this._btnCollapse=B("input",{type:"button",className:"yui-log-button",value:"Collapse"});A.on(this._btnCollapse,"click",this._onClickCollapseBtn,this);this._title=B("h4",{innerHTML:"Logger Console"});this._elCollapse.appendChild(this._btnCollapse);this._elHd.appendChild(this._elCollapse);this._elHd.appendChild(this._title);this._elContainer.appendChild(this._elHd)},_initConsoleEl:function(){if(this._elConsole){A.purgeElement(this._elConsole,true);this._elConsole.innerHTML=""}this._elConsole=B("div",{className:"yui-log-bd"});if(this.height){this._elConsole.style.height=this.height}this._elContainer.appendChild(this._elConsole)},_initFooterEl:function(){if(this.footerEnabled){if(this._elFt){A.purgeElement(this._elFt,true);this._elFt.innerHTML=""}this._elFt=B("div",{className:"yui-log-ft"});this._elBtns=B("div",{className:"yui-log-btns"});this._btnPause=B("input",{type:"button",className:"yui-log-button",value:"Pause"});A.on(this._btnPause,"click",this._onClickPauseBtn,this);this._btnClear=B("input",{type:"button",className:"yui-log-button",value:"Clear"});A.on(this._btnClear,"click",this._onClickClearBtn,this);this._elCategoryFilters=B("div",{className:"yui-log-categoryfilters"});this._elSourceFilters=B("div",{className:"yui-log-sourcefilters"});this._elBtns.appendChild(this._btnPause);this._elBtns.appendChild(this._btnClear);this._elFt.appendChild(this._elBtns);this._elFt.appendChild(this._elCategoryFilters);this._elFt.appendChild(this._elSourceFilters);this._elContainer.appendChild(this._elFt)}},_initDragDrop:function(){if(D.DD&&this.draggable&&this._elHd){var H=new D.DD(this._elContainer);H.setHandleElId(this._elHd.id);this._elHd.style.cursor="move"}},_initCategories:function(){this._categoryFilters=[];var J=C.categories;for(var H=0;H<J.length;H++){var I=J[H];this._categoryFilters.push(I);if(this._elCategoryFilters){this._createCategoryCheckbox(I)}}},_initSources:function(){this._sourceFilters=[];var J=C.sources;for(var I=0;I<J.length;I++){var H=J[I];this._sourceFilters.push(H);if(this._elSourceFilters){this._createSourceCheckbox(H)}}},_createCategoryCheckbox:function(K){if(this._elFt){var J=B("span",{className:"yui-log-filtergrp"}),H=B("input",{id:"yui-log-filter-"+K+this._sName,className:"yui-log-filter-"+K,type:"checkbox",category:K}),I=B("label",{htmlFor:H.id,className:K,innerHTML:K});A.on(H,"click",this._onCheckCategory,this);this._filterCheckboxes[K]=H;J.appendChild(H);J.appendChild(I);this._elCategoryFilters.appendChild(J);H.checked=true}},_createSourceCheckbox:function(H){if(this._elFt){var K=B("span",{className:"yui-log-filtergrp"}),I=B("input",{id:"yui-log-filter-"+H+this._sName,className:"yui-log-filter-"+H,type:"checkbox",source:H}),J=B("label",{htmlFor:I.id,className:H,innerHTML:H});A.on(I,"click",this._onCheckSource,this);this._filterCheckboxes[H]=I;K.appendChild(I);K.appendChild(J);this._elSourceFilters.appendChild(K);I.checked=true}},_filterLogs:function(){if(this._elConsole!==null){this.clearConsole();this._printToConsole(C.getStack())}},_printBuffer:function(){this._timeout=null;if(this._elConsole!==null){var I=this.thresholdMax;I=(I&&!isNaN(I))?I:500;if(this._consoleMsgCount<I){var H=[];for(var J=0;J<this._buffer.length;J++){H[J]=this._buffer[J]}this._buffer=[];this._printToConsole(H)}else{this._filterLogs()}if(!this.newestOnTop){this._elConsole.scrollTop=this._elConsole.scrollHeight}}},_printToConsole:function(P){var I=P.length,T=G.createDocumentFragment(),W=[],X=this.thresholdMin,J=this._sourceFilters.length,U=this._categoryFilters.length,R,O,N,M,S;if(isNaN(X)||(X>this.thresholdMax)){X=0}R=(I>X)?(I-X):0;for(O=R;O<I;O++){var L=false,Q=false,V=P[O],H=V.source,K=V.category;for(N=0;N<J;N++){if(H==this._sourceFilters[N]){Q=true;break}}if(Q){for(N=0;N<U;N++){if(K==this._categoryFilters[N]){L=true;break}}}if(L){if(this._consoleMsgCount===0){this._lastTime=V.time.getTime()}M=this.formatMsg(V);if(typeof M==="string"){W[W.length]=M}else{T.insertBefore(M,this.newestOnTop?T.firstChild||null:null)}this._consoleMsgCount++;this._lastTime=V.time.getTime()}}if(W.length){W.splice(0,0,this._elConsole.innerHTML);this._elConsole.innerHTML=this.newestOnTop?W.reverse().join(""):W.join("")}else{if(T.firstChild){this._elConsole.insertBefore(T,this.newestOnTop?this._elConsole.firstChild||null:null)}}},_onCategoryCreate:function(K,J,H){var I=J[0];H._categoryFilters.push(I);if(H._elFt){H._createCategoryCheckbox(I)}},_onSourceCreate:function(K,J,H){var I=J[0];H._sourceFilters.push(I);if(H._elFt){H._createSourceCheckbox(I)}},_onCheckCategory:function(H,I){var J=this.category;if(!this.checked){I.hideCategory(J)}else{I.showCategory(J)}},_onCheckSource:function(H,I){var J=this.source;if(!this.checked){I.hideSource(J)}else{I.showSource(J)}},_onClickCollapseBtn:function(H,I){if(!I.isCollapsed){I.collapse()}else{I.expand()}},_onClickPauseBtn:function(H,I){if(!I.isPaused){I.pause()}else{I.resume()}},_onClickClearBtn:function(H,I){I.clearConsole()},_onNewLog:function(K,J,H){var I=J[0];H._buffer.push(I);if(H.logReaderEnabled===true&&H._timeout===null){H._timeout=setTimeout(function(){H._printBuffer()},H.outputBuffer)}},_onReset:function(J,I,H){H._filterLogs()}};YAHOO.widget.LogReader=F})();YAHOO.register("logger",YAHOO.widget.Logger,{version:"2.8.1",build:"19"});!function(B,A){"object"==typeof module&&"object"==typeof module.exports?module.exports=B.document?A(B,!0):function(C){if(!C.document){throw new Error("jQuery requires a window with a document")}return A(C)}:A(B)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return !m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(k.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++){if(d=b.apply(a[e],c),d===!1){break}}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1){break}}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d){a[e++]=b[d++]}if(c!==c){while(void 0!==b[d]){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return +new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length" in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++){if(a[c]===b){return c}}return -1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k){return d}if(!e&&p){if(11!==k&&(f=_.exec(a))){if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode){return d}if(h.id===j){return d.push(h),d}}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j){return d.push(h),d}}}else{if(f[2]){return H.apply(d,b.getElementsByTagName(a)),d}if((j=f[3])&&c.getElementsByClassName){return H.apply(d,b.getElementsByClassName(j)),d}}}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--){o[l]=s+ra(o[l])}w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x){try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},B=b?function(a,b){if(a===b){return l=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b){return l=!0,0}var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f){return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0}if(e===f){return la(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){i.unshift(c)}while(h[d]===i[d]){d++}return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b))){try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}}else{if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b)){break}}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=J(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=ma(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=na(b)}function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter){!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d]){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d]){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++){ga(a,b[d],c)}return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)}})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++){if(c=d.relative[a[i].type]){m=[sa(ta(m),c)]}else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++){if(d.relative[a[e].type]){break}}return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||0.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++]){if(o(l,g,h)){i.push(l);break}}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++]){o(r,s,g,h)}if(f){if(p>0){while(q--){r[q]||s[q]||(s[q]=F.call(i))}}s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--){f=xa(b[c]),f[u]?d.push(f):e.push(f)}f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b){return e}n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type]){break}if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a){return H.apply(e,f),e}break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b)){return m.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return m.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(v.test(b)){return m.filter(b,a,c)}b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++){if(m.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){m.find(a,d[b],c)}return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return !!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||x).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b)){for(c in b){m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return x.find(a)}this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c))){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(m.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body){return setTimeout(m.ready)}m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H){if(H=m.Deferred(),"complete"===y.readyState){setTimeout(m.ready)}else{if(y.addEventListener){y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1)}else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}}}return H.promise(b)};var K="undefined",L;for(L in m(k)){break}k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else{c=void 0}}return c}function P(a){var b;for(b in a){if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--){delete d[b[e]]}if(c?!P(d):!m.isEmptyObject(d)){return }}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--){g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])))}m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c){m.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return !0}function ba(){return !1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--){f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--){if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--){g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){m.event.remove(a,o+b[j],c,d,!0)}}}m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped()){b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void (this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=ba}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b))}}return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++){m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){m.event.add(b,c,h[c][d])}}}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events){m.removeEvent(b,d,e.handle)}b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a))){for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g){d[g]&&Ba(e,d[g])}}if(b){if(c){for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++){Aa(e,d[g])}}else{Aa(a,f)}}return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++){if(f=a[q],f||0===f){if("object"===m.type(f)){m.merge(p,f.nodeType?[f]:f)}else{if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--){h=h.lastChild}if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--){m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++]){if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++]){oa.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++){if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild){a.removeChild(a.firstChild)}a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0}if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p)){return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++){d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++){d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")))}}i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a){return a}a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c){return c?void delete this.get:(this.get=b).apply(this,arguments)}}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--){if(b=Ta[e]+c,b in a){return b}}return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)))}return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e)){return e}d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+T[d]+b]=f[d]||f[d-2]||f[0]}return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++){f[b[g]]=m.css(a,b[g],!1,d)}return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,m.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=T[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||m.style(a,d)}else{j=void 0}}if(m.isEmptyObject(o)){"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j)}else{r?"hidden" in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o){m.style(a,b,o[b])}});for(d in o){g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function jb(a,b){var c,d,e,f,g;for(c in a){if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++){if(d=db[f].call(j,a,k,j.opts)){return d}}return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)}},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&cb.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--){if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType){while(c=f[e++]){d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)}}},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void (a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++]){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=m.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a)){return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(E)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?m.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0){return !0}}return !1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c)){while(d=f[e++]){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t){return v}h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a)){return this.each(function(b){m(this).wrapAll(a.call(this,b))})}if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return !m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b)){m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==m.type(b)){d(a,b)}else{for(e in b){Vb(a+"["+e+"]",b[e],c,d)}}}}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a)){m.each(a,function(){e(this.name,this.value)})}else{for(c in a){Vb(c,a[c],b,e)}}return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb){Xb[a](void 0,!0)}}),k.cors=!!Yb&&"withCredentials" in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc){return bc.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using" in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position")){a=a.offsetParent}return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void (f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});(function(A){"function"==typeof define&&define.amd?define(["jquery"],A):A(jQuery)})(function(G){function J(M,N){var Q,L,P,O=M.nodeName.toLowerCase();return"area"===O?(Q=M.parentNode,L=Q.name,M.href&&L&&"map"===Q.nodeName.toLowerCase()?(P=G("img[usemap='#"+L+"']")[0],!!P&&E(P)):!1):(/^(input|select|textarea|button|object)$/.test(O)?!M.disabled:"a"===O?M.href||N:N)&&E(M)}function E(L){return G.expr.filters.visible(L)&&!G(L).parents().addBack().filter(function(){return"hidden"===G.css(this,"visibility")}).length}G.ui=G.ui||{},G.extend(G.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),G.fn.extend({scrollParent:function(N){var M=this.css("position"),O="absolute"===M,P=N?/(auto|scroll|hidden)/:/(auto|scroll)/,L=this.parents().filter(function(){var Q=G(this);return O&&"static"===Q.css("position")?!1:P.test(Q.css("overflow")+Q.css("overflow-y")+Q.css("overflow-x"))}).eq(0);return"fixed"!==M&&L.length?L:G(this[0].ownerDocument||document)},uniqueId:function(){var L=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++L)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&G(this).removeAttr("id")})}}),G.extend(G.expr[":"],{data:G.expr.createPseudo?G.expr.createPseudo(function(L){return function(M){return !!G.data(M,L)}}):function(M,L,N){return !!G.data(M,N[3])},focusable:function(L){return J(L,!isNaN(G.attr(L,"tabindex")))},tabbable:function(L){var M=G.attr(L,"tabindex"),N=isNaN(M);return(N||M>=0)&&J(L,!N)}}),G("<a>").outerWidth(1).jquery||G.each(["Width","Height"],function(N,M){function O(T,S,U,R){return G.each(Q,function(){S-=parseFloat(G.css(T,"padding"+this))||0,U&&(S-=parseFloat(G.css(T,"border"+this+"Width"))||0),R&&(S-=parseFloat(G.css(T,"margin"+this))||0)}),S}var Q="Width"===M?["Left","Right"]:["Top","Bottom"],L=M.toLowerCase(),P={innerWidth:G.fn.innerWidth,innerHeight:G.fn.innerHeight,outerWidth:G.fn.outerWidth,outerHeight:G.fn.outerHeight};G.fn["inner"+M]=function(R){return void 0===R?P["inner"+M].call(this):this.each(function(){G(this).css(L,O(this,R)+"px")})},G.fn["outer"+M]=function(R,S){return"number"!=typeof R?P["outer"+M].call(this,R):this.each(function(){G(this).css(L,O(this,R,!0,S)+"px")})}}),G.fn.addBack||(G.fn.addBack=function(L){return this.add(null==L?this.prevObject:this.prevObject.filter(L))}),G("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(G.fn.removeData=function(L){return function(M){return arguments.length?L.call(this,G.camelCase(M)):L.call(this)}}(G.fn.removeData)),G.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),G.fn.extend({focus:function(L){return function(M,N){return"number"==typeof M?this.each(function(){var O=this;setTimeout(function(){G(O).focus(),N&&N.call(O)},M)}):L.apply(this,arguments)}}(G.fn.focus),disableSelection:function(){var L="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(L+".ui-disableSelection",function(M){M.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(M){if(void 0!==M){return this.css("zIndex",M)}if(this.length){for(var L,N,O=G(this[0]);O.length&&O[0]!==document;){if(L=O.css("position"),("absolute"===L||"relative"===L||"fixed"===L)&&(N=parseInt(O.css("zIndex"),10),!isNaN(N)&&0!==N)){return N}O=O.parent()}}return 0}}),G.ui.plugin={add:function(N,M,O){var P,L=G.ui[N].prototype;for(P in O){L.plugins[P]=L.plugins[P]||[],L.plugins[P].push([M,O[P]])}},call:function(P,N,M,O){var Q,L=P.plugins[N];if(L&&(O||P.element[0].parentNode&&11!==P.element[0].parentNode.nodeType)){for(Q=0;L.length>Q;Q++){P.options[L[Q][0]]&&L[Q][1].apply(P.element,M)}}}};var K=0,C=Array.prototype.slice;G.cleanData=function(L){return function(N){var O,Q,M;for(M=0;null!=(Q=N[M]);M++){try{O=G._data(Q,"events"),O&&O.remove&&G(Q).triggerHandler("remove")}catch(P){}}L(N)}}(G.cleanData),G.widget=function(S,P,T){var N,R,M,L,Q={},O=S.split(".")[0];return S=S.split(".")[1],N=O+"-"+S,T||(T=P,P=G.Widget),G.expr[":"][N.toLowerCase()]=function(U){return !!G.data(U,N)},G[O]=G[O]||{},R=G[O][S],M=G[O][S]=function(V,U){return this._createWidget?(arguments.length&&this._createWidget(V,U),void 0):new M(V,U)},G.extend(M,R,{version:T.version,_proto:G.extend({},T),_childConstructors:[]}),L=new P,L.options=G.widget.extend({},L.options),G.each(T,function(U,V){return G.isFunction(V)?(Q[U]=function(){var W=function(){return P.prototype[U].apply(this,arguments)},X=function(Y){return P.prototype[U].apply(this,Y)};return function(){var b,Z=this._super,Y=this._superApply;return this._super=W,this._superApply=X,b=V.apply(this,arguments),this._super=Z,this._superApply=Y,b}}(),void 0):(Q[U]=V,void 0)}),M.prototype=G.widget.extend(L,{widgetEventPrefix:R?L.widgetEventPrefix||S:S},Q,{constructor:M,namespace:O,widgetName:S,widgetFullName:N}),R?(G.each(R._childConstructors,function(V,U){var W=U.prototype;G.widget(W.namespace+"."+W.widgetName,M,U._proto)}),delete R._childConstructors):P._childConstructors.push(M),G.widget.bridge(S,M),M},G.widget.extend=function(N){for(var M,O,L=C.call(arguments,1),Q=0,P=L.length;P>Q;Q++){for(M in L[Q]){O=L[Q][M],L[Q].hasOwnProperty(M)&&void 0!==O&&(N[M]=G.isPlainObject(O)?G.isPlainObject(N[M])?G.widget.extend({},N[M],O):G.widget.extend({},O):O)}}return N},G.widget.bridge=function(M,L){var N=L.prototype.widgetFullName||M;G.fn[M]=function(O){var R="string"==typeof O,Q=C.call(arguments,1),P=this;return R?this.each(function(){var S,T=G.data(this,N);return"instance"===O?(P=T,!1):T?G.isFunction(T[O])&&"_"!==O.charAt(0)?(S=T[O].apply(T,Q),S!==T&&void 0!==S?(P=S&&S.jquery?P.pushStack(S.get()):S,!1):void 0):G.error("no such method '"+O+"' for "+M+" widget instance"):G.error("cannot call methods on "+M+" prior to initialization; attempted to call method '"+O+"'")}):(Q.length&&(O=G.widget.extend.apply(null,[O].concat(Q))),this.each(function(){var S=G.data(this,N);S?(S.option(O||{}),S._init&&S._init()):G.data(this,N,new L(O,this))})),P}},G.Widget=function(){},G.Widget._childConstructors=[],G.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(M,L){L=G(L||this.defaultElement||this)[0],this.element=G(L),this.uuid=K++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=G(),this.hoverable=G(),this.focusable=G(),L!==this&&(G.data(L,this.widgetFullName,this),this._on(!0,this.element,{remove:function(N){N.target===L&&this.destroy()}}),this.document=G(L.style?L.ownerDocument:L.document||L),this.window=G(this.document[0].defaultView||this.document[0].parentWindow)),this.options=G.widget.extend({},this.options,this._getCreateOptions(),M),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:G.noop,_getCreateEventData:G.noop,_create:G.noop,_init:G.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(G.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:G.noop,widget:function(){return this.element},option:function(N,M){var O,Q,L,P=N;if(0===arguments.length){return G.widget.extend({},this.options)}if("string"==typeof N){if(P={},O=N.split("."),N=O.shift(),O.length){for(Q=P[N]=G.widget.extend({},this.options[N]),L=0;O.length-1>L;L++){Q[O[L]]=Q[O[L]]||{},Q=Q[O[L]]}if(N=O.pop(),1===arguments.length){return void 0===Q[N]?null:Q[N]}Q[N]=M}else{if(1===arguments.length){return void 0===this.options[N]?null:this.options[N]}P[N]=M}}return this._setOptions(P),this},_setOptions:function(M){var L;for(L in M){this._setOption(L,M[L])}return this},_setOption:function(M,L){return this.options[M]=L,"disabled"===M&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!L),L&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(N,M,O){var P,L=this;"boolean"!=typeof N&&(O=M,M=N,N=!1),O?(M=P=G(M),this.bindings=this.bindings.add(M)):(O=M,M=this.element,P=this.widget()),G.each(O,function(T,V){function U(){return N||L.options.disabled!==!0&&!G(this).hasClass("ui-state-disabled")?("string"==typeof V?L[V]:V).apply(L,arguments):void 0}"string"!=typeof V&&(U.guid=V.guid=V.guid||U.guid||G.guid++);var S=T.match(/^([\w:-]*)\s*(.*)$/),Q=S[1]+L.eventNamespace,R=S[2];R?P.delegate(R,Q,U):M.bind(Q,U)})},_off:function(M,L){L=(L||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,M.unbind(L).undelegate(L),this.bindings=G(this.bindings.not(M).get()),this.focusable=G(this.focusable.not(M).get()),this.hoverable=G(this.hoverable.not(M).get())},_delay:function(O,M){function L(){return("string"==typeof O?N[O]:O).apply(N,arguments)}var N=this;return setTimeout(L,M||0)},_hoverable:function(L){this.hoverable=this.hoverable.add(L),this._on(L,{mouseenter:function(M){G(M.currentTarget).addClass("ui-state-hover")},mouseleave:function(M){G(M.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(L){this.focusable=this.focusable.add(L),this._on(L,{focusin:function(M){G(M.currentTarget).addClass("ui-state-focus")},focusout:function(M){G(M.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(N,M,O){var Q,L,P=this.options[N];if(O=O||{},M=G.Event(M),M.type=(N===this.widgetEventPrefix?N:this.widgetEventPrefix+N).toLowerCase(),M.target=this.element[0],L=M.originalEvent){for(Q in L){Q in M||(M[Q]=L[Q])}}return this.element.trigger(M,O),!(G.isFunction(P)&&P.apply(this.element[0],[M].concat(O))===!1||M.isDefaultPrevented())}},G.each({show:"fadeIn",hide:"fadeOut"},function(M,L){G.Widget.prototype["_"+M]=function(O,R,N){"string"==typeof R&&(R={effect:R});var Q,P=R?R===!0||"number"==typeof R?L:R.effect||L:M;R=R||{},"number"==typeof R&&(R={duration:R}),Q=!G.isEmptyObject(R),R.complete=N,R.delay&&O.delay(R.delay),Q&&G.effects&&G.effects.effect[P]?O[M](R):P!==M&&O[P]?O[P](R.duration,R.easing,N):O.queue(function(S){G(this)[M](),N&&N.call(O[0]),S()})}}),G.widget;var H=!1;G(document).mouseup(function(){H=!1}),G.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var L=this;this.element.bind("mousedown."+this.widgetName,function(M){return L._mouseDown(M)}).bind("click."+this.widgetName,function(M){return !0===G.data(M.target,L.widgetName+".preventClickEvent")?(G.removeData(M.target,L.widgetName+".preventClickEvent"),M.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(M){if(!H){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(M),this._mouseDownEvent=M;var L=this,N=1===M.which,O="string"==typeof this.options.cancel&&M.target.nodeName?G(M.target).closest(this.options.cancel).length:!1;return N&&!O&&this._mouseCapture(M)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){L.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(M)&&this._mouseDelayMet(M)&&(this._mouseStarted=this._mouseStart(M)!==!1,!this._mouseStarted)?(M.preventDefault(),!0):(!0===G.data(M.target,this.widgetName+".preventClickEvent")&&G.removeData(M.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(P){return L._mouseMove(P)},this._mouseUpDelegate=function(P){return L._mouseUp(P)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),M.preventDefault(),H=!0,!0)):!0}},_mouseMove:function(L){if(this._mouseMoved){if(G.ui.ie&&(!document.documentMode||9>document.documentMode)&&!L.button){return this._mouseUp(L)}if(!L.which){return this._mouseUp(L)}}return(L.which||L.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(L),L.preventDefault()):(this._mouseDistanceMet(L)&&this._mouseDelayMet(L)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,L)!==!1,this._mouseStarted?this._mouseDrag(L):this._mouseUp(L)),!this._mouseStarted)},_mouseUp:function(L){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,L.target===this._mouseDownEvent.target&&G.data(L.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(L)),H=!1,!1},_mouseDistanceMet:function(L){return Math.max(Math.abs(this._mouseDownEvent.pageX-L.pageX),Math.abs(this._mouseDownEvent.pageY-L.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}}),function(){function X(b,a,Z){return[parseFloat(b[0])*(M.test(b[0])?a/100:1),parseFloat(b[1])*(M.test(b[1])?Z/100:1)]}function Q(a,Z){return parseInt(G.css(a,Z),10)||0}function Y(a){var Z=a[0];return 9===Z.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:G.isWindow(Z)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:Z.preventDefault?{width:0,height:0,offset:{top:Z.pageY,left:Z.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}G.ui=G.ui||{};var O,V,N=Math.max,L=Math.abs,R=Math.round,P=/left|center|right/,W=/top|center|bottom/,T=/[\+\-]\d+(\.[\d]+)?%?/,U=/^\w+/,M=/%$/,S=G.fn.position;G.position={scrollbarWidth:function(){if(void 0!==O){return O}var c,b,e=G("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),Z=e.children()[0];return G("body").append(e),c=Z.offsetWidth,e.css("overflow","scroll"),b=Z.offsetWidth,c===b&&(b=e[0].clientWidth),e.remove(),O=c-b},getScrollInfo:function(c){var b=c.isWindow||c.isDocument?"":c.element.css("overflow-x"),e=c.isWindow||c.isDocument?"":c.element.css("overflow-y"),f="scroll"===b||"auto"===b&&c.width<c.element[0].scrollWidth,Z="scroll"===e||"auto"===e&&c.height<c.element[0].scrollHeight;return{width:Z?G.position.scrollbarWidth():0,height:f?G.position.scrollbarWidth():0}},getWithinInfo:function(a){var Z=G(a||window),b=G.isWindow(Z[0]),c=!!Z[0]&&9===Z[0].nodeType;return{element:Z,isWindow:b,isDocument:c,offset:Z.offset()||{left:0,top:0},scrollLeft:Z.scrollLeft(),scrollTop:Z.scrollTop(),width:b||c?Z.width():Z.outerWidth(),height:b||c?Z.height():Z.outerHeight()}}},G.fn.position=function(a){if(!a||!a.of){return S.apply(this,arguments)}a=G.extend({},a);var Z,c,h,t,l,o,s=G(a.of),q=G.position.getWithinInfo(a.within),r=G.position.getScrollInfo(q),f=(a.collision||"flip").split(" "),e={};return o=Y(s),s[0].preventDefault&&(a.at="left top"),c=o.width,h=o.height,t=o.offset,l=G.extend({},t),G.each(["my","at"],function(){var k,g,b=(a[this]||"").split(" ");1===b.length&&(b=P.test(b[0])?b.concat(["center"]):W.test(b[0])?["center"].concat(b):["center","center"]),b[0]=P.test(b[0])?b[0]:"center",b[1]=W.test(b[1])?b[1]:"center",k=T.exec(b[0]),g=T.exec(b[1]),e[this]=[k?k[0]:0,g?g[0]:0],a[this]=[U.exec(b[0])[0],U.exec(b[1])[0]]}),1===f.length&&(f[1]=f[0]),"right"===a.at[0]?l.left+=c:"center"===a.at[0]&&(l.left+=c/2),"bottom"===a.at[1]?l.top+=h:"center"===a.at[1]&&(l.top+=h/2),Z=X(e.at,c,h),l.left+=Z[0],l.top+=Z[1],this.each(function(){var AB,k,AA=G(this),x=AA.outerWidth(),y=AA.outerHeight(),p=Q(this,"marginLeft"),z=Q(this,"marginTop"),g=x+p+Q(this,"marginRight")+r.width,m=y+z+Q(this,"marginBottom")+r.height,v=G.extend({},l),w=X(e.my,AA.outerWidth(),AA.outerHeight());"right"===a.my[0]?v.left-=x:"center"===a.my[0]&&(v.left-=x/2),"bottom"===a.my[1]?v.top-=y:"center"===a.my[1]&&(v.top-=y/2),v.left+=w[0],v.top+=w[1],V||(v.left=R(v.left),v.top=R(v.top)),AB={marginLeft:p,marginTop:z},G.each(["left","top"],function(u,b){G.ui.position[f[u]]&&G.ui.position[f[u]][b](v,{targetWidth:c,targetHeight:h,elemWidth:x,elemHeight:y,collisionPosition:AB,collisionWidth:g,collisionHeight:m,offset:[Z[0]+w[0],Z[1]+w[1]],my:a.my,at:a.at,within:q,elem:AA})}),a.using&&(k=function(AF){var AC=t.left-v.left,u=AC+c-x,AE=t.top-v.top,b=AE+h-y,AD={target:{element:s,left:t.left,top:t.top,width:c,height:h},element:{element:AA,left:v.left,top:v.top,width:x,height:y},horizontal:0>u?"left":AC>0?"right":"center",vertical:0>b?"top":AE>0?"bottom":"middle"};x>c&&c>L(AC+u)&&(AD.horizontal="center"),y>h&&h>L(AE+b)&&(AD.vertical="middle"),AD.important=N(L(AC),L(u))>N(L(AE),L(b))?"horizontal":"vertical",a.using.call(this,AF,AD)}),AA.offset(G.extend(v,{using:k}))})},G.ui.position={fit:{left:function(k,o){var f,p=o.within,b=p.isWindow?p.scrollLeft:p.offset.left,m=p.width,Z=k.left-o.collisionPosition.marginLeft,g=b-Z,c=Z+o.collisionWidth-m-b;o.collisionWidth>m?g>0&&0>=c?(f=k.left+g+o.collisionWidth-m-b,k.left+=g-f):k.left=c>0&&0>=g?b:g>c?b+m-o.collisionWidth:b:g>0?k.left+=g:c>0?k.left-=c:k.left=N(k.left-Z,k.left)},top:function(k,o){var f,p=o.within,b=p.isWindow?p.scrollTop:p.offset.top,m=o.within.height,Z=k.top-o.collisionPosition.marginTop,g=b-Z,c=Z+o.collisionHeight-m-b;o.collisionHeight>m?g>0&&0>=c?(f=k.top+g+o.collisionHeight-m-b,k.top+=g-f):k.top=c>0&&0>=g?b:g>c?b+m-o.collisionHeight:b:g>0?k.top+=g:c>0?k.top-=c:k.top=N(k.top-Z,k.top)}},flip:{left:function(v,AA){var m,AB,g=AA.within,y=g.offset.left+g.scrollLeft,b=g.width,q=g.isWindow?g.scrollLeft:g.offset.left,k=v.left-AA.collisionPosition.marginLeft,z=k-q,w=k+AA.collisionWidth-b-q,x="left"===AA.my[0]?-AA.elemWidth:"right"===AA.my[0]?AA.elemWidth:0,Z="left"===AA.at[0]?AA.targetWidth:"right"===AA.at[0]?-AA.targetWidth:0,r=-2*AA.offset[0];0>z?(m=v.left+x+Z+r+AA.collisionWidth-b-y,(0>m||L(z)>m)&&(v.left+=x+Z+r)):w>0&&(AB=v.left-AA.collisionPosition.marginLeft+x+Z+r-q,(AB>0||w>L(AB))&&(v.left+=x+Z+r))},top:function(x,AC){var r,AD,g=AC.within,AA=g.offset.top+g.scrollTop,b=g.height,v=g.isWindow?g.scrollTop:g.offset.top,q=x.top-AC.collisionPosition.marginTop,AB=q-v,y=q+AC.collisionHeight-b-v,z="top"===AC.my[1],Z=z?-AC.elemHeight:"bottom"===AC.my[1]?AC.elemHeight:0,w="top"===AC.at[1]?AC.targetHeight:"bottom"===AC.at[1]?-AC.targetHeight:0,k=-2*AC.offset[1];0>AB?(AD=x.top+Z+w+k+AC.collisionHeight-b-AA,(0>AD||L(AB)>AD)&&(x.top+=Z+w+k)):y>0&&(r=x.top-AC.collisionPosition.marginTop+Z+w+k-v,(r>0||y>L(r))&&(x.top+=Z+w+k))}},flipfit:{left:function(){G.ui.position.flip.left.apply(this,arguments),G.ui.position.fit.left.apply(this,arguments)},top:function(){G.ui.position.flip.top.apply(this,arguments),G.ui.position.fit.top.apply(this,arguments)}}},function(){var a,Z,c,g,f,e=document.getElementsByTagName("body")[0],b=document.createElement("div");a=document.createElement(e?"div":"body"),c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},e&&G.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in c){a.style[f]=c[f]}a.appendChild(b),Z=e||document.documentElement,Z.insertBefore(a,Z.firstChild),b.style.cssText="position: absolute; left: 10.7432222px;",g=G(b).offset().left,V=g>10&&11>g,a.innerHTML="",Z.removeChild(a)}()}(),G.ui.position,G.widget("ui.draggable",G.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(M,L){this._super(M,L),"handle"===M&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(M){var L=this.options;return this._blurActiveElement(M),this.helper||L.disabled||G(M.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(M),this.handle?(this._blockFrames(L.iframeFix===!0?"iframe":L.iframeFix),!0):!1)},_blockFrames:function(L){this.iframeBlocks=this.document.find(L).map(function(){var M=G(this);return G("<div>").css("position","absolute").appendTo(M.parent()).outerWidth(M.outerWidth()).outerHeight(M.outerHeight()).offset(M.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(M){var L=this.document[0];if(this.handleElement.is(M.target)){try{L.activeElement&&"body"!==L.activeElement.nodeName.toLowerCase()&&G(L.activeElement).blur()}catch(N){}}},_mouseStart:function(M){var L=this.options;return this.helper=this._createHelper(M),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),G.ui.ddmanager&&(G.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===G(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(M),this.originalPosition=this.position=this._generatePosition(M,!1),this.originalPageX=M.pageX,this.originalPageY=M.pageY,L.cursorAt&&this._adjustOffsetFromHelper(L.cursorAt),this._setContainment(),this._trigger("start",M)===!1?(this._clear(),!1):(this._cacheHelperProportions(),G.ui.ddmanager&&!L.dropBehaviour&&G.ui.ddmanager.prepareOffsets(this,M),this._normalizeRightBottom(),this._mouseDrag(M,!0),G.ui.ddmanager&&G.ui.ddmanager.dragStart(this,M),!0)},_refreshOffsets:function(L){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:L.pageX-this.offset.left,top:L.pageY-this.offset.top}},_mouseDrag:function(M,L){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(M,!0),this.positionAbs=this._convertPositionTo("absolute"),!L){var N=this._uiHash();if(this._trigger("drag",M,N)===!1){return this._mouseUp({}),!1}this.position=N.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",G.ui.ddmanager&&G.ui.ddmanager.drag(this,M),!1},_mouseStop:function(M){var L=this,N=!1;return G.ui.ddmanager&&!this.options.dropBehaviour&&(N=G.ui.ddmanager.drop(this,M)),this.dropped&&(N=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!N||"valid"===this.options.revert&&N||this.options.revert===!0||G.isFunction(this.options.revert)&&this.options.revert.call(this.element,N)?G(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){L._trigger("stop",M)!==!1&&L._clear()}):this._trigger("stop",M)!==!1&&this._clear(),!1},_mouseUp:function(L){return this._unblockFrames(),G.ui.ddmanager&&G.ui.ddmanager.dragStop(this,L),this.handleElement.is(L.target)&&this.element.focus(),G.ui.mouse.prototype._mouseUp.call(this,L)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(L){return this.options.handle?!!G(L.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(M){var L=this.options,N=G.isFunction(L.helper),O=N?G(L.helper.apply(this.element[0],[M])):"clone"===L.helper?this.element.clone().removeAttr("id"):this.element;return O.parents("body").length||O.appendTo("parent"===L.appendTo?this.element[0].parentNode:L.appendTo),N&&O[0]===this.element[0]&&this._setPositionRelative(),O[0]===this.element[0]||/(fixed|absolute)/.test(O.css("position"))||O.css("position","absolute"),O},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(L){"string"==typeof L&&(L=L.split(" ")),G.isArray(L)&&(L={left:+L[0],top:+L[1]||0}),"left" in L&&(this.offset.click.left=L.left+this.margins.left),"right" in L&&(this.offset.click.left=this.helperProportions.width-L.right+this.margins.left),"top" in L&&(this.offset.click.top=L.top+this.margins.top),"bottom" in L&&(this.offset.click.top=this.helperProportions.height-L.bottom+this.margins.top)},_isRootNode:function(L){return/(html|body)/i.test(L.tagName)||L===this.document[0]},_getParentOffset:function(){var M=this.offsetParent.offset(),L=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==L&&G.contains(this.scrollParent[0],this.offsetParent[0])&&(M.left+=this.scrollParent.scrollLeft(),M.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(M={top:0,left:0}),{top:M.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:M.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition){return{top:0,left:0}}var M=this.element.position(),L=this._isRootNode(this.scrollParent[0]);return{top:M.top-(parseInt(this.helper.css("top"),10)||0)+(L?0:this.scrollParent.scrollTop()),left:M.left-(parseInt(this.helper.css("left"),10)||0)+(L?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var N,M,O,P=this.options,L=this.document[0];return this.relativeContainer=null,P.containment?"window"===P.containment?(this.containment=[G(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,G(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,G(window).scrollLeft()+G(window).width()-this.helperProportions.width-this.margins.left,G(window).scrollTop()+(G(window).height()||L.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===P.containment?(this.containment=[0,0,G(L).width()-this.helperProportions.width-this.margins.left,(G(L).height()||L.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):P.containment.constructor===Array?(this.containment=P.containment,void 0):("parent"===P.containment&&(P.containment=this.helper[0].parentNode),M=G(P.containment),O=M[0],O&&(N=/(scroll|auto)/.test(M.css("overflow")),this.containment=[(parseInt(M.css("borderLeftWidth"),10)||0)+(parseInt(M.css("paddingLeft"),10)||0),(parseInt(M.css("borderTopWidth"),10)||0)+(parseInt(M.css("paddingTop"),10)||0),(N?Math.max(O.scrollWidth,O.offsetWidth):O.offsetWidth)-(parseInt(M.css("borderRightWidth"),10)||0)-(parseInt(M.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(N?Math.max(O.scrollHeight,O.offsetHeight):O.offsetHeight)-(parseInt(M.css("borderBottomWidth"),10)||0)-(parseInt(M.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=M),void 0):(this.containment=null,void 0)},_convertPositionTo:function(O,M){M||(M=this.position);var L="absolute"===O?1:-1,N=this._isRootNode(this.scrollParent[0]);return{top:M.top+this.offset.relative.top*L+this.offset.parent.top*L-("fixed"===this.cssPosition?-this.offset.scroll.top:N?0:this.offset.scroll.top)*L,left:M.left+this.offset.relative.left*L+this.offset.parent.left*L-("fixed"===this.cssPosition?-this.offset.scroll.left:N?0:this.offset.scroll.left)*L}},_generatePosition:function(R,T){var P,U,N,S,M=this.options,L=this._isRootNode(this.scrollParent[0]),Q=R.pageX,O=R.pageY;return L&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),T&&(this.containment&&(this.relativeContainer?(U=this.relativeContainer.offset(),P=[this.containment[0]+U.left,this.containment[1]+U.top,this.containment[2]+U.left,this.containment[3]+U.top]):P=this.containment,R.pageX-this.offset.click.left<P[0]&&(Q=P[0]+this.offset.click.left),R.pageY-this.offset.click.top<P[1]&&(O=P[1]+this.offset.click.top),R.pageX-this.offset.click.left>P[2]&&(Q=P[2]+this.offset.click.left),R.pageY-this.offset.click.top>P[3]&&(O=P[3]+this.offset.click.top)),M.grid&&(N=M.grid[1]?this.originalPageY+Math.round((O-this.originalPageY)/M.grid[1])*M.grid[1]:this.originalPageY,O=P?N-this.offset.click.top>=P[1]||N-this.offset.click.top>P[3]?N:N-this.offset.click.top>=P[1]?N-M.grid[1]:N+M.grid[1]:N,S=M.grid[0]?this.originalPageX+Math.round((Q-this.originalPageX)/M.grid[0])*M.grid[0]:this.originalPageX,Q=P?S-this.offset.click.left>=P[0]||S-this.offset.click.left>P[2]?S:S-this.offset.click.left>=P[0]?S-M.grid[0]:S+M.grid[0]:S),"y"===M.axis&&(Q=this.originalPageX),"x"===M.axis&&(O=this.originalPageY)),{top:O-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:L?0:this.offset.scroll.top),left:Q-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:L?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(M,L,N){return N=N||this._uiHash(),G.ui.plugin.call(this,M,[L,N,this],!0),/^(drag|start|stop)/.test(M)&&(this.positionAbs=this._convertPositionTo("absolute"),N.offset=this.positionAbs),G.Widget.prototype._trigger.call(this,M,L,N)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),G.ui.plugin.add("draggable","connectToSortable",{start:function(M,L,N){var O=G.extend({},L,{item:N.element});N.sortables=[],G(N.options.connectToSortable).each(function(){var P=G(this).sortable("instance");P&&!P.options.disabled&&(N.sortables.push(P),P.refreshPositions(),P._trigger("activate",M,O))})},stop:function(M,L,N){var O=G.extend({},L,{item:N.element});N.cancelHelperRemoval=!1,G.each(N.sortables,function(){var P=this;P.isOver?(P.isOver=0,N.cancelHelperRemoval=!0,P.cancelHelperRemoval=!1,P._storedCSS={position:P.placeholder.css("position"),top:P.placeholder.css("top"),left:P.placeholder.css("left")},P._mouseStop(M),P.options.helper=P.options._helper):(P.cancelHelperRemoval=!0,P._trigger("deactivate",M,O))})},drag:function(M,L,N){G.each(N.sortables,function(){var P=!1,O=this;O.positionAbs=N.positionAbs,O.helperProportions=N.helperProportions,O.offset.click=N.offset.click,O._intersectsWith(O.containerCache)&&(P=!0,G.each(N.sortables,function(){return this.positionAbs=N.positionAbs,this.helperProportions=N.helperProportions,this.offset.click=N.offset.click,this!==O&&this._intersectsWith(this.containerCache)&&G.contains(O.element[0],this.element[0])&&(P=!1),P})),P?(O.isOver||(O.isOver=1,N._parent=L.helper.parent(),O.currentItem=L.helper.appendTo(O.element).data("ui-sortable-item",!0),O.options._helper=O.options.helper,O.options.helper=function(){return L.helper[0]},M.target=O.currentItem[0],O._mouseCapture(M,!0),O._mouseStart(M,!0,!0),O.offset.click.top=N.offset.click.top,O.offset.click.left=N.offset.click.left,O.offset.parent.left-=N.offset.parent.left-O.offset.parent.left,O.offset.parent.top-=N.offset.parent.top-O.offset.parent.top,N._trigger("toSortable",M),N.dropped=O.element,G.each(N.sortables,function(){this.refreshPositions()}),N.currentItem=N.element,O.fromOutside=N),O.currentItem&&(O._mouseDrag(M),L.position=O.position)):O.isOver&&(O.isOver=0,O.cancelHelperRemoval=!0,O.options._revert=O.options.revert,O.options.revert=!1,O._trigger("out",M,O._uiHash(O)),O._mouseStop(M,!0),O.options.revert=O.options._revert,O.options.helper=O.options._helper,O.placeholder&&O.placeholder.remove(),L.helper.appendTo(N._parent),N._refreshOffsets(M),L.position=N._generatePosition(M,!0),N._trigger("fromSortable",M),N.dropped=!1,G.each(N.sortables,function(){this.refreshPositions()}))})}}),G.ui.plugin.add("draggable","cursor",{start:function(N,M,O){var P=G("body"),L=O.options;P.css("cursor")&&(L._cursor=P.css("cursor")),P.css("cursor",L.cursor)},stop:function(M,L,N){var O=N.options;O._cursor&&G("body").css("cursor",O._cursor)}}),G.ui.plugin.add("draggable","opacity",{start:function(N,M,O){var P=G(M.helper),L=O.options;P.css("opacity")&&(L._opacity=P.css("opacity")),P.css("opacity",L.opacity)},stop:function(M,L,N){var O=N.options;O._opacity&&G(L.helper).css("opacity",O._opacity)}}),G.ui.plugin.add("draggable","scroll",{start:function(N,M,L){L.scrollParentNotHidden||(L.scrollParentNotHidden=L.helper.scrollParent(!1)),L.scrollParentNotHidden[0]!==L.document[0]&&"HTML"!==L.scrollParentNotHidden[0].tagName&&(L.overflowOffset=L.scrollParentNotHidden.offset())},drag:function(N,M,O){var R=O.options,L=!1,Q=O.scrollParentNotHidden[0],P=O.document[0];Q!==P&&"HTML"!==Q.tagName?(R.axis&&"x"===R.axis||(O.overflowOffset.top+Q.offsetHeight-N.pageY<R.scrollSensitivity?Q.scrollTop=L=Q.scrollTop+R.scrollSpeed:N.pageY-O.overflowOffset.top<R.scrollSensitivity&&(Q.scrollTop=L=Q.scrollTop-R.scrollSpeed)),R.axis&&"y"===R.axis||(O.overflowOffset.left+Q.offsetWidth-N.pageX<R.scrollSensitivity?Q.scrollLeft=L=Q.scrollLeft+R.scrollSpeed:N.pageX-O.overflowOffset.left<R.scrollSensitivity&&(Q.scrollLeft=L=Q.scrollLeft-R.scrollSpeed))):(R.axis&&"x"===R.axis||(N.pageY-G(P).scrollTop()<R.scrollSensitivity?L=G(P).scrollTop(G(P).scrollTop()-R.scrollSpeed):G(window).height()-(N.pageY-G(P).scrollTop())<R.scrollSensitivity&&(L=G(P).scrollTop(G(P).scrollTop()+R.scrollSpeed))),R.axis&&"y"===R.axis||(N.pageX-G(P).scrollLeft()<R.scrollSensitivity?L=G(P).scrollLeft(G(P).scrollLeft()-R.scrollSpeed):G(window).width()-(N.pageX-G(P).scrollLeft())<R.scrollSensitivity&&(L=G(P).scrollLeft(G(P).scrollLeft()+R.scrollSpeed)))),L!==!1&&G.ui.ddmanager&&!R.dropBehaviour&&G.ui.ddmanager.prepareOffsets(O,N)}}),G.ui.plugin.add("draggable","snap",{start:function(M,L,N){var O=N.options;N.snapElements=[],G(O.snap.constructor!==String?O.snap.items||":data(ui-draggable)":O.snap).each(function(){var Q=G(this),P=Q.offset();this!==N.element[0]&&N.snapElements.push({item:this,width:Q.outerWidth(),height:Q.outerHeight(),top:P.top,left:P.left})})},drag:function(O,W,P){var T,w,S,Q,X,V,N,e,k,R,Z=P.options,U=Z.snapTolerance,Y=W.offset.left,M=Y+P.helperProportions.width,L=W.offset.top,q=L+P.helperProportions.height;for(k=P.snapElements.length-1;k>=0;k--){X=P.snapElements[k].left-P.margins.left,V=X+P.snapElements[k].width,N=P.snapElements[k].top-P.margins.top,e=N+P.snapElements[k].height,X-U>M||Y>V+U||N-U>q||L>e+U||!G.contains(P.snapElements[k].item.ownerDocument,P.snapElements[k].item)?(P.snapElements[k].snapping&&P.options.snap.release&&P.options.snap.release.call(P.element,O,G.extend(P._uiHash(),{snapItem:P.snapElements[k].item})),P.snapElements[k].snapping=!1):("inner"!==Z.snapMode&&(T=U>=Math.abs(N-q),w=U>=Math.abs(e-L),S=U>=Math.abs(X-M),Q=U>=Math.abs(V-Y),T&&(W.position.top=P._convertPositionTo("relative",{top:N-P.helperProportions.height,left:0}).top),w&&(W.position.top=P._convertPositionTo("relative",{top:e,left:0}).top),S&&(W.position.left=P._convertPositionTo("relative",{top:0,left:X-P.helperProportions.width}).left),Q&&(W.position.left=P._convertPositionTo("relative",{top:0,left:V}).left)),R=T||w||S||Q,"outer"!==Z.snapMode&&(T=U>=Math.abs(N-L),w=U>=Math.abs(e-q),S=U>=Math.abs(X-Y),Q=U>=Math.abs(V-M),T&&(W.position.top=P._convertPositionTo("relative",{top:N,left:0}).top),w&&(W.position.top=P._convertPositionTo("relative",{top:e-P.helperProportions.height,left:0}).top),S&&(W.position.left=P._convertPositionTo("relative",{top:0,left:X}).left),Q&&(W.position.left=P._convertPositionTo("relative",{top:0,left:V-P.helperProportions.width}).left)),!P.snapElements[k].snapping&&(T||w||S||Q||R)&&P.options.snap.snap&&P.options.snap.snap.call(P.element,O,G.extend(P._uiHash(),{snapItem:P.snapElements[k].item})),P.snapElements[k].snapping=T||w||S||Q||R)}}}),G.ui.plugin.add("draggable","stack",{start:function(N,M,O){var Q,L=O.options,P=G.makeArray(G(L.stack)).sort(function(S,R){return(parseInt(G(S).css("zIndex"),10)||0)-(parseInt(G(R).css("zIndex"),10)||0)});P.length&&(Q=parseInt(G(P[0]).css("zIndex"),10)||0,G(P).each(function(R){G(this).css("zIndex",Q+R)}),this.css("zIndex",Q+P.length))}}),G.ui.plugin.add("draggable","zIndex",{start:function(N,M,O){var P=G(M.helper),L=O.options;P.css("zIndex")&&(L._zIndex=P.css("zIndex")),P.css("zIndex",L.zIndex)},stop:function(M,L,N){var O=N.options;O._zIndex&&G(L.helper).css("zIndex",O._zIndex)}}),G.ui.draggable,G.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var M,L=this.options,N=L.accept;this.isover=!1,this.isout=!0,this.accept=G.isFunction(N)?N:function(O){return O.is(N)},this.proportions=function(){return arguments.length?(M=arguments[0],void 0):M?M:M={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(L.scope),L.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(L){G.ui.ddmanager.droppables[L]=G.ui.ddmanager.droppables[L]||[],G.ui.ddmanager.droppables[L].push(this)},_splice:function(M){for(var L=0;M.length>L;L++){M[L]===this&&M.splice(L,1)}},_destroy:function(){var L=G.ui.ddmanager.droppables[this.options.scope];this._splice(L),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(M,L){if("accept"===M){this.accept=G.isFunction(L)?L:function(O){return O.is(L)}}else{if("scope"===M){var N=G.ui.ddmanager.droppables[this.options.scope];this._splice(N),this._addToManager(L)}}this._super(M,L)},_activate:function(M){var L=G.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),L&&this._trigger("activate",M,this.ui(L))},_deactivate:function(M){var L=G.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),L&&this._trigger("deactivate",M,this.ui(L))},_over:function(M){var L=G.ui.ddmanager.current;L&&(L.currentItem||L.element)[0]!==this.element[0]&&this.accept.call(this.element[0],L.currentItem||L.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",M,this.ui(L)))},_out:function(M){var L=G.ui.ddmanager.current;L&&(L.currentItem||L.element)[0]!==this.element[0]&&this.accept.call(this.element[0],L.currentItem||L.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",M,this.ui(L)))},_drop:function(M,L){var N=L||G.ui.ddmanager.current,O=!1;return N&&(N.currentItem||N.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var P=G(this).droppable("instance");return P.options.greedy&&!P.options.disabled&&P.options.scope===N.options.scope&&P.accept.call(P.element[0],N.currentItem||N.element)&&G.ui.intersect(N,G.extend(P,{offset:P.element.offset()}),P.options.tolerance,M)?(O=!0,!1):void 0}),O?!1:this.accept.call(this.element[0],N.currentItem||N.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",M,this.ui(N)),this.element):!1):!1},ui:function(L){return{draggable:L.currentItem||L.element,helper:L.helper,position:L.position,offset:L.positionAbs}}}),G.ui.intersect=function(){function L(O,N,M){return O>=N&&N+M>O}return function(W,Q,X,O){if(!Q.offset){return !1}var U=(W.positionAbs||W.position.absolute).left+W.margins.left,N=(W.positionAbs||W.position.absolute).top+W.margins.top,M=U+W.helperProportions.width,R=N+W.helperProportions.height,P=Q.offset.left,V=Q.offset.top,S=P+Q.proportions().width,T=V+Q.proportions().height;switch(X){case"fit":return U>=P&&S>=M&&N>=V&&T>=R;case"intersect":return U+W.helperProportions.width/2>P&&S>M-W.helperProportions.width/2&&N+W.helperProportions.height/2>V&&T>R-W.helperProportions.height/2;case"pointer":return L(O.pageY,V,Q.proportions().height)&&L(O.pageX,P,Q.proportions().width);case"touch":return(N>=V&&T>=N||R>=V&&T>=R||V>N&&R>T)&&(U>=P&&S>=U||M>=P&&S>=M||P>U&&M>S);default:return !1}}}(),G.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(N,M){var O,R,L=G.ui.ddmanager.droppables[N.options.scope]||[],Q=M?M.type:null,P=(N.currentItem||N.element).find(":data(ui-droppable)").addBack();G:for(O=0;L.length>O;O++){if(!(L[O].options.disabled||N&&!L[O].accept.call(L[O].element[0],N.currentItem||N.element))){for(R=0;P.length>R;R++){if(P[R]===L[O].element[0]){L[O].proportions().height=0;continue G}}L[O].visible="none"!==L[O].element.css("display"),L[O].visible&&("mousedown"===Q&&L[O]._activate.call(L[O],M),L[O].offset=L[O].element.offset(),L[O].proportions({width:L[O].element[0].offsetWidth,height:L[O].element[0].offsetHeight}))}}},drop:function(M,L){var N=!1;return G.each((G.ui.ddmanager.droppables[M.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&G.ui.intersect(M,this,this.options.tolerance,L)&&(N=this._drop.call(this,L)||N),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],M.currentItem||M.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,L)))}),N},dragStart:function(M,L){M.element.parentsUntil("body").bind("scroll.droppable",function(){M.options.refreshPositions||G.ui.ddmanager.prepareOffsets(M,L)})},drag:function(M,L){M.options.refreshPositions&&G.ui.ddmanager.prepareOffsets(M,L),G.each(G.ui.ddmanager.droppables[M.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var O,R,N,Q=G.ui.intersect(M,this,this.options.tolerance,L),P=!Q&&this.isover?"isout":Q&&!this.isover?"isover":null;P&&(this.options.greedy&&(R=this.options.scope,N=this.element.parents(":data(ui-droppable)").filter(function(){return G(this).droppable("instance").options.scope===R}),N.length&&(O=G(N[0]).droppable("instance"),O.greedyChild="isover"===P)),O&&"isover"===P&&(O.isover=!1,O.isout=!0,O._out.call(O,L)),this[P]=!0,this["isout"===P?"isover":"isout"]=!1,this["isover"===P?"_over":"_out"].call(this,L),O&&"isout"===P&&(O.isout=!1,O.isover=!0,O._over.call(O,L)))}})},dragStop:function(M,L){M.element.parentsUntil("body").unbind("scroll.droppable"),M.options.refreshPositions||G.ui.ddmanager.prepareOffsets(M,L)}},G.ui.droppable,G.widget("ui.resizable",G.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(L){return parseInt(L,10)||0},_isNumber:function(L){return !isNaN(parseInt(L,10))},_hasScroll:function(M,L){if("hidden"===G(M).css("overflow")){return !1}var N=L&&"left"===L?"scrollLeft":"scrollTop",O=!1;return M[N]>0?!0:(M[N]=1,O=M[N]>0,M[N]=0,O)},_create:function(){var N,M,O,R,L,Q=this,P=this.options;if(this.element.addClass("ui-resizable"),G.extend(this,{_aspectRatio:!!P.aspectRatio,aspectRatio:P.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:P.helper||P.ghost||P.animate?P.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(G("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=P.handles||(G(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=G(),this.handles.constructor===String){for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),N=this.handles.split(","),this.handles={},M=0;N.length>M;M++){O=G.trim(N[M]),L="ui-resizable-"+O,R=G("<div class='ui-resizable-handle "+L+"'></div>"),R.css({zIndex:P.zIndex}),"se"===O&&R.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[O]=".ui-resizable-"+O,this.element.append(R)}}this._renderAxis=function(U){var T,V,W,S;U=U||this.element;for(T in this.handles){this.handles[T].constructor===String?this.handles[T]=this.element.children(this.handles[T]).first().show():(this.handles[T].jquery||this.handles[T].nodeType)&&(this.handles[T]=G(this.handles[T]),this._on(this.handles[T],{mousedown:Q._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(V=G(this.handles[T],this.element),S=/sw|ne|nw|se|n|s/.test(T)?V.outerHeight():V.outerWidth(),W=["padding",/ne|nw|n/.test(T)?"Top":/se|sw|s/.test(T)?"Bottom":/^e$/.test(T)?"Right":"Left"].join(""),U.css(W,S),this._proportionallyResize()),this._handles=this._handles.add(this.handles[T])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){Q.resizing||(this.className&&(R=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),Q.axis=R&&R[1]?R[1]:"se")}),P.autoHide&&(this._handles.hide(),G(this.element).addClass("ui-resizable-autohide").mouseenter(function(){P.disabled||(G(this).removeClass("ui-resizable-autohide"),Q._handles.show())}).mouseleave(function(){P.disabled||Q.resizing||(G(this).addClass("ui-resizable-autohide"),Q._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var M,L=function(N){G(N).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(L(this.element),M=this.element,this.originalElement.css({position:M.css("position"),width:M.outerWidth(),height:M.outerHeight(),top:M.css("top"),left:M.css("left")}).insertAfter(M),M.remove()),this.originalElement.css("resize",this.originalResizeStyle),L(this.originalElement),this},_mouseCapture:function(M){var L,N,O=!1;for(L in this.handles){N=G(this.handles[L])[0],(N===M.target||G.contains(N,M.target))&&(O=!0)}return !this.options.disabled&&O},_mouseStart:function(N){var M,O,Q,L=this.options,P=this.element;return this.resizing=!0,this._renderProxy(),M=this._num(this.helper.css("left")),O=this._num(this.helper.css("top")),L.containment&&(M+=G(L.containment).scrollLeft()||0,O+=G(L.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:M,top:O},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:P.width(),height:P.height()},this.originalSize=this._helper?{width:P.outerWidth(),height:P.outerHeight()}:{width:P.width(),height:P.height()},this.sizeDiff={width:P.outerWidth()-P.width(),height:P.outerHeight()-P.height()},this.originalPosition={left:M,top:O},this.originalMousePosition={left:N.pageX,top:N.pageY},this.aspectRatio="number"==typeof L.aspectRatio?L.aspectRatio:this.originalSize.width/this.originalSize.height||1,Q=G(".ui-resizable-"+this.axis).css("cursor"),G("body").css("cursor","auto"===Q?this.axis+"-resize":Q),P.addClass("ui-resizable-resizing"),this._propagate("start",N),!0},_mouseDrag:function(N){var M,P,S=this.originalMousePosition,L=this.axis,R=N.pageX-S.left||0,Q=N.pageY-S.top||0,O=this._change[L];return this._updatePrevProperties(),O?(M=O.apply(this,[N,R,Q]),this._updateVirtualBoundaries(N.shiftKey),(this._aspectRatio||N.shiftKey)&&(M=this._updateRatio(M,N)),M=this._respectSize(M,N),this._updateCache(M),this._propagate("resize",N),P=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),G.isEmptyObject(P)||(this._updatePrevProperties(),this._trigger("resize",N,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(T){this.resizing=!1;var P,U,N,R,M,L,Q,O=this.options,S=this;return this._helper&&(P=this._proportionallyResizeElements,U=P.length&&/textarea/i.test(P[0].nodeName),N=U&&this._hasScroll(P[0],"left")?0:S.sizeDiff.height,R=U?0:S.sizeDiff.width,M={width:S.helper.width()-R,height:S.helper.height()-N},L=parseInt(S.element.css("left"),10)+(S.position.left-S.originalPosition.left)||null,Q=parseInt(S.element.css("top"),10)+(S.position.top-S.originalPosition.top)||null,O.animate||this.element.css(G.extend(M,{top:Q,left:L})),S.helper.height(S.size.height),S.helper.width(S.size.width),this._helper&&!O.animate&&this._proportionallyResize()),G("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",T),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var L={};return this.position.top!==this.prevPosition.top&&(L.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(L.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(L.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(L.height=this.size.height+"px"),this.helper.css(L),L},_updateVirtualBoundaries:function(P){var N,M,O,R,L,Q=this.options;L={minWidth:this._isNumber(Q.minWidth)?Q.minWidth:0,maxWidth:this._isNumber(Q.maxWidth)?Q.maxWidth:1/0,minHeight:this._isNumber(Q.minHeight)?Q.minHeight:0,maxHeight:this._isNumber(Q.maxHeight)?Q.maxHeight:1/0},(this._aspectRatio||P)&&(N=L.minHeight*this.aspectRatio,O=L.minWidth/this.aspectRatio,M=L.maxHeight*this.aspectRatio,R=L.maxWidth/this.aspectRatio,N>L.minWidth&&(L.minWidth=N),O>L.minHeight&&(L.minHeight=O),L.maxWidth>M&&(L.maxWidth=M),L.maxHeight>R&&(L.maxHeight=R)),this._vBoundaries=L},_updateCache:function(L){this.offset=this.helper.offset(),this._isNumber(L.left)&&(this.position.left=L.left),this._isNumber(L.top)&&(this.position.top=L.top),this._isNumber(L.height)&&(this.size.height=L.height),this._isNumber(L.width)&&(this.size.width=L.width)},_updateRatio:function(O){var M=this.position,L=this.size,N=this.axis;return this._isNumber(O.height)?O.width=O.height*this.aspectRatio:this._isNumber(O.width)&&(O.height=O.width/this.aspectRatio),"sw"===N&&(O.left=M.left+(L.width-O.width),O.top=null),"nw"===N&&(O.top=M.top+(L.height-O.height),O.left=M.left+(L.width-O.width)),O},_respectSize:function(R){var U=this._vBoundaries,P=this.axis,V=this._isNumber(R.width)&&U.maxWidth&&U.maxWidth<R.width,N=this._isNumber(R.height)&&U.maxHeight&&U.maxHeight<R.height,S=this._isNumber(R.width)&&U.minWidth&&U.minWidth>R.width,M=this._isNumber(R.height)&&U.minHeight&&U.minHeight>R.height,L=this.originalPosition.left+this.originalSize.width,Q=this.position.top+this.size.height,O=/sw|nw|w/.test(P),T=/nw|ne|n/.test(P);return S&&(R.width=U.minWidth),M&&(R.height=U.minHeight),V&&(R.width=U.maxWidth),N&&(R.height=U.maxHeight),S&&O&&(R.left=L-U.minWidth),V&&O&&(R.left=L-U.maxWidth),M&&T&&(R.top=Q-U.minHeight),N&&T&&(R.top=Q-U.maxHeight),R.width||R.height||R.left||!R.top?R.width||R.height||R.top||!R.left||(R.left=null):R.top=null,R},_getPaddingPlusBorderDimensions:function(O){for(var M=0,L=[],N=[O.css("borderTopWidth"),O.css("borderRightWidth"),O.css("borderBottomWidth"),O.css("borderLeftWidth")],P=[O.css("paddingTop"),O.css("paddingRight"),O.css("paddingBottom"),O.css("paddingLeft")];4>M;M++){L[M]=parseInt(N[M],10)||0,L[M]+=parseInt(P[M],10)||0}return{height:L[0]+L[2],width:L[1]+L[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var N,M=0,L=this.helper||this.element;this._proportionallyResizeElements.length>M;M++){N=this._proportionallyResizeElements[M],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(N)),N.css({height:L.height()-this.outerDimensions.height||0,width:L.width()-this.outerDimensions.width||0})}}},_renderProxy:function(){var M=this.element,L=this.options;this.elementOffset=M.offset(),this._helper?(this.helper=this.helper||G("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++L.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(M,L){return{width:this.originalSize.width+L}},w:function(O,M){var L=this.originalSize,N=this.originalPosition;return{left:N.left+M,width:L.width-M}},n:function(O,M,L){var N=this.originalSize,P=this.originalPosition;return{top:P.top+L,height:N.height-L}},s:function(N,M,L){return{height:this.originalSize.height+L}},se:function(M,L,N){return G.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[M,L,N]))},sw:function(M,L,N){return G.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[M,L,N]))},ne:function(M,L,N){return G.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[M,L,N]))},nw:function(M,L,N){return G.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[M,L,N]))}},_propagate:function(M,L){G.ui.plugin.call(this,M,[L,this.ui()]),"resize"!==M&&this._trigger(M,L,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),G.ui.plugin.add("resizable","animate",{stop:function(T){var P=G(this).resizable("instance"),U=P.options,N=P._proportionallyResizeElements,R=N.length&&/textarea/i.test(N[0].nodeName),M=R&&P._hasScroll(N[0],"left")?0:P.sizeDiff.height,L=R?0:P.sizeDiff.width,Q={width:P.size.width-L,height:P.size.height-M},O=parseInt(P.element.css("left"),10)+(P.position.left-P.originalPosition.left)||null,S=parseInt(P.element.css("top"),10)+(P.position.top-P.originalPosition.top)||null;P.element.animate(G.extend(Q,S&&O?{top:S,left:O}:{}),{duration:U.animateDuration,easing:U.animateEasing,step:function(){var V={width:parseInt(P.element.css("width"),10),height:parseInt(P.element.css("height"),10),top:parseInt(P.element.css("top"),10),left:parseInt(P.element.css("left"),10)};N&&N.length&&G(N[0]).css({width:V.width,height:V.height}),P._updateCache(V),P._propagate("resize",T)}})}}),G.ui.plugin.add("resizable","containment",{start:function(){var V,P,W,N,T,M,L,Q=G(this).resizable("instance"),O=Q.options,U=Q.element,R=O.containment,S=R instanceof G?R.get(0):/parent/.test(R)?U.parent().get(0):R;S&&(Q.containerElement=G(S),/document/.test(R)||R===document?(Q.containerOffset={left:0,top:0},Q.containerPosition={left:0,top:0},Q.parentData={element:G(document),left:0,top:0,width:G(document).width(),height:G(document).height()||document.body.parentNode.scrollHeight}):(V=G(S),P=[],G(["Top","Right","Left","Bottom"]).each(function(Y,X){P[Y]=Q._num(V.css("padding"+X))}),Q.containerOffset=V.offset(),Q.containerPosition=V.position(),Q.containerSize={height:V.innerHeight()-P[3],width:V.innerWidth()-P[1]},W=Q.containerOffset,N=Q.containerSize.height,T=Q.containerSize.width,M=Q._hasScroll(S,"left")?S.scrollWidth:T,L=Q._hasScroll(S)?S.scrollHeight:N,Q.parentData={element:S,left:W.left,top:W.top,width:M,height:L}))},resize:function(W){var Q,X,O,U,N=G(this).resizable("instance"),L=N.options,R=N.containerOffset,P=N.position,V=N._aspectRatio||W.shiftKey,S={top:0,left:0},T=N.containerElement,M=!0;T[0]!==document&&/static/.test(T.css("position"))&&(S=R),P.left<(N._helper?R.left:0)&&(N.size.width=N.size.width+(N._helper?N.position.left-R.left:N.position.left-S.left),V&&(N.size.height=N.size.width/N.aspectRatio,M=!1),N.position.left=L.helper?R.left:0),P.top<(N._helper?R.top:0)&&(N.size.height=N.size.height+(N._helper?N.position.top-R.top:N.position.top),V&&(N.size.width=N.size.height*N.aspectRatio,M=!1),N.position.top=N._helper?R.top:0),O=N.containerElement.get(0)===N.element.parent().get(0),U=/relative|absolute/.test(N.containerElement.css("position")),O&&U?(N.offset.left=N.parentData.left+N.position.left,N.offset.top=N.parentData.top+N.position.top):(N.offset.left=N.element.offset().left,N.offset.top=N.element.offset().top),Q=Math.abs(N.sizeDiff.width+(N._helper?N.offset.left-S.left:N.offset.left-R.left)),X=Math.abs(N.sizeDiff.height+(N._helper?N.offset.top-S.top:N.offset.top-R.top)),Q+N.size.width>=N.parentData.width&&(N.size.width=N.parentData.width-Q,V&&(N.size.height=N.size.width/N.aspectRatio,M=!1)),X+N.size.height>=N.parentData.height&&(N.size.height=N.parentData.height-X,V&&(N.size.width=N.size.height*N.aspectRatio,M=!1)),M||(N.position.left=N.prevPosition.left,N.position.top=N.prevPosition.top,N.size.width=N.prevSize.width,N.size.height=N.prevSize.height)},stop:function(){var S=G(this).resizable("instance"),P=S.options,T=S.containerOffset,N=S.containerPosition,R=S.containerElement,M=G(S.helper),L=M.offset(),Q=M.outerWidth()-S.sizeDiff.width,O=M.outerHeight()-S.sizeDiff.height;S._helper&&!P.animate&&/relative/.test(R.css("position"))&&G(this).css({left:L.left-N.left-T.left,width:Q,height:O}),S._helper&&!P.animate&&/static/.test(R.css("position"))&&G(this).css({left:L.left-N.left-T.left,width:Q,height:O})}}),G.ui.plugin.add("resizable","alsoResize",{start:function(){var M=G(this).resizable("instance"),L=M.options;G(L.alsoResize).each(function(){var N=G(this);N.data("ui-resizable-alsoresize",{width:parseInt(N.width(),10),height:parseInt(N.height(),10),left:parseInt(N.css("left"),10),top:parseInt(N.css("top"),10)})})},resize:function(N,M){var O=G(this).resizable("instance"),R=O.options,L=O.originalSize,Q=O.originalPosition,P={height:O.size.height-L.height||0,width:O.size.width-L.width||0,top:O.position.top-Q.top||0,left:O.position.left-Q.left||0};G(R.alsoResize).each(function(){var T=G(this),U=G(this).data("ui-resizable-alsoresize"),V={},S=T.parents(M.originalElement[0]).length?["width","height"]:["width","height","top","left"];G.each(S,function(Y,X){var W=(U[X]||0)+(P[X]||0);W&&W>=0&&(V[X]=W||null)}),T.css(V)})},stop:function(){G(this).removeData("resizable-alsoresize")}}),G.ui.plugin.add("resizable","ghost",{start:function(){var M=G(this).resizable("instance"),L=M.options,N=M.size;M.ghost=M.originalElement.clone(),M.ghost.css({opacity:0.25,display:"block",position:"relative",height:N.height,width:N.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof L.ghost?L.ghost:""),M.ghost.appendTo(M.helper)},resize:function(){var L=G(this).resizable("instance");L.ghost&&L.ghost.css({position:"relative",height:L.size.height,width:L.size.width})},stop:function(){var L=G(this).resizable("instance");L.ghost&&L.helper&&L.helper.get(0).removeChild(L.ghost.get(0))}}),G.ui.plugin.add("resizable","grid",{resize:function(){var O,W=G(this).resizable("instance"),P=W.options,T=W.size,k=W.originalSize,S=W.originalPosition,Q=W.axis,X="number"==typeof P.grid?[P.grid,P.grid]:P.grid,V=X[0]||1,N=X[1]||1,b=Math.round((T.width-k.width)/V)*V,e=Math.round((T.height-k.height)/N)*N,R=k.width+b,Z=k.height+e,U=P.maxWidth&&R>P.maxWidth,Y=P.maxHeight&&Z>P.maxHeight,M=P.minWidth&&P.minWidth>R,L=P.minHeight&&P.minHeight>Z;P.grid=X,M&&(R+=V),L&&(Z+=N),U&&(R-=V),Y&&(Z-=N),/^(se|s|e)$/.test(Q)?(W.size.width=R,W.size.height=Z):/^(ne)$/.test(Q)?(W.size.width=R,W.size.height=Z,W.position.top=S.top-e):/^(sw)$/.test(Q)?(W.size.width=R,W.size.height=Z,W.position.left=S.left-b):((0>=Z-N||0>=R-V)&&(O=W._getPaddingPlusBorderDimensions(this)),Z-N>0?(W.size.height=Z,W.position.top=S.top-e):(Z=N-O.height,W.size.height=Z,W.position.top=S.top+k.height-Z),R-V>0?(W.size.width=R,W.position.left=S.left-b):(R=V-O.width,W.size.width=R,W.position.left=S.left+k.width-R))}}),G.ui.resizable,G.widget("ui.selectable",G.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var M,L=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){M=G(L.options.filter,L.element[0]),M.addClass("ui-selectee"),M.each(function(){var O=G(this),N=O.offset();G.data(this,"selectable-item",{element:this,$element:O,left:N.left,top:N.top,right:N.left+O.outerWidth(),bottom:N.top+O.outerHeight(),startselected:!1,selected:O.hasClass("ui-selected"),selecting:O.hasClass("ui-selecting"),unselecting:O.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=M.addClass("ui-selectee"),this._mouseInit(),this.helper=G("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(M){var L=this,N=this.options;this.opos=[M.pageX,M.pageY],this.options.disabled||(this.selectees=G(N.filter,this.element[0]),this._trigger("start",M),G(N.appendTo).append(this.helper),this.helper.css({left:M.pageX,top:M.pageY,width:0,height:0}),N.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var O=G.data(this,"selectable-item");O.startselected=!0,M.metaKey||M.ctrlKey||(O.$element.removeClass("ui-selected"),O.selected=!1,O.$element.addClass("ui-unselecting"),O.unselecting=!0,L._trigger("unselecting",M,{unselecting:O.element}))}),G(M.target).parents().addBack().each(function(){var O,P=G.data(this,"selectable-item");return P?(O=!M.metaKey&&!M.ctrlKey||!P.$element.hasClass("ui-selected"),P.$element.removeClass(O?"ui-unselecting":"ui-selected").addClass(O?"ui-selecting":"ui-unselecting"),P.unselecting=!O,P.selecting=O,P.selected=O,O?L._trigger("selecting",M,{selecting:P.element}):L._trigger("unselecting",M,{unselecting:P.element}),!1):void 0}))},_mouseDrag:function(N){if(this.dragged=!0,!this.options.disabled){var M,P=this,S=this.options,L=this.opos[0],R=this.opos[1],Q=N.pageX,O=N.pageY;return L>Q&&(M=Q,Q=L,L=M),R>O&&(M=O,O=R,R=M),this.helper.css({left:L,top:R,width:Q-L,height:O-R}),this.selectees.each(function(){var U=G.data(this,"selectable-item"),T=!1;U&&U.element!==P.element[0]&&("touch"===S.tolerance?T=!(U.left>Q||L>U.right||U.top>O||R>U.bottom):"fit"===S.tolerance&&(T=U.left>L&&Q>U.right&&U.top>R&&O>U.bottom),T?(U.selected&&(U.$element.removeClass("ui-selected"),U.selected=!1),U.unselecting&&(U.$element.removeClass("ui-unselecting"),U.unselecting=!1),U.selecting||(U.$element.addClass("ui-selecting"),U.selecting=!0,P._trigger("selecting",N,{selecting:U.element}))):(U.selecting&&((N.metaKey||N.ctrlKey)&&U.startselected?(U.$element.removeClass("ui-selecting"),U.selecting=!1,U.$element.addClass("ui-selected"),U.selected=!0):(U.$element.removeClass("ui-selecting"),U.selecting=!1,U.startselected&&(U.$element.addClass("ui-unselecting"),U.unselecting=!0),P._trigger("unselecting",N,{unselecting:U.element}))),U.selected&&(N.metaKey||N.ctrlKey||U.startselected||(U.$element.removeClass("ui-selected"),U.selected=!1,U.$element.addClass("ui-unselecting"),U.unselecting=!0,P._trigger("unselecting",N,{unselecting:U.element})))))}),!1}},_mouseStop:function(M){var L=this;return this.dragged=!1,G(".ui-unselecting",this.element[0]).each(function(){var N=G.data(this,"selectable-item");N.$element.removeClass("ui-unselecting"),N.unselecting=!1,N.startselected=!1,L._trigger("unselected",M,{unselected:N.element})}),G(".ui-selecting",this.element[0]).each(function(){var N=G.data(this,"selectable-item");N.$element.removeClass("ui-selecting").addClass("ui-selected"),N.selecting=!1,N.selected=!0,N.startselected=!0,L._trigger("selected",M,{selected:N.element})}),this._trigger("stop",M),this.helper.remove(),!1}}),G.widget("ui.sortable",G.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(N,M,L){return N>=M&&M+L>N},_isFloating:function(L){return/left|right/.test(L.css("float"))||/inline|table-cell/.test(L.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(M,L){this._super(M,L),"handle"===M&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),G.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var L=this.items.length-1;L>=0;L--){this.items[L].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(N,M){var O=null,P=!1,L=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(N),G(N.target).parents().each(function(){return G.data(this,L.widgetName+"-item")===L?(O=G(this),!1):void 0}),G.data(N.target,L.widgetName+"-item")===L&&(O=G(N.target)),O?!this.options.handle||M||(G(this.options.handle,O).find("*").addBack().each(function(){this===N.target&&(P=!0)}),P)?(this.currentItem=O,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(N,M,O){var Q,L,P=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(N),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},G.extend(this.offset,{click:{left:N.pageX-this.offset.left,top:N.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(N),this.originalPageX=N.pageX,this.originalPageY=N.pageY,P.cursorAt&&this._adjustOffsetFromHelper(P.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),P.containment&&this._setContainment(),P.cursor&&"auto"!==P.cursor&&(L=this.document.find("body"),this.storedCursor=L.css("cursor"),L.css("cursor",P.cursor),this.storedStylesheet=G("<style>*{ cursor: "+P.cursor+" !important; }</style>").appendTo(L)),P.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",P.opacity)),P.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",P.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",N,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!O){for(Q=this.containers.length-1;Q>=0;Q--){this.containers[Q]._trigger("activate",N,this._uiHash(this))}}return G.ui.ddmanager&&(G.ui.ddmanager.current=this),G.ui.ddmanager&&!P.dropBehaviour&&G.ui.ddmanager.prepareOffsets(this,N),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(N),!0},_mouseDrag:function(N){var M,O,R,L,Q=this.options,P=!1;for(this.position=this._generatePosition(N),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-N.pageY<Q.scrollSensitivity?this.scrollParent[0].scrollTop=P=this.scrollParent[0].scrollTop+Q.scrollSpeed:N.pageY-this.overflowOffset.top<Q.scrollSensitivity&&(this.scrollParent[0].scrollTop=P=this.scrollParent[0].scrollTop-Q.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-N.pageX<Q.scrollSensitivity?this.scrollParent[0].scrollLeft=P=this.scrollParent[0].scrollLeft+Q.scrollSpeed:N.pageX-this.overflowOffset.left<Q.scrollSensitivity&&(this.scrollParent[0].scrollLeft=P=this.scrollParent[0].scrollLeft-Q.scrollSpeed)):(N.pageY-this.document.scrollTop()<Q.scrollSensitivity?P=this.document.scrollTop(this.document.scrollTop()-Q.scrollSpeed):this.window.height()-(N.pageY-this.document.scrollTop())<Q.scrollSensitivity&&(P=this.document.scrollTop(this.document.scrollTop()+Q.scrollSpeed)),N.pageX-this.document.scrollLeft()<Q.scrollSensitivity?P=this.document.scrollLeft(this.document.scrollLeft()-Q.scrollSpeed):this.window.width()-(N.pageX-this.document.scrollLeft())<Q.scrollSensitivity&&(P=this.document.scrollLeft(this.document.scrollLeft()+Q.scrollSpeed))),P!==!1&&G.ui.ddmanager&&!Q.dropBehaviour&&G.ui.ddmanager.prepareOffsets(this,N)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),M=this.items.length-1;M>=0;M--){if(O=this.items[M],R=O.item[0],L=this._intersectsWithPointer(O),L&&O.instance===this.currentContainer&&R!==this.currentItem[0]&&this.placeholder[1===L?"next":"prev"]()[0]!==R&&!G.contains(this.placeholder[0],R)&&("semi-dynamic"===this.options.type?!G.contains(this.element[0],R):!0)){if(this.direction=1===L?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(O)){break}this._rearrange(N,O),this._trigger("change",N,this._uiHash());break}}return this._contactContainers(N),G.ui.ddmanager&&G.ui.ddmanager.drag(this,N),this._trigger("sort",N,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(N,M){if(N){if(G.ui.ddmanager&&!this.options.dropBehaviour&&G.ui.ddmanager.drop(this,N),this.options.revert){var O=this,Q=this.placeholder.offset(),L=this.options.axis,P={};L&&"x"!==L||(P.left=Q.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),L&&"y"!==L||(P.top=Q.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,G(this.helper).animate(P,parseInt(this.options.revert,10)||500,function(){O._clear(N)})}else{this._clear(N,M)}return !1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var L=this.containers.length-1;L>=0;L--){this.containers[L]._trigger("deactivate",null,this._uiHash(this)),this.containers[L].containerCache.over&&(this.containers[L]._trigger("out",null,this._uiHash(this)),this.containers[L].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),G.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?G(this.domPosition.prev).after(this.currentItem):G(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(M){var L=this._getItemsAsjQuery(M&&M.connected),N=[];return M=M||{},G(L).each(function(){var O=(G(M.item||this).attr(M.attribute||"id")||"").match(M.expression||/(.+)[\-=_](.+)/);O&&N.push((M.key||O[1]+"[]")+"="+(M.key&&M.expression?O[1]:O[2]))}),!N.length&&M.key&&N.push(M.key+"="),N.join("&")},toArray:function(M){var L=this._getItemsAsjQuery(M&&M.connected),N=[];return M=M||{},L.each(function(){N.push(G(M.item||this).attr(M.attribute||"id")||"")}),N},_intersectsWith:function(S){var X=this.positionAbs.left,Q=X+this.helperProportions.width,Y=this.positionAbs.top,O=Y+this.helperProportions.height,V=S.left,N=V+S.width,L=S.top,R=L+S.height,P=this.offset.click.top,W=this.offset.click.left,T="x"===this.options.axis||Y+P>L&&R>Y+P,U="y"===this.options.axis||X+W>V&&N>X+W,M=T&&U;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>S[this.floating?"width":"height"]?M:X+this.helperProportions.width/2>V&&N>Q-this.helperProportions.width/2&&Y+this.helperProportions.height/2>L&&R>O-this.helperProportions.height/2},_intersectsWithPointer:function(P){var N="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,P.top,P.height),M="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,P.left,P.width),O=N&&M,Q=this._getDragVerticalDirection(),L=this._getDragHorizontalDirection();return O?this.floating?L&&"right"===L||"down"===Q?2:1:Q&&("down"===Q?2:1):!1},_intersectsWithSides:function(O){var M=this._isOverAxis(this.positionAbs.top+this.offset.click.top,O.top+O.height/2,O.height),L=this._isOverAxis(this.positionAbs.left+this.offset.click.left,O.left+O.width/2,O.width),N=this._getDragVerticalDirection(),P=this._getDragHorizontalDirection();return this.floating&&P?"right"===P&&L||"left"===P&&!L:N&&("down"===N&&M||"up"===N&&!M)},_getDragVerticalDirection:function(){var L=this.positionAbs.top-this.lastPositionAbs.top;return 0!==L&&(L>0?"down":"up")},_getDragHorizontalDirection:function(){var L=this.positionAbs.left-this.lastPositionAbs.left;return 0!==L&&(L>0?"right":"left")},refresh:function(L){return this._refreshItems(L),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var L=this.options;return L.connectWith.constructor===String?[L.connectWith]:L.connectWith},_getItemsAsjQuery:function(S){function P(){L.push(this)}var T,N,R,M,L=[],Q=[],O=this._connectWith();if(O&&S){for(T=O.length-1;T>=0;T--){for(R=G(O[T],this.document[0]),N=R.length-1;N>=0;N--){M=G.data(R[N],this.widgetFullName),M&&M!==this&&!M.options.disabled&&Q.push([G.isFunction(M.options.items)?M.options.items.call(M.element):G(M.options.items,M.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),M])}}}for(Q.push([G.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):G(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),T=Q.length-1;T>=0;T--){Q[T][0].each(P)}return G(L)},_removeCurrentsFromItems:function(){var L=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=G.grep(this.items,function(N){for(var M=0;L.length>M;M++){if(L[M]===N.item[0]){return !1}}return !0})},_refreshItems:function(V){this.items=[],this.containers=[this];var P,W,N,T,M,L,Q,O,U=this.items,R=[[G.isFunction(this.options.items)?this.options.items.call(this.element[0],V,{item:this.currentItem}):G(this.options.items,this.element),this]],S=this._connectWith();if(S&&this.ready){for(P=S.length-1;P>=0;P--){for(N=G(S[P],this.document[0]),W=N.length-1;W>=0;W--){T=G.data(N[W],this.widgetFullName),T&&T!==this&&!T.options.disabled&&(R.push([G.isFunction(T.options.items)?T.options.items.call(T.element[0],V,{item:this.currentItem}):G(T.options.items,T.element),T]),this.containers.push(T))}}}for(P=R.length-1;P>=0;P--){for(M=R[P][1],L=R[P][0],W=0,O=L.length;O>W;W++){Q=G(L[W]),Q.data(this.widgetName+"-item",M),U.push({item:Q,instance:M,width:0,height:0,left:0,top:0})}}},refreshPositions:function(N){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var M,O,P,L;for(M=this.items.length-1;M>=0;M--){O=this.items[M],O.instance!==this.currentContainer&&this.currentContainer&&O.item[0]!==this.currentItem[0]||(P=this.options.toleranceElement?G(this.options.toleranceElement,O.item):O.item,N||(O.width=P.outerWidth(),O.height=P.outerHeight()),L=P.offset(),O.left=L.left,O.top=L.top)}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(M=this.containers.length-1;M>=0;M--){L=this.containers[M].element.offset(),this.containers[M].containerCache.left=L.left,this.containers[M].containerCache.top=L.top,this.containers[M].containerCache.width=this.containers[M].element.outerWidth(),this.containers[M].containerCache.height=this.containers[M].element.outerHeight()}}return this},_createPlaceholder:function(M){M=M||this;var L,N=M.options;N.placeholder&&N.placeholder.constructor!==String||(L=N.placeholder,N.placeholder={element:function(){var O=M.currentItem[0].nodeName.toLowerCase(),P=G("<"+O+">",M.document[0]).addClass(L||M.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===O?M._createTrPlaceholder(M.currentItem.find("tr").eq(0),G("<tr>",M.document[0]).appendTo(P)):"tr"===O?M._createTrPlaceholder(M.currentItem,P):"img"===O&&P.attr("src",M.currentItem.attr("src")),L||P.css("visibility","hidden"),P},update:function(O,P){(!L||N.forcePlaceholderSize)&&(P.height()||P.height(M.currentItem.innerHeight()-parseInt(M.currentItem.css("paddingTop")||0,10)-parseInt(M.currentItem.css("paddingBottom")||0,10)),P.width()||P.width(M.currentItem.innerWidth()-parseInt(M.currentItem.css("paddingLeft")||0,10)-parseInt(M.currentItem.css("paddingRight")||0,10)))}}),M.placeholder=G(N.placeholder.element.call(M.element,M.currentItem)),M.currentItem.after(M.placeholder),N.placeholder.update(M,M.placeholder)},_createTrPlaceholder:function(M,L){var N=this;M.children().each(function(){G("<td>&#160;</td>",N.document[0]).attr("colspan",G(this).attr("colspan")||1).appendTo(L)})},_contactContainers:function(W){var Q,X,O,U,N,L,R,P,V,S,T=null,M=null;for(Q=this.containers.length-1;Q>=0;Q--){if(!G.contains(this.currentItem[0],this.containers[Q].element[0])){if(this._intersectsWith(this.containers[Q].containerCache)){if(T&&G.contains(this.containers[Q].element[0],T.element[0])){continue}T=this.containers[Q],M=Q}else{this.containers[Q].containerCache.over&&(this.containers[Q]._trigger("out",W,this._uiHash(this)),this.containers[Q].containerCache.over=0)}}}if(T){if(1===this.containers.length){this.containers[M].containerCache.over||(this.containers[M]._trigger("over",W,this._uiHash(this)),this.containers[M].containerCache.over=1)}else{for(O=10000,U=null,V=T.floating||this._isFloating(this.currentItem),N=V?"left":"top",L=V?"width":"height",S=V?"clientX":"clientY",X=this.items.length-1;X>=0;X--){G.contains(this.containers[M].element[0],this.items[X].item[0])&&this.items[X].item[0]!==this.currentItem[0]&&(R=this.items[X].item.offset()[N],P=!1,W[S]-R>this.items[X][L]/2&&(P=!0),O>Math.abs(W[S]-R)&&(O=Math.abs(W[S]-R),U=this.items[X],this.direction=P?"up":"down"))}if(!U&&!this.options.dropOnEmpty){return }if(this.currentContainer===this.containers[M]){return this.currentContainer.containerCache.over||(this.containers[M]._trigger("over",W,this._uiHash()),this.currentContainer.containerCache.over=1),void 0}U?this._rearrange(W,U,null,!0):this._rearrange(W,null,this.containers[M].element,!0),this._trigger("change",W,this._uiHash()),this.containers[M]._trigger("change",W,this._uiHash(this)),this.currentContainer=this.containers[M],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[M]._trigger("over",W,this._uiHash(this)),this.containers[M].containerCache.over=1}}},_createHelper:function(M){var L=this.options,N=G.isFunction(L.helper)?G(L.helper.apply(this.element[0],[M,this.currentItem])):"clone"===L.helper?this.currentItem.clone():this.currentItem;return N.parents("body").length||G("parent"!==L.appendTo?L.appendTo:this.currentItem[0].parentNode)[0].appendChild(N[0]),N[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!N[0].style.width||L.forceHelperSize)&&N.width(this.currentItem.width()),(!N[0].style.height||L.forceHelperSize)&&N.height(this.currentItem.height()),N},_adjustOffsetFromHelper:function(L){"string"==typeof L&&(L=L.split(" ")),G.isArray(L)&&(L={left:+L[0],top:+L[1]||0}),"left" in L&&(this.offset.click.left=L.left+this.margins.left),"right" in L&&(this.offset.click.left=this.helperProportions.width-L.right+this.margins.left),"top" in L&&(this.offset.click.top=L.top+this.margins.top),"bottom" in L&&(this.offset.click.top=this.helperProportions.height-L.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var L=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&G.contains(this.scrollParent[0],this.offsetParent[0])&&(L.left+=this.scrollParent.scrollLeft(),L.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&G.ui.ie)&&(L={top:0,left:0}),{top:L.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:L.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var L=this.currentItem.position();return{top:L.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:L.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var M,L,N,O=this.options;"parent"===O.containment&&(O.containment=this.helper[0].parentNode),("document"===O.containment||"window"===O.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===O.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===O.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(O.containment)||(M=G(O.containment)[0],L=G(O.containment).offset(),N="hidden"!==G(M).css("overflow"),this.containment=[L.left+(parseInt(G(M).css("borderLeftWidth"),10)||0)+(parseInt(G(M).css("paddingLeft"),10)||0)-this.margins.left,L.top+(parseInt(G(M).css("borderTopWidth"),10)||0)+(parseInt(G(M).css("paddingTop"),10)||0)-this.margins.top,L.left+(N?Math.max(M.scrollWidth,M.offsetWidth):M.offsetWidth)-(parseInt(G(M).css("borderLeftWidth"),10)||0)-(parseInt(G(M).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,L.top+(N?Math.max(M.scrollHeight,M.offsetHeight):M.offsetHeight)-(parseInt(G(M).css("borderTopWidth"),10)||0)-(parseInt(G(M).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(N,M){M||(M=this.position);var O="absolute"===N?1:-1,P="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&G.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,L=/(html|body)/i.test(P[0].tagName);return{top:M.top+this.offset.relative.top*O+this.offset.parent.top*O-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():L?0:P.scrollTop())*O,left:M.left+this.offset.relative.left*O+this.offset.parent.left*O-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():L?0:P.scrollLeft())*O}},_generatePosition:function(N){var M,P,S=this.options,L=N.pageX,R=N.pageY,Q="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&G.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,O=/(html|body)/i.test(Q[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(N.pageX-this.offset.click.left<this.containment[0]&&(L=this.containment[0]+this.offset.click.left),N.pageY-this.offset.click.top<this.containment[1]&&(R=this.containment[1]+this.offset.click.top),N.pageX-this.offset.click.left>this.containment[2]&&(L=this.containment[2]+this.offset.click.left),N.pageY-this.offset.click.top>this.containment[3]&&(R=this.containment[3]+this.offset.click.top)),S.grid&&(M=this.originalPageY+Math.round((R-this.originalPageY)/S.grid[1])*S.grid[1],R=this.containment?M-this.offset.click.top>=this.containment[1]&&M-this.offset.click.top<=this.containment[3]?M:M-this.offset.click.top>=this.containment[1]?M-S.grid[1]:M+S.grid[1]:M,P=this.originalPageX+Math.round((L-this.originalPageX)/S.grid[0])*S.grid[0],L=this.containment?P-this.offset.click.left>=this.containment[0]&&P-this.offset.click.left<=this.containment[2]?P:P-this.offset.click.left>=this.containment[0]?P-S.grid[0]:P+S.grid[0]:P)),{top:R-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():O?0:Q.scrollTop()),left:L-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():O?0:Q.scrollLeft())}},_rearrange:function(O,M,L,N){L?L[0].appendChild(this.placeholder[0]):M.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?M.item[0]:M.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var P=this.counter;this._delay(function(){P===this.counter&&this.refreshPositions(!N)})},_clear:function(O,M){function L(S,R,Q){return function(T){Q._trigger(S,T,R._uiHash(R))}}this.reverting=!1;var N,P=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(N in this._storedCSS){("auto"===this._storedCSS[N]||"static"===this._storedCSS[N])&&(this._storedCSS[N]="")}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(this.fromOutside&&!M&&P.push(function(Q){this._trigger("receive",Q,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||M||P.push(function(Q){this._trigger("update",Q,this._uiHash())}),this!==this.currentContainer&&(M||(P.push(function(Q){this._trigger("remove",Q,this._uiHash())}),P.push(function(Q){return function(R){Q._trigger("receive",R,this._uiHash(this))}}.call(this,this.currentContainer)),P.push(function(Q){return function(R){Q._trigger("update",R,this._uiHash(this))}}.call(this,this.currentContainer)))),N=this.containers.length-1;N>=0;N--){M||P.push(L("deactivate",this,this.containers[N])),this.containers[N].containerCache.over&&(P.push(L("out",this,this.containers[N])),this.containers[N].containerCache.over=0)}if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,M||this._trigger("beforeStop",O,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!M){for(N=0;P.length>N;N++){P[N].call(this,O)}this._trigger("stop",O,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){G.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(M){var L=M||this;return{helper:L.helper,placeholder:L.placeholder||G([]),position:L.position,originalPosition:L.originalPosition,offset:L.positionAbs,item:L.currentItem,sender:M?M.element:null}}}),G.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(L){L.preventDefault()},"click .ui-menu-item":function(M){var L=G(M.target);!this.mouseHandled&&L.not(".ui-state-disabled").length&&(this.select(M),M.isPropagationStopped()||(this.mouseHandled=!0),L.has(".ui-menu").length?this.expand(M):!this.element.is(":focus")&&G(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(M){if(!this.previousFilter){var L=G(M.currentTarget);L.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(M,L)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(N,M){var L=this.active||this.element.find(this.options.items).eq(0);M||this.focus(N,L)},blur:function(L){this._delay(function(){G.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(L)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(L){this._closeOnDocumentClick(L)&&this.collapseAll(L),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var L=G(this);L.data("ui-menu-submenu-carat")&&L.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(N){var M,O,Q,L,P=!0;switch(N.keyCode){case G.ui.keyCode.PAGE_UP:this.previousPage(N);break;case G.ui.keyCode.PAGE_DOWN:this.nextPage(N);break;case G.ui.keyCode.HOME:this._move("first","first",N);break;case G.ui.keyCode.END:this._move("last","last",N);break;case G.ui.keyCode.UP:this.previous(N);break;case G.ui.keyCode.DOWN:this.next(N);break;case G.ui.keyCode.LEFT:this.collapse(N);break;case G.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(N);break;case G.ui.keyCode.ENTER:case G.ui.keyCode.SPACE:this._activate(N);break;case G.ui.keyCode.ESCAPE:this.collapse(N);break;default:P=!1,O=this.previousFilter||"",Q=String.fromCharCode(N.keyCode),L=!1,clearTimeout(this.filterTimer),Q===O?L=!0:Q=O+Q,M=this._filterMenuItems(Q),M=L&&-1!==M.index(this.active.next())?this.active.nextAll(".ui-menu-item"):M,M.length||(Q=String.fromCharCode(N.keyCode),M=this._filterMenuItems(Q)),M.length?(this.focus(N,M),this.previousFilter=Q,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter}P&&N.preventDefault()},_activate:function(L){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(L):this.select(L))},refresh:function(){var N,M,O=this,P=this.options.icons.submenu,L=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),L.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var R=G(this),Q=R.parent(),S=G("<span>").addClass("ui-menu-icon ui-icon "+P).data("ui-menu-submenu-carat",!0);Q.attr("aria-haspopup","true").prepend(S),R.attr("aria-labelledby",Q.attr("id"))}),N=L.add(this.element),M=N.find(this.options.items),M.not(".ui-menu-item").each(function(){var Q=G(this);O._isDivider(Q)&&Q.addClass("ui-widget-content ui-menu-divider")}),M.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),M.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!G.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(M,L){"icons"===M&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(L.submenu),"disabled"===M&&this.element.toggleClass("ui-state-disabled",!!L).attr("aria-disabled",L),this._super(M,L)},focus:function(O,M){var L,N;this.blur(O,O&&"focus"===O.type),this._scrollIntoView(M),this.active=M.first(),N=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",N.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),O&&"keydown"===O.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),L=M.children(".ui-menu"),L.length&&O&&/^mouse/.test(O.type)&&this._startOpening(L),this.activeMenu=M.parent(),this._trigger("focus",O,{item:M})},_scrollIntoView:function(N){var M,O,R,L,Q,P;this._hasScroll()&&(M=parseFloat(G.css(this.activeMenu[0],"borderTopWidth"))||0,O=parseFloat(G.css(this.activeMenu[0],"paddingTop"))||0,R=N.offset().top-this.activeMenu.offset().top-M-O,L=this.activeMenu.scrollTop(),Q=this.activeMenu.height(),P=N.outerHeight(),0>R?this.activeMenu.scrollTop(L+R):R+P>Q&&this.activeMenu.scrollTop(L+R-Q+P))},blur:function(M,L){L||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",M,{item:this.active}))},_startOpening:function(L){clearTimeout(this.timer),"true"===L.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(L)},this.delay))},_open:function(M){var L=G.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(M.parents(".ui-menu")).hide().attr("aria-hidden","true"),M.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(L)},collapseAll:function(M,L){clearTimeout(this.timer),this.timer=this._delay(function(){var N=L?this.element:G(M&&M.target).closest(this.element.find(".ui-menu"));N.length||(N=this.element),this._close(N),this.blur(M),this.activeMenu=N},this.delay)},_close:function(L){L||(L=this.active?this.active.parent():this.element),L.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(L){return !G(L.target).closest(".ui-menu").length},_isDivider:function(L){return !/[^\-\u2014\u2013\s]/.test(L.text())},collapse:function(M){var L=this.active&&this.active.parent().closest(".ui-menu-item",this.element);L&&L.length&&(this._close(),this.focus(M,L))},expand:function(M){var L=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();L&&L.length&&(this._open(L.parent()),this._delay(function(){this.focus(M,L)}))},next:function(L){this._move("next","first",L)},previous:function(L){this._move("prev","last",L)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(O,M,L){var N;this.active&&(N="first"===O||"last"===O?this.active["first"===O?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[O+"All"](".ui-menu-item").eq(0)),N&&N.length&&this.active||(N=this.activeMenu.find(this.options.items)[M]()),this.focus(L,N)},nextPage:function(M){var L,N,O;return this.active?(this.isLastItem()||(this._hasScroll()?(N=this.active.offset().top,O=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return L=G(this),0>L.offset().top-N-O}),this.focus(M,L)):this.focus(M,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(M),void 0)},previousPage:function(M){var L,N,O;return this.active?(this.isFirstItem()||(this._hasScroll()?(N=this.active.offset().top,O=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return L=G(this),L.offset().top-N+O>0}),this.focus(M,L)):this.focus(M,this.activeMenu.find(this.options.items).first())),void 0):(this.next(M),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(M){this.active=this.active||G(M.target).closest(".ui-menu-item");var L={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(M,!0),this._trigger("select",M,L)},_filterMenuItems:function(M){var L=M.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),N=RegExp("^"+L,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return N.test(G.trim(G(this).text()))})}}),G.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var N,M,O,Q=this.element[0].nodeName.toLowerCase(),L="textarea"===Q,P="input"===Q;this.isMultiLine=L?!0:P?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[L||P?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(S){if(this.element.prop("readOnly")){return N=!0,O=!0,M=!0,void 0}N=!1,O=!1,M=!1;var R=G.ui.keyCode;switch(S.keyCode){case R.PAGE_UP:N=!0,this._move("previousPage",S);break;case R.PAGE_DOWN:N=!0,this._move("nextPage",S);break;case R.UP:N=!0,this._keyEvent("previous",S);break;case R.DOWN:N=!0,this._keyEvent("next",S);break;case R.ENTER:this.menu.active&&(N=!0,S.preventDefault(),this.menu.select(S));break;case R.TAB:this.menu.active&&this.menu.select(S);break;case R.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(S),S.preventDefault());break;default:M=!0,this._searchTimeout(S)}},keypress:function(R){if(N){return N=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&R.preventDefault(),void 0}if(!M){var S=G.ui.keyCode;switch(R.keyCode){case S.PAGE_UP:this._move("previousPage",R);break;case S.PAGE_DOWN:this._move("nextPage",R);break;case S.UP:this._keyEvent("previous",R);break;case S.DOWN:this._keyEvent("next",R)}}},input:function(R){return O?(O=!1,R.preventDefault(),void 0):(this._searchTimeout(R),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(R){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(R),this._change(R),void 0)}}),this._initSource(),this.menu=G("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(S){S.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var R=this.menu.element[0];G(S.target).closest(".ui-menu-item").length||this._delay(function(){var T=this;this.document.one("mousedown",function(U){U.target===T.element[0]||U.target===R||G.contains(R,U.target)||T.close()})})},menufocus:function(S,R){var T,U;return this.isNewMenu&&(this.isNewMenu=!1,S.originalEvent&&/^mouse/.test(S.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){G(S.target).trigger(S.originalEvent)}),void 0):(U=R.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",S,{item:U})&&S.originalEvent&&/^key/.test(S.originalEvent.type)&&this._value(U.value),T=R.item.attr("aria-label")||U.value,T&&G.trim(T).length&&(this.liveRegion.children().hide(),G("<div>").text(T).appendTo(this.liveRegion)),void 0)},menuselect:function(U,S){var R=S.item.data("ui-autocomplete-item"),T=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=T,this._delay(function(){this.previous=T,this.selectedItem=R})),!1!==this._trigger("select",U,{item:R})&&this._value(R.value),this.term=this._value(),this.close(U),this.selectedItem=R}}),this.liveRegion=G("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(M,L){this._super(M,L),"source"===M&&this._initSource(),"appendTo"===M&&this.menu.element.appendTo(this._appendTo()),"disabled"===M&&L&&this.xhr&&this.xhr.abort()},_appendTo:function(){var L=this.options.appendTo;return L&&(L=L.jquery||L.nodeType?G(L):this.document.find(L).eq(0)),L&&L[0]||(L=this.element.closest(".ui-front")),L.length||(L=this.document[0].body),L},_initSource:function(){var M,L,N=this;G.isArray(this.options.source)?(M=this.options.source,this.source=function(O,P){P(G.ui.autocomplete.filter(M,O.term))}):"string"==typeof this.options.source?(L=this.options.source,this.source=function(O,P){N.xhr&&N.xhr.abort(),N.xhr=G.ajax({url:L,data:O,dataType:"json",success:function(Q){P(Q)},error:function(){P([])}})}):this.source=this.options.source},_searchTimeout:function(L){clearTimeout(this.searching),this.searching=this._delay(function(){var N=this.term===this._value(),M=this.menu.element.is(":visible"),O=L.altKey||L.ctrlKey||L.metaKey||L.shiftKey;(!N||N&&!M&&!O)&&(this.selectedItem=null,this.search(null,L))},this.options.delay)},search:function(M,L){return M=null!=M?M:this._value(),this.term=this._value(),M.length<this.options.minLength?this.close(L):this._trigger("search",L)!==!1?this._search(M):void 0},_search:function(L){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:L},this._response())},_response:function(){var L=++this.requestIndex;return G.proxy(function(M){L===this.requestIndex&&this.__response(M),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(L){L&&(L=this._normalize(L)),this._trigger("response",null,{content:L}),!this.options.disabled&&L&&L.length&&!this.cancelSearch?(this._suggest(L),this._trigger("open")):this._close()},close:function(L){this.cancelSearch=!0,this._close(L)},_close:function(L){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",L))},_change:function(L){this.previous!==this._value()&&this._trigger("change",L,{item:this.selectedItem})},_normalize:function(L){return L.length&&L[0].label&&L[0].value?L:G.map(L,function(M){return"string"==typeof M?{label:M,value:M}:G.extend({},M,{label:M.label||M.value,value:M.value||M.label})})},_suggest:function(M){var L=this.menu.element.empty();this._renderMenu(L,M),this.isNewMenu=!0,this.menu.refresh(),L.show(),this._resizeMenu(),L.position(G.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var L=this.menu.element;L.outerWidth(Math.max(L.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(M,L){var N=this;G.each(L,function(P,O){N._renderItemData(M,O)})},_renderItemData:function(M,L){return this._renderItem(M,L).data("ui-autocomplete-item",L)},_renderItem:function(M,L){return G("<li>").text(L.label).appendTo(M)},_move:function(M,L){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(M)||this.menu.isLastItem()&&/^next/.test(M)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[M](L),void 0):(this.search(null,L),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(M,L){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(M,L),L.preventDefault())}}),G.extend(G.ui.autocomplete,{escapeRegex:function(L){return L.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(M,L){var N=RegExp(G.ui.autocomplete.escapeRegex(L),"i");return G.grep(M,function(O){return N.test(O.label||O.value||O)})}}),G.widget("ui.autocomplete",G.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(L){return L+(L>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(M){var L;this._superApply(arguments),this.options.disabled||this.cancelSearch||(L=M&&M.length?this.options.messages.results(M.length):this.options.messages.noResults,this.liveRegion.children().hide(),G("<div>").text(L).appendTo(this.liveRegion))}}),G.ui.autocomplete;var B,A="ui-button ui-widget ui-state-default ui-corner-all",F="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",D=function(){var L=G(this);setTimeout(function(){L.find(":ui-button").button("refresh")},1)},I=function(M){var L=M.name,N=M.form,O=G([]);return L&&(L=L.replace(/'/g,"\\'"),O=N?G(N).find("[name='"+L+"'][type=radio]"):G("[name='"+L+"'][type=radio]",M.ownerDocument).filter(function(){return !this.form})),O};G.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,D),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var M=this,L=this.options,N="checkbox"===this.type||"radio"===this.type,O=N?"":"ui-state-active";null===L.label&&(L.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(A).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){L.disabled||this===B&&G(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){L.disabled||G(this).removeClass(O)}).bind("click"+this.eventNamespace,function(P){L.disabled&&(P.preventDefault(),P.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),N&&this.element.bind("change"+this.eventNamespace,function(){M.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return L.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(L.disabled){return !1}G(this).addClass("ui-state-active"),M.buttonElement.attr("aria-pressed","true");var P=M.element[0];I(P).not(P).map(function(){return G(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return L.disabled?!1:(G(this).addClass("ui-state-active"),B=this,M.document.one("mouseup",function(){B=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return L.disabled?!1:(G(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(P){return L.disabled?!1:((P.keyCode===G.ui.keyCode.SPACE||P.keyCode===G.ui.keyCode.ENTER)&&G(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){G(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(P){P.keyCode===G.ui.keyCode.SPACE&&G(this).click()})),this._setOption("disabled",L.disabled),this._resetButton()},_determineButtonType:function(){var N,M,L;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(N=this.element.parents().last(),M="label[for='"+this.element.attr("id")+"']",this.buttonElement=N.find(M),this.buttonElement.length||(N=N.length?N.siblings():this.element.siblings(),this.buttonElement=N.filter(M),this.buttonElement.length||(this.buttonElement=N.find(M))),this.element.addClass("ui-helper-hidden-accessible"),L=this.element.is(":checked"),L&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",L)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(A+" ui-state-active "+F).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(M,L){return this._super(M,L),"disabled"===M?(this.widget().toggleClass("ui-state-disabled",!!L),this.element.prop("disabled",!!L),L&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var L=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");L!==this.options.disabled&&this._setOption("disabled",L),"radio"===this.type?I(this.element[0]).each(function(){G(this).is(":checked")?G(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):G(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type){return this.options.label&&this.element.val(this.options.label),void 0}var N=this.buttonElement.removeClass(F),M=G("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(N.empty()).text(),O=this.options.icons,P=O.primary&&O.secondary,L=[];O.primary||O.secondary?(this.options.text&&L.push("ui-button-text-icon"+(P?"s":O.primary?"-primary":"-secondary")),O.primary&&N.prepend("<span class='ui-button-icon-primary ui-icon "+O.primary+"'></span>"),O.secondary&&N.append("<span class='ui-button-icon-secondary ui-icon "+O.secondary+"'></span>"),this.options.text||(L.push(P?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||N.attr("title",G.trim(M)))):L.push("ui-button-text-only"),N.addClass(L.join(" "))}}),G.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(M,L){"disabled"===M&&this.buttons.button("option",M,L),this._super(M,L)},refresh:function(){var M="rtl"===this.element.css("direction"),L=this.element.find(this.options.items),N=L.filter(":ui-button");L.not(":ui-button").button(),N.button("refresh"),this.buttons=L.map(function(){return G(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(M?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(M?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return G(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),G.ui.button,G.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(M){var L=G(this).css(M).offset().top;0>L&&G(this).css("top",M.top-L)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&G.fn.draggable&&this._makeDraggable(),this.options.resizable&&G.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var L=this.options.appendTo;return L&&(L.jquery||L.nodeType)?G(L):this.document.find(L||"body").eq(0)},_destroy:function(){var M,L=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),M=L.parent.children().eq(L.index),M.length&&M[0]!==this.element[0]?M.before(this.element):L.parent.append(this.element)},widget:function(){return this.uiDialog},disable:G.noop,enable:G.noop,close:function(M){var L,N=this;if(this._isOpen&&this._trigger("beforeClose",M)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length){try{L=this.document[0].activeElement,L&&"body"!==L.nodeName.toLowerCase()&&G(L).blur()}catch(O){}}this._hide(this.uiDialog,this.options.hide,function(){N._trigger("close",M)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(N,M){var O=!1,P=this.uiDialog.siblings(".ui-front:visible").map(function(){return +G(this).css("z-index")}).get(),L=Math.max.apply(null,P);return L>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",L+1),O=!0),O&&!M&&this._trigger("focus",N),O},open:function(){var L=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=G(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){L._focusTabbable(),L._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var L=this._focusedElement;L||(L=this.element.find("[autofocus]")),L.length||(L=this.element.find(":tabbable")),L.length||(L=this.uiDialogButtonPane.find(":tabbable")),L.length||(L=this.uiDialogTitlebarClose.filter(":tabbable")),L.length||(L=this.uiDialog),L.eq(0).focus()},_keepFocus:function(M){function L(){var O=this.document[0].activeElement,N=this.uiDialog[0]===O||G.contains(this.uiDialog[0],O);N||this._focusTabbable()}M.preventDefault(),L.call(this),this._delay(L)},_createWrapper:function(){this.uiDialog=G("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(M){if(this.options.closeOnEscape&&!M.isDefaultPrevented()&&M.keyCode&&M.keyCode===G.ui.keyCode.ESCAPE){return M.preventDefault(),this.close(M),void 0}if(M.keyCode===G.ui.keyCode.TAB&&!M.isDefaultPrevented()){var L=this.uiDialog.find(":tabbable"),N=L.filter(":first"),O=L.filter(":last");M.target!==O[0]&&M.target!==this.uiDialog[0]||M.shiftKey?M.target!==N[0]&&M.target!==this.uiDialog[0]||!M.shiftKey||(this._delay(function(){O.focus()}),M.preventDefault()):(this._delay(function(){N.focus()}),M.preventDefault())}},mousedown:function(L){this._moveToTop(L)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var L;this.uiDialogTitlebar=G("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(M){G(M.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=G("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(M){M.preventDefault(),this.close(M)}}),L=G("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(L),this.uiDialog.attr({"aria-labelledby":L.attr("id")})},_title:function(L){this.options.title||L.html("&#160;"),L.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=G("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=G("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var M=this,L=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),G.isEmptyObject(L)||G.isArray(L)&&!L.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(G.each(L,function(O,P){var Q,N;P=G.isFunction(P)?{click:P,text:O}:P,P=G.extend({type:"button"},P),Q=P.click,P.click=function(){Q.apply(M.element[0],arguments)},N={icons:P.icons,text:P.showText},delete P.icons,delete P.showText,G("<button></button>",P).button(N).appendTo(M.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function M(O){return{position:O.position,offset:O.offset}}var L=this,N=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(O,P){G(this).addClass("ui-dialog-dragging"),L._blockFrames(),L._trigger("dragStart",O,M(P))},drag:function(P,O){L._trigger("drag",P,M(O))},stop:function(R,O){var Q=O.offset.left-L.document.scrollLeft(),P=O.offset.top-L.document.scrollTop();N.position={my:"left top",at:"left"+(Q>=0?"+":"")+Q+" top"+(P>=0?"+":"")+P,of:L.window},G(this).removeClass("ui-dialog-dragging"),L._unblockFrames(),L._trigger("dragStop",R,M(O))}})},_makeResizable:function(){function N(R){return{originalPosition:R.originalPosition,originalSize:R.originalSize,position:R.position,size:R.size}}var M=this,O=this.options,Q=O.resizable,L=this.uiDialog.css("position"),P="string"==typeof Q?Q:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:O.maxWidth,maxHeight:O.maxHeight,minWidth:O.minWidth,minHeight:this._minHeight(),handles:P,start:function(R,S){G(this).addClass("ui-dialog-resizing"),M._blockFrames(),M._trigger("resizeStart",R,N(S))},resize:function(S,R){M._trigger("resize",S,N(R))},stop:function(V,R){var U=M.uiDialog.offset(),T=U.left-M.document.scrollLeft(),S=U.top-M.document.scrollTop();O.height=M.uiDialog.height(),O.width=M.uiDialog.width(),O.position={my:"left top",at:"left"+(T>=0?"+":"")+T+" top"+(S>=0?"+":"")+S,of:M.window},G(this).removeClass("ui-dialog-resizing"),M._unblockFrames(),M._trigger("resizeStop",V,N(R))}}).css("position",L)},_trackFocus:function(){this._on(this.widget(),{focusin:function(L){this._makeFocusTarget(),this._focusedElement=G(L.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var M=this._trackingInstances(),L=G.inArray(this,M);-1!==L&&M.splice(L,1)},_trackingInstances:function(){var L=this.document.data("ui-dialog-instances");return L||(L=[],this.document.data("ui-dialog-instances",L)),L},_minHeight:function(){var L=this.options;return"auto"===L.height?L.minHeight:Math.min(L.minHeight,L.height)},_position:function(){var L=this.uiDialog.is(":visible");L||this.uiDialog.show(),this.uiDialog.position(this.options.position),L||this.uiDialog.hide()},_setOptions:function(M){var L=this,N=!1,O={};G.each(M,function(Q,P){L._setOption(Q,P),Q in L.sizeRelatedOptions&&(N=!0),Q in L.resizableRelatedOptions&&(O[Q]=P)}),N&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",O)},_setOption:function(O,M){var L,N,P=this.uiDialog;"dialogClass"===O&&P.removeClass(this.options.dialogClass).addClass(M),"disabled"!==O&&(this._super(O,M),"appendTo"===O&&this.uiDialog.appendTo(this._appendTo()),"buttons"===O&&this._createButtons(),"closeText"===O&&this.uiDialogTitlebarClose.button({label:""+M}),"draggable"===O&&(L=P.is(":data(ui-draggable)"),L&&!M&&P.draggable("destroy"),!L&&M&&this._makeDraggable()),"position"===O&&this._position(),"resizable"===O&&(N=P.is(":data(ui-resizable)"),N&&!M&&P.resizable("destroy"),N&&"string"==typeof M&&P.resizable("option","handles",M),N||M===!1||this._makeResizable()),"title"===O&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var O,M,L,N=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),N.minWidth>N.width&&(N.width=N.minWidth),O=this.uiDialog.css({height:"auto",width:N.width}).outerHeight(),M=Math.max(0,N.minHeight-O),L="number"==typeof N.maxHeight?Math.max(0,N.maxHeight-O):"none","auto"===N.height?this.element.css({minHeight:M,maxHeight:L,height:"auto"}):this.element.height(Math.max(0,N.height-O)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var L=G(this);return G("<div>").css({position:"absolute",width:L.outerWidth(),height:L.outerHeight()}).appendTo(L.parent()).offset(L.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(L){return G(L.target).closest(".ui-dialog").length?!0:!!G(L.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var L=!0;this._delay(function(){L=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(M){L||this._allowInteraction(M)||(M.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=G("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var L=this.document.data("ui-dialog-overlays")-1;L?this.document.data("ui-dialog-overlays",L):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),G.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var L=/#.*$/;return function(N){var M,O;N=N.cloneNode(!1),M=N.href.replace(L,""),O=location.href.replace(L,"");try{M=decodeURIComponent(M)}catch(P){}try{O=decodeURIComponent(O)}catch(P){}return N.hash.length>1&&M===O}}(),_create:function(){var M=this,L=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",L.collapsible),this._processTabs(),L.active=this._initialActive(),G.isArray(L.disabled)&&(L.disabled=G.unique(L.disabled.concat(G.map(this.tabs.filter(".ui-state-disabled"),function(N){return M.tabs.index(N)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(L.active):G(),this._refresh(),this.active.length&&this.load(L.active)},_initialActive:function(){var M=this.options.active,L=this.options.collapsible,N=location.hash.substring(1);return null===M&&(N&&this.tabs.each(function(O,P){return G(P).attr("aria-controls")===N?(M=O,!1):void 0}),null===M&&(M=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===M||-1===M)&&(M=this.tabs.length?0:!1)),M!==!1&&(M=this.tabs.index(this.tabs.eq(M)),-1===M&&(M=L?!1:0)),!L&&M===!1&&this.anchors.length&&(M=0),M},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):G()}},_tabKeydown:function(M){var L=G(this.document[0].activeElement).closest("li"),N=this.tabs.index(L),O=!0;if(!this._handlePageNav(M)){switch(M.keyCode){case G.ui.keyCode.RIGHT:case G.ui.keyCode.DOWN:N++;break;case G.ui.keyCode.UP:case G.ui.keyCode.LEFT:O=!1,N--;break;case G.ui.keyCode.END:N=this.anchors.length-1;break;case G.ui.keyCode.HOME:N=0;break;case G.ui.keyCode.SPACE:return M.preventDefault(),clearTimeout(this.activating),this._activate(N),void 0;case G.ui.keyCode.ENTER:return M.preventDefault(),clearTimeout(this.activating),this._activate(N===this.options.active?!1:N),void 0;default:return }M.preventDefault(),clearTimeout(this.activating),N=this._focusNextTab(N,O),M.ctrlKey||M.metaKey||(L.attr("aria-selected","false"),this.tabs.eq(N).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",N)},this.delay))}},_panelKeydown:function(L){this._handlePageNav(L)||L.ctrlKey&&L.keyCode===G.ui.keyCode.UP&&(L.preventDefault(),this.active.focus())},_handlePageNav:function(L){return L.altKey&&L.keyCode===G.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):L.altKey&&L.keyCode===G.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(M,L){function N(){return M>O&&(M=0),0>M&&(M=O),M}for(var O=this.tabs.length-1;-1!==G.inArray(N(),this.options.disabled);){M=L?M+1:M-1}return M},_focusNextTab:function(M,L){return M=this._findNextTab(M,L),this.tabs.eq(M).focus(),M},_setOption:function(M,L){return"active"===M?(this._activate(L),void 0):"disabled"===M?(this._setupDisabled(L),void 0):(this._super(M,L),"collapsible"===M&&(this.element.toggleClass("ui-tabs-collapsible",L),L||this.options.active!==!1||this._activate(0)),"event"===M&&this._setupEvents(L),"heightStyle"===M&&this._setupHeightStyle(L),void 0)},_sanitizeSelector:function(L){return L?L.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var M=this.options,L=this.tablist.children(":has(a[href])");M.disabled=G.map(L.filter(".ui-state-disabled"),function(N){return L.index(N)}),this._processTabs(),M.active!==!1&&this.anchors.length?this.active.length&&!G.contains(this.tablist[0],this.active[0])?this.tabs.length===M.disabled.length?(M.active=!1,this.active=G()):this._activate(this._findNextTab(Math.max(0,M.active-1),!1)):M.active=this.tabs.index(this.active):(M.active=!1,this.active=G()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var M=this,L=this.tabs,N=this.anchors,O=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(P){G(this).is(".ui-state-disabled")&&P.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){G(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return G("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=G(),this.anchors.each(function(R,T){var W,Q,V,U=G(T).uniqueId().attr("id"),S=G(T).closest("li"),P=S.attr("aria-controls");M._isLocal(T)?(W=T.hash,V=W.substring(1),Q=M.element.find(M._sanitizeSelector(W))):(V=S.attr("aria-controls")||G({}).uniqueId()[0].id,W="#"+V,Q=M.element.find(W),Q.length||(Q=M._createPanel(V),Q.insertAfter(M.panels[R-1]||M.tablist)),Q.attr("aria-live","polite")),Q.length&&(M.panels=M.panels.add(Q)),P&&S.data("ui-tabs-aria-controls",P),S.attr({"aria-controls":V,"aria-labelledby":U}),Q.attr("aria-labelledby",U)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),L&&(this._off(L.not(this.tabs)),this._off(N.not(this.anchors)),this._off(O.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(L){return G("<div>").attr("id",L).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(M){G.isArray(M)&&(M.length?M.length===this.anchors.length&&(M=!0):M=!1);for(var L,N=0;L=this.tabs[N];N++){M===!0||-1!==G.inArray(N,M)?G(L).addClass("ui-state-disabled").attr("aria-disabled","true"):G(L).removeClass("ui-state-disabled").removeAttr("aria-disabled")}this.options.disabled=M},_setupEvents:function(M){var L={};M&&G.each(M.split(" "),function(O,N){L[N]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(N){N.preventDefault()}}),this._on(this.anchors,L),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(M){var L,N=this.element.parent();"fill"===M?(L=N.height(),L-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var O=G(this),P=O.css("position");"absolute"!==P&&"fixed"!==P&&(L-=O.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){L-=G(this).outerHeight(!0)}),this.panels.each(function(){G(this).height(Math.max(0,L-G(this).innerHeight()+G(this).height()))}).css("overflow","auto")):"auto"===M&&(L=0,this.panels.each(function(){L=Math.max(L,G(this).height("").height())}).height(L))},_eventHandler:function(T){var P=this.options,U=this.active,N=G(T.currentTarget),R=N.closest("li"),M=R[0]===U[0],L=M&&P.collapsible,Q=L?G():this._getPanelForTab(R),O=U.length?this._getPanelForTab(U):G(),S={oldTab:U,oldPanel:O,newTab:L?G():R,newPanel:Q};T.preventDefault(),R.hasClass("ui-state-disabled")||R.hasClass("ui-tabs-loading")||this.running||M&&!P.collapsible||this._trigger("beforeActivate",T,S)===!1||(P.active=L?!1:this.tabs.index(R),this.active=M?G():R,this.xhr&&this.xhr.abort(),O.length||Q.length||G.error("jQuery UI Tabs: Mismatching fragment identifier."),Q.length&&this.load(this.tabs.index(R),T),this._toggle(T,S))},_toggle:function(N,M){function O(){L.running=!1,L._trigger("activate",N,M)}function R(){M.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),Q.length&&L.options.show?L._show(Q,L.options.show,O):(Q.show(),O())}var L=this,Q=M.newPanel,P=M.oldPanel;this.running=!0,P.length&&this.options.hide?this._hide(P,this.options.hide,function(){M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),R()}):(M.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),P.hide(),R()),P.attr("aria-hidden","true"),M.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),Q.length&&P.length?M.oldTab.attr("tabIndex",-1):Q.length&&this.tabs.filter(function(){return 0===G(this).attr("tabIndex")}).attr("tabIndex",-1),Q.attr("aria-hidden","false"),M.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(M){var L,N=this._findActive(M);N[0]!==this.active[0]&&(N.length||(N=this.active),L=N.find(".ui-tabs-anchor")[0],this._eventHandler({target:L,currentTarget:L,preventDefault:G.noop}))},_findActive:function(L){return L===!1?G():this.tabs.eq(L)},_getIndex:function(L){return"string"==typeof L&&(L=this.anchors.index(this.anchors.filter("[href$='"+L+"']"))),L},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){G.data(this,"ui-tabs-destroy")?G(this).remove():G(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var M=G(this),L=M.data("ui-tabs-aria-controls");L?M.attr("aria-controls",L).removeData("ui-tabs-aria-controls"):M.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(M){var L=this.options.disabled;L!==!1&&(void 0===M?L=!1:(M=this._getIndex(M),L=G.isArray(L)?G.map(L,function(N){return N!==M?N:null}):G.map(this.tabs,function(O,N){return N!==M?N:null})),this._setupDisabled(L))},disable:function(M){var L=this.options.disabled;if(L!==!0){if(void 0===M){L=!0}else{if(M=this._getIndex(M),-1!==G.inArray(M,L)){return }L=G.isArray(L)?G.merge([M],L).sort():[M]}this._setupDisabled(L)}},load:function(N,M){N=this._getIndex(N);var P=this,S=this.tabs.eq(N),L=S.find(".ui-tabs-anchor"),R=this._getPanelForTab(S),Q={tab:S,panel:R},O=function(U,T){"abort"===T&&P.panels.stop(!1,!0),S.removeClass("ui-tabs-loading"),R.removeAttr("aria-busy"),U===P.xhr&&delete P.xhr};this._isLocal(L[0])||(this.xhr=G.ajax(this._ajaxSettings(L,M,Q)),this.xhr&&"canceled"!==this.xhr.statusText&&(S.addClass("ui-tabs-loading"),R.attr("aria-busy","true"),this.xhr.done(function(U,T,V){setTimeout(function(){R.html(U),P._trigger("load",M,Q),O(V,T)},1)}).fail(function(U,T){setTimeout(function(){O(U,T)},1)})))},_ajaxSettings:function(M,L,N){var O=this;return{url:M.attr("href"),beforeSend:function(Q,P){return O._trigger("beforeLoad",L,G.extend({jqXHR:Q,ajaxSettings:P},N))}}},_getPanelForTab:function(M){var L=G(M).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+L))}})});(function(){var AT=this,AF=AT._,AK={},AH=Array.prototype,AP=Object.prototype,AG=Function.prototype,AJ=AH.push,AE=AH.slice,AX=AH.concat,AS=AH.unshift,AM=AP.toString,AV=AP.hasOwnProperty,AQ=AH.forEach,AI=AH.map,AU=AH.reduce,AD=AH.reduceRight,AL=AH.filter,AR=AH.every,AA=AH.some,AW=AH.indexOf,AC=AH.lastIndexOf,X=Array.isArray,I=Object.keys,AB=AG.bind,G=function(A){if(A instanceof G){return A}if(!(this instanceof G)){return new G(A)}this._wrapped=A};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=G),exports._=G):AT._=G,G.VERSION="1.4.2";var Q=G.each=G.forEach=function(E,B,D){if(E==null){return }if(AQ&&E.forEach===AQ){E.forEach(B,D)}else{if(E.length===+E.length){for(var A=0,C=E.length;A<C;A++){if(B.call(D,E[A],A,E)===AK){return }}}else{for(var F in E){if(G.has(E,F)&&B.call(D,E[F],F,E)===AK){return }}}}};G.map=G.collect=function(C,A,D){var B=[];return C==null?B:AI&&C.map===AI?C.map(A,D):(Q(C,function(H,E,F){B[B.length]=A.call(D,H,E,F)}),B)},G.reduce=G.foldl=G.inject=function(D,B,E,C){var A=arguments.length>2;D==null&&(D=[]);if(AU&&D.reduce===AU){return C&&(B=G.bind(B,C)),A?D.reduce(B,E):D.reduce(B)}Q(D,function(H,F,L){A?E=B.call(C,E,H,F,L):(E=H,A=!0)});if(!A){throw new TypeError("Reduce of empty array with no initial value")}return E},G.reduceRight=G.foldr=function(E,B,H,D){var A=arguments.length>2;E==null&&(E=[]);if(AD&&E.reduceRight===AD){return D&&(B=G.bind(B,D)),arguments.length>2?E.reduceRight(B,H):E.reduceRight(B)}var C=E.length;if(C!==+C){var F=G.keys(E);C=F.length}Q(E,function(M,L,N){L=F?F[--C]:--C,A?H=B.call(D,H,E[L],L,N):(H=E[L],A=!0)});if(!A){throw new TypeError("Reduce of empty array with no initial value")}return H},G.find=G.detect=function(C,A,D){var B;return Z(C,function(H,E,F){if(A.call(D,H,E,F)){return B=H,!0}}),B},G.filter=G.select=function(C,A,D){var B=[];return C==null?B:AL&&C.filter===AL?C.filter(A,D):(Q(C,function(H,E,F){A.call(D,H,E,F)&&(B[B.length]=H)}),B)},G.reject=function(C,A,D){var B=[];return C==null?B:(Q(C,function(H,E,F){A.call(D,H,E,F)||(B[B.length]=H)}),B)},G.every=G.all=function(D,B,C){B||(B=G.identity);var A=!0;return D==null?A:AR&&D.every===AR?D.every(B,C):(Q(D,function(F,E,H){if(!(A=A&&B.call(C,F,E,H))){return AK}}),!!A)};var Z=G.some=G.any=function(D,B,C){B||(B=G.identity);var A=!1;return D==null?A:AA&&D.some===AA?D.some(B,C):(Q(D,function(F,E,H){if(A||(A=B.call(C,F,E,H))){return AK}}),!!A)};G.contains=G.include=function(B,A){var C=!1;return B==null?C:AW&&B.indexOf===AW?B.indexOf(A)!=-1:(C=Z(B,function(D){return D===A}),C)},G.invoke=function(B,A){var C=AE.call(arguments,2);return G.map(B,function(D){return(G.isFunction(A)?A:D[A]).apply(D,C)})},G.pluck=function(B,A){return G.map(B,function(C){return C[A]})},G.where=function(B,A){return G.isEmpty(A)?[]:G.filter(B,function(C){for(var D in A){if(A[D]!==C[D]){return !1}}return !0})},G.max=function(C,A,D){if(!A&&G.isArray(C)&&C[0]===+C[0]&&C.length<65535){return Math.max.apply(Math,C)}if(!A&&G.isEmpty(C)){return -Infinity}var B={computed:-Infinity};return Q(C,function(H,E,F){var L=A?A.call(D,H,E,F):H;L>=B.computed&&(B={value:H,computed:L})}),B.value},G.min=function(C,A,D){if(!A&&G.isArray(C)&&C[0]===+C[0]&&C.length<65535){return Math.min.apply(Math,C)}if(!A&&G.isEmpty(C)){return Infinity}var B={computed:Infinity};return Q(C,function(H,E,F){var L=A?A.call(D,H,E,F):H;L<B.computed&&(B={value:H,computed:L})}),B.value},G.shuffle=function(C){var A,D=0,B=[];return Q(C,function(E){A=G.random(D++),B[D-1]=B[A],B[A]=E}),B};var AN=function(A){return G.isFunction(A)?A:function(B){return B[A]}};G.sortBy=function(C,A,D){var B=AN(A);return G.pluck(G.map(C,function(H,F,E){return{value:H,index:F,criteria:B.call(D,H,F,E)}}).sort(function(H,E){var L=H.criteria,F=E.criteria;if(L!==F){if(L>F||L===void 0){return 1}if(L<F||F===void 0){return -1}}return H.index<E.index?-1:1}),"value")};var U=function(E,B,F,D){var A={},C=AN(B);return Q(E,function(L,M){var H=C.call(F,L,M,E);D(A,H,L)}),A};G.groupBy=function(B,A,C){return U(B,A,C,function(E,D,F){(G.has(E,D)?E[D]:E[D]=[]).push(F)})},G.countBy=function(B,A,C){return U(B,A,C,function(E,D,F){G.has(E,D)||(E[D]=0),E[D]++})},G.sortedIndex=function(F,C,L,E){L=L==null?G.identity:AN(L);var B=L.call(E,C),D=0,H=F.length;while(D<H){var A=D+H>>>1;L.call(E,F[A])<B?D=A+1:H=A}return D},G.toArray=function(A){return A?A.length===+A.length?AE.call(A):G.values(A):[]},G.size=function(A){return A.length===+A.length?A.length:G.keys(A).length},G.first=G.head=G.take=function(B,A,C){return A!=null&&!C?AE.call(B,0,A):B[0]},G.initial=function(B,A,C){return AE.call(B,0,B.length-(A==null||C?1:A))},G.last=function(B,A,C){return A!=null&&!C?AE.call(B,Math.max(B.length-A,0)):B[B.length-1]},G.rest=G.tail=G.drop=function(B,A,C){return AE.call(B,A==null||C?1:A)},G.compact=function(A){return G.filter(A,function(B){return !!B})};var z=function(B,A,C){return Q(B,function(D){G.isArray(D)?A?AJ.apply(C,D):z(D,A,C):C.push(D)}),C};G.flatten=function(B,A){return z(B,A,[])},G.without=function(A){return G.difference(A,AE.call(arguments,1))},G.uniq=G.unique=function(E,B,H,D){var A=H?G.map(E,H,D):E,C=[],F=[];return Q(A,function(M,L){if(B?!L||F[F.length-1]!==M:!G.contains(F,M)){F.push(M),C.push(E[L])}}),C},G.union=function(){return G.uniq(AX.apply(AH,arguments))},G.intersection=function(B){var A=AE.call(arguments,1);return G.filter(G.uniq(B),function(C){return G.every(A,function(D){return G.indexOf(D,C)>=0})})},G.difference=function(B){var A=AX.apply(AH,AE.call(arguments,1));return G.filter(B,function(C){return !G.contains(A,C)})},G.zip=function(){var C=AE.call(arguments),A=G.max(G.pluck(C,"length")),D=new Array(A);for(var B=0;B<A;B++){D[B]=G.pluck(C,""+B)}return D},G.object=function(D,B){var E={};for(var C=0,A=D.length;C<A;C++){B?E[D[C]]=B[C]:E[D[C][0]]=D[C][1]}return E},G.indexOf=function(D,B,E){if(D==null){return -1}var C=0,A=D.length;if(E){if(typeof E!="number"){return C=G.sortedIndex(D,B),D[C]===B?C:-1}C=E<0?Math.max(0,A+E):E}if(AW&&D.indexOf===AW){return D.indexOf(B,E)}for(;C<A;C++){if(D[C]===B){return C}}return -1},G.lastIndexOf=function(D,B,E){if(D==null){return -1}var C=E!=null;if(AC&&D.lastIndexOf===AC){return C?D.lastIndexOf(B,E):D.lastIndexOf(B)}var A=C?E:D.length;while(A--){if(D[A]===B){return A}}return -1},G.range=function(E,B,F){arguments.length<=1&&(B=E||0,E=0),F=arguments[2]||1;var D=Math.max(Math.ceil((B-E)/F),0),A=0,C=new Array(D);while(A<D){C[A++]=E,E+=F}return C};var K=function(){};G.bind=function(B,D){var C,A;if(B.bind===AB&&AB){return AB.apply(B,AE.call(arguments,1))}if(!G.isFunction(B)){throw new TypeError}return A=AE.call(arguments,2),C=function(){if(this instanceof C){K.prototype=B.prototype;var F=new K,E=B.apply(F,A.concat(AE.call(arguments)));return Object(E)===E?E:F}return B.apply(D,A.concat(AE.call(arguments)))}},G.bindAll=function(B){var A=AE.call(arguments,1);return A.length==0&&(A=G.functions(B)),Q(A,function(C){B[C]=G.bind(B[C],B)}),B},G.memoize=function(B,A){var C={};return A||(A=G.identity),function(){var D=A.apply(this,arguments);return G.has(C,D)?C[D]:C[D]=B.apply(this,arguments)}},G.delay=function(B,A){var C=AE.call(arguments,2);return setTimeout(function(){return B.apply(null,C)},A)},G.defer=function(A){return G.delay.apply(G,[A,1].concat(AE.call(arguments,1)))},G.throttle=function(E,L){var C,A,D,M,B,H,F=G.debounce(function(){B=M=!1},L);return function(){C=this,A=arguments;var N=function(){D=null,B&&(H=E.apply(C,A)),F()};return D||(D=setTimeout(N,L)),M?B=!0:(M=!0,H=E.apply(C,A)),F(),H}},G.debounce=function(D,B,E){var C,A;return function(){var L=this,M=arguments,H=function(){C=null,E||(A=D.apply(L,M))},F=E&&!C;return clearTimeout(C),C=setTimeout(H,B),F&&(A=D.apply(L,M)),A}},G.once=function(B){var A=!1,C;return function(){return A?C:(A=!0,C=B.apply(this,arguments),B=null,C)}},G.wrap=function(B,A){return function(){var C=[B];return AJ.apply(C,arguments),A.apply(this,C)}},G.compose=function(){var A=arguments;return function(){var B=arguments;for(var C=A.length-1;C>=0;C--){B=[A[C].apply(this,B)]}return B[0]}},G.after=function(B,A){return B<=0?A():function(){if(--B<1){return A.apply(this,arguments)}}},G.keys=I||function(B){if(B!==Object(B)){throw new TypeError("Invalid object")}var A=[];for(var C in B){G.has(B,C)&&(A[A.length]=C)}return A},G.values=function(B){var A=[];for(var C in B){G.has(B,C)&&A.push(B[C])}return A},G.pairs=function(B){var A=[];for(var C in B){G.has(B,C)&&A.push([C,B[C]])}return A},G.invert=function(B){var A={};for(var C in B){G.has(B,C)&&(A[B[C]]=C)}return A},G.functions=G.methods=function(B){var A=[];for(var C in B){G.isFunction(B[C])&&A.push(C)}return A.sort()},G.extend=function(A){return Q(AE.call(arguments,1),function(B){for(var C in B){A[C]=B[C]}}),A},G.pick=function(B){var A={},C=AX.apply(AH,AE.call(arguments,1));return Q(C,function(D){D in B&&(A[D]=B[D])}),A},G.omit=function(C){var B={},D=AX.apply(AH,AE.call(arguments,1));for(var A in C){G.contains(D,A)||(B[A]=C[A])}return B},G.defaults=function(A){return Q(AE.call(arguments,1),function(B){for(var C in B){A[C]==null&&(A[C]=B[C])}}),A},G.clone=function(A){return G.isObject(A)?G.isArray(A)?A.slice():G.extend({},A):A},G.tap=function(B,A){return A(B),B};var R=function(F,N,C,A){if(F===N){return F!==0||1/F==1/N}if(F==null||N==null){return F===N}F instanceof G&&(F=F._wrapped),N instanceof G&&(N=N._wrapped);var D=AM.call(F);if(D!=AM.call(N)){return !1}switch(D){case"[object String]":return F==String(N);case"[object Number]":return F!=+F?N!=+N:F==0?1/F==1/N:F==+N;case"[object Date]":case"[object Boolean]":return +F==+N;case"[object RegExp]":return F.source==N.source&&F.global==N.global&&F.multiline==N.multiline&&F.ignoreCase==N.ignoreCase}if(typeof F!="object"||typeof N!="object"){return !1}var O=C.length;while(O--){if(C[O]==F){return A[O]==N}}C.push(F),A.push(N);var B=0,M=!0;if(D=="[object Array]"){B=F.length,M=B==N.length;if(M){while(B--){if(!(M=R(F[B],N[B],C,A))){break}}}}else{var L=F.constructor,E=N.constructor;if(L!==E&&!(G.isFunction(L)&&L instanceof L&&G.isFunction(E)&&E instanceof E)){return !1}for(var H in F){if(G.has(F,H)){B++;if(!(M=G.has(N,H)&&R(F[H],N[H],C,A))){break}}}if(M){for(H in N){if(G.has(N,H)&&!(B--)){break}}M=!B}}return C.pop(),A.pop(),M};G.isEqual=function(B,A){return R(B,A,[],[])},G.isEmpty=function(B){if(B==null){return !0}if(G.isArray(B)||G.isString(B)){return B.length===0}for(var A in B){if(G.has(B,A)){return !1}}return !0},G.isElement=function(A){return !!A&&A.nodeType===1},G.isArray=X||function(A){return AM.call(A)=="[object Array]"},G.isObject=function(A){return A===Object(A)},Q(["Arguments","Function","String","Number","Date","RegExp"],function(A){G["is"+A]=function(B){return AM.call(B)=="[object "+A+"]"}}),G.isArguments(arguments)||(G.isArguments=function(A){return !!A&&!!G.has(A,"callee")}),typeof /./!="function"&&(G.isFunction=function(A){return typeof A=="function"}),G.isFinite=function(A){return G.isNumber(A)&&isFinite(A)},G.isNaN=function(A){return G.isNumber(A)&&A!=+A},G.isBoolean=function(A){return A===!0||A===!1||AM.call(A)=="[object Boolean]"},G.isNull=function(A){return A===null},G.isUndefined=function(A){return A===void 0},G.has=function(B,A){return AV.call(B,A)},G.noConflict=function(){return AT._=AF,this},G.identity=function(A){return A},G.times=function(C,A,D){for(var B=0;B<C;B++){A.call(D,B)}},G.random=function(B,A){return A==null&&(A=B,B=0),B+(0|Math.random()*(A-B+1))};var AY={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};AY.unescape=G.invert(AY.escape);var Y={escape:new RegExp("["+G.keys(AY.escape).join("")+"]","g"),unescape:new RegExp("("+G.keys(AY.unescape).join("|")+")","g")};G.each(["escape","unescape"],function(A){G[A]=function(B){return B==null?"":(""+B).replace(Y[A],function(C){return AY[A][C]})}}),G.result=function(B,A){if(B==null){return null}var C=B[A];return G.isFunction(C)?C.call(B):C},G.mixin=function(A){Q(G.functions(A),function(B){var C=G[B]=A[B];G.prototype[B]=function(){var D=[this._wrapped];return AJ.apply(D,arguments),W.call(this,C.apply(G,D))}})};var J=0;G.uniqueId=function(B){var A=J++;return B?B+A:A},G.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},AO=/\\|'|\r|\n|\t|\u2028|\u2029/g;G.template=function(E,L,C){C=G.defaults({},C,G.templateSettings);var A=new RegExp([(C.escape||V).source,(C.interpolate||V).source,(C.evaluate||V).source].join("|")+"|$","g"),D=0,M="__p+='";E.replace(A,function(O,T,P,S,N){M+=E.slice(D,N).replace(AO,function(a){return"\\"+q[a]}),M+=T?"'+\n((__t=("+T+"))==null?'':_.escape(__t))+\n'":P?"'+\n((__t=("+P+"))==null?'':__t)+\n'":S?"';\n"+S+"\n__p+='":"",D=N+O.length}),M+="';\n",C.variable||(M="with(obj||{}){\n"+M+"}\n"),M="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+M+"return __p;\n";try{var B=new Function(C.variable||"obj","_",M)}catch(H){throw H.source=M,H}if(L){return B(L,G)}var F=function(N){return B.call(this,N,G)};return F.source="function("+(C.variable||"obj")+"){\n"+M+"}",F},G.chain=function(A){return G(A).chain()};var W=function(A){return this._chain?G(A).chain():A};G.mixin(G),Q(["pop","push","reverse","shift","sort","splice","unshift"],function(B){var A=AH[B];G.prototype[B]=function(){var C=this._wrapped;return A.apply(C,arguments),(B=="shift"||B=="splice")&&C.length===0&&delete C[0],W.call(this,C)}}),Q(["concat","join","slice"],function(B){var A=AH[B];G.prototype[B]=function(){return W.call(this,A.apply(this._wrapped,arguments))}}),G.extend(G.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var e=this,J=e.Backbone,I=Array.prototype.slice,Y=Array.prototype.splice,AA;AA="undefined"!==typeof exports?exports:e.Backbone={};AA.VERSION="0.9.2";var AB=e._;!AB&&"undefined"!==typeof require&&(AB=require("underscore"));var q=e.jQuery||e.Zepto||e.ender;AA.setDomLibrary=function(A){q=A};AA.noConflict=function(){e.Backbone=J;return this};AA.emulateHTTP=!1;AA.emulateJSON=!1;var Z=/\s+/,h=AA.Events={on:function(B,A,H){var G,F,E,D,C;if(!A){return this}B=B.split(Z);for(G=this._callbacks||(this._callbacks={});F=B.shift();){E=(C=G[F])?C.tail:{},E.next=D={},E.context=H,E.callback=A,G[F]={tail:D,next:C?C.next:E}}return this},off:function(f,H,G){var F,E,C,D,B,A;if(E=this._callbacks){if(!f&&!H&&!G){return delete this._callbacks,this}for(f=f?f.split(Z):AB.keys(E);F=f.shift();){if(C=E[F],delete E[F],C&&(H||G)){for(D=C.tail;(C=C.next)!==D;){if(B=C.callback,A=C.context,H&&B!==H||G&&A!==G){this.on(F,B,A)}}}}return this}},trigger:function(B){var A,G,F,E,D,C;if(!(F=this._callbacks)){return this}D=F.all;B=B.split(Z);for(C=I.call(arguments,1);A=B.shift();){if(G=F[A]){for(E=G.tail;(G=G.next)!==E;){G.callback.apply(G.context||this,C)}}if(G=D){E=G.tail;for(A=[A].concat(C);(G=G.next)!==E;){G.callback.apply(G.context||this,A)}}}return this}};h.bind=h.on;h.unbind=h.off;var a=AA.Model=function(B,A){var C;B||(B={});A&&A.parse&&(B=this.parse(B));if(C=b(this,"defaults")){B=AB.extend({},C,B)}A&&A.collection&&(this.collection=A.collection);this.attributes={};this._escapedAttributes={};this.cid=AB.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(B,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=AB.clone(this.attributes);this.initialize.apply(this,arguments)};AB.extend(a.prototype,h,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return AB.clone(this.attributes)},get:function(A){return this.attributes[A]},escape:function(B){var A;if(A=this._escapedAttributes[B]){return A}A=this.get(B);return this._escapedAttributes[B]=AB.escape(null==A?"":""+A)},has:function(A){return null!=this.get(A)},set:function(B,A,H){var G,F;AB.isObject(B)||null==B?(G=B,H=A):(G={},G[B]=A);H||(H={});if(!G){return this}G instanceof a&&(G=G.attributes);if(H.unset){for(F in G){G[F]=void 0}}if(!this._validate(G,H)){return !1}this.idAttribute in G&&(this.id=G[this.idAttribute]);var A=H.changes={},D=this.attributes,E=this._escapedAttributes,C=this._previousAttributes||{};for(F in G){B=G[F];if(!AB.isEqual(D[F],B)||H.unset&&AB.has(D,F)){delete E[F],(H.silent?this._silent:A)[F]=!0}H.unset?delete D[F]:D[F]=B;!AB.isEqual(C[F],B)||AB.has(D,F)!=AB.has(C,F)?(this.changed[F]=B,H.silent||(this._pending[F]=!0)):(delete this.changed[F],delete this._pending[F])}H.silent||this.change(H);return this},unset:function(B,A){(A||(A={})).unset=!0;return this.set(B,null,A)},clear:function(A){(A||(A={})).unset=!0;return this.set(AB.clone(this.attributes),A)},fetch:function(B){var B=B?AB.clone(B):{},A=this,C=B.success;B.success=function(F,E,D){if(!A.set(A.parse(F,D),B)){return !1}C&&C(A,F)};B.error=AA.wrapError(B.error,A,B);return(this.sync||AA.sync).call(this,"read",this,B)},save:function(B,A,G){var F,E;AB.isObject(B)||null==B?(F=B,G=A):(F={},F[B]=A);G=G?AB.clone(G):{};if(G.wait){if(!this._validate(F,G)){return !1}E=AB.clone(this.attributes)}B=AB.extend({},G,{silent:!0});if(F&&!this.set(F,G.wait?B:G)){return !1}var D=this,C=G.success;G.success=function(f,H,g){H=D.parse(f,g);if(G.wait){delete G.wait;H=AB.extend(F||{},H)}if(!D.set(H,G)){return false}C?C(D,f):D.trigger("sync",D,f,G)};G.error=AA.wrapError(G.error,D,G);A=this.isNew()?"create":"update";A=(this.sync||AA.sync).call(this,A,this,G);G.wait&&this.set(E,B);return A},destroy:function(B){var B=B?AB.clone(B):{},A=this,E=B.success,D=function(){A.trigger("destroy",A,A.collection,B)};if(this.isNew()){return D(),!1}B.success=function(F){B.wait&&D();E?E(A,F):A.trigger("sync",A,F,B)};B.error=AA.wrapError(B.error,A,B);var C=(this.sync||AA.sync).call(this,"delete",this,B);B.wait||D();return C},url:function(){var A=b(this,"urlRoot")||b(this.collection,"url")||R();return this.isNew()?A:A+("/"==A.charAt(A.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(A){return A},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(B){B||(B={});var A=this._changing;this._changing=!0;for(var D in this._silent){this._pending[D]=!0}var C=AB.extend({},B.changes,this._silent);this._silent={};for(D in C){this.trigger("change:"+D,this,this.get(D),B)}if(A){return this}for(;!AB.isEmpty(this._pending);){this._pending={};this.trigger("change",this,B);for(D in this.changed){!this._pending[D]&&!this._silent[D]&&delete this.changed[D]}this._previousAttributes=AB.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(A){return !arguments.length?!AB.isEmpty(this.changed):AB.has(this.changed,A)},changedAttributes:function(B){if(!B){return this.hasChanged()?AB.clone(this.changed):!1}var A,E=!1,D=this._previousAttributes,C;for(C in B){if(!AB.isEqual(D[C],A=B[C])){(E||(E={}))[C]=A}}return E},previous:function(A){return !arguments.length||!this._previousAttributes?null:this._previousAttributes[A]},previousAttributes:function(){return AB.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},_validate:function(B,A){if(A.silent||!this.validate){return !0}var B=AB.extend({},this.attributes,B),C=this.validate(B,A);if(!C){return !0}A&&A.error?A.error(this,C,A):this.trigger("error",this,C,A);return !1}});var W=AA.Collection=function(B,A){A||(A={});A.model&&(this.model=A.model);A.comparator&&(this.comparator=A.comparator);this._reset();this.initialize.apply(this,arguments);B&&this.reset(B,{silent:!0,parse:A.parse})};AB.extend(W.prototype,h,{model:a,initialize:function(){},toJSON:function(A){return this.map(function(B){return B.toJSON(A)})},add:function(m,f){var H,G,F,E,D,C={},B={},A=[];f||(f={});m=AB.isArray(m)?m.slice():[m];H=0;for(G=m.length;H<G;H++){if(!(F=m[H]=this._prepareModel(m[H],f))){throw Error("Can't add an invalid model to a collection")}E=F.cid;D=F.id;C[E]||this._byCid[E]||null!=D&&(B[D]||this._byId[D])?A.push(H):C[E]=B[D]=F}for(H=A.length;H--;){m.splice(A[H],1)}H=0;for(G=m.length;H<G;H++){(F=m[H]).on("all",this._onModelEvent,this),this._byCid[F.cid]=F,null!=F.id&&(this._byId[F.id]=F)}this.length+=G;Y.apply(this.models,[null!=f.at?f.at:this.models.length,0].concat(m));this.comparator&&this.sort({silent:!0});if(f.silent){return this}H=0;for(G=this.models.length;H<G;H++){if(C[(F=this.models[H]).cid]){f.index=H,F.trigger("add",F,this,f)}}return this},remove:function(B,A){var F,E,D,C;A||(A={});B=AB.isArray(B)?B.slice():[B];F=0;for(E=B.length;F<E;F++){if(C=this.getByCid(B[F])||this.get(B[F])){delete this._byId[C.id],delete this._byCid[C.cid],D=this.indexOf(C),this.models.splice(D,1),this.length--,A.silent||(A.index=D,C.trigger("remove",C,this,A)),this._removeReference(C)}}return this},push:function(B,A){B=this._prepareModel(B,A);this.add(B,A);return B},pop:function(B){var A=this.at(this.length-1);this.remove(A,B);return A},unshift:function(B,A){B=this._prepareModel(B,A);this.add(B,AB.extend({at:0},A));return B},shift:function(B){var A=this.at(0);this.remove(A,B);return A},get:function(A){return null==A?void 0:this._byId[null!=A.id?A.id:A]},getByCid:function(A){return A&&this._byCid[A.cid||A]},at:function(A){return this.models[A]},where:function(A){return AB.isEmpty(A)?[]:this.filter(function(B){for(var C in A){if(A[C]!==B.get(C)){return !1}}return !0})},sort:function(B){B||(B={});if(!this.comparator){throw Error("Cannot sort a set without a comparator")}var A=AB.bind(this.comparator,this);1==this.comparator.length?this.models=this.sortBy(A):this.models.sort(A);B.silent||this.trigger("reset",this,B);return this},pluck:function(A){return AB.map(this.models,function(B){return B.get(A)})},reset:function(B,A){B||(B=[]);A||(A={});for(var D=0,C=this.models.length;D<C;D++){this._removeReference(this.models[D])}this._reset();this.add(B,AB.extend({silent:!0},A));A.silent||this.trigger("reset",this,A);return this},fetch:function(B){B=B?AB.clone(B):{};void 0===B.parse&&(B.parse=!0);var A=this,C=B.success;B.success=function(F,E,D){A[B.add?"add":"reset"](A.parse(F,D),B);C&&C(A,F)};B.error=AA.wrapError(B.error,A,B);return(this.sync||AA.sync).call(this,"read",this,B)},create:function(B,A){var D=this,A=A?AB.clone(A):{},B=this._prepareModel(B,A);if(!B){return !1}A.wait||D.add(B,A);var C=A.success;A.success=function(F,E){A.wait&&D.add(F,A);C?C(F,E):F.trigger("sync",B,E,A)};B.save(null,A);return B},parse:function(A){return A},chain:function(){return AB(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(B,A){A||(A={});B instanceof a?B.collection||(B.collection=this):(A.collection=this,B=new this.model(B,A),B._validate(B.attributes,A)||(B=!1));return B},_removeReference:function(A){this==A.collection&&delete A.collection;A.off("all",this._onModelEvent,this)},_onModelEvent:function(B,A,D,C){("add"==B||"remove"==B)&&D!=this||("destroy"==B&&this.remove(A,C),A&&B==="change:"+A.idAttribute&&(delete this._byId[A.previous(A.idAttribute)],this._byId[A.id]=A),this.trigger.apply(this,arguments))}});AB.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(A){W.prototype[A]=function(){return AB[A].apply(AB,[this.models].concat(AB.toArray(arguments)))}});var Q=AA.Router=function(A){A||(A={});A.routes&&(this.routes=A.routes);this._bindRoutes();this.initialize.apply(this,arguments)},X=/:\w+/g,V=/\*\w+/g,U=/[-[\]{}()+?.,\\^$|#\s]/g;AB.extend(Q.prototype,h,{initialize:function(){},route:function(B,A,C){AA.history||(AA.history=new c);AB.isRegExp(B)||(B=this._routeToRegExp(B));C||(C=this[A]);AA.history.route(B,AB.bind(function(D){D=this._extractParameters(B,D);C&&C.apply(this,D);this.trigger.apply(this,["route:"+A].concat(D));AA.history.trigger("route",this,A,D)},this));return this},navigate:function(B,A){AA.history.navigate(B,A)},_bindRoutes:function(){if(this.routes){var B=[],A;for(A in this.routes){B.unshift([A,this.routes[A]])}A=0;for(var C=B.length;A<C;A++){this.route(B[A][0],B[A][1],this[B[A][1]])}}},_routeToRegExp:function(A){A=A.replace(U,"\\$&").replace(X,"([^/]+)").replace(V,"(.*?)");return RegExp("^"+A+"$")},_extractParameters:function(B,A){return B.exec(A).slice(1)}});var c=AA.History=function(){this.handlers=[];AB.bindAll(this,"checkUrl")},T=/^[#\/]/,S=/msie [\w.]+/;c.started=!1;AB.extend(c.prototype,h,{interval:50,getHash:function(A){return(A=(A?A.location:window.location).href.match(/#(.*)$/))?A[1]:""},getFragment:function(B,A){if(null==B){if(this._hasPushState||A){var B=window.location.pathname,C=window.location.search;C&&(B+=C)}else{B=this.getHash()}}B.indexOf(this.options.root)||(B=B.substr(this.options.root.length));return B.replace(T,"")},start:function(B){if(c.started){throw Error("Backbone.history has already been started")}c.started=!0;this.options=AB.extend({},{root:"/"},this.options,B);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var B=this.getFragment(),A=document.documentMode;if(A=S.exec(navigator.userAgent.toLowerCase())&&(!A||7>=A)){this.iframe=q('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(B)}this._hasPushState?q(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!A?q(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=B;B=window.location;A=B.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!A){return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0}this._wantsPushState&&this._hasPushState&&A&&B.hash&&(this.fragment=this.getHash().replace(T,""),window.history.replaceState({},document.title,B.protocol+"//"+B.host+this.options.root+this.fragment));if(!this.options.silent){return this.loadUrl()}},stop:function(){q(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);c.started=!1},route:function(B,A){this.handlers.unshift({route:B,callback:A})},checkUrl:function(){var A=this.getFragment();A==this.fragment&&this.iframe&&(A=this.getFragment(this.getHash(this.iframe)));if(A==this.fragment){return !1}this.iframe&&this.navigate(A);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(B){var A=this.fragment=this.getFragment(B);return AB.any(this.handlers,function(C){if(C.route.test(A)){return C.callback(A),!0}})},navigate:function(B,A){if(!c.started){return !1}if(!A||!0===A){A={trigger:A}}var C=(B||"").replace(T,"");this.fragment!=C&&(this._hasPushState?(0!=C.indexOf(this.options.root)&&(C=this.options.root+C),this.fragment=C,window.history[A.replace?"replaceState":"pushState"]({},document.title,C)):this._wantsHashChange?(this.fragment=C,this._updateHash(window.location,C,A.replace),this.iframe&&C!=this.getFragment(this.getHash(this.iframe))&&(A.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,C,A.replace))):window.location.assign(this.options.root+B),A.trigger&&this.loadUrl(B))},_updateHash:function(B,A,C){C?B.replace(B.toString().replace(/(javascript:|#).*$/,"")+"#"+A):B.hash=A}});var O=AA.View=function(A){this.cid=AB.uniqueId("view");this._configure(A||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},P=/^(\S+)\s*(.*)$/,M="model,collection,el,id,attributes,className,tagName".split(",");AB.extend(O.prototype,h,{tagName:"div",$:function(A){return this.$el.find(A)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(B,A,C){B=document.createElement(B);A&&q(B).attr(A);C&&q(B).html(C);return B},setElement:function(B,A){this.$el&&this.undelegateEvents();this.$el=B instanceof q?B:q(B);this.el=this.$el[0];!1!==A&&this.delegateEvents();return this},delegateEvents:function(B){if(B||(B=b(this,"events"))){this.undelegateEvents();for(var A in B){var E=B[A];AB.isFunction(E)||(E=this[B[A]]);if(!E){throw Error('Method "'+B[A]+'" does not exist')}var D=A.match(P),C=D[1],D=D[2],E=AB.bind(E,this),C=C+(".delegateEvents"+this.cid);""===D?this.$el.bind(C,E):this.$el.delegate(D,C,E)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(B){this.options&&(B=AB.extend({},this.options,B));for(var A=0,D=M.length;A<D;A++){var C=M[A];B[C]&&(this[C]=B[C])}this.options=B},_ensureElement:function(){if(this.el){this.setElement(this.el,!1)}else{var A=b(this,"attributes")||{};this.id&&(A.id=this.id);this.className&&(A["class"]=this.className);this.setElement(this.make(this.tagName,A),!1)}}});a.extend=W.extend=Q.extend=O.extend=function(B,A){var C=N(this,B,A);C.extend=this.extend;return C};var L={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};AA.sync=function(B,A,E){var D=L[B];E||(E={});var C={type:D,dataType:"json"};E.url||(C.url=b(A,"url")||R());if(!E.data&&A&&("create"==B||"update"==B)){C.contentType="application/json",C.data=JSON.stringify(A.toJSON())}AA.emulateJSON&&(C.contentType="application/x-www-form-urlencoded",C.data=C.data?{model:C.data}:{});if(AA.emulateHTTP&&("PUT"===D||"DELETE"===D)){AA.emulateJSON&&(C.data._method=D),C.type="POST",C.beforeSend=function(F){F.setRequestHeader("X-HTTP-Method-Override",D)}}"GET"!==C.type&&!AA.emulateJSON&&(C.processData=!1);return q.ajax(AB.extend(C,E))};AA.wrapError=function(B,A,C){return function(E,D){D=E===A?D:E;B?B(A,D,C):A.trigger("error",A,D,C)}};var K=function(){},N=function(B,A,D){var C;C=A&&A.hasOwnProperty("constructor")?A.constructor:function(){B.apply(this,arguments)};AB.extend(C,B);K.prototype=B.prototype;C.prototype=new K;A&&AB.extend(C.prototype,A);D&&AB.extend(C,D);C.prototype.constructor=C;C.__super__=B.prototype;return C},b=function(B,A){return !B||!B[A]?null:AB.isFunction(B[A])?B[A]():B[A]},R=function(){throw Error('A "url" property or function must be specified')}}).call(this);var Handlebars=(function(){var A=(function(){var M;function N(O){this.string=O}N.prototype.toString=function(){return""+this.string};M=N;return M})();var K=(function(V){var W={};var P=V;var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var M=/[&<>"'`]/g;var Q=/[&<>"'`]/;function Y(Z){return X[Z]||"&amp;"}function U(b,a){for(var Z in a){if(Object.prototype.hasOwnProperty.call(a,Z)){b[Z]=a[Z]}}}W.extend=U;var O=Object.prototype.toString;W.toString=O;var N=function(Z){return typeof Z==="function"};if(N(/x/)){N=function(Z){return typeof Z==="function"&&O.call(Z)==="[object Function]"}}var N;W.isFunction=N;var T=Array.isArray||function(Z){return(Z&&typeof Z==="object")?O.call(Z)==="[object Array]":false};W.isArray=T;function S(Z){if(Z instanceof P){return Z.toString()}else{if(!Z&&Z!==0){return""}}Z=""+Z;if(!Q.test(Z)){return Z}return Z.replace(M,Y)}W.escapeExpression=S;function R(Z){if(!Z&&Z!==0){return true}else{if(T(Z)&&Z.length===0){return true}else{return false}}}W.isEmpty=R;return W})(A);var D=(function(){var N;var O=["description","fileName","lineNumber","message","name","number","stack"];function M(T,S){var Q;if(S&&S.firstLine){Q=S.firstLine;T+=" - "+Q+":"+S.firstColumn}var R=Error.prototype.constructor.call(this,T);for(var P=0;P<O.length;P++){this[O[P]]=R[O[P]]}if(Q){this.lineNumber=Q;this.column=S.firstColumn}}M.prototype=new Error();N=M;return N})();var I=(function(X,a){var Z={};var V=X;var T=a;var c="1.3.0";Z.VERSION=c;var N=4;Z.COMPILER_REVISION=N;var Q={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};Z.REVISION_CHANGES=Q;var U=V.isArray,P=V.isFunction,O=V.toString,M="[object Object]";function S(f,e){this.helpers=f||{};this.partials=e||{};W(this)}Z.HandlebarsEnvironment=S;S.prototype={constructor:S,logger:Y,log:R,registerHelper:function(f,g,e){if(O.call(f)===M){if(e||g){throw new T("Arg not supported with multiple helpers")}V.extend(this.helpers,f)}else{if(e){g.not=e}this.helpers[f]=g}},registerPartial:function(e,f){if(O.call(e)===M){V.extend(this.partials,e)}else{this.partials[e]=f}}};function W(e){e.registerHelper("helperMissing",function(f){if(arguments.length===2){return undefined}else{throw new T("Missing helper: '"+f+"'")}});e.registerHelper("blockHelperMissing",function(h,g){var f=g.inverse||function(){},k=g.fn;if(P(h)){h=h.call(this)}if(h===true){return k(this)}else{if(h===false||h==null){return f(this)}else{if(U(h)){if(h.length>0){return e.helpers.each(h,g)}else{return f(this)}}else{return k(h)}}}});e.registerHelper("each",function(f,q){var o=q.fn,h=q.inverse;var l=0,m="",k;if(P(f)){f=f.call(this)}if(q.data){k=b(q.data)}if(f&&typeof f==="object"){if(U(f)){for(var g=f.length;l<g;l++){if(k){k.index=l;k.first=(l===0);k.last=(l===(f.length-1))}m=m+o(f[l],{data:k})}}else{for(var p in f){if(f.hasOwnProperty(p)){if(k){k.key=p;k.index=l;k.first=(l===0)}m=m+o(f[p],{data:k});l++}}}}if(l===0){m=h(this)}return m});e.registerHelper("if",function(g,f){if(P(g)){g=g.call(this)}if((!f.hash.includeZero&&!g)||V.isEmpty(g)){return f.inverse(this)}else{return f.fn(this)}});e.registerHelper("unless",function(g,f){return e.helpers["if"].call(this,g,{fn:f.inverse,inverse:f.fn,hash:f.hash})});e.registerHelper("with",function(g,f){if(P(g)){g=g.call(this)}if(!V.isEmpty(g)){return f.fn(g)}});e.registerHelper("log",function(g,f){var h=f.data&&f.data.level!=null?parseInt(f.data.level,10):1;e.log(h,g)})}var Y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(g,e){if(Y.level<=g){var f=Y.methodMap[g];if(typeof console!=="undefined"&&console[f]){console[f].call(console,e)}}}};Z.logger=Y;function R(f,e){Y.log(f,e)}Z.log=R;var b=function(e){var f={};V.extend(f,e);return f};Z.createFrame=b;return Z})(K,D);var G=(function(V,Z,P){var X={};var U=V;var S=Z;var O=P.COMPILER_REVISION;var R=P.REVISION_CHANGES;function N(c){var b=c&&c[0]||1,f=O;if(b!==f){if(b<f){var a=R[f],e=R[b];throw new S("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+e+").")}else{throw new S("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+c[1]+").")}}}X.checkRevision=N;function W(a,e){if(!e){throw new S("No environment passed to template")}var c=function(g,k,m,o,l,p){var f=e.VM.invokePartial.apply(this,arguments);if(f!=null){return f}if(e.compile){var h={helpers:o,partials:l,data:p};l[k]=e.compile(g,{data:p!==undefined},e);return l[k](m,h)}else{throw new S("The partial "+k+" could not be compiled when running in runtime-only mode")}};var b={escapeExpression:U.escapeExpression,invokePartial:c,programs:[],program:function(g,h,k){var f=this.programs[g];if(k){f=T(g,h,k)}else{if(!f){f=this.programs[g]=T(g,h)}}return f},merge:function(h,g){var f=h||g;if(h&&g&&(h!==g)){f={};U.extend(f,g);U.extend(f,h)}return f},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(k,g){g=g||{};var l=g.partial?g:e,m,h;if(!g.partial){m=g.helpers;h=g.partials}var f=a.call(b,l,k,m,h,g.data);if(!g.partial){e.VM.checkRevision(b.compilerInfo)}return f}}X.template=W;function Q(b,c,e){var a=Array.prototype.slice.call(arguments,3);var f=function(h,g){g=g||{};return c.apply(this,[h,g.data||e].concat(a))};f.program=b;f.depth=a.length;return f}X.programWithDepth=Q;function T(a,b,c){var e=function(g,f){f=f||{};return b(g,f.data||c)};e.program=a;e.depth=0;return e}X.program=T;function M(a,c,f,g,e,h){var b={partial:true,helpers:g,partials:e,data:h};if(a===undefined){throw new S("The partial "+c+" could not be found")}else{if(a instanceof Function){return a(f,b)}}}X.invokePartial=M;function Y(){return""}X.noop=Y;return X})(K,D,I);var F=(function(W,Y,O,S,V){var X;var M=W;var P=Y;var R=O;var U=S;var Q=V;var T=function(){var Z=new M.HandlebarsEnvironment();U.extend(Z,M);Z.SafeString=P;Z.Exception=R;Z.Utils=U;Z.VM=Q;Z.template=function(a){return Q.template(a,Z)};return Z};var N=T();N.create=T;X=N;return X})(I,A,D,K,G);var J=(function(Q){var O;var N=Q;function M(R){R=R||{};this.firstLine=R.first_line;this.firstColumn=R.first_column;this.lastColumn=R.last_column;this.lastLine=R.last_line}var P={ProgramNode:function(T,V,S,U){var R,W;if(arguments.length===3){U=S;S=null}else{if(arguments.length===2){U=V;V=null}}M.call(this,U);this.type="program";this.statements=T;this.strip={};if(S){W=S[0];if(W){R={first_line:W.firstLine,last_line:W.lastLine,last_column:W.lastColumn,first_column:W.firstColumn};this.inverse=new P.ProgramNode(S,V,R)}else{this.inverse=new P.ProgramNode(S,V)}this.strip.right=V.left}else{if(V){this.strip.left=V.right}}},MustacheNode:function(W,V,R,T,S){M.call(this,S);this.type="mustache";this.strip=T;if(R!=null&&R.charAt){var U=R.charAt(3)||R.charAt(2);this.escaped=U!=="{"&&U!=="&"}else{this.escaped=!!R}if(W instanceof P.SexprNode){this.sexpr=W}else{this.sexpr=new P.SexprNode(W,V)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(W,T,R){M.call(this,R);this.type="sexpr";this.hash=T;var V=this.id=W[0];var U=this.params=W.slice(1);var S=this.eligibleHelper=V.isSimple;this.isHelper=S&&(U.length||T)},PartialNode:function(R,T,U,S){M.call(this,S);this.type="partial";this.partialName=R;this.context=T;this.strip=U},BlockNode:function(U,S,R,V,T){M.call(this,T);if(U.sexpr.id.original!==V.path.original){throw new N(U.sexpr.id.original+" doesn't match "+V.path.original,this)}this.type="block";this.mustache=U;this.program=S;this.inverse=R;this.strip={left:U.strip.left,right:V.strip.right};(S||R).strip.left=U.strip.right;(R||S).strip.right=V.strip.left;if(R&&!S){this.isInverse=true}},ContentNode:function(R,S){M.call(this,S);this.type="content";this.string=R},HashNode:function(S,R){M.call(this,R);this.type="hash";this.pairs=S},IdNode:function(X,W){M.call(this,W);this.type="ID";var V="",T=[],Y=0;for(var U=0,R=X.length;U<R;U++){var S=X[U].part;V+=(X[U].separator||"")+S;if(S===".."||S==="."||S==="this"){if(T.length>0){throw new N("Invalid path: "+V,this)}else{if(S===".."){Y++}else{this.isScoped=true}}}else{T.push(S)}}this.original=V;this.parts=T;this.string=T.join(".");this.depth=Y;this.isSimple=X.length===1&&!this.isScoped&&Y===0;this.stringModeValue=this.string},PartialNameNode:function(R,S){M.call(this,S);this.type="PARTIAL_NAME";this.name=R.original},DataNode:function(S,R){M.call(this,R);this.type="DATA";this.id=S},StringNode:function(R,S){M.call(this,S);this.type="STRING";this.original=this.string=this.stringModeValue=R},IntegerNode:function(R,S){M.call(this,S);this.type="INTEGER";this.original=this.integer=R;this.stringModeValue=Number(R)},BooleanNode:function(R,S){M.call(this,S);this.type="BOOLEAN";this.bool=R;this.stringModeValue=R==="true"},CommentNode:function(S,R){M.call(this,R);this.type="comment";this.comment=S}};O=P;return O})(D);var B=(function(){var N;var M=(function(){var V={trace:function R(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function Q(W,Z,a,e,c,Y,b){var X=Y.length-1;switch(c){case 1:return new e.ProgramNode(Y[X-1],this._$);break;case 2:return new e.ProgramNode([],this._$);break;case 3:this.$=new e.ProgramNode([],Y[X-1],Y[X],this._$);break;case 4:this.$=new e.ProgramNode(Y[X-2],Y[X-1],Y[X],this._$);break;case 5:this.$=new e.ProgramNode(Y[X-1],Y[X],[],this._$);break;case 6:this.$=new e.ProgramNode(Y[X],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[Y[X]];break;case 10:Y[X-1].push(Y[X]);this.$=Y[X-1];break;case 11:this.$=new e.BlockNode(Y[X-2],Y[X-1].inverse,Y[X-1],Y[X],this._$);break;case 12:this.$=new e.BlockNode(Y[X-2],Y[X-1],Y[X-1].inverse,Y[X],this._$);break;case 13:this.$=Y[X];break;case 14:this.$=Y[X];break;case 15:this.$=new e.ContentNode(Y[X],this._$);break;case 16:this.$=new e.CommentNode(Y[X],this._$);break;case 17:this.$=new e.MustacheNode(Y[X-1],null,Y[X-2],O(Y[X-2],Y[X]),this._$);break;case 18:this.$=new e.MustacheNode(Y[X-1],null,Y[X-2],O(Y[X-2],Y[X]),this._$);break;case 19:this.$={path:Y[X-1],strip:O(Y[X-2],Y[X])};break;case 20:this.$=new e.MustacheNode(Y[X-1],null,Y[X-2],O(Y[X-2],Y[X]),this._$);break;case 21:this.$=new e.MustacheNode(Y[X-1],null,Y[X-2],O(Y[X-2],Y[X]),this._$);break;case 22:this.$=new e.PartialNode(Y[X-2],Y[X-1],O(Y[X-3],Y[X]),this._$);break;case 23:this.$=O(Y[X-1],Y[X]);break;case 24:this.$=new e.SexprNode([Y[X-2]].concat(Y[X-1]),Y[X],this._$);break;case 25:this.$=new e.SexprNode([Y[X]],null,this._$);break;case 26:this.$=Y[X];break;case 27:this.$=new e.StringNode(Y[X],this._$);break;case 28:this.$=new e.IntegerNode(Y[X],this._$);break;case 29:this.$=new e.BooleanNode(Y[X],this._$);break;case 30:this.$=Y[X];break;case 31:Y[X-1].isHelper=true;this.$=Y[X-1];break;case 32:this.$=new e.HashNode(Y[X],this._$);break;case 33:this.$=[Y[X-2],Y[X]];break;case 34:this.$=new e.PartialNameNode(Y[X],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(Y[X],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(Y[X],this._$));break;case 37:this.$=new e.DataNode(Y[X],this._$);break;case 38:this.$=new e.IdNode(Y[X],this._$);break;case 39:Y[X-2].push({part:Y[X],separator:Y[X-1]});this.$=Y[X-2];break;case 40:this.$=[{part:Y[X]}];break;case 43:this.$=[];break;case 44:Y[X-1].push(Y[X]);break;case 47:this.$=[Y[X]];break;case 48:Y[X-1].push(Y[X]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function S(X,W){throw new Error(X)},parse:function U(h){var t=this,e=[0],AC=[null],l=[],AD=this.table,X="",k=0,AA=0,Z=0,g=2,o=1;this.lexer.setInput(h);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var Y=this.lexer.yylloc;l.push(Y);var b=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function s(a){e.length=e.length-2*a;AC.length=AC.length-a;l.length=l.length-a}function q(){var a;a=t.lexer.lex()||1;if(typeof a!=="number"){a=t.symbols_[a]||a}return a}var z,v,c,y,AE,m,x={},u,AB,W,f;while(true){c=e[e.length-1];if(this.defaultActions[c]){y=this.defaultActions[c]}else{if(z===null||typeof z=="undefined"){z=q()}y=AD[c]&&AD[c][z]}if(typeof y==="undefined"||!y.length||!y[0]){var w="";if(!Z){f=[];for(u in AD[c]){if(this.terminals_[u]&&u>2){f.push("'"+this.terminals_[u]+"'")}}if(this.lexer.showPosition){w="Parse error on line "+(k+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+f.join(", ")+", got '"+(this.terminals_[z]||z)+"'"}else{w="Parse error on line "+(k+1)+": Unexpected "+(z==1?"end of input":"'"+(this.terminals_[z]||z)+"'")}this.parseError(w,{text:this.lexer.match,token:this.terminals_[z]||z,line:this.lexer.yylineno,loc:Y,expected:f})}}if(y[0] instanceof Array&&y.length>1){throw new Error("Parse Error: multiple actions possible at state: "+c+", token: "+z)}switch(y[0]){case 1:e.push(z);AC.push(this.lexer.yytext);l.push(this.lexer.yylloc);e.push(y[1]);z=null;if(!v){AA=this.lexer.yyleng;X=this.lexer.yytext;k=this.lexer.yylineno;Y=this.lexer.yylloc;if(Z>0){Z--}}else{z=v;v=null}break;case 2:AB=this.productions_[y[1]][1];x.$=AC[AC.length-AB];x._$={first_line:l[l.length-(AB||1)].first_line,last_line:l[l.length-1].last_line,first_column:l[l.length-(AB||1)].first_column,last_column:l[l.length-1].last_column};if(b){x._$.range=[l[l.length-(AB||1)].range[0],l[l.length-1].range[1]]}m=this.performAction.call(x,X,AA,k,this.yy,y[1],AC,l);if(typeof m!=="undefined"){return m}if(AB){e=e.slice(0,-1*AB*2);AC=AC.slice(0,-1*AB);l=l.slice(0,-1*AB)}e.push(this.productions_[y[1]][0]);AC.push(x.$);l.push(x._$);W=AD[e[e.length-2]][e[e.length-1]];e.push(W);break;case 3:return true}}return true}};function O(W,X){return{left:W.charAt(2)==="~",right:X.charAt(0)==="~"||X.charAt(1)==="~"}}var P=(function(){var Z=({EOF:1,parseError:function b(f,e){if(this.yy.parser){this.yy.parser.parseError(f,e)}else{throw new Error(f)}},setInput:function(e){this._input=e;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var f=this._input[0];this.yytext+=f;this.yyleng++;this.offset++;this.match+=f;this.matched+=f;var e=f.match(/(?:\r\n?|\n).*/g);if(e){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return f},unput:function(g){var e=g.length;var f=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-e-1);this.offset-=e;var k=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(f.length-1){this.yylineno-=f.length-1}var h=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===k.length?this.yylloc.first_column:0)+k[k.length-f.length].length-f[0].length:this.yylloc.first_column-e};if(this.options.ranges){this.yylloc.range=[h[0],h[0]+this.yyleng-e]}return this},more:function(){this._more=true;return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;if(e.length<20){e+=this._input.substr(0,20-e.length)}return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput();var f=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+f+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var m,k,f,h,g,e;if(!this._more){this.yytext="";this.match=""}var o=this._currentRules();for(var l=0;l<o.length;l++){f=this._input.match(this.rules[o[l]]);if(f&&(!k||f[0].length>k[0].length)){k=f;h=l;if(!this.options.flex){break}}}if(k){e=k[0].match(/(?:\r\n?|\n).*/g);if(e){this.yylineno+=e.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length};this.yytext+=k[0];this.match+=k[0];this.matches=k;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(k[0].length);this.matched+=k[0];m=this.performAction.call(this,this.yy,this,o[h],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(m){return m}else{return }}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function W(){var e=this.next();if(typeof e!=="undefined"){return e}else{return this.lex()}},begin:function X(e){this.conditionStack.push(e)},popState:function c(){return this.conditionStack.pop()},_currentRules:function a(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function X(e){this.begin(e)}});Z.options={};Z.performAction=function Y(l,f,k,e){function g(o,m){return f.yytext=f.yytext.substr(o,f.yyleng-m)}var h=e;switch(k){case 0:if(f.yytext.slice(-2)==="\\\\"){g(0,1);this.begin("mu")}else{if(f.yytext.slice(-1)==="\\"){g(0,1);this.begin("emu")}else{this.begin("mu")}}if(f.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:g(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:g(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:f.yytext=g(1,2).replace(/\\"/g,'"');return 32;break;case 24:f.yytext=g(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:f.yytext=g(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};Z.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];Z.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return Z})();V.lexer=P;function T(){this.yy={}}T.prototype=V;V.Parser=T;return new T})();N=M;return N})();var L=(function(Q,M){var N={};var R=Q;var O=M;N.parser=R;function P(S){if(S.constructor===O.ProgramNode){return S}R.yy=O;return R.parse(S)}N.parse=P;return N})(B,J);var E=(function(R){var Q={};var M=R;function O(){}Q.Compiler=O;O.prototype={compiler:O,disassemble:function(){var X=this.opcodes,W,U=[],Z,Y;for(var V=0,S=X.length;V<S;V++){W=X[V];if(W.opcode==="DECLARE"){U.push("DECLARE "+W.name+"="+W.value)}else{Z=[];for(var T=0;T<W.args.length;T++){Y=W.args[T];if(typeof Y==="string"){Y='"'+Y.replace("\n","\\n")+'"'}Z.push(Y)}U.push(W.opcode+" "+Z.join(" "))}}return U.join("\n")},equals:function(T){var S=this.opcodes.length;if(T.opcodes.length!==S){return false}for(var W=0;W<S;W++){var X=this.opcodes[W],U=T.opcodes[W];if(X.opcode!==U.opcode||X.args.length!==U.args.length){return false}for(var V=0;V<X.args.length;V++){if(X.args[V]!==U.args[V]){return false}}}S=this.children.length;if(T.children.length!==S){return false}for(W=0;W<S;W++){if(!this.children[W].equals(T.children[W])){return false}}return true},guid:0,compile:function(S,U){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=U;var V=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(V){for(var T in V){this.options.knownHelpers[T]=V[T]}}return this.accept(S)},accept:function(U){var T=U.strip||{},S;if(T.left){this.opcode("strip")}S=this[U.type](U);if(T.right){this.opcode("strip")}return S},program:function(U){var T=U.statements;for(var V=0,S=T.length;V<S;V++){this.accept(T[V])}this.isSimple=S===1;this.depths.list=this.depths.list.sort(function(X,W){return X-W});return this},compileProgram:function(U){var S=new this.compiler().compile(U,this.options);var V=this.guid++,X;this.usePartial=this.usePartial||S.usePartial;this.children[V]=S;for(var W=0,T=S.depths.list.length;W<T;W++){X=S.depths.list[W];if(X<2){continue}else{this.addDepth(X-1)}}return V},block:function(X){var W=X.mustache,T=X.program,S=X.inverse;if(T){T=this.compileProgram(T)}if(S){S=this.compileProgram(S)}var V=W.sexpr;var U=this.classifySexpr(V);if(U==="helper"){this.helperSexpr(V,T,S)}else{if(U==="simple"){this.simpleSexpr(V);this.opcode("pushProgram",T);this.opcode("pushProgram",S);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(V,T,S);this.opcode("pushProgram",T);this.opcode("pushProgram",S);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(V){var U=V.pairs,X,W;this.opcode("pushHash");for(var T=0,S=U.length;T<S;T++){X=U[T];W=X[1];if(this.options.stringParams){if(W.depth){this.addDepth(W.depth)}this.opcode("getContext",W.depth||0);this.opcode("pushStringParam",W.stringModeValue,W.type);if(W.type==="sexpr"){this.sexpr(W)}}else{this.accept(W)}this.opcode("assignToHash",X[0])}this.opcode("popHash")},partial:function(S){var T=S.partialName;this.usePartial=true;if(S.context){this.ID(S.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",T.name);this.opcode("append")},content:function(S){this.opcode("appendContent",S.string)},mustache:function(S){this.sexpr(S.sexpr);if(S.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(W,U,T){var X=W.id,V=X.parts[0],S=U!=null||T!=null;this.opcode("getContext",X.depth);this.opcode("pushProgram",U);this.opcode("pushProgram",T);this.opcode("invokeAmbiguous",V,S)},simpleSexpr:function(S){var T=S.id;if(T.type==="DATA"){this.DATA(T)}else{if(T.parts.length){this.ID(T)}else{this.addDepth(T.depth);this.opcode("getContext",T.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperSexpr:function(V,T,S){var W=this.setupFullMustacheParams(V,T,S),U=V.id.parts[0];if(this.options.knownHelpers[U]){this.opcode("invokeKnownHelper",W.length,U)}else{if(this.options.knownHelpersOnly){throw new M("You specified knownHelpersOnly, but used the unknown helper "+U,V)}else{this.opcode("invokeHelper",W.length,U,V.isRoot)}}},sexpr:function(T){var S=this.classifySexpr(T);if(S==="simple"){this.simpleSexpr(T)}else{if(S==="helper"){this.helperSexpr(T)}else{this.ambiguousSexpr(T)}}},ID:function(V){this.addDepth(V.depth);this.opcode("getContext",V.depth);var T=V.parts[0];if(!T){this.opcode("pushContext")}else{this.opcode("lookupOnContext",V.parts[0])}for(var U=1,S=V.parts.length;U<S;U++){this.opcode("lookup",V.parts[U])}},DATA:function(U){this.options.data=true;if(U.id.isScoped||U.id.depth){throw new M("Scoped data references are not supported: "+U.original,U)}this.opcode("lookupData");var V=U.id.parts;for(var T=0,S=V.length;T<S;T++){this.opcode("lookup",V[T])}},STRING:function(S){this.opcode("pushString",S.string)},INTEGER:function(S){this.opcode("pushLiteral",S.integer)},BOOLEAN:function(S){this.opcode("pushLiteral",S.bool)},comment:function(){},opcode:function(S){this.opcodes.push({opcode:S,args:[].slice.call(arguments,1)})},declare:function(S,T){this.opcodes.push({opcode:"DECLARE",name:S,value:T})},addDepth:function(S){if(S===0){return }if(!this.depths[S]){this.depths[S]=true;this.depths.list.push(S)}},classifySexpr:function(V){var U=V.isHelper;var W=V.eligibleHelper;var T=this.options;if(W&&!U){var S=V.id.parts[0];if(T.knownHelpers[S]){U=true}else{if(T.knownHelpersOnly){W=false}}}if(U){return"helper"}else{if(W){return"ambiguous"}else{return"simple"}}},pushParams:function(U){var S=U.length,T;while(S--){T=U[S];if(this.options.stringParams){if(T.depth){this.addDepth(T.depth)}this.opcode("getContext",T.depth||0);this.opcode("pushStringParam",T.stringModeValue,T.type);if(T.type==="sexpr"){this.sexpr(T)}}else{this[T.type](T)}}},setupFullMustacheParams:function(U,T,S){var V=U.params;this.pushParams(V);this.opcode("pushProgram",T);this.opcode("pushProgram",S);if(U.hash){this.hash(U.hash)}else{this.opcode("emptyHash")}return V}};function N(U,V,W){if(U==null||(typeof U!=="string"&&U.constructor!==W.AST.ProgramNode)){throw new M("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+U)}V=V||{};if(!("data" in V)){V.data=true}var T=W.parse(U);var S=new W.Compiler().compile(T,V);return new W.JavaScriptCompiler().compile(S,V)}Q.precompile=N;function P(S,T,U){if(S==null||(typeof S!=="string"&&S.constructor!==U.AST.ProgramNode)){throw new M("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+S)}T=T||{};if(!("data" in T)){T.data=true}var W;function V(){var Z=U.parse(S);var Y=new U.Compiler().compile(Z,T);var X=new U.JavaScriptCompiler().compile(Y,T,undefined,true);return U.template(X)}return function(Y,X){if(!W){W=V()}return W.call(this,Y,X)}}Q.compile=P;return Q})(D);var H=(function(U,X){var W;var M=U.COMPILER_REVISION;var Q=U.REVISION_CHANGES;var R=U.log;var S=X;function O(Z){this.value=Z}function Y(){}Y.prototype={nameLookup:function(c,a){var b,Z;if(c.indexOf("depth")===0){b=true}if(/^[0-9]+$/.test(a)){Z=c+"["+a+"]"}else{if(Y.isValidJavaScriptVariableName(a)){Z=c+"."+a}else{Z=c+"['"+a+"']"}}if(b){return"("+c+" && "+Z+")"}else{return Z}},compilerInfo:function(){var a=M,Z=Q[a];return"this.compilerInfo = ["+a+",'"+Z+"'];\n"},appendToBuffer:function(Z){if(this.environment.isSimple){return"return "+Z+";"}else{return{appendToBuffer:true,content:Z,toString:function(){return"buffer += "+Z+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(Z,b,e,c){this.environment=Z;this.options=b||{};R("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!e;this.context=e||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(Z,b);var g=Z.opcodes,f;this.i=0;for(var a=g.length;this.i<a;this.i++){f=g[this.i];if(f.opcode==="DECLARE"){this[f.name]=f.value}else{this[f.opcode].apply(this,f.args)}if(f.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new S("Compile completed with content left on stack")}return this.createFunctionContext(c)},preamble:function(){var Z=[];if(!this.isChild){var a=this.namespace;var b="helpers = this.merge(helpers, "+a+".helpers);";if(this.environment.usePartial){b=b+" partials = this.merge(partials, "+a+".partials);"}if(this.options.data){b=b+" data = data || {};"}Z.push(b)}else{Z.push("")}if(!this.environment.isSimple){Z.push(", buffer = "+this.initializeBuffer())}else{Z.push("")}this.lastContext=0;this.source=Z},createFunctionContext:function(e){var g=this.stackVars.concat(this.registers.list);if(g.length>0){this.source[1]=this.source[1]+", "+g.join(", ")}if(!this.isChild){for(var c in this.context.aliases){if(this.context.aliases.hasOwnProperty(c)){this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var h=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var b=0,Z=this.environment.depths.list.length;b<Z;b++){h.push("depth"+this.environment.depths.list[b])}var f=this.mergeSource();if(!this.isChild){f=this.compilerInfo()+f}if(e){h.push(f);return Function.apply(this,h)}else{var a="function "+(this.name||"")+"("+h.join(",")+") {\n  "+f+"}";R("debug",a+"\n\n");return a}},mergeSource:function(){var e="",b;for(var c=0,Z=this.source.length;c<Z;c++){var a=this.source[c];if(a.appendToBuffer){if(b){b=b+"\n    + "+a.content}else{b=a.content}}else{if(b){e+="buffer += "+b+";\n  ";b=undefined}e+=a+"\n  "}}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var Z=["depth0"];this.setupParams(0,Z);this.replaceStack(function(a){Z.splice(1,0,a);return"blockHelperMissing.call("+Z.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var Z=this.topStack();a.splice(1,0,Z);this.pushSource("if (!"+this.lastHelper+") { "+Z+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(Z){if(this.pendingContent){Z=this.pendingContent+Z}if(this.stripNext){Z=Z.replace(/^\s+/,"")}this.pendingContent=Z},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var Z=this.popStack();this.pushSource("if("+Z+" || "+Z+" === 0) { "+this.appendToBuffer(Z)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(Z){if(this.lastContext!==Z){this.lastContext=Z}},lookupOnContext:function(Z){this.push(this.nameLookup("depth"+this.lastContext,Z,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(Z){return"typeof "+Z+" === functionType ? "+Z+".apply(depth0) : "+Z})},lookup:function(Z){this.replaceStack(function(a){return a+" == null || "+a+" === false ? "+a+" : "+this.nameLookup(a,Z,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(Z,a){this.pushStackLiteral("depth"+this.lastContext);this.pushString(a);if(a!=="sexpr"){if(typeof Z==="string"){this.pushString(Z)}else{this.pushStackLiteral(Z)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var Z=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+Z.contexts.join(",")+"}");this.push("{"+Z.types.join(",")+"}")}this.push("{\n    "+Z.values.join(",\n    ")+"\n  }")},pushString:function(Z){this.pushStackLiteral(this.quotedString(Z))},push:function(Z){this.inlineStack.push(Z);return Z},pushLiteral:function(Z){this.pushStackLiteral(Z)},pushProgram:function(Z){if(Z!=null){this.pushStackLiteral(this.programExpression(Z))}else{this.pushStackLiteral(null)}},invokeHelper:function(e,a,Z){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var b=this.lastHelper=this.setupHelper(e,a,true);var f=this.nameLookup("depth"+this.lastContext,a,"context");var c="helper = "+b.name+" || "+f;if(b.paramsInit){c+=","+b.paramsInit}this.push("("+c+",helper ? helper.call("+b.callParams+") : helperMissing.call("+b.helperMissingParams+"))");if(!Z){this.flushInline()}},invokeKnownHelper:function(b,Z){var a=this.setupHelper(b,Z);this.push(a.name+".call("+a.callParams+")")},invokeAmbiguous:function(Z,e){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var a=this.setupHelper(0,Z,e);var b=this.lastHelper=this.nameLookup("helpers",Z,"helper");var f=this.nameLookup("depth"+this.lastContext,Z,"context");var c=this.nextStack();if(a.paramsInit){this.pushSource(a.paramsInit)}this.pushSource("if (helper = "+b+") { "+c+" = helper.call("+a.callParams+"); }");this.pushSource("else { helper = "+f+"; "+c+" = typeof helper === functionType ? helper.call("+a.callParams+") : helper; }")},invokePartial:function(Z){var a=[this.nameLookup("partials",Z,"partial"),"'"+Z+"'",this.popStack(),"helpers","partials"];if(this.options.data){a.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var c=this.popStack(),Z,b;if(this.options.stringParams){b=this.popStack();Z=this.popStack()}var e=this.hash;if(Z){e.contexts.push("'"+a+"': "+Z)}if(b){e.types.push("'"+a+"': "+b)}e.values.push("'"+a+"': ("+c+")")},compiler:Y,compileChildren:function(Z,c){var f=Z.children,h,g;for(var e=0,a=f.length;e<a;e++){h=f[e];g=new this.compiler();var b=this.matchExistingProgram(h);if(b==null){this.context.programs.push("");b=this.context.programs.length;h.index=b;h.name="program"+b;this.context.programs[b]=g.compile(h,c,this.context);this.context.environments[b]=h}else{h.index=b;h.name="program"+b}}},matchExistingProgram:function(c){for(var b=0,a=this.context.environments.length;b<a;b++){var Z=this.context.environments[b];if(Z&&Z.equals(c)){return b}}},programExpression:function(a){this.context.aliases.self="this";if(a==null){return"self.noop"}var g=this.environment.children[a],f=g.depths.list,e;var c=[g.index,g.name,"data"];for(var b=0,Z=f.length;b<Z;b++){e=f[b];if(e===1){c.push("depth0")}else{c.push("depth"+(e-1))}}return(f.length===0?"self.program(":"self.programWithDepth(")+c.join(", ")+")"},register:function(Z,a){this.useRegister(Z);this.pushSource(Z+" = "+a+";")},useRegister:function(Z){if(!this.registers[Z]){this.registers[Z]=true;this.registers.list.push(Z)}},pushStackLiteral:function(Z){return this.push(new O(Z))},pushSource:function(Z){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(Z){this.source.push(Z)}},pushStack:function(a){this.flushInline();var Z=this.incrStack();if(a){this.pushSource(Z+" = "+a+";")}this.compileStack.push(Z);return Z},replaceStack:function(h){var b="",c=this.isInline(),g,a,e;if(c){var f=this.popStack(true);if(f instanceof O){g=f.value;e=true}else{a=!this.stackSlot;var Z=!a?this.topStackName():this.incrStack();b="("+this.push(Z)+" = "+f+"),";g=this.topStack()}}else{g=this.topStack()}var k=h.call(this,g);if(c){if(!e){this.popStack()}if(a){this.stackSlot--}this.push("("+b+k+")")}else{if(!/^stack/.test(g)){g=this.nextStack()}this.pushSource(g+" = ("+b+k+");")}return g},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var a=0,Z=b.length;a<Z;a++){var c=b[a];if(c instanceof O){this.compileStack.push(c)}else{this.pushStack(c)}}}},isInline:function(){return this.inlineStack.length},popStack:function(Z){var b=this.isInline(),a=(b?this.inlineStack:this.compileStack).pop();if(!Z&&(a instanceof O)){return a.value}else{if(!b){if(!this.stackSlot){throw new S("Invalid stack pop")}this.stackSlot--}return a}},topStack:function(a){var Z=(this.isInline()?this.inlineStack:this.compileStack),b=Z[Z.length-1];if(!a&&(b instanceof O)){return b.value}else{return b}},quotedString:function(Z){return'"'+Z.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,b,a){var c=[],f=this.setupParams(e,c,a);var Z=this.nameLookup("helpers",b,"helper");return{params:c,paramsInit:f,name:Z,callParams:["depth0"].concat(c).join(", "),helperMissingParams:a&&["depth0",this.quotedString(b)].concat(c).join(", ")}},setupOptions:function(b,a){var k=[],f=[],h=[],Z,c,g;k.push("hash:"+this.popStack());if(this.options.stringParams){k.push("hashTypes:"+this.popStack());k.push("hashContexts:"+this.popStack())}c=this.popStack();g=this.popStack();if(g||c){if(!g){this.context.aliases.self="this";g="self.noop"}if(!c){this.context.aliases.self="this";c="self.noop"}k.push("inverse:"+c);k.push("fn:"+g)}for(var e=0;e<b;e++){Z=this.popStack();a.push(Z);if(this.options.stringParams){h.push(this.popStack());f.push(this.popStack())}}if(this.options.stringParams){k.push("contexts:["+f.join(",")+"]");k.push("types:["+h.join(",")+"]")}if(this.options.data){k.push("data:data")}return k},setupParams:function(c,b,a){var Z="{"+this.setupOptions(c,b).join(",")+"}";if(a){this.useRegister("options");b.push("options");return"options="+Z}else{b.push(Z);return""}}};var N=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var V=Y.RESERVED_WORDS={};for(var T=0,P=N.length;T<P;T++){V[N[T]]=true}Y.isValidJavaScriptVariableName=function(Z){if(!Y.RESERVED_WORDS[Z]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(Z)){return true}return false};W=Y;return W})(I,D);var C=(function(V,a,N,R,U){var X;var M=V;var T=a;var Q=N.parser;var P=N.parse;var W=R.Compiler;var Z=R.compile;var O=R.precompile;var b=U;var Y=M.create;var S=function(){var c=Y();c.compile=function(e,f){return Z(e,f,c)};c.precompile=function(e,f){return O(e,f,c)};c.AST=T;c.Compiler=W;c.JavaScriptCompiler=b;c.Parser=Q;c.parse=P;return c};M=S();M.create=S;X=M;return X})(F,J,L,E,H);return C})();var Placeholders=(function(){var P=["text","search","url","tel","email","password","number","textarea"],G={live:false,hideOnFocus:false,className:"placeholderspolyfill",textColor:"#999",styleImportant:true},J=[37,38,39,40],E,D,B=new RegExp("\\b"+G.className+"\\b");function N(S){var R;if(S.createTextRange){R=S.createTextRange();R.move("character",0);R.select()}else{if(S.selectionStart){S.focus();S.setSelectionRange(0,0)}}}function L(){var R;var S=this.getAttribute("placeholder");if(this.value===S||(S&&this.value===S.toUpperCase())){if(!G.hideOnFocus){N(this)}else{this.className=this.className.replace(B,"");this.value="";R=this.getAttribute("data-placeholdertype");if(R){this.type=R}}}}function K(){var R;if(this.value===""){this.className=this.className+" "+G.className;this.value=this.getAttribute("placeholder");R=this.getAttribute("data-placeholdertype");if(R){this.type="text"}}}function O(){var T=this.getElementsByTagName("input"),R=this.getElementsByTagName("textarea"),S=T.length,U=S+R.length,W,X,V;for(V=0;V<U;V+=1){W=(V<S)?T[V]:R[V-S];X=W.getAttribute("placeholder");if(W.value===X){W.value=""}}}function M(R){D=this.value;return !(D===this.getAttribute("placeholder")&&J.indexOf(R.keyCode)>-1)}function A(){var R;if(this.value!==D){this.className=this.className.replace(B,"");this.value=this.value.replace(this.getAttribute("placeholder"),"");R=this.getAttribute("data-placeholdertype");if(R){this.type=R}}if(this.value===""){K.call(this);N(this)}}function H(R,T,S){if(R.addEventListener){return R.addEventListener(T,S.bind(R),false)}if(R.attachEvent){return R.attachEvent("on"+T,S.bind(R))}}function F(R){if(!G.hideOnFocus){H(R,"keydown",M);H(R,"keyup",A)}H(R,"focus",L);H(R,"blur",K)}function I(){var X=document.getElementsByTagName("input"),Z=document.getElementsByTagName("textarea"),S=X.length,V=S+Z.length,T,R,U,Y,W;for(T=0;T<V;T+=1){U=(T<S)?X[T]:Z[T-S];W=U.getAttribute("placeholder");if(P.indexOf(U.type)>-1){if(W){Y=U.getAttribute("data-currentplaceholder");if(W!==Y){if(U.value===Y||U.value===W||!U.value){U.value=W;U.className=U.className+" "+G.className}if(!Y){if(U.form){R=U.form;if(!R.getAttribute("data-placeholdersubmit")){H(R,"submit",O);R.setAttribute("data-placeholdersubmit","true")}}F(U)}U.setAttribute("data-currentplaceholder",W)}}}}}function C(){var W=document.getElementsByTagName("input"),Y=document.getElementsByTagName("textarea"),S=W.length,V=S+Y.length,T,U,R,Z;for(T=0;T<V;T+=1){U=(T<S)?W[T]:Y[T-S];Z=U.getAttribute("placeholder");if(P.indexOf(U.type)>-1){if(Z){if(U.type==="password"){try{U.type="text";U.setAttribute("data-placeholdertype","password")}catch(X){}}U.setAttribute("data-currentplaceholder",Z);if(U.value===""||U.value===Z){U.className=U.className+" "+G.className;U.value=Z}if(U.form){R=U.form;if(!R.getAttribute("data-placeholdersubmit")){H(R,"submit",O);R.setAttribute("data-placeholdersubmit","true")}}F(U)}}}}function Q(V){var Y=document.createElement("input"),U,X,T,S,R;if(typeof Y.placeholder==="undefined"){for(U in V){if(V.hasOwnProperty(U)){G[U]=V[U]}}X=document.createElement("style");X.type="text/css";var W=(G.styleImportant)?"!important":"";T=document.createTextNode("."+G.className+" { color:"+G.textColor+W+"; }");if(X.styleSheet){X.styleSheet.cssText=T.nodeValue}else{X.appendChild(T)}document.getElementsByTagName("head")[0].appendChild(X);if(!Array.prototype.indexOf){Array.prototype.indexOf=function(Z,a){for(S=(a||0),R=this.length;S<R;S+=1){if(this[S]===Z){return S}}return -1}}if(!Function.prototype.bind){Function.prototype.bind=function(Z){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var e=Array.prototype.slice.call(arguments,1),c=this,a=function(){},b=function(){return c.apply(this instanceof a?this:Z,e.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;b.prototype=new a();return b}}C();if(G.live){E=setInterval(I,100)}return true}return false}return{init:Q,create:C,refresh:I}}());function FABridge(B,A){this.target=B;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=A;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};FABridge.argsToArray=function(B){var A=[];for(var C=0;C<B.length;C++){A[C]=B[C]}return A};function instanceFactory(A){this.fb_instance_id=A;return this}function FABridge__invokeJSFunction(A){var C=A[0];var B=A.concat();B.shift();var D=FABridge.extractBridgeFromID(C);return D.invokeLocalFunction(C,B)}FABridge.addInitializationCallback=function(B,D){var C=FABridge.instances[B];if(C!=undefined){D.call(C);return }var A=FABridge.initCallbacks[B];if(A==null){FABridge.initCallbacks[B]=A=[]}A.push(D)};function FABridge__bridgeInitialized(G){var A=document.getElementsByTagName("object");var F=A.length;var D=[];if(F>0){for(var P=0;P<F;P++){if(typeof A[P].SetVariable!="undefined"){D[D.length]=A[P]}}}var I=document.getElementsByTagName("embed");var B=I.length;var O=[];if(B>0){for(var M=0;M<B;M++){if(typeof I[M].SetVariable!="undefined"){O[O.length]=I[M]}}}var C=D.length;var N=O.length;var H="bridgeName="+G;if((C==1&&!N)||(C==1&&N==1)){FABridge.attachBridge(D[0],G)}else{if(N==1&&!C){FABridge.attachBridge(O[0],G)}else{var Q=false;if(C>1){for(var L=0;L<C;L++){var S=D[L].childNodes;for(var K=0;K<S.length;K++){var E=S[K];if(E.nodeType==1&&E.tagName.toLowerCase()=="param"&&E.name.toLowerCase()=="flashvars"&&E.value.indexOf(H)>=0){FABridge.attachBridge(D[L],G);Q=true;break}}if(Q){break}}}if(!Q&&N>1){for(var J=0;J<N;J++){var R=O[J].attributes.getNamedItem("flashVars").nodeValue;if(R.indexOf(H)>=0){FABridge.attachBridge(O[J],G);break}}}}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;FABridge.extractBridgeFromID=function(B){var A=(B>>16);return FABridge.idMap[A]};FABridge.attachBridge=function(A,C){var B=new FABridge(A,C);FABridge[C]=B;var E=FABridge.initCallbacks[C];if(E==null){return }for(var D=0;D<E.length;D++){E[D].call(B)}delete FABridge.initCallbacks[C]};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(B){if(typeof (B)!="object"){return false}else{var A=this.target.releaseNamedASObject(B.fb_instance_id);return A}},create:function(A){return this.deserialize(this.target.create(A))},makeID:function(A){return(this.bridgeID<<16)+A},getPropertyFromAS:function(B,A){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.getPropFromAS(B,A);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(C,B,A){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.setPropInAS(C,B,this.serialize(A));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASFunction:function(B,A){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.invokeASFunction(B,this.serialize(A));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASMethod:function(B,C,A){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;A=this.serialize(A);retVal=this.target.invokeASMethod(B,C,A);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(D,B){var A;var C=this.localFunctionCache[D];if(C!=undefined){A=this.serialize(C.apply(null,this.deserialize(B)))}return A},getTypeFromName:function(A){return this.remoteTypeCache[A]},createProxy:function(C,B){var D=this.getTypeFromName(B);instanceFactory.prototype=D;var A=new instanceFactory(C);this.remoteInstanceCache[C]=A;return A},getProxy:function(A){return this.remoteInstanceCache[A]},addTypeDataToCache:function(D){newType=new ASProxy(this,D.name);var B=D.accessors;for(var C=0;C<B.length;C++){this.addPropertyToType(newType,B[C])}var A=D.methods;for(var C=0;C<A.length;C++){if(FABridge.blockedMethods[A[C]]==undefined){this.addMethodToType(newType,A[C])}}this.remoteTypeCache[newType.typeName]=newType;return newType},addPropertyToType:function(A,D){var E=D.charAt(0);var B;var C;if(E>="a"&&E<="z"){C="get"+E.toUpperCase()+D.substr(1);B="set"+E.toUpperCase()+D.substr(1)}else{C="get"+D;B="set"+D}A[B]=function(F){this.bridge.setPropertyInAS(this.fb_instance_id,D,F)};A[C]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,D))}},addMethodToType:function(A,B){A[B]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,B,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(A){var B=this;if(this.remoteFunctionCache[A]==null){this.remoteFunctionCache[A]=function(){B.callASFunction(A,FABridge.argsToArray(arguments))}}return this.remoteFunctionCache[A]},getFunctionID:function(A){if(A.__bridge_id__==undefined){A.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[A.__bridge_id__]=A}return A.__bridge_id__},serialize:function(D){var A={};var C=typeof (D);if(C=="number"||C=="string"||C=="boolean"||C==null||C==undefined){A=D}else{if(D instanceof Array){A=[];for(var B=0;B<D.length;B++){A[B]=this.serialize(D[B])}}else{if(C=="function"){A.type=FABridge.TYPE_JSFUNCTION;A.value=this.getFunctionID(D)}else{if(D instanceof ASProxy){A.type=FABridge.TYPE_ASINSTANCE;A.value=D.fb_instance_id}else{A.type=FABridge.TYPE_ANONYMOUS;A.value=D}}}}return A},deserialize:function(E){var A;var C=typeof (E);if(C=="number"||C=="string"||C=="boolean"||E==null||E==undefined){A=this.handleError(E)}else{if(E instanceof Array){A=[];for(var B=0;B<E.length;B++){A[B]=this.deserialize(E[B])}}else{if(C=="object"){for(var B=0;B<E.newTypes.length;B++){this.addTypeDataToCache(E.newTypes[B])}for(var D in E.newRefs){this.createProxy(D,E.newRefs[D])}if(E.type==FABridge.TYPE_PRIMITIVE){A=E.value}else{if(E.type==FABridge.TYPE_ASFUNCTION){A=this.getFunctionProxy(E.value)}else{if(E.type==FABridge.TYPE_ASINSTANCE){A=this.getProxy(E.value)}else{if(E.type==FABridge.TYPE_ANONYMOUS){A=E.value}}}}}}}return A},addRef:function(A){this.target.incRef(A.fb_instance_id)},release:function(A){this.target.releaseRef(A.fb_instance_id)},handleError:function(B){if(typeof (B)=="string"&&B.indexOf("__FLASHERROR")==0){var A=B.split("||");if(FABridge.refCount>0){FABridge.refCount--}throw new Error(A[1]);return B}else{return B}}};ASProxy=function(B,A){this.bridge=B;this.typeName=A;return this};ASProxy.prototype={get:function(A){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,A))},set:function(B,A){this.bridge.setPropertyInAS(this.fb_instance_id,B,A)},call:function(B,A){this.bridge.callASMethod(this.fb_instance_id,B,A)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};var gAcadColorMgr=new AcadColorManager();function AcadColorManager(){this.unassignedColor="13421772";this.unassignedOpacity="0.7";this.unassignedBorderColor="0";this.unassignedBorderOpacity="1";this.unassignedBorderThickness="2";this.assignedColor="65535";this.assignedOpacity="0.7";this.assignedBorderColor="0";this.assignedBorderOpacity="1";this.assignedBorderThickness="5";this.selectedColor="16776960";this.selectedOpacity="0.9";this.selectedBorderColor="255";this.selectedBorderOpacity="1";this.selectedBorderThickness="10";this.nofillColor="-2";this.nofillOpacity="0.0";this.nofillBorderColor="0";this.nofillBorderOpacity="1";this.nofillBorderThickness="2";this._fixedColors=new Array();this._idealLabelTextSize="11";this._minimumLabelTextSize="8";this._shrinkLabelTextToFit="true";this._getHighlightRGBColorEncoding=false;this._highlightRGBColorEncoding="1";this.valueColorMap={};this.legendKey="LEGENDKEY";this.setHighlightRGBColorEncoding=function(){try{var A=Workflow.call("AbCommonResources-HighlightPatternService-getHighlightRGBColorEncoding",null);if(A.code=="executed"){this._highlightRGBColorEncoding=A.message;this._getHighlightRGBColorEncoding=true}}catch(B){Workflow.handleError(B)}};this.reset=function(){this.valueColorMap={}};this.setAutoAssignColors=function(A){this._fixedColors=A};this.setIdealLabelTextSize=function(A){this._idealLabelTextSize=A};this.setMinimumLabelTextSize=function(A){this._minimumLabelTextSize=A};this.setShrinkLabelTextToFit=function(A){this._shrinkLabelTextToFit=A};this.setAssignedInitConfig=function(A){if(A.assigned!=null&&A.assigned.fill!=null){gAcadColorMgr.setAssignedColor(A.assigned.fill.color);gAcadColorMgr.setAssignedOpacity(A.assigned.fill.opacity)}if(A.assigned!=null&&A.assigned.border!=null){gAcadColorMgr.setAssignedBorderColor(A.assigned.border.color);gAcadColorMgr.setAssignedBorderOpacity(A.assigned.border.opacity);gAcadColorMgr.setAssignedBorderThinkness(A.assigned.border.thickness)}};this.setUnassignedInitConfig=function(A){if(A.unassigned!=null&&A.unassigned.fill!=null){gAcadColorMgr.setUnassignedColor(A.unassigned.fill.color);gAcadColorMgr.setUnassignedOpacity(A.unassigned.fill.opacity)}if(A.unassigned!=null&&A.unassigned.border!=null){gAcadColorMgr.setUnassignedBorderColor(A.unassigned.border.color);gAcadColorMgr.setUnassignedBorderOpacity(A.unassigned.border.opacity);gAcadColorMgr.setUnassignedBorderThinkness(A.unassigned.border.thickness)}};this.setSelectedInitConfig=function(A){if(A.selected!=null&&A.selected.fill!=null){gAcadColorMgr.setSelectedColor(A.selected.fill.color);gAcadColorMgr.setSelectedOpacity(A.selected.fill.opacity)}if(A.selected!=null&&A.selected.border!=null){gAcadColorMgr.setSelectedBorderColor(A.selected.border.color);gAcadColorMgr.setSelectedBorderOpacity(A.selected.border.opacity);gAcadColorMgr.setSelectedBorderThinkness(A.selected.border.thickness)}};this.setNoFillInitConfig=function(A){if(A.nofill!=null&&A.nofill.fill!=null){gAcadColorMgr.setNoFillColor(A.nofill.fill.color);gAcadColorMgr.setNoFillOpacity(A.nofill.fill.opacity)}if(A.nofill!=null&&A.nofill.border!=null){gAcadColorMgr.setNoFillBorderColor(A.nofill.border.color);gAcadColorMgr.setNoFillBorderOpacity(A.nofill.border.opacity);gAcadColorMgr.setNoFillBorderThinkness(A.nofill.border.thickness)}};this.getRGB=function(A,F,G){var B=0;if(A<=0){B=0}else{if(A>=1&&A<=256&&G!=true){var D=(Math.round(this.map[A][0]*255))*256*256;var C=(Math.round(this.map[A][1]*255))*256;var E=(Math.round(this.map[A][2]*255));B=D+C+E}else{B=A}}return this.ensureValidColor(B.toString(F==true?16:10),F)};this.getRGBFromPattern=function(E,F){if(this._getHighlightRGBColorEncoding==false){this.setHighlightRGBColorEncoding()}var G=new String();if(E==null||!E.length){return"-1"}var A=parseInt(E);var D=new Array();D=E.split(" ");if(A==0){G=this.getRGB(parseInt(D[1]),F)}else{if(A>=14){var C=parseInt(D[3],10);if(this._highlightRGBColorEncoding=="0"){C=this.convertColorValueFromWindowsFormat(C)}C=C.toString(16);if(C.length<6){var B=C.length;C=("000000"+C).substring(B)}G=C.substr(4,2)+C.substr(2,2)+C.substr(0,2);if(!F){G=parseInt(G,16)}}}return G};this.convertColorValueFromWindowsFormat=function(A){var D=Math.floor(A/(256*256));var C=Math.floor((A-D*256*256)/256);var B=Math.floor(A-D*256*256-C*256);return(B*256*256+C*256+D)};this.getRGBFromPatternForGrid=function(E,F){if(this._getHighlightRGBColorEncoding==false){this.setHighlightRGBColorEncoding()}var G=new String();if(E==null||!E.length){return"-1"}var A=parseInt(E);var D=new Array();D=E.split(" ");if(A==0){G=this.getRGB(parseInt(D[1]),F)}else{if(A>=14){var C=parseInt(D[3],10);if(this._highlightRGBColorEncoding=="0"){C=this.convertColorValueFromWindowsFormat(C)}C=C.toString(16);if(C.length<6){var B=C.length;C=("000000"+C).substring(B)}if(!F){G=parseInt(C,16)}else{G=C}}}return G};this.getColorFromValue=function(C,E,D){var A=this.valueColorMap[this.legendKey+E.toUpperCase()];if(A===undefined){var B=this.getMapSize(this.valueColorMap);if(B<this._fixedColors.length){A=this._fixedColors[B];A=A.substr(2)}else{A=this.getRGB(this.unassignedColor,true,true)}this.valueColorMap[this.legendKey+E.toUpperCase()]=A}return this.getRGB(parseInt("0x"+A),D,true)};this.getMapSize=function(C){var B=0,A;for(A in C){if(C.hasOwnProperty(A)){B++}}return B};this.setColor=function(B,C,A){this.valueColorMap[this.legendKey+C.toUpperCase()]=A};this.setUnassignedColor=function(A){this.unassignedColor=A};this.setUnassignedOpacity=function(A){this.unassignedOpacity=A};this.setUnassignedBorderColor=function(A){this.unassignedBorderColor=A};this.setUnassignedBorderOpacity=function(A){this.unassignedBorderOpacity=A};this.setUnassignedBorderThinkness=function(A){this.unassignedBorderThickness=A};this.setAssignedColor=function(A){this.assignedColor=A};this.setAssignedOpacity=function(A){this.assignedOpacity=A};this.setAssignedBorderColor=function(A){this.assignedBorderColor=A};this.setAssignedBorderOpacity=function(A){this.assignedBorderOpacity=A};this.setAssignedBorderThinkness=function(A){this.assignedBorderThickness=A};this.setSelectedColor=function(A){this.selectedColor=A};this.setSelectedOpacity=function(A){this.selectedOpacity=A};this.setSelectedBorderColor=function(A){this.selectedBorderColor=A};this.setSelectedBorderOpacity=function(A){this.selectedBorderOpacity=A};this.setSelectedBorderThinkness=function(A){this.selectedBorderThickness=A};this.setNoFillColor=function(A){this.nofillColor=A};this.setNoFillOpacity=function(A){this.nofillOpacity=A};this.setNoFillBorderColor=function(A){this.nofillBorderColor=A};this.setNoFillBorderOpacity=function(A){this.nofillBorderOpacity=A};this.setNoFillBorderThinkness=function(A){this.nofillBorderThickness=A};this.getUnassignedColor=function(A){return this.formatColor(this.unassignedColor,A)};this.getAssignedColor=function(A){return this.formatColor(this.assignedColor,A)};this.getSelectedColor=function(A){return this.formatColor(this.selectedColor,A)};this.formatColor=function(B,A){return this.ensureValidColor(parseInt(B).toString(A==true?16:10).toString(),A)};this.ensureValidColor=function(C,B){if(B==true&&C.length<6){var A=C.length;C=("000000"+C).substring(A)}return C};this.map=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,1,1],[0,0,1],[1,0,1],[1,1,1],[0.502,0.502,0.502],[0.753,0.753,0.753],[1,0,0],[1,0.5,0.5],[0.65,0,0],[0.65,0.325,0.325],[0.5,0,0],[0.5,0.25,0.25],[0.3,0,0],[0.3,0.15,0.15],[0.15,0,0],[0.15,0.075,0.075],[1,0.25,0],[1,0.625,0.5],[0.65,0.1625,0],[0.65,0.4063,0.325],[0.5,0.125,0],[0.5,0.3125,0.25],[0.3,0.075,0],[0.3,0.1875,0.15],[0.15,0.0375,0],[0.15,0.0938,0.075],[1,0.5,0],[1,0.75,0.5],[0.65,0.325,0],[0.65,0.4875,0.325],[0.5,0.25,0],[0.5,0.375,0.25],[0.3,0.15,0],[0.3,0.225,0.15],[0.15,0.075,0],[0.15,0.1125,0.075],[1,0.75,0],[1,0.875,0.5],[0.65,0.4875,0],[0.65,0.5688,0.325],[0.5,0.375,0],[0.5,0.4375,0.25],[0.3,0.225,0],[0.3,0.2625,0.15],[0.15,0.1125,0],[0.15,0.1313,0.075],[1,1,0],[1,1,0.5],[0.65,0.65,0],[0.65,0.65,0.325],[0.5,0.5,0],[0.5,0.5,0.25],[0.3,0.3,0],[0.3,0.3,0.15],[0.15,0.15,0],[0.15,0.15,0.075],[0.75,1,0],[0.875,1,0.5],[,0.4875,0.65,0],[0.5688,0.65,0.325],[0.375,0.5,0],[,0.4375,0.5,0.25],[0.225,0.3,0],[0.2625,0.3,0.15],[0.1125,0.15,0],[0.1313,0.15,0.075],[0.5,1,0],[0.75,1,0.5],[0.325,0.65,0],[0.4875,0.65,0.325],[0.25,0.5,0],[0.375,0.5,0.25],[0.15,0.3,0],[0.225,0.3,0.15],[0.075,0.15,0],[0.1125,0.15,0.075],[0.25,1,0],[0.625,1,0.5],[0.1625,0.65,0],[0.4063,0.65,0.325],[0.125,0.5,0],[0.3125,0.5,0.25],[0.075,0.3,0],[0.1875,0.3,0.15],[0.0375,0.15,0],[0.0938,0.15,0.075],[0,1,0],[0.5,1,0.5],[0,0.65,0],[0.325,0.65,0.325],[0,0.5,0],[0.25,0.5,0.25],[0,0.3,0],[0.15,0.3,0.15],[0,0.15,0],[0.075,0.15,0.075],[0,1,0.25],[0.5,1,0.625],[0,0.65,0.1625],[0.325,0.65,0.4063],[0,0.5,0.125],[0.25,0.5,0.3125],[0,0.3,0.075],[0.15,0.3,0.1875],[0,0.15,0.0375],[0.075,0.15,0.0938],[0,1,0.5],[0.5,1,0.75],[0,0.65,0.325],[0.325,0.65,0.4875],[0,0.5,0.25],[0.25,0.5,0.375],[0,0.3,0.15],[0.15,0.3,0.225],[0,0.15,0.075],[0.075,0.15,0.1125],[0,1,0.75],[0.5,1,0.875],[0,0.65,0.4875],[0.325,0.65,0.5688],[0,0.5,0.375],[0.25,0.5,0.4375],[0,0.3,0.225],[0.15,0.3,0.2625],[0,0.15,0.1125],[0.075,0.15,0.1313],[0,1,1],[0.5,1,1],[0,0.65,0.65],[0.325,0.65,0.65],[0,0.5,0.5],[0.25,0.5,0.5],[0,0.3,0.3],[0.15,0.3,0.3],[0,0.15,0.15],[0.075,0.15,0.15],[0,0.75,1],[0.5,0.875,1],[0,0.4875,0.65],[0.325,0.5688,0.65],[0,0.375,0.5],[0.25,0.4375,0.5],[0,0.225,0.3],[0.15,0.2625,0.3],[0,0.1125,0.15],[0.075,0.1313,0.15],[0,0.5,1],[0.5,0.75,1],[0,0.325,0.65],[0.325,0.4875,0.65],[0,0.25,0.5],[0.25,0.375,0.5],[0,0.15,0.3],[0.15,0.225,0.3],[0,0.075,0.15],[0.075,0.1125,0.15],[0,0.25,1],[0.5,0.625,1],[0,0.1625,0.65],[0.325,0.4063,0.65],[0,0.125,0.5],[0.25,0.3125,0.5],[0,0.075,0.3],[0.15,0.1875,0.3],[0,0.0375,0.15],[0.075,0.0938,0.15],[0,0,1],[0.5,0.5,1],[0,0,0.65],[0.325,0.325,0.65],[0,0,0.5],[0.25,0.25,0.5],[0,0,0.3],[0.15,0.15,0.3],[0,0,0.15],[0.075,0.075,0.15],[0.25,0,1],[0.625,0.5,1],[0.1625,0,0.65],[0.4063,0.325,0.65],[0.125,0,0.5],[0.3125,0.25,0.5],[0.075,0,0.3],[0.1875,0.15,0.3],[0.0375,0,0.15],[0.0938,0.075,0.15],[0.5,0,1],[0.75,0.5,1],[0.325,0,0.65],[0.4875,0.325,0.65],[0.25,0,0.5],[0.375,0.25,0.5],[0.15,0,0.3],[0.225,0.15,0.3],[0.075,0,0.15],[0.1125,0.075,0.15],[0.75,0,1],[0.875,0.5,1],[0.4875,0,0.65],[0.5688,0.325,0.65],[0.375,0,0.5],[0.4375,0.25,0.5],[0.225,0,0.3],[0.2625,0.15,0.3],[0.1125,0,0.15],[0.1313,0.075,0.15],[1,0,1],[1,0.5,1],[0.65,0,0.65],[0.65,0.325,0.65],[0.5,0,0.5],[0.5,0.25,0.5],[0.3,0,0.3],[0.3,0.15,0.3],[0.15,0,0.15],[0.15,0.075,0.15],[1,0,0.75],[1,0.5,0.875],[0.65,0,0.4875],[0.65,0.325,0.5688],[0.5,0,0.375],[0.5,0.25,0.4375],[0.3,0,0.225],[0.3,0.15,0.2625],[0.15,0,0.1125],[0.15,0.075,0.1313],[1,0,0.5],[1,0.5,0.75],[0.65,0,0.325],[0.65,0.325,0.4875],[0.5,0,0.25],[0.5,0.25,0.375],[0.3,0,0.15],[0.3,0.15,0.225],[0.15,0,0.075],[0.15,0.075,0.1125],[1,0,0.25],[1,0.5,0.625],[0.65,0,0.1625],[0.65,0.325,0.4063],[0.5,0,0.125],[0.5,0.25,0.3125],[0.3,0,0.075],[0.3,0.15,0.1875],[0.15,0,0.0375],[0.15,0.075,0.0938],[0.33,0.33,0.33],[0.464,0.464,0.464],[0.598,0.598,0.598],[0.732,0.732,0.732],[0.866,0.866,0.866],[1,1,1]]}function RGBColor(G){this.ok=false;if(G.charAt(0)=="#"){G=G.substr(1,6)}G=G.replace(/ /g,"");G=G.toLowerCase();var A={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var C in A){if(G==C){G=A[C]}}var H=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(I){return[parseInt(I[1]),parseInt(I[2]),parseInt(I[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(I){return[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(I){return[parseInt(I[1]+I[1],16),parseInt(I[2]+I[2],16),parseInt(I[3]+I[3],16)]}}];for(var B=0;B<H.length;B++){var E=H[B].re;var D=H[B].process;var F=E.exec(G);if(F){channels=D(F);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var K=this.r.toString(16);var J=this.g.toString(16);var I=this.b.toString(16);if(K.length==1){K="0"+K}if(J.length==1){J="0"+J}if(I.length==1){I="0"+I}return"#"+K+J+I};this.getHelpXML=function(){var K=new Array();for(var M=0;M<H.length;M++){var J=H[M].example;for(var L=0;L<J.length;L++){K[K.length]=J[L]}}for(var R in A){K[K.length]=R}var N=document.createElement("ul");N.setAttribute("id","rgbcolor-examples");for(var M=0;M<K.length;M++){try{var O=document.createElement("li");var Q=new RGBColor(K[M]);var S=document.createElement("div");S.style.cssText="margin: 3px; border: 1px solid black; background:"+Q.toHex()+"; color:"+Q.toHex();S.appendChild(document.createTextNode("test"));var I=document.createTextNode(" "+K[M]+" -> "+Q.toRGB()+" -> "+Q.toHex());O.appendChild(S);O.appendChild(I);N.appendChild(O)}catch(P){}}return N}}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(H,F,G,A){var D=document.getElementById(H);var I=D.naturalWidth;var E=D.naturalHeight;var C=document.getElementById(F);C.style.width=I+"px";C.style.height=E+"px";C.width=I;C.height=E;var B=C.getContext("2d");B.clearRect(0,0,I,E);B.drawImage(D,0,0);if(isNaN(G)||G<1){return }if(A){stackBlurCanvasRGBA(F,0,0,I,E,G)}else{stackBlurCanvasRGB(F,0,0,I,E,G)}}function stackBlurCanvasRGBA(l,b,Z,A,C,r){if(isNaN(r)||r<1){return }r|=0;var H=document.getElementById(l);var AD=H.getContext("2d");var w;try{try{w=AD.getImageData(b,Z,A,C)}catch(AC){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");w=AD.getImageData(b,Z,A,C)}catch(AC){alert("Cannot access local image");throw new Error("unable to access local image data: "+AC);return }}}catch(AC){alert("Cannot access image");throw new Error("unable to access image data: "+AC)}var G=w.data;var o,m,AA,v,P,S,L,E,F,Y,u,O,a,W,B,g,q,Q,N,K,R,T,U,f;var AB=r+r+1;var h=A<<2;var M=A-1;var t=C-1;var J=r+1;var s=J*(J+1)/2;var c=new BlurStack();var X=c;for(AA=1;AA<AB;AA++){X=X.next=new BlurStack();if(AA==J){var I=X}}X.next=c;var z=null;var k=null;L=S=0;var V=mul_table[r];var D=shg_table[r];for(m=0;m<C;m++){g=q=Q=N=E=F=Y=u=0;O=J*(K=G[S]);a=J*(R=G[S+1]);W=J*(T=G[S+2]);B=J*(U=G[S+3]);E+=s*K;F+=s*R;Y+=s*T;u+=s*U;X=c;for(AA=0;AA<J;AA++){X.r=K;X.g=R;X.b=T;X.a=U;X=X.next}for(AA=1;AA<J;AA++){v=S+((M<AA?M:AA)<<2);E+=(X.r=(K=G[v]))*(f=J-AA);F+=(X.g=(R=G[v+1]))*f;Y+=(X.b=(T=G[v+2]))*f;u+=(X.a=(U=G[v+3]))*f;g+=K;q+=R;Q+=T;N+=U;X=X.next}z=c;k=I;for(o=0;o<A;o++){G[S+3]=U=(u*V)>>D;if(U!=0){U=255/U;G[S]=((E*V)>>D)*U;G[S+1]=((F*V)>>D)*U;G[S+2]=((Y*V)>>D)*U}else{G[S]=G[S+1]=G[S+2]=0}E-=O;F-=a;Y-=W;u-=B;O-=z.r;a-=z.g;W-=z.b;B-=z.a;v=(L+((v=o+r+1)<M?v:M))<<2;g+=(z.r=G[v]);q+=(z.g=G[v+1]);Q+=(z.b=G[v+2]);N+=(z.a=G[v+3]);E+=g;F+=q;Y+=Q;u+=N;z=z.next;O+=(K=k.r);a+=(R=k.g);W+=(T=k.b);B+=(U=k.a);g-=K;q-=R;Q-=T;N-=U;k=k.next;S+=4}L+=A}for(o=0;o<A;o++){q=Q=N=g=F=Y=u=E=0;S=o<<2;O=J*(K=G[S]);a=J*(R=G[S+1]);W=J*(T=G[S+2]);B=J*(U=G[S+3]);E+=s*K;F+=s*R;Y+=s*T;u+=s*U;X=c;for(AA=0;AA<J;AA++){X.r=K;X.g=R;X.b=T;X.a=U;X=X.next}P=A;for(AA=1;AA<=r;AA++){S=(P+o)<<2;E+=(X.r=(K=G[S]))*(f=J-AA);F+=(X.g=(R=G[S+1]))*f;Y+=(X.b=(T=G[S+2]))*f;u+=(X.a=(U=G[S+3]))*f;g+=K;q+=R;Q+=T;N+=U;X=X.next;if(AA<t){P+=A}}S=o;z=c;k=I;for(m=0;m<C;m++){v=S<<2;G[v+3]=U=(u*V)>>D;if(U>0){U=255/U;G[v]=((E*V)>>D)*U;G[v+1]=((F*V)>>D)*U;G[v+2]=((Y*V)>>D)*U}else{G[v]=G[v+1]=G[v+2]=0}E-=O;F-=a;Y-=W;u-=B;O-=z.r;a-=z.g;W-=z.b;B-=z.a;v=(o+(((v=m+J)<t?v:t)*A))<<2;E+=(g+=(z.r=G[v]));F+=(q+=(z.g=G[v+1]));Y+=(Q+=(z.b=G[v+2]));u+=(N+=(z.a=G[v+3]));z=z.next;O+=(K=k.r);a+=(R=k.g);W+=(T=k.b);B+=(U=k.a);g-=K;q-=R;Q-=T;N-=U;k=k.next;S+=A}}AD.putImageData(w,b,Z)}function stackBlurCanvasRGB(g,Y,W,A,B,m){if(isNaN(m)||m<1){return }m|=0;var G=document.getElementById(g);var z=G.getContext("2d");var s;try{try{s=z.getImageData(Y,W,A,B)}catch(w){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");s=z.getImageData(Y,W,A,B)}catch(w){alert("Cannot access local image");throw new Error("unable to access local image data: "+w);return }}}catch(w){alert("Cannot access image");throw new Error("unable to access image data: "+w)}var F=s.data;var k,h,u,r,N,Q,K,D,E,V,L,X,T,b,l,O,J,P,R,a;var v=m+m+1;var c=A<<2;var M=A-1;var q=B-1;var I=m+1;var o=I*(I+1)/2;var Z=new BlurStack();var U=Z;for(u=1;u<v;u++){U=U.next=new BlurStack();if(u==I){var H=U}}U.next=Z;var t=null;var f=null;K=Q=0;var S=mul_table[m];var C=shg_table[m];for(h=0;h<B;h++){b=l=O=D=E=V=0;L=I*(J=F[Q]);X=I*(P=F[Q+1]);T=I*(R=F[Q+2]);D+=o*J;E+=o*P;V+=o*R;U=Z;for(u=0;u<I;u++){U.r=J;U.g=P;U.b=R;U=U.next}for(u=1;u<I;u++){r=Q+((M<u?M:u)<<2);D+=(U.r=(J=F[r]))*(a=I-u);E+=(U.g=(P=F[r+1]))*a;V+=(U.b=(R=F[r+2]))*a;b+=J;l+=P;O+=R;U=U.next}t=Z;f=H;for(k=0;k<A;k++){F[Q]=(D*S)>>C;F[Q+1]=(E*S)>>C;F[Q+2]=(V*S)>>C;D-=L;E-=X;V-=T;L-=t.r;X-=t.g;T-=t.b;r=(K+((r=k+m+1)<M?r:M))<<2;b+=(t.r=F[r]);l+=(t.g=F[r+1]);O+=(t.b=F[r+2]);D+=b;E+=l;V+=O;t=t.next;L+=(J=f.r);X+=(P=f.g);T+=(R=f.b);b-=J;l-=P;O-=R;f=f.next;Q+=4}K+=A}for(k=0;k<A;k++){l=O=b=E=V=D=0;Q=k<<2;L=I*(J=F[Q]);X=I*(P=F[Q+1]);T=I*(R=F[Q+2]);D+=o*J;E+=o*P;V+=o*R;U=Z;for(u=0;u<I;u++){U.r=J;U.g=P;U.b=R;U=U.next}N=A;for(u=1;u<=m;u++){Q=(N+k)<<2;D+=(U.r=(J=F[Q]))*(a=I-u);E+=(U.g=(P=F[Q+1]))*a;V+=(U.b=(R=F[Q+2]))*a;b+=J;l+=P;O+=R;U=U.next;if(u<q){N+=A}}Q=k;t=Z;f=H;for(h=0;h<B;h++){r=Q<<2;F[r]=(D*S)>>C;F[r+1]=(E*S)>>C;F[r+2]=(V*S)>>C;D-=L;E-=X;V-=T;L-=t.r;X-=t.g;T-=t.b;r=(k+(((r=h+I)<q?r:q)*A))<<2;D+=(b+=(t.r=F[r]));E+=(l+=(t.g=F[r+1]));V+=(O+=(t.b=F[r+2]));t=t.next;L+=(J=f.r);X+=(P=f.g);T+=(R=f.b);b-=J;l-=P;O-=R;f=f.next;Q+=A}}z.putImageData(s,Y,W)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}(function(){this.canvg=function(H,K,B){if(H==null&&K==null&&B==null){var D=document.getElementsByTagName("svg");for(var F=0;F<D.length;F++){var E=D[F];var I=document.createElement("canvas");I.width=E.clientWidth;I.height=E.clientHeight;E.parentNode.insertBefore(I,E);E.parentNode.removeChild(E);var C=document.createElement("div");C.appendChild(E);canvg(I,C.innerHTML)}return }B=B||{};if(typeof H=="string"){H=document.getElementById(H)}if(H.svg!=null){H.svg.stop()}var G=A();if(!(H.childNodes.length==1&&H.childNodes[0].nodeName=="OBJECT")){H.svg=G}G.opts=B;var J=H.getContext("2d");if(typeof (K.documentElement)!="undefined"){G.loadXmlDoc(J,K)}else{if(K.substr(0,1)=="<"){G.loadXml(J,K)}else{G.load(J,K)}}};function A(){var B={};B.FRAMERATE=30;B.MAX_VIRTUAL_PIXELS=30000;B.init=function(C){var D=0;B.UniqueId=function(){D++;return"canvg"+D};B.Definitions={};B.Styles={};B.Animations=[];B.Images=[];B.ctx=C;B.ViewPort=new (function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(F,E){this.viewPorts.push({width:F,height:E})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(E){if(E!=null&&typeof (E)=="number"){return E}if(E=="x"){return this.width()}if(E=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}})};B.init();B.ImagesLoaded=function(){for(var C=0;C<B.Images.length;C++){if(!B.Images[C].loaded){return false}}return true};B.trim=function(C){return C.replace(/^\s+|\s+$/g,"")};B.compressSpaces=function(C){return C.replace(/[\s\r\t\n]+/gm," ")};B.ajax=function(D){var C;if(window.XMLHttpRequest){C=new XMLHttpRequest()}else{C=new ActiveXObject("Microsoft.XMLHTTP")}if(C){C.open("GET",D,false);C.send(null);return C.responseText}return null};B.parseXml=function(C){if(window.DOMParser){var E=new DOMParser();return E.parseFromString(C,"text/xml")}else{C=C.replace(/<!DOCTYPE svg[^>]*>/,"");var D=new ActiveXObject("Microsoft.XMLDOM");D.async="false";D.loadXML(C);return D}};B.Property=function(C,D){this.name=C;this.value=D};B.Property.prototype.getValue=function(){return this.value};B.Property.prototype.hasValue=function(){return(this.value!=null&&this.value!=="")};B.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var C=parseFloat(this.value);if((this.value+"").match(/%$/)){C=C/100}return C};B.Property.prototype.valueOrDefault=function(C){if(this.hasValue()){return this.value}return C};B.Property.prototype.numValueOrDefault=function(C){if(this.hasValue()){return this.numValue()}return C};B.Property.prototype.addOpacity=function(D){var E=this.value;if(D!=null&&D!=""&&typeof (this.value)=="string"){var C=new RGBColor(this.value);if(C.ok){E="rgba("+C.r+", "+C.g+", "+C.b+", "+D+")"}}return new B.Property(this.name,E)};B.Property.prototype.getDefinition=function(){var C=this.value.match(/#([^\)'"]+)/);if(C){C=C[1]}if(!C){C=this.value}return B.Definitions[C]};B.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};B.Property.prototype.getFillStyleDefinition=function(F,E){var C=this.getDefinition();if(C!=null&&C.createGradient){return C.createGradient(B.ctx,F,E)}if(C!=null&&C.createPattern){if(C.getHrefAttribute().hasValue()){var D=C.attribute("patternTransform");C=C.getHrefAttribute().getDefinition();if(D.hasValue()){C.attribute("patternTransform",true).value=D.value}}return C.createPattern(B.ctx,F)}return null};B.Property.prototype.getDPI=function(C){return 96};B.Property.prototype.getEM=function(E){var C=12;var D=new B.Property("fontSize",B.Font.Parse(B.ctx.font).fontSize);if(D.hasValue()){C=D.toPixels(E)}return C};B.Property.prototype.getUnits=function(){var C=this.value+"";return C.replace(/[0-9\.\-]/g,"")};B.Property.prototype.toPixels=function(E,C){if(!this.hasValue()){return 0}var D=this.value+"";if(D.match(/em$/)){return this.numValue()*this.getEM(E)}if(D.match(/ex$/)){return this.numValue()*this.getEM(E)/2}if(D.match(/px$/)){return this.numValue()}if(D.match(/pt$/)){return this.numValue()*this.getDPI(E)*(1/72)}if(D.match(/pc$/)){return this.numValue()*15}if(D.match(/cm$/)){return this.numValue()*this.getDPI(E)/2.54}if(D.match(/mm$/)){return this.numValue()*this.getDPI(E)/25.4}if(D.match(/in$/)){return this.numValue()*this.getDPI(E)}if(D.match(/%$/)){return this.numValue()*B.ViewPort.ComputeSize(E)}var F=this.numValue();if(C&&F<1){return F*B.ViewPort.ComputeSize(E)}return F};B.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var C=this.value+"";if(C.match(/s$/)){return this.numValue()*1000}if(C.match(/ms$/)){return this.numValue()}return this.numValue()};B.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var C=this.value+"";if(C.match(/deg$/)){return this.numValue()*(Math.PI/180)}if(C.match(/grad$/)){return this.numValue()*(Math.PI/200)}if(C.match(/rad$/)){return this.numValue()}return this.numValue()*(Math.PI/180)};B.Font=new (function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(J,G,E,I,D,F){var H=F!=null?this.Parse(F):this.CreateFont("","","","","",B.ctx.font);return{fontFamily:D||H.fontFamily,fontSize:I||H.fontSize,fontStyle:J||H.fontStyle,fontWeight:E||H.fontWeight,fontVariant:G||H.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var C=this;this.Parse=function(F){var G={};var H=B.trim(B.compressSpaces(F||"")).split(" ");var I={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var D="";for(var E=0;E<H.length;E++){if(!I.fontStyle&&C.Styles.indexOf(H[E])!=-1){if(H[E]!="inherit"){G.fontStyle=H[E]}I.fontStyle=true}else{if(!I.fontVariant&&C.Variants.indexOf(H[E])!=-1){if(H[E]!="inherit"){G.fontVariant=H[E]}I.fontStyle=I.fontVariant=true}else{if(!I.fontWeight&&C.Weights.indexOf(H[E])!=-1){if(H[E]!="inherit"){G.fontWeight=H[E]}I.fontStyle=I.fontVariant=I.fontWeight=true}else{if(!I.fontSize){if(H[E]!="inherit"){G.fontSize=H[E].split("/")[0]}I.fontStyle=I.fontVariant=I.fontWeight=I.fontSize=true}else{if(H[E]!="inherit"){D+=H[E]}}}}}}if(D!=""){G.fontFamily=D}return G}});B.ToNumberArray=function(E){var C=B.trim(B.compressSpaces((E||"").replace(/,/g," "))).split(" ");for(var D=0;D<C.length;D++){C[D]=parseFloat(C[D])}return C};B.Point=function(C,D){this.x=C;this.y=D};B.Point.prototype.angleTo=function(C){return Math.atan2(C.y-this.y,C.x-this.x)};B.Point.prototype.applyTransform=function(C){var D=this.x*C[0]+this.y*C[2]+C[4];var E=this.x*C[1]+this.y*C[3]+C[5];this.x=D;this.y=E};B.CreatePoint=function(D){var C=B.ToNumberArray(D);return new B.Point(C[0],C[1])};B.CreatePath=function(E){var C=B.ToNumberArray(E);var F=[];for(var D=0;D<C.length;D+=2){F.push(new B.Point(C[D],C[D+1]))}return F};B.BoundingBox=function(D,F,C,E){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(G,H){if(G!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=G;this.x2=G}if(G<this.x1){this.x1=G}if(G>this.x2){this.x2=G}}if(H!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=H;this.y2=H}if(H<this.y1){this.y1=H}if(H>this.y2){this.y2=H}}};this.addX=function(G){this.addPoint(G,null)};this.addY=function(G){this.addPoint(null,G)};this.addBoundingBox=function(G){this.addPoint(G.x1,G.y1);this.addPoint(G.x2,G.y2)};this.addQuadraticCurve=function(L,K,H,G,N,M){var J=L+2/3*(H-L);var I=K+2/3*(G-K);var P=J+1/3*(N-L);var O=I+1/3*(M-K);this.addBezierCurve(L,K,J,P,I,O,N,M)};this.addBezierCurve=function(T,S,K,I,P,N,V,U){var L=[T,S],J=[K,I],H=[P,N],G=[V,U];this.addPoint(L[0],L[1]);this.addPoint(G[0],G[1]);for(i=0;i<=1;i++){var W=function(a){return Math.pow(1-a,3)*L[i]+3*Math.pow(1-a,2)*a*J[i]+3*(1-a)*Math.pow(a,2)*H[i]+Math.pow(a,3)*G[i]};var Y=6*L[i]-12*J[i]+6*H[i];var Z=-3*L[i]+9*J[i]-9*H[i]+3*G[i];var X=3*J[i]-3*L[i];if(Z==0){if(Y==0){continue}var R=-X/Y;if(0<R&&R<1){if(i==0){this.addX(W(R))}if(i==1){this.addY(W(R))}}continue}var M=Math.pow(Y,2)-4*X*Z;if(M<0){continue}var Q=(-Y+Math.sqrt(M))/(2*Z);if(0<Q&&Q<1){if(i==0){this.addX(W(Q))}if(i==1){this.addY(W(Q))}}var O=(-Y-Math.sqrt(M))/(2*Z);if(0<O&&O<1){if(i==0){this.addX(W(O))}if(i==1){this.addY(W(O))}}}};this.isPointInBox=function(G,H){return(this.x1<=G&&G<=this.x2&&this.y1<=H&&H<=this.y2)};this.addPoint(D,F);this.addPoint(C,E)};B.Transform=function(C){var H=this;this.Type={};this.Type.translate=function(J){this.p=B.CreatePoint(J);this.apply=function(K){K.translate(this.p.x||0,this.p.y||0)};this.unapply=function(K){K.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(K){K.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(K){var J=B.ToNumberArray(K);this.angle=new B.Property("angle",J[0]);this.cx=J[1]||0;this.cy=J[2]||0;this.apply=function(L){L.translate(this.cx,this.cy);L.rotate(this.angle.toRadians());L.translate(-this.cx,-this.cy)};this.unapply=function(L){L.translate(this.cx,this.cy);L.rotate(-1*this.angle.toRadians());L.translate(-this.cx,-this.cy)};this.applyToPoint=function(M){var L=this.angle.toRadians();M.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);M.applyTransform([Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0]);M.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(J){this.p=B.CreatePoint(J);this.apply=function(K){K.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(K){K.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(K){K.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(J){this.m=B.ToNumberArray(J);this.apply=function(K){K.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(K){K.applyTransform(this.m)}};this.Type.SkewBase=function(J){this.base=H.Type.matrix;this.base(J);this.angle=new B.Property("angle",J)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(J){this.base=H.Type.SkewBase;this.base(J);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(J){this.base=H.Type.SkewBase;this.base(J);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(J){for(var K=0;K<this.transforms.length;K++){this.transforms[K].apply(J)}};this.unapply=function(J){for(var K=this.transforms.length-1;K>=0;K--){this.transforms[K].unapply(J)}};this.applyToPoint=function(K){for(var J=0;J<this.transforms.length;J++){this.transforms[J].applyToPoint(K)}};var I=B.trim(B.compressSpaces(C)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var E=0;E<I.length;E++){var G=B.trim(I[E].split("(")[0]);var F=I[E].split("(")[1].replace(")","");var D=new this.Type[G](F);D.type=G;this.transforms.push(D)}};B.AspectRatio=function(R,P,D,J,Q,C,G,F,O,N){P=B.compressSpaces(P);P=P.replace(/^defer\s/,"");var I=P.split(" ")[0]||"xMidYMid";var E=P.split(" ")[1]||"meet";var M=D/J;var L=Q/C;var H=Math.min(M,L);var K=Math.max(M,L);if(E=="meet"){J*=H;C*=H}if(E=="slice"){J*=K;C*=K}O=new B.Property("refX",O);N=new B.Property("refY",N);if(O.hasValue()&&N.hasValue()){R.translate(-H*O.toPixels("x"),-H*N.toPixels("y"))}else{if(I.match(/^xMid/)&&((E=="meet"&&H==L)||(E=="slice"&&K==L))){R.translate(D/2-J/2,0)}if(I.match(/YMid$/)&&((E=="meet"&&H==M)||(E=="slice"&&K==M))){R.translate(0,Q/2-C/2)}if(I.match(/^xMax/)&&((E=="meet"&&H==L)||(E=="slice"&&K==L))){R.translate(D-J,0)}if(I.match(/YMax$/)&&((E=="meet"&&H==M)||(E=="slice"&&K==M))){R.translate(0,Q-C)}}if(I=="none"){R.scale(M,L)}else{if(E=="meet"){R.scale(H,H)}else{if(E=="slice"){R.scale(K,K)}}}R.translate(G==null?0:-G,F==null?0:-F)};B.Element={};B.EmptyProperty=new B.Property("EMPTY","");B.Element.ElementBase=function(G){this.attributes={};this.styles={};this.children=[];this.attribute=function(O,P){var N=this.attributes[O];if(N!=null){return N}if(P==true){N=new B.Property(O,"");this.attributes[O]=N}return N||B.EmptyProperty};this.getHrefAttribute=function(){for(var N in this.attributes){if(N.match(/href$|:href$/)){return this.attributes[N]}}return B.EmptyProperty};this.style=function(O,S){var P=this.styles[O];if(P!=null){return P}var N=this.attribute(O);if(N!=null&&N.hasValue()){this.styles[O]=N;return N}var Q=this.parent;if(Q!=null){var R=Q.style(O);if(R!=null&&R.hasValue()){return R}}if(S==true){P=new B.Property(O,"");this.styles[O]=P}return P||B.EmptyProperty};this.render=function(O){if(this.style("display").value=="none"){return }if(this.attribute("visibility").value=="hidden"){return }O.save();if(this.attribute("mask").hasValue()){var N=this.attribute("mask").getDefinition();if(N!=null){N.apply(O,this)}}else{if(this.style("filter").hasValue()){var P=this.style("filter").getDefinition();if(P!=null){P.apply(O,this)}}else{this.setContext(O);this.renderChildren(O);this.clearContext(O)}}O.restore()};this.setContext=function(N){};this.clearContext=function(N){};this.renderChildren=function(N){for(var O=0;O<this.children.length;O++){this.children[O].render(N)}};this.addChild=function(O,N){var P=O;if(N){P=B.CreateElement(O)}P.parent=this;this.children.push(P)};if(G!=null&&G.nodeType==1){for(var J=0;J<G.childNodes.length;J++){var C=G.childNodes[J];if(C.nodeType==1){this.addChild(C,true)}if(this.captureTextNodes&&C.nodeType==3){var L=C.nodeValue||C.text||"";if(B.trim(B.compressSpaces(L))!=""){this.addChild(new B.Element.tspan(C),false)}}}for(var J=0;J<G.attributes.length;J++){var F=G.attributes[J];this.attributes[F.nodeName]=new B.Property(F.nodeName,F.nodeValue)}var M=B.Styles[G.nodeName];if(M!=null){for(var E in M){this.styles[E]=M[E]}}if(this.attribute("class").hasValue()){var H=B.compressSpaces(this.attribute("class").value).split(" ");for(var I=0;I<H.length;I++){M=B.Styles["."+H[I]];if(M!=null){for(var E in M){this.styles[E]=M[E]}}M=B.Styles[G.nodeName+"."+H[I]];if(M!=null){for(var E in M){this.styles[E]=M[E]}}}}if(this.attribute("id").hasValue()){var M=B.Styles["#"+this.attribute("id").value];if(M!=null){for(var E in M){this.styles[E]=M[E]}}}if(this.attribute("style").hasValue()){var M=this.attribute("style").value.split(";");for(var J=0;J<M.length;J++){if(B.trim(M[J])!=""){var D=M[J].split(":");var E=B.trim(D[0]);var K=B.trim(D[1]);this.styles[E]=new B.Property(E,K)}}}if(this.attribute("id").hasValue()){if(B.Definitions[this.attribute("id").value]==null){B.Definitions[this.attribute("id").value]=this}}}};B.Element.RenderedElementBase=function(C){this.base=B.Element.ElementBase;this.base(C);this.setContext=function(L){if(this.style("fill").isUrlDefinition()){var I=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(I!=null){L.fillStyle=I}}else{if(this.style("fill").hasValue()){var K=this.style("fill");if(K.value=="currentColor"){K.value=this.style("color").value}L.fillStyle=(K.value=="none"?"rgba(0,0,0,0)":K.value)}}if(this.style("fill-opacity").hasValue()){var K=new B.Property("fill",L.fillStyle);K=K.addOpacity(this.style("fill-opacity").value);L.fillStyle=K.value}if(this.style("stroke").isUrlDefinition()){var I=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(I!=null){L.strokeStyle=I}}else{if(this.style("stroke").hasValue()){var J=this.style("stroke");if(J.value=="currentColor"){J.value=this.style("color").value}L.strokeStyle=(J.value=="none"?"rgba(0,0,0,0)":J.value)}}if(this.style("stroke-opacity").hasValue()){var J=new B.Property("stroke",L.strokeStyle);J=J.addOpacity(this.style("stroke-opacity").value);L.strokeStyle=J.value}if(this.style("stroke-width").hasValue()){var H=this.style("stroke-width").toPixels();L.lineWidth=H==0?0.001:H}if(this.style("stroke-linecap").hasValue()){L.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){L.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){L.miterLimit=this.style("stroke-miterlimit").value}if(this.style("stroke-dasharray").hasValue()){var F=B.ToNumberArray(this.style("stroke-dasharray").value);if(typeof (L.setLineDash)!="undefined"){L.setLineDash(F)}else{if(typeof (L.webkitLineDash)!="undefined"){L.webkitLineDash=F}else{if(typeof (L.mozDash)!="undefined"){L.mozDash=F}}}var G=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof (L.lineDashOffset)!="undefined"){L.lineDashOffset=G}else{if(typeof (L.webkitLineDashOffset)!="undefined"){L.webkitLineDashOffset=G}else{if(typeof (L.mozDashOffset)!="undefined"){L.mozDashOffset=G}}}}if(typeof (L.font)!="undefined"){L.font=B.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var D=new B.Transform(this.attribute("transform").value);D.apply(L)}if(this.style("clip-path").hasValue()){var E=this.style("clip-path").getDefinition();if(E!=null){E.apply(L)}}if(this.style("opacity").hasValue()){L.globalAlpha=this.style("opacity").numValue()}}};B.Element.RenderedElementBase.prototype=new B.Element.ElementBase;B.Element.PathElementBase=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.path=function(D){if(D!=null){D.beginPath()}return new B.BoundingBox()};this.renderChildren=function(E){this.path(E);B.Mouse.checkPath(this,E);if(E.fillStyle!=""){if(this.attribute("fill-rule").hasValue()){E.fill(this.attribute("fill-rule").value)}else{E.fill()}}if(E.strokeStyle!=""){E.stroke()}var G=this.getMarkers();if(G!=null){if(this.style("marker-start").isUrlDefinition()){var D=this.style("marker-start").getDefinition();D.render(E,G[0][0],G[0][1])}if(this.style("marker-mid").isUrlDefinition()){var D=this.style("marker-mid").getDefinition();for(var F=1;F<G.length-1;F++){D.render(E,G[F][0],G[F][1])}}if(this.style("marker-end").isUrlDefinition()){var D=this.style("marker-end").getDefinition();D.render(E,G[G.length-1][0],G[G.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};B.Element.PathElementBase.prototype=new B.Element.RenderedElementBase;B.Element.svg=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.baseClearContext=this.clearContext;this.clearContext=function(D){this.baseClearContext(D);B.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(G){G.strokeStyle="rgba(0,0,0,0)";G.lineCap="butt";G.lineJoin="miter";G.miterLimit=4;this.baseSetContext(G);if(!this.attribute("x").hasValue()){this.attribute("x",true).value=0}if(!this.attribute("y").hasValue()){this.attribute("y",true).value=0}G.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var H=B.ViewPort.width();var F=B.ViewPort.height();if(!this.attribute("width").hasValue()){this.attribute("width",true).value="100%"}if(!this.attribute("height").hasValue()){this.attribute("height",true).value="100%"}if(typeof (this.root)=="undefined"){H=this.attribute("width").toPixels("x");F=this.attribute("height").toPixels("y");var E=0;var K=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){E=-this.attribute("refX").toPixels("x");K=-this.attribute("refY").toPixels("y")}G.beginPath();G.moveTo(E,K);G.lineTo(H,K);G.lineTo(H,F);G.lineTo(E,F);G.closePath();G.clip()}B.ViewPort.SetCurrent(H,F);if(this.attribute("viewBox").hasValue()){var I=B.ToNumberArray(this.attribute("viewBox").value);var D=I[0];var J=I[1];H=I[2];F=I[3];B.AspectRatio(G,this.attribute("preserveAspectRatio").value,B.ViewPort.width(),H,B.ViewPort.height(),F,D,J,this.attribute("refX").value,this.attribute("refY").value);B.ViewPort.RemoveCurrent();B.ViewPort.SetCurrent(I[2],I[3])}}};B.Element.svg.prototype=new B.Element.RenderedElementBase;B.Element.rect=function(C){this.base=B.Element.PathElementBase;this.base(C);this.path=function(F){var E=this.attribute("x").toPixels("x");var J=this.attribute("y").toPixels("y");var G=this.attribute("width").toPixels("x");var D=this.attribute("height").toPixels("y");var I=this.attribute("rx").toPixels("x");var H=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){H=I}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){I=H}I=Math.min(I,G/2);H=Math.min(H,D/2);if(F!=null){F.beginPath();F.moveTo(E+I,J);F.lineTo(E+G-I,J);F.quadraticCurveTo(E+G,J,E+G,J+H);F.lineTo(E+G,J+D-H);F.quadraticCurveTo(E+G,J+D,E+G-I,J+D);F.lineTo(E+I,J+D);F.quadraticCurveTo(E,J+D,E,J+D-H);F.lineTo(E,J+H);F.quadraticCurveTo(E,J,E+I,J);F.closePath()}return new B.BoundingBox(E,J,E+G,J+D)}};B.Element.rect.prototype=new B.Element.PathElementBase;B.Element.circle=function(C){this.base=B.Element.PathElementBase;this.base(C);this.path=function(E){var D=this.attribute("cx").toPixels("x");var G=this.attribute("cy").toPixels("y");var F=this.attribute("r").toPixels();if(E!=null){E.beginPath();E.arc(D,G,F,0,Math.PI*2,true);E.closePath()}return new B.BoundingBox(D-F,G-F,D+F,G+F)}};B.Element.circle.prototype=new B.Element.PathElementBase;B.Element.ellipse=function(C){this.base=B.Element.PathElementBase;this.base(C);this.path=function(E){var G=4*((Math.sqrt(2)-1)/3);var H=this.attribute("rx").toPixels("x");var F=this.attribute("ry").toPixels("y");var D=this.attribute("cx").toPixels("x");var I=this.attribute("cy").toPixels("y");if(E!=null){E.beginPath();E.moveTo(D,I-F);E.bezierCurveTo(D+(G*H),I-F,D+H,I-(G*F),D+H,I);E.bezierCurveTo(D+H,I+(G*F),D+(G*H),I+F,D,I+F);E.bezierCurveTo(D-(G*H),I+F,D-H,I+(G*F),D-H,I);E.bezierCurveTo(D-H,I-(G*F),D-(G*H),I-F,D,I-F);E.closePath()}return new B.BoundingBox(D-H,I-F,D+H,I+F)}};B.Element.ellipse.prototype=new B.Element.PathElementBase;B.Element.line=function(C){this.base=B.Element.PathElementBase;this.base(C);this.getPoints=function(){return[new B.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new B.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(D){var E=this.getPoints();if(D!=null){D.beginPath();D.moveTo(E[0].x,E[0].y);D.lineTo(E[1].x,E[1].y)}return new B.BoundingBox(E[0].x,E[0].y,E[1].x,E[1].y)};this.getMarkers=function(){var E=this.getPoints();var D=E[0].angleTo(E[1]);return[[E[0],D],[E[1],D]]}};B.Element.line.prototype=new B.Element.PathElementBase;B.Element.polyline=function(C){this.base=B.Element.PathElementBase;this.base(C);this.points=B.CreatePath(this.attribute("points").value);this.path=function(D){var F=new B.BoundingBox(this.points[0].x,this.points[0].y);if(D!=null){D.beginPath();D.moveTo(this.points[0].x,this.points[0].y)}for(var E=1;E<this.points.length;E++){F.addPoint(this.points[E].x,this.points[E].y);if(D!=null){D.lineTo(this.points[E].x,this.points[E].y)}}return F};this.getMarkers=function(){var E=[];for(var D=0;D<this.points.length-1;D++){E.push([this.points[D],this.points[D].angleTo(this.points[D+1])])}E.push([this.points[this.points.length-1],E[E.length-1][1]]);return E}};B.Element.polyline.prototype=new B.Element.PathElementBase;B.Element.polygon=function(C){this.base=B.Element.polyline;this.base(C);this.basePath=this.path;this.path=function(D){var E=this.basePath(D);if(D!=null){D.lineTo(this.points[0].x,this.points[0].y);D.closePath()}return E}};B.Element.polygon.prototype=new B.Element.polyline;B.Element.path=function(C){this.base=B.Element.PathElementBase;this.base(C);var D=this.attribute("d").value;D=D.replace(/,/gm," ");D=D.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");D=D.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");D=D.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");D=D.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");D=D.replace(/([0-9])([+\-])/gm,"$1 $2");D=D.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");D=D.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");D=B.compressSpaces(D);D=B.trim(D);this.PathParser=new (function(E){this.tokens=E.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new B.Point(0,0);this.control=new B.Point(0,0);this.current=new B.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var F=new B.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(F)};this.getAsControlPoint=function(){var F=this.getPoint();this.control=F;return F};this.getAsCurrentPoint=function(){var F=this.getPoint();this.current=F;return F};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var F=new B.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return F};this.makeAbsolute=function(F){if(this.isRelativeCommand()){F.x+=this.current.x;F.y+=this.current.y}return F};this.addMarker=function(G,H,F){if(F!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(F)}this.addMarkerAngle(G,H==null?null:H.angleTo(G))};this.addMarkerAngle=function(G,F){this.points.push(G);this.angles.push(F)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var G=0;G<this.angles.length;G++){if(this.angles[G]==null){for(var F=G+1;F<this.angles.length;F++){if(this.angles[F]!=null){this.angles[G]=this.angles[F];break}}}}return this.angles}})(D);this.path=function(b){var f=this.PathParser;f.reset();var N=new B.BoundingBox();if(b!=null){b.beginPath()}while(!f.isEnd()){f.nextCommand();switch(f.command){case"M":case"m":var X=f.getAsCurrentPoint();f.addMarker(X);N.addPoint(X.x,X.y);if(b!=null){b.moveTo(X.x,X.y)}f.start=f.current;while(!f.isCommandOrEnd()){var X=f.getAsCurrentPoint();f.addMarker(X,f.start);N.addPoint(X.x,X.y);if(b!=null){b.lineTo(X.x,X.y)}}break;case"L":case"l":while(!f.isCommandOrEnd()){var o=f.current;var X=f.getAsCurrentPoint();f.addMarker(X,o);N.addPoint(X.x,X.y);if(b!=null){b.lineTo(X.x,X.y)}}break;case"H":case"h":while(!f.isCommandOrEnd()){var G=new B.Point((f.isRelativeCommand()?f.current.x:0)+f.getScalar(),f.current.y);f.addMarker(G,f.current);f.current=G;N.addPoint(f.current.x,f.current.y);if(b!=null){b.lineTo(f.current.x,f.current.y)}}break;case"V":case"v":while(!f.isCommandOrEnd()){var G=new B.Point(f.current.x,(f.isRelativeCommand()?f.current.y:0)+f.getScalar());f.addMarker(G,f.current);f.current=G;N.addPoint(f.current.x,f.current.y);if(b!=null){b.lineTo(f.current.x,f.current.y)}}break;case"C":case"c":while(!f.isCommandOrEnd()){var h=f.current;var I=f.getPoint();var J=f.getAsControlPoint();var P=f.getAsCurrentPoint();f.addMarker(P,J,I);N.addBezierCurve(h.x,h.y,I.x,I.y,J.x,J.y,P.x,P.y);if(b!=null){b.bezierCurveTo(I.x,I.y,J.x,J.y,P.x,P.y)}}break;case"S":case"s":while(!f.isCommandOrEnd()){var h=f.current;var I=f.getReflectedControlPoint();var J=f.getAsControlPoint();var P=f.getAsCurrentPoint();f.addMarker(P,J,I);N.addBezierCurve(h.x,h.y,I.x,I.y,J.x,J.y,P.x,P.y);if(b!=null){b.bezierCurveTo(I.x,I.y,J.x,J.y,P.x,P.y)}}break;case"Q":case"q":while(!f.isCommandOrEnd()){var h=f.current;var J=f.getAsControlPoint();var P=f.getAsCurrentPoint();f.addMarker(P,J,J);N.addQuadraticCurve(h.x,h.y,J.x,J.y,P.x,P.y);if(b!=null){b.quadraticCurveTo(J.x,J.y,P.x,P.y)}}break;case"T":case"t":while(!f.isCommandOrEnd()){var h=f.current;var J=f.getReflectedControlPoint();f.control=J;var P=f.getAsCurrentPoint();f.addMarker(P,J,J);N.addQuadraticCurve(h.x,h.y,J.x,J.y,P.x,P.y);if(b!=null){b.quadraticCurveTo(J.x,J.y,P.x,P.y)}}break;case"A":case"a":while(!f.isCommandOrEnd()){var h=f.current;var M=f.getScalar();var L=f.getScalar();var F=f.getScalar()*(Math.PI/180);var O=f.getScalar();var K=f.getScalar();var P=f.getAsCurrentPoint();var w=new B.Point(Math.cos(F)*(h.x-P.x)/2+Math.sin(F)*(h.y-P.y)/2,-Math.sin(F)*(h.x-P.x)/2+Math.cos(F)*(h.y-P.y)/2);var e=Math.pow(w.x,2)/Math.pow(M,2)+Math.pow(w.y,2)/Math.pow(L,2);if(e>1){M*=Math.sqrt(e);L*=Math.sqrt(e)}var T=(O==K?-1:1)*Math.sqrt(((Math.pow(M,2)*Math.pow(L,2))-(Math.pow(M,2)*Math.pow(w.y,2))-(Math.pow(L,2)*Math.pow(w.x,2)))/(Math.pow(M,2)*Math.pow(w.y,2)+Math.pow(L,2)*Math.pow(w.x,2)));if(isNaN(T)){T=0}var S=new B.Point(T*M*w.y/L,T*-L*w.x/M);var H=new B.Point((h.x+P.x)/2+Math.cos(F)*S.x-Math.sin(F)*S.y,(h.y+P.y)/2+Math.sin(F)*S.x+Math.cos(F)*S.y);var Z=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))};var V=function(c,a){return(c[0]*a[0]+c[1]*a[1])/(Z(c)*Z(a))};var q=function(c,a){return(c[0]*a[1]<c[1]*a[0]?-1:1)*Math.acos(V(c,a))};var t=q([1,0],[(w.x-S.x)/M,(w.y-S.y)/L]);var R=[(w.x-S.x)/M,(w.y-S.y)/L];var Q=[(-w.x-S.x)/M,(-w.y-S.y)/L];var k=q(R,Q);if(V(R,Q)<=-1){k=Math.PI}if(V(R,Q)>=1){k=0}var Y=1-K?1:-1;var g=t+Y*(k/2);var E=new B.Point(H.x+M*Math.cos(g),H.y+L*Math.sin(g));f.addMarkerAngle(E,g-Y*Math.PI/2);f.addMarkerAngle(P,g-Y*Math.PI);N.addPoint(P.x,P.y);if(b!=null){var V=M>L?M:L;var W=M>L?1:M/L;var U=M>L?L/M:1;b.translate(H.x,H.y);b.rotate(F);b.scale(W,U);b.arc(0,0,V,t,t+k,1-K);b.scale(1/W,1/U);b.rotate(-F);b.translate(-H.x,-H.y)}}break;case"Z":case"z":if(b!=null){b.closePath()}f.current=f.start}}return N};this.getMarkers=function(){var F=this.PathParser.getMarkerPoints();var H=this.PathParser.getMarkerAngles();var G=[];for(var E=0;E<F.length;E++){G.push([F[E],H[E]])}return G}};B.Element.path.prototype=new B.Element.PathElementBase;B.Element.pattern=function(C){this.base=B.Element.ElementBase;this.base(C);this.createPattern=function(M,F){var D=this.attribute("width").toPixels("x",true);var L=this.attribute("height").toPixels("y",true);var J=new B.Element.svg();J.attributes.viewBox=new B.Property("viewBox",this.attribute("viewBox").value);J.attributes.width=new B.Property("width",D+"px");J.attributes.height=new B.Property("height",L+"px");J.attributes.transform=new B.Property("transform",this.attribute("patternTransform").value);J.children=this.children;var H=document.createElement("canvas");H.width=D;H.height=L;var E=H.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){E.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var K=-1;K<=1;K++){for(var I=-1;I<=1;I++){E.save();E.translate(K*H.width,I*H.height);J.render(E);E.restore()}}var G=M.createPattern(H,"repeat");return G}};B.Element.pattern.prototype=new B.Element.ElementBase;B.Element.marker=function(C){this.base=B.Element.ElementBase;this.base(C);this.baseRender=this.render;this.render=function(E,D,G){E.translate(D.x,D.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){E.rotate(G)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){E.scale(E.lineWidth,E.lineWidth)}E.save();var F=new B.Element.svg();F.attributes.viewBox=new B.Property("viewBox",this.attribute("viewBox").value);F.attributes.refX=new B.Property("refX",this.attribute("refX").value);F.attributes.refY=new B.Property("refY",this.attribute("refY").value);F.attributes.width=new B.Property("width",this.attribute("markerWidth").value);F.attributes.height=new B.Property("height",this.attribute("markerHeight").value);F.attributes.fill=new B.Property("fill",this.attribute("fill").valueOrDefault("black"));F.attributes.stroke=new B.Property("stroke",this.attribute("stroke").valueOrDefault("none"));F.children=this.children;F.render(E);E.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){E.scale(1/E.lineWidth,1/E.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){E.rotate(-G)}E.translate(-D.x,-D.y)}};B.Element.marker.prototype=new B.Element.ElementBase;B.Element.defs=function(C){this.base=B.Element.ElementBase;this.base(C);this.render=function(D){}};B.Element.defs.prototype=new B.Element.ElementBase;B.Element.GradientBase=function(D){this.base=B.Element.ElementBase;this.base(D);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var C=0;C<this.children.length;C++){var E=this.children[C];if(E.type=="stop"){this.stops.push(E)}}this.getGradient=function(){};this.createGradient=function(R,I,F){var Q=this;if(this.getHrefAttribute().hasValue()){Q=this.getHrefAttribute().getDefinition()}var H=function(S){if(F.hasValue()){var T=new B.Property("color",S);return T.addOpacity(F.value).value}return S};var K=this.getGradient(R,I);if(K==null){return H(Q.stops[Q.stops.length-1].color)}for(var J=0;J<Q.stops.length;J++){K.addColorStop(Q.stops[J].offset,H(Q.stops[J].color))}if(this.attribute("gradientTransform").hasValue()){var M=B.ViewPort.viewPorts[0];var N=new B.Element.rect();N.attributes.x=new B.Property("x",-B.MAX_VIRTUAL_PIXELS/3);N.attributes.y=new B.Property("y",-B.MAX_VIRTUAL_PIXELS/3);N.attributes.width=new B.Property("width",B.MAX_VIRTUAL_PIXELS);N.attributes.height=new B.Property("height",B.MAX_VIRTUAL_PIXELS);var P=new B.Element.g();P.attributes.transform=new B.Property("transform",this.attribute("gradientTransform").value);P.children=[N];var O=new B.Element.svg();O.attributes.x=new B.Property("x",0);O.attributes.y=new B.Property("y",0);O.attributes.width=new B.Property("width",M.width);O.attributes.height=new B.Property("height",M.height);O.children=[P];var L=document.createElement("canvas");L.width=M.width;L.height=M.height;var G=L.getContext("2d");G.fillStyle=K;O.render(G);return G.createPattern(L,"no-repeat")}return K}};B.Element.GradientBase.prototype=new B.Element.ElementBase;B.Element.linearGradient=function(C){this.base=B.Element.GradientBase;this.base(C);this.getGradient=function(D,H){var J=H.getBoundingBox();if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var F=(this.gradientUnits=="objectBoundingBox"?J.x()+J.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"));var I=(this.gradientUnits=="objectBoundingBox"?J.y()+J.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"));var E=(this.gradientUnits=="objectBoundingBox"?J.x()+J.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"));var G=(this.gradientUnits=="objectBoundingBox"?J.y()+J.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y"));if(F==E&&I==G){return null}return D.createLinearGradient(F,I,E,G)}};B.Element.linearGradient.prototype=new B.Element.GradientBase;B.Element.radialGradient=function(C){this.base=B.Element.GradientBase;this.base(C);this.getGradient=function(E,F){var J=F.getBoundingBox();if(!this.attribute("cx").hasValue()){this.attribute("cx",true).value="50%"}if(!this.attribute("cy").hasValue()){this.attribute("cy",true).value="50%"}if(!this.attribute("r").hasValue()){this.attribute("r",true).value="50%"}var D=(this.gradientUnits=="objectBoundingBox"?J.x()+J.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"));var K=(this.gradientUnits=="objectBoundingBox"?J.y()+J.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"));var I=D;var G=K;if(this.attribute("fx").hasValue()){I=(this.gradientUnits=="objectBoundingBox"?J.x()+J.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"))}if(this.attribute("fy").hasValue()){G=(this.gradientUnits=="objectBoundingBox"?J.y()+J.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"))}var H=(this.gradientUnits=="objectBoundingBox"?(J.width()+J.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels());return E.createRadialGradient(I,G,0,D,K,H)}};B.Element.radialGradient.prototype=new B.Element.GradientBase;B.Element.stop=function(D){this.base=B.Element.ElementBase;this.base(D);this.offset=this.attribute("offset").numValue();if(this.offset<0){this.offset=0}if(this.offset>1){this.offset=1}var C=this.style("stop-color");if(this.style("stop-opacity").hasValue()){C=C.addOpacity(this.style("stop-opacity").value)}this.color=C.value};B.Element.stop.prototype=new B.Element.ElementBase;B.Element.AnimateBase=function(C){this.base=B.Element.ElementBase;this.base(C);B.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var E=this.attribute("attributeType").value;var D=this.attribute("attributeName").value;if(E=="CSS"){return this.parent.style(D,true)}return this.parent.attribute(D,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(G){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}}this.duration=this.duration+G;var D=false;if(this.begin<this.duration){var F=this.calcValue();if(this.attribute("type").hasValue()){var E=this.attribute("type").value;F=E+"("+F+")"}this.getProperty().value=F;D=true}return D};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue()){this.values.value=this.values.value.split(";")}this.progress=function(){var E={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var G=E.progress*(this.values.value.length-1);var F=Math.floor(G),D=Math.ceil(G);E.from=new B.Property("from",parseFloat(this.values.value[F]));E.to=new B.Property("to",parseFloat(this.values.value[D]));E.progress=(G-F)/(D-F)}else{E.from=this.from;E.to=this.to}return E}};B.Element.AnimateBase.prototype=new B.Element.ElementBase;B.Element.animate=function(C){this.base=B.Element.AnimateBase;this.base(C);this.calcValue=function(){var E=this.progress();var D=E.from.numValue()+(E.to.numValue()-E.from.numValue())*E.progress;return D+this.initialUnits}};B.Element.animate.prototype=new B.Element.AnimateBase;B.Element.animateColor=function(C){this.base=B.Element.AnimateBase;this.base(C);this.calcValue=function(){var G=this.progress();var I=new RGBColor(G.from.value);var H=new RGBColor(G.to.value);if(I.ok&&H.ok){var F=I.r+(H.r-I.r)*G.progress;var E=I.g+(H.g-I.g)*G.progress;var D=I.b+(H.b-I.b)*G.progress;return"rgb("+parseInt(F,10)+","+parseInt(E,10)+","+parseInt(D,10)+")"}return this.attribute("from").value}};B.Element.animateColor.prototype=new B.Element.AnimateBase;B.Element.animateTransform=function(C){this.base=B.Element.AnimateBase;this.base(C);this.calcValue=function(){var F=this.progress();var H=B.ToNumberArray(F.from.value);var G=B.ToNumberArray(F.to.value);var E="";for(var D=0;D<H.length;D++){E+=H[D]+(G[D]-H[D])*F.progress+" "}return E}};B.Element.animateTransform.prototype=new B.Element.animate;B.Element.font=function(D){this.base=B.Element.ElementBase;this.base(D);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var C=0;C<this.children.length;C++){var E=this.children[C];if(E.type=="font-face"){this.fontFace=E;if(E.style("font-family").hasValue()){B.Definitions[E.style("font-family").value]=this}}else{if(E.type=="missing-glyph"){this.missingGlyph=E}else{if(E.type=="glyph"){if(E.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof (this.glyphs[E.unicode])=="undefined"){this.glyphs[E.unicode]=[]}this.glyphs[E.unicode][E.arabicForm]=E}else{this.glyphs[E.unicode]=E}}}}}};B.Element.font.prototype=new B.Element.ElementBase;B.Element.fontface=function(C){this.base=B.Element.ElementBase;this.base(C);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};B.Element.fontface.prototype=new B.Element.ElementBase;B.Element.missingglyph=function(C){this.base=B.Element.path;this.base(C);this.horizAdvX=0};B.Element.missingglyph.prototype=new B.Element.path;B.Element.glyph=function(C){this.base=B.Element.path;this.base(C);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};B.Element.glyph.prototype=new B.Element.path;B.Element.text=function(C){this.captureTextNodes=true;this.base=B.Element.RenderedElementBase;this.base(C);this.baseSetContext=this.setContext;this.setContext=function(D){this.baseSetContext(D);if(this.style("dominant-baseline").hasValue()){D.textBaseline=this.style("dominant-baseline").value}if(this.style("alignment-baseline").hasValue()){D.textBaseline=this.style("alignment-baseline").value}};this.getBoundingBox=function(){return new B.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(D){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(D,this,0);for(var E=0;E<this.children.length;E++){this.renderChild(D,this,E)}};this.getAnchorDelta=function(E,I,H){var D=this.style("text-anchor").valueOrDefault("start");if(D!="start"){var G=0;for(var F=H;F<I.children.length;F++){var J=I.children[F];if(F>H&&J.attribute("x").hasValue()){break}G+=J.measureTextRecursive(E)}return -1*(D=="end"?G:G/2)}return 0};this.renderChild=function(D,F,E){var G=F.children[E];if(G.attribute("x").hasValue()){G.x=G.attribute("x").toPixels("x")+this.getAnchorDelta(D,F,E)}else{if(this.attribute("dx").hasValue()){this.x+=this.attribute("dx").toPixels("x")}if(G.attribute("dx").hasValue()){this.x+=G.attribute("dx").toPixels("x")}G.x=this.x}this.x=G.x+G.measureText(D);if(G.attribute("y").hasValue()){G.y=G.attribute("y").toPixels("y")}else{if(this.attribute("dy").hasValue()){this.y+=this.attribute("dy").toPixels("y")}if(G.attribute("dy").hasValue()){this.y+=G.attribute("dy").toPixels("y")}G.y=this.y}this.y=G.y;G.render(D);for(var E=0;E<G.children.length;E++){this.renderChild(D,G,E)}}};B.Element.text.prototype=new B.Element.RenderedElementBase;B.Element.TextElementBase=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.getGlyph=function(D,H,E){var I=H[E];var F=null;if(D.isArabic){var G="isolated";if((E==0||H[E-1]==" ")&&E<H.length-2&&H[E+1]!=" "){G="terminal"}if(E>0&&H[E-1]!=" "&&E<H.length-2&&H[E+1]!=" "){G="medial"}if(E>0&&H[E-1]!=" "&&(E==H.length-1||H[E+1]==" ")){G="initial"}if(typeof (D.glyphs[I])!="undefined"){F=D.glyphs[I][G];if(F==null&&D.glyphs[I].type=="glyph"){F=D.glyphs[I]}}}else{F=D.glyphs[I]}if(F==null){F=D.missingGlyph}return F};this.renderChildren=function(K){var I=this.parent.style("font-family").getDefinition();if(I!=null){var L=this.parent.style("font-size").numValueOrDefault(B.Font.Parse(B.ctx.font).fontSize);var F=this.parent.style("font-style").valueOrDefault(B.Font.Parse(B.ctx.font).fontStyle);var J=this.getText();if(I.isRTL){J=J.split("").reverse().join("")}var M=B.ToNumberArray(this.parent.attribute("dx").value);for(var G=0;G<J.length;G++){var H=this.getGlyph(I,J,G);var E=L/I.fontFace.unitsPerEm;K.translate(this.x,this.y);K.scale(E,-E);var D=K.lineWidth;K.lineWidth=K.lineWidth*I.fontFace.unitsPerEm/L;if(F=="italic"){K.transform(1,0,0.4,1,0,0)}H.render(K);if(F=="italic"){K.transform(1,0,-0.4,1,0,0)}K.lineWidth=D;K.scale(1/E,-1/E);K.translate(-this.x,-this.y);this.x+=L*(H.horizAdvX||I.horizAdvX)/I.fontFace.unitsPerEm;if(typeof (M[G])!="undefined"&&!isNaN(M[G])){this.x+=M[G]}}return }if(K.fillStyle!=""){K.fillText(B.compressSpaces(this.getText()),this.x,this.y)}if(K.strokeStyle!=""){K.strokeText(B.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(D){var F=this.measureText(D);for(var E=0;E<this.children.length;E++){F+=this.children[E].measureTextRecursive(D)}return F};this.measureText=function(K){var I=this.parent.style("font-family").getDefinition();if(I!=null){var L=this.parent.style("font-size").numValueOrDefault(B.Font.Parse(B.ctx.font).fontSize);var E=0;var J=this.getText();if(I.isRTL){J=J.split("").reverse().join("")}var M=B.ToNumberArray(this.parent.attribute("dx").value);for(var G=0;G<J.length;G++){var H=this.getGlyph(I,J,G);E+=(H.horizAdvX||I.horizAdvX)*L/I.fontFace.unitsPerEm;if(typeof (M[G])!="undefined"&&!isNaN(M[G])){E+=M[G]}}return E}var D=B.compressSpaces(this.getText());if(!K.measureText){return D.length*10}K.save();this.setContext(K);var F=K.measureText(D).width;K.restore();return F}};B.Element.TextElementBase.prototype=new B.Element.RenderedElementBase;B.Element.tspan=function(C){this.captureTextNodes=true;this.base=B.Element.TextElementBase;this.base(C);this.text=C.nodeValue||C.text||"";this.getText=function(){return this.text}};B.Element.tspan.prototype=new B.Element.TextElementBase;B.Element.tref=function(C){this.base=B.Element.TextElementBase;this.base(C);this.getText=function(){var D=this.getHrefAttribute().getDefinition();if(D!=null){return D.children[0].getText()}}};B.Element.tref.prototype=new B.Element.TextElementBase;B.Element.a=function(D){this.base=B.Element.TextElementBase;this.base(D);this.hasText=true;for(var C=0;C<D.childNodes.length;C++){if(D.childNodes[C].nodeType!=3){this.hasText=false}}this.text=this.hasText?D.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(E){if(this.hasText){this.baseRenderChildren(E);var G=new B.Property("fontSize",B.Font.Parse(B.ctx.font).fontSize);B.Mouse.checkBoundingBox(this,new B.BoundingBox(this.x,this.y-G.toPixels("y"),this.x+this.measureText(E),this.y))}else{var F=new B.Element.g();F.children=this.children;F.parent=this;F.render(E)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){B.ctx.canvas.style.cursor="pointer"}};B.Element.a.prototype=new B.Element.TextElementBase;B.Element.image=function(E){this.base=B.Element.RenderedElementBase;this.base(E);var D=this.getHrefAttribute().value;var F=D.match(/\.svg$/);B.Images.push(this);this.loaded=false;if(!F){this.img=document.createElement("img");var C=this;this.img.onload=function(){C.loaded=true};this.img.onerror=function(){if(typeof (console)!="undefined"){console.log('ERROR: image "'+D+'" not found');C.loaded=true}};this.img.src=D}else{this.img=B.ajax(D);this.loaded=true}this.renderChildren=function(I){var H=this.attribute("x").toPixels("x");var K=this.attribute("y").toPixels("y");var J=this.attribute("width").toPixels("x");var G=this.attribute("height").toPixels("y");if(J==0||G==0){return }I.save();if(F){I.drawSvg(this.img,H,K,J,G)}else{I.translate(H,K);B.AspectRatio(I,this.attribute("preserveAspectRatio").value,J,this.img.width,G,this.img.height,0,0);I.drawImage(this.img,0,0)}I.restore()};this.getBoundingBox=function(){var H=this.attribute("x").toPixels("x");var J=this.attribute("y").toPixels("y");var I=this.attribute("width").toPixels("x");var G=this.attribute("height").toPixels("y");return new B.BoundingBox(H,J,H+I,J+G)}};B.Element.image.prototype=new B.Element.RenderedElementBase;B.Element.g=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.getBoundingBox=function(){var E=new B.BoundingBox();for(var D=0;D<this.children.length;D++){E.addBoundingBox(this.children[D].getBoundingBox())}return E}};B.Element.g.prototype=new B.Element.RenderedElementBase;B.Element.symbol=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.baseSetContext=this.setContext;this.setContext=function(E){this.baseSetContext(E);if(this.attribute("viewBox").hasValue()){var F=B.ToNumberArray(this.attribute("viewBox").value);var D=F[0];var G=F[1];width=F[2];height=F[3];B.AspectRatio(E,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,D,G);B.ViewPort.SetCurrent(F[2],F[3])}}};B.Element.symbol.prototype=new B.Element.RenderedElementBase;B.Element.style=function(R){this.base=B.Element.ElementBase;this.base(R);var N="";for(var U=0;U<R.childNodes.length;U++){N+=R.childNodes[U].nodeValue}N=N.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");N=B.compressSpaces(N);var M=N.split("}");for(var U=0;U<M.length;U++){if(B.trim(M[U])!=""){var Y=M[U].split("{");var F=Y[0].split(",");var C=Y[1].split(";");for(var T=0;T<F.length;T++){var K=B.trim(F[T]);if(K!=""){var E={};for(var S=0;S<C.length;S++){var D=C[S].indexOf(":");var Z=C[S].substr(0,D);var Q=C[S].substr(D+1,C[S].length-D);if(Z!=null&&Q!=null){E[B.trim(Z)]=new B.Property(B.trim(Z),B.trim(Q))}}B.Styles[K]=E;if(K=="@font-face"){var W=E["font-family"].value.replace(/"/g,"");var L=E.src.value.split(",");for(var O=0;O<L.length;O++){if(L[O].indexOf('format("svg")')>0){var I=L[O].indexOf("url");var H=L[O].indexOf(")",I);var G=L[O].substr(I+5,H-I-6);var X=B.parseXml(B.ajax(G));var J=X.getElementsByTagName("font");for(var V=0;V<J.length;V++){var P=B.CreateElement(J[V]);B.Definitions[W]=P}}}}}}}}};B.Element.style.prototype=new B.Element.ElementBase;B.Element.use=function(C){this.base=B.Element.RenderedElementBase;this.base(C);this.baseSetContext=this.setContext;this.setContext=function(D){this.baseSetContext(D);if(this.attribute("x").hasValue()){D.translate(this.attribute("x").toPixels("x"),0)}if(this.attribute("y").hasValue()){D.translate(0,this.attribute("y").toPixels("y"))}};this.getDefinition=function(){var D=this.getHrefAttribute().getDefinition();if(this.attribute("width").hasValue()){D.attribute("width",true).value=this.attribute("width").value}if(this.attribute("height").hasValue()){D.attribute("height",true).value=this.attribute("height").value}return D};this.path=function(D){var E=this.getDefinition();if(E!=null){E.path(D)}};this.getBoundingBox=function(){var D=this.getDefinition();if(D!=null){return D.getBoundingBox()}};this.renderChildren=function(D){var F=this.getDefinition();if(F!=null){var E=F.parent;F.parent=null;F.render(D);F.parent=E}}};B.Element.use.prototype=new B.Element.RenderedElementBase;B.Element.mask=function(C){this.base=B.Element.ElementBase;this.base(C);this.apply=function(N,F){var L=this.attribute("x").toPixels("x");var K=this.attribute("y").toPixels("y");var D=this.attribute("width").toPixels("x");var M=this.attribute("height").toPixels("y");if(D==0&&M==0){var H=new B.BoundingBox();for(var G=0;G<this.children.length;G++){H.addBoundingBox(this.children[G].getBoundingBox())}var L=Math.floor(H.x1);var K=Math.floor(H.y1);var D=Math.floor(H.width());var M=Math.floor(H.height())}var P=F.attribute("mask").value;F.attribute("mask").value="";var J=document.createElement("canvas");J.width=L+D;J.height=K+M;var O=J.getContext("2d");this.renderChildren(O);var I=document.createElement("canvas");I.width=L+D;I.height=K+M;var E=I.getContext("2d");F.render(E);E.globalCompositeOperation="destination-in";E.fillStyle=O.createPattern(J,"no-repeat");E.fillRect(0,0,L+D,K+M);N.fillStyle=E.createPattern(I,"no-repeat");N.fillRect(0,0,L+D,K+M);F.attribute("mask").value=P};this.render=function(D){}};B.Element.mask.prototype=new B.Element.ElementBase;B.Element.clipPath=function(C){this.base=B.Element.ElementBase;this.base(C);this.apply=function(D){for(var F=0;F<this.children.length;F++){var G=this.children[F];if(typeof (G.path)!="undefined"){var E=null;if(G.attribute("transform").hasValue()){E=new B.Transform(G.attribute("transform").value);E.apply(D)}G.path(D);D.clip();if(E){E.unapply(D)}}}};this.render=function(D){}};B.Element.clipPath.prototype=new B.Element.ElementBase;B.Element.filter=function(C){this.base=B.Element.ElementBase;this.base(C);this.apply=function(Q,I){var J=I.getBoundingBox();var N=Math.floor(J.x1);var L=Math.floor(J.y1);var E=Math.floor(J.width());var P=Math.floor(J.height());var F=I.style("filter").value;I.style("filter").value="";var O=0,M=0;for(var H=0;H<this.children.length;H++){var D=this.children[H].extraFilterDistance||0;O=Math.max(O,D);M=Math.max(M,D)}var K=document.createElement("canvas");K.width=E+2*O;K.height=P+2*M;var G=K.getContext("2d");G.translate(-N+O,-L+M);I.render(G);for(var H=0;H<this.children.length;H++){this.children[H].apply(G,0,0,E+2*O,P+2*M)}Q.drawImage(K,0,0,E+2*O,P+2*M,N-O,L-M,E+2*O,P+2*M);I.style("filter",true).value=F};this.render=function(D){}};B.Element.filter.prototype=new B.Element.ElementBase;B.Element.feMorphology=function(C){this.base=B.Element.ElementBase;this.base(C);this.apply=function(F,E,H,G,D){}};B.Element.feMorphology.prototype=new B.Element.ElementBase;B.Element.feColorMatrix=function(E){this.base=B.Element.ElementBase;this.base(E);function D(H,G,K,J,F,I){return H[K*J*4+G*4+I]}function C(H,G,L,J,F,I,K){H[L*J*4+G*4+I]=K}this.apply=function(O,L,K,G,N){var I=O.getImageData(0,0,G,N);for(var K=0;K<N;K++){for(var L=0;L<G;L++){var F=D(I.data,L,K,G,N,0);var H=D(I.data,L,K,G,N,1);var J=D(I.data,L,K,G,N,2);var M=(F+H+J)/3;C(I.data,L,K,G,N,0,M);C(I.data,L,K,G,N,1,M);C(I.data,L,K,G,N,2,M)}}O.clearRect(0,0,G,N);O.putImageData(I,0,0)}};B.Element.feColorMatrix.prototype=new B.Element.ElementBase;B.Element.feGaussianBlur=function(C){this.base=B.Element.ElementBase;this.base(C);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(F,E,H,G,D){if(typeof (stackBlurCanvasRGBA)=="undefined"){if(typeof (console)!="undefined"){console.log("ERROR: StackBlur.js must be included for blur to work")}return }F.canvas.id=B.UniqueId();F.canvas.style.display="none";document.body.appendChild(F.canvas);stackBlurCanvasRGBA(F.canvas.id,E,H,G,D,this.blurRadius);document.body.removeChild(F.canvas)}};B.Element.feGaussianBlur.prototype=new B.Element.ElementBase;B.Element.title=function(C){};B.Element.title.prototype=new B.Element.ElementBase;B.Element.desc=function(C){};B.Element.desc.prototype=new B.Element.ElementBase;B.Element.MISSING=function(C){if(typeof (console)!="undefined"){console.log("ERROR: Element '"+C.nodeName+"' not yet implemented.")}};B.Element.MISSING.prototype=new B.Element.ElementBase;B.CreateElement=function(D){var C=D.nodeName.replace(/^[^:]+:/,"");C=C.replace(/\-/g,"");var E=null;if(typeof (B.Element[C])!="undefined"){E=new B.Element[C](D)}else{E=new B.Element.MISSING(D)}E.type=D.nodeName;return E};B.load=function(C,D){B.loadXml(C,B.ajax(D))};B.loadXml=function(C,D){B.loadXmlDoc(C,B.parseXml(D))};B.loadXmlDoc=function(F,I){B.init(F);var E=function(K){var J=F.canvas;while(J){K.x-=J.offsetLeft;K.y-=J.offsetTop;J=J.offsetParent}if(window.scrollX){K.x+=window.scrollX}if(window.scrollY){K.y+=window.scrollY}return K};if(B.opts.ignoreMouse!=true){F.canvas.onclick=function(K){var J=E(new B.Point(K!=null?K.clientX:event.clientX,K!=null?K.clientY:event.clientY));B.Mouse.onclick(J.x,J.y)};F.canvas.onmousemove=function(K){var J=E(new B.Point(K!=null?K.clientX:event.clientX,K!=null?K.clientY:event.clientY));B.Mouse.onmousemove(J.x,J.y)}}var H=B.CreateElement(I.documentElement);H.root=true;var G=true;var D=function(){B.ViewPort.Clear();if(F.canvas.parentNode){B.ViewPort.SetCurrent(F.canvas.parentNode.clientWidth,F.canvas.parentNode.clientHeight)}if(B.opts.ignoreDimensions!=true){if(H.style("width").hasValue()){F.canvas.width=H.style("width").toPixels("x");F.canvas.style.width=F.canvas.width+"px"}if(H.style("height").hasValue()){F.canvas.height=H.style("height").toPixels("y");F.canvas.style.height=F.canvas.height+"px"}}var L=F.canvas.clientWidth||F.canvas.width;var K=F.canvas.clientHeight||F.canvas.height;if(B.opts.ignoreDimensions==true&&H.style("width").hasValue()&&H.style("height").hasValue()){L=H.style("width").toPixels("x");K=H.style("height").toPixels("y")}B.ViewPort.SetCurrent(L,K);if(B.opts.offsetX!=null){H.attribute("x",true).value=B.opts.offsetX}if(B.opts.offsetY!=null){H.attribute("y",true).value=B.opts.offsetY}if(B.opts.scaleWidth!=null&&B.opts.scaleHeight!=null){var M=1,J=1,N=B.ToNumberArray(H.attribute("viewBox").value);if(H.attribute("width").hasValue()){M=H.attribute("width").toPixels("x")/B.opts.scaleWidth}else{if(!isNaN(N[2])){M=N[2]/B.opts.scaleWidth}}if(H.attribute("height").hasValue()){J=H.attribute("height").toPixels("y")/B.opts.scaleHeight}else{if(!isNaN(N[3])){J=N[3]/B.opts.scaleHeight}}H.attribute("width",true).value=B.opts.scaleWidth;H.attribute("height",true).value=B.opts.scaleHeight;H.attribute("viewBox",true).value="0 0 "+(L*M)+" "+(K*J);H.attribute("preserveAspectRatio",true).value="none"}if(B.opts.ignoreClear!=true){F.clearRect(0,0,L,K)}H.render(F);if(G){G=false;if(typeof (B.opts.renderCallback)=="function"){B.opts.renderCallback(I)}}};var C=true;if(B.ImagesLoaded()){C=false;D()}B.intervalID=setInterval(function(){var K=false;if(C&&B.ImagesLoaded()){C=false;K=true}if(B.opts.ignoreMouse!=true){K=K|B.Mouse.hasEvents()}if(B.opts.ignoreAnimation!=true){for(var J=0;J<B.Animations.length;J++){K=K|B.Animations[J].update(1000/B.FRAMERATE)}}if(typeof (B.opts.forceRedraw)=="function"){if(B.opts.forceRedraw()==true){K=true}}if(K){D();B.Mouse.runEvents()}},1000/B.FRAMERATE)};B.stop=function(){if(B.intervalID){clearInterval(B.intervalID)}};B.Mouse=new (function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(C,D){this.events.push({type:"onclick",x:C,y:D,run:function(E){if(E.onclick){E.onclick()}}})};this.onmousemove=function(C,D){this.events.push({type:"onmousemove",x:C,y:D,run:function(E){if(E.onmousemove){E.onmousemove()}}})};this.eventElements=[];this.checkPath=function(E,C){for(var D=0;D<this.events.length;D++){var F=this.events[D];if(C.isPointInPath&&C.isPointInPath(F.x,F.y)){this.eventElements[D]=E}}};this.checkBoundingBox=function(D,F){for(var C=0;C<this.events.length;C++){var E=this.events[C];if(F.isPointInBox(E.x,E.y)){this.eventElements[C]=D}}};this.runEvents=function(){B.ctx.canvas.style.cursor="";for(var D=0;D<this.events.length;D++){var E=this.events[D];var C=this.eventElements[D];while(C){E.run(C);C=C.parent}}this.events=[];this.eventElements=[]}});return B}})();if(typeof (CanvasRenderingContext2D)!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(D,B,A,C,E){canvg(this.canvas,D,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:B,offsetY:A,scaleWidth:C,scaleHeight:E})}}var Ab=window.Ab||{};Ab.namespace=function(C){if(!C||!C.length){return null}var D=C.split(".");var B=Ab;for(var A=(D[0]=="Ab")?1:0;A<D.length;++A){B[D[A]]=B[D[A]]||{};B=B[D[A]]}return B};var afm_form_values_changed=false;function user_form_onload(){}var system_form_onload_handlers=[];Ext.onReady(function(){if(Ext.isIE){Ext.menu.Menu.prototype.minWidth=250}if(Ext.isSafari){Ext.util.CSS.updateRule(".selectvalue_button","margin-bottom","-6px")}if(typeof Range!=="undefined"){if(typeof Range.prototype.createContextualFragment=="undefined"){Range.prototype.createContextualFragment=function(C){var D=window.document;var B=D.createElement("div");B.innerHTML=C;var F=D.createDocumentFragment(),E;while((E=B.firstChild)){F.appendChild(E)}return F}}}var A=function(){for(var B=0;B<system_form_onload_handlers.length;B++){system_form_onload_handlers[B].call()}user_form_onload()};if(system_form_onload_handlers.length==0){A.defer(1000)}else{A()}});Ab.namespace("data");Ab.data.FieldDef=Base.extend({config:null,id:"",fullName:"",title:"",afmType:"",type:"",format:"",size:0,decimals:0,numericFormat:"",hidden:false,readOnly:false,required:false,isEnum:false,isDate:false,isTime:false,isNumeric:false,isDocument:false,primaryKey:false,foreignKey:false,isEnum:false,enumValues:null,value:"",op:"=",colspan:1,rowspan:1,controlType:"",groupBy:false,defaultValue:"",lookupName:null,lookupDisplayType:"",lookupDisplayFormat:"",maxValue:"",minValue:"",constructor:function(A){this.config=A;Ext.apply(this,A)},isUpperCase:function(){var A=this.format.toUpperCase();return(A==="UPPERALPHANUM"||A==="UPPERALPHA"||A==="UPPER")},formatValue:function(E,D,B,A){if(!valueExists(E)){return""}if(!valueExists(D)){D=true}if(!valueExists(B)){B=true}if(!valueExists(A)){A={}}var C=E;if(this.isDate&&E.constructor==Date){C=E.format(this.getDateFormat(D))}else{if(this.isTime&&E.constructor==Date){C=E.format(this.getTimeFormat(D))}else{if(this.isEnum&&D&&B){C=this.enumValues[E]}else{if(this.isNumber()){if(D){if(E.constructor==Number){C=E.toFixed(this.decimals)}else{if(valueExistsNotEmpty(E)){C=parseFloat(E).toFixed(this.decimals)}}if(this.format.toUpperCase()==="NOSEPARATOR"){C=localizeDecimalSeparator(C)}else{C=insertGroupingSeparator(C,true,D)}C=this.formatCurrency(C,A)}}}}}return C},formatLookupValue:function(B,F){var E=B;var G=F[this.lookupName];if(this.lookupName){if(this.lookupDisplayType==="lookup"){E=G}else{if(this.lookupDisplayType==="concatenate"){var A=this.lookupDisplayFormat;A=A.replace(/\{0\}/g,"{{idValue}}");A=A.replace(/\{1\}/g,"{{lookupValue}}");var D=Handlebars.compile(A);var C={idValue:B,lookupValue:G};E=D(C)}}}return E},formatCurrency:function(D,A){var B=this.getCurrencySymbol(A);var C=D;if(B.length>1){C=B+" "+C}else{C=B+C}return C},getCurrencySymbol:function(A){var B="";if(valueExists(this.currency)){B=View.currencySymbolFor(this.currency)}else{if(valueExists(this.currencyField)&&valueExists(A)){var C=A[this.currencyField];if(valueExists(C)){B=View.currencySymbolFor(C)}}}if(valueExists(A)&&valueExists(A.totalsCurrency)){B=View.currencySymbolFor(A.totalsCurrency)}return B},parseValue:function(D,C,B){var A=D;if(!valueExists(C)){C=true}if(this.isDate&&D.constructor==String){if(trim(D)!=""){A=Date.parseDate(D,this.getDateFormat(C));if(!valueExists(A)){A=Date.parseDate(D+"00","Y-m-d H:i:s.u")}if(!valueExists(A)){A=Date.parseDate(D,"Y-m-d H:i:s")}}}else{if(this.isTime&&D.constructor==String){if(trim(D)!=""){A=Date.parseDate(D,this.getTimeFormat(C));if(!valueExists(A)){A=Date.parseDate(D,"H:i:s")}if(!valueExists(A)){A=Date.parseDate(D,"Y-m-d H:i:s")}if(!valueExists(A)){A=Date.parseDate(D+"00","Y-m-d H:i:s.u")}if(!valueExists(A)){A=Date.parseDate(D,"H:i:s.u")}if(!valueExists(A)){A=Date.parseDate(D+"00","H:i:s.u")}}}else{if(this.isNumber()){A=this.parseNumericValue(A,C,B)}}}return A},parseNumericValue:function(E,D,B){var A=E+"";if(this.format.toUpperCase()!="NOSEPARATOR"){A=removeGroupingSeparator(A,D)}var C=this.getCurrencySymbol(B);if(valueExistsNotEmpty(C)){A=trim(A.replace(C,""))}return A},getDateFormat:function(A){return A?View.dateFormat:"Y-m-d"},getTimeFormat:function(A){return A?View.timeFormat:"H:i.s.u"},isNumber:function(){return(this.type==="java.lang.Double"||this.type==="java.lang.Integer"||(this.type=="java.lang.Float"&&this.format=="Float"))},evaluateExpressions:function(A){if(valueExists(this.currency)){this.currency=View.evaluateString(this.currency,A)}if(valueExists(this.title)){this.title=View.evaluateString(this.title,A,false)}}});Ab.data.SortFieldDef=Base.extend({table:"",name:"",ascending:true,constructor:function(A){Ext.apply(this,A)}});Ab.data.Record=Base.extend({values:null,oldValues:null,localizedValues:null,isNew:true,constructor:function(B,A){this.values={};this.oldValues={};this.localizedValues={};if(valueExists(B)){this.fromJSON(B)}if(valueExists(A)){this.isNew=A}},fromJSON:function(A){for(var B in A){var D=A[B];if(!valueExists(D)){D=""}if(!endsWith(B,".key")&&!endsWith(B,".raw")){var C=A[B+".raw"];if(valueExists(C)){this.values[B]=C}else{if(valueExists(D.n)){this.values[B]=D.n;this.localizedValues[B]=D.l}else{this.values[B]=D}}}}if(valueExists(this.values.isNew)){this.isNew=this.values.isNew}},toRestriction:function(){return new Ab.view.Restriction(this.values)},getValue:function(A){return this.values[A]},getLocalizedValue:function(A){return this.localizedValues[A]},setValue:function(B,A){this.values[B]=A},setOldValue:function(B,A){this.oldValues[B]=A},removeValue:function(A){delete this.values[A]},getValues:function(){return this.values},toString:function(){var B="";for(var A in this.values){var C=this.values[A];B=B+A+": '"+C+"', "}return B}});Ab.data.DataSet=Base.extend({type:"",constructor:function(A){if(valueExists(A)){this.fromJSON(A)}},fromJSON:function(A){}});Ab.data.DataSetList=Ab.data.DataSet.extend({records:null,hasMoreRecords:false,constructor:function(A){this.records=[];this.inherit(A);this.type="list"},addRecord:function(A){this.records.push(A)},addRecords:function(A){for(var B=0;B<A.length;B++){this.records.push(A[B])}},fromJSON:function(C){this.inherit(C);for(var B=0;B<C.records.length;B++){var A=new Ab.data.Record();A.fromJSON(C.records[B]);this.records.push(A)}if(valueExists(C.hasMoreRecords)){this.hasMoreRecords=C.hasMoreRecords}}});Ab.data.DataSetGrid=Ab.data.DataSetList.extend({indexRecords:null,constructor:function(A){this.indexRecords=[];this.inherit(A);this.type="grid"},fromJSON:function(B){this.inherit(B);for(var A=0;A<B.indexRecords.length;A++){this.indexRecords.push(B.indexRecords[A])}},getIndexRecord:function(){return this.indexRecords}});Ab.data.DataSet1D=Ab.data.DataSetList.extend({rowValues:null,rowRecords:null,totals:null,constructor:function(A){this.rowValues=[];this.rowRecords=[];this.totals=[];this.nullValueTitle="";this.inherit(A);this.type="1d"},fromJSON:function(C){this.inherit(C);for(var B=0;B<C.rowValues.length;B++){this.rowValues.push(C.rowValues[B])}for(var B=0;B<C.rowRecords.length;B++){var A=new Ab.data.Record();A.fromJSON(C.rowRecords[B]);this.rowRecords.push(A)}for(var B=0;B<C.totals.length;B++){var A=new Ab.data.Record();A.fromJSON(C.totals[B]);this.totals.push(A)}this.nullValueTitle=C.nullValueTitle},getRowValues:function(){return this.rowValues}});Ab.data.DataSet2D=Ab.data.DataSet1D.extend({columnValues:null,recordIndex:null,rowSubtotals:null,nullValueTitle:null,constructor:function(A){this.columnValues=[];this.recordIndex={};this.rowSubtotals=[];this.columnSubtotals=[];this.nullValueTitle="";this.inherit(A);this.type="2d"},fromJSON:function(C){this.inherit(C);for(var B=0;B<C.columnValues.length;B++){this.columnValues.push(C.columnValues[B])}this.recordIndex=C.recordIndex;for(var B=0;B<C.rowSubtotals.length;B++){var A=new Ab.data.Record();A.fromJSON(C.rowSubtotals[B]);this.rowSubtotals.push(A)}for(var B=0;B<C.columnSubtotals.length;B++){var A=new Ab.data.Record();A.fromJSON(C.columnSubtotals[B]);this.columnSubtotals.push(A)}this.nullValueTitle=C.nullValueTitle},getColumnValues:function(){return this.columnValues},getRecordIndex:function(A,C){var B=A+"."+C;return this.recordIndex[B]},getRecordForRowAndColumn:function(B,C){var A=this.getRecordIndex(B,C);return this.records[A]}});Ab.data.DataSource=Base.extend({id:"",type:"",title:"",viewName:"",mainTableName:"",tableNames:null,fieldDefs:null,sortFieldDefs:[],parameters:null,customQuery:null,restriction:null,recordLimit:0,primaryKeyFields:[],config:null,constructor:function(F,A){this.config=A;this.id=F;this.type=A.type;this.title=A.title;this.viewName=A.viewName;this.mainTableName=A.mainTableName;this.tableNames=A.tableNames;this.parameters={};this.fieldDefs=new Ext.util.MixedCollection();if(valueExists(A.fieldDefs)){for(var E=0;E<A.fieldDefs.length;E++){var D=new Ab.data.FieldDef(A.fieldDefs[E]);this.fieldDefs.add(D.id,D)}}this.sortFieldDefs=[];if(valueExists(A.sortFieldDefs)){for(var E=0;E<A.sortFieldDefs.length;E++){var C=new Ab.data.SortFieldDef(A.sortFieldDefs[E]);this.sortFieldDefs[E]=C}}this.primaryKeyFields=[];if(valueExists(A.primaryKeyFields)){for(var E=0,B;B=A.primaryKeyFields[E];E++){this.primaryKeyFields[E]=B}}if(valueExists(A.customQuery)){this.customQuery=A.customQuery}if(valueExists(A.viewRestriction)){this.restriction=A.viewRestriction}this.evaluateExpressions();View.dataSources.add(this.id,this)},formatValue:function(G,F,E,B,A){if(!valueExists(B)){B=true}var D=F;var C=this.fieldDefs.get(G);if(C){D=C.formatValue(F,E,B,A)}return D},formatCurrencyValue:function(E,D,A){var C=D;var B=this.fieldDefs.get(E);if(B){C=B.formatCurrency(D,A)}else{E=E.replace(".sum_",".");E=E.replace(".min_",".");E=E.replace(".max_",".");E=E.replace(".avg_",".");B=this.fieldDefs.get(E);if(B){C.l=B.formatCurrency(D.l,A)}}return C},parseValue:function(F,E,D,C){var A=E;var B=this.fieldDefs.get(F);if(B){A=B.parseValue(E,D,C)}return A},parseValues:function(B,D){var E={};for(var C in B){var A=this.parseValue(C,B[C],D,B);E[C]=A}return E},formatValues:function(A,G,C){if(!valueExists(C)){C=true}var E={};for(var B in A){var F=A[B];if(valueExistsNotEmpty(F)){var D=this.formatValue(B,F,G,C,A);E[B]=D}else{E[B]=F}}return E},formatLookupValue:function(B,C,E){var D=C;var A=this.fieldDefs.get(B);if(A){D=A.formatLookupValue(C,E)}return D},formatCurrencyValues:function(A){var D={};for(var B in A){var E=A[B];if(valueExistsNotEmpty(E)){var C=this.formatCurrencyValue(B,E,A);D[B]=C}}return D},processInboundRecord:function(A){A.oldValues=this.parseValues(A.values,false);A.values=this.parseValues(A.values,false);return A},processOutboundRecord:function(A){var B=new Ab.data.Record();B.values=this.formatValues(A.values,false);B.oldValues=this.formatValues(A.oldValues,false);B.isNew=A.isNew;return B},setRestriction:function(A){this.restriction=A},addParameter:function(A,B){this.parameters[A]=B},addParameters:function(A){_.extend(this.parameters,A)},clearParameters:function(){this.parameters={}},getRecords:function(B,D){var F=this.getParameters(D);if(B){if(B.addClauses){B.addClauses(this.restriction,false)}}else{B=this.restriction}F.restriction=toJSON(B||{});F.recordLimit=this.recordLimit;var A=Workflow.call("AbCommonResources-getDataRecords",F);var C=[];for(var E=0;E<A.dataSet.records.length;E++){C.push(this.processInboundRecord(A.dataSet.records[E]))}return C},getRecord:function(B,C){var D=this.getParameters(C);D.restriction=toJSON(B||{});var A=Workflow.call("AbCommonResources-getDataRecord",D);A.dataSet=this.processInboundRecord(A.dataSet);return A.dataSet},getDefaultRecord:function(B,C){var D=this.getParameters(C);D.restriction=toJSON(B||{});var A=Workflow.call("AbCommonResources-getDefaultDataRecord",D);A.dataSet=this.processInboundRecord(A.dataSet);return A.dataSet},saveRecord:function(B,C){var D=this.getParameters(C);B=this.processOutboundRecord(B);D.record=toJSON(B);var A=Workflow.call("AbCommonResources-saveDataRecord",D);return A.dataSet},saveRecords:function(B,D){var F=this.getParameters(D);var C=[];for(var E=0;E<B.length;E++){C.push(this.processOutboundRecord(B[E]))}F.records=toJSON(C);var A=Workflow.call("AbCommonResources-saveDataRecord",F);return A.dataSet},deleteRecord:function(B,C){var D=this.getParameters(C);B=this.processOutboundRecord(B);D.record=toJSON(B);var A=Workflow.call("AbCommonResources-deleteDataRecords",D);return A.dataSet},getParameters:function(A){var B=A||{};B.viewName=this.viewName;B.dataSourceId=this.id;if(!valueExistsNotEmpty(this.viewName)){B.tableName=this.mainTableName;B.tableNames=this.tableNames;if(this.tableNames){B.tableNames=toJSON(this.tableNames)}B.fieldNames=[];this.fieldDefs.each(function(C){B.fieldNames.push(C.id)});B.fieldNames=toJSON(B.fieldNames)}Ext.apply(B,this.parameters);return B},evaluateExpressions:function(A){if(!valueExists(A)){A=View.evaluationContext}this.fieldDefs.each(function(B){B.evaluateExpressions(A)})}});Ab.data.createDataSet=function(B){var A=null;if(B.type=="record"){A=new Ab.data.Record(B.records[0])}else{if(B.type=="list"){A=new Ab.data.DataSetList(B)}else{if(B.type=="grid"){A=new Ab.data.DataSetGrid(B)}else{if(B.type=="1d"){A=new Ab.data.DataSet1D(B)}else{if(B.type=="2d"){A=new Ab.data.DataSet2D(B)}}}}}return A};Ab.data.createDataSourceForFields=function(B){var A={type:"",tableNames:[],fieldNames:[],fieldDefs:[]};Ext.apply(A,B);A.mainTableName=A.tableNames[0];for(var C=0;C<A.fieldNames.length;C++){var D=A.fieldNames[C];if(D.indexOf(".")==-1){D=A.mainTableName+"."+D}if(!B.fieldDefs){A.fieldDefs.push({id:D})}}return new Ab.data.DataSource(A.id,A)};Ab.data.loadDataSourceFromFile=function(C,B){var A=Workflow.callMethod("AbCommonResources-DataSourceService-loadDataSourceFromFile",C,B).data;return Ab.data.createDataSourceForFields(A)};Ab.data.HighlightPattern=Base.extend({pattern:"",patternParts:null,constructor:function(A){this.pattern=A;this.patternParts=A.split(" ")},isNewFormat:function(){return(this.patternParts[0]=="14")},isHatched:function(){return(this.patternParts[this.isNewFormat()?1:0]=="1")},getLegendBitmapName:function(A,D){var B=A+"-";for(var C=0;C<D.length;C++){B=B+D[C]}B=B+this.patternParts[this.isNewFormat()?6:3];B=B.replace(/\s/g,"");B=B.toLowerCase();B=B.replace(/\&/g,"").replace(/\#/g,"").replace(/\'/g,"").replace(/\"/g,"").replace(/\~/g,"").replace(/\*/g,"").replace(/\$/g,"").replace(/\%/g,"");return B}});Ab.namespace("workflow");Ab.workflow.Workflow=Base.extend({},{DEFAULT_TIMEOUT:10,ERROR_SCRIPT_SESSION:"Attempt to fix script session",ERROR_NO_DATA:"No data received from server",z_MESSAGE_RULE_EXECUTED:"Workflow rule executed",z_MESSAGE_RULE_FAILED:"Workflow rule failed",z_MESSAGE_RULE_NOT_FOUND:"Workflow rule not found",z_MESSAGE_RULE_NOT_PERMITTED:"Workflow rule not permitted",z_MESSAGE_CONTAINER_FAILED:"Workflow rules container failed",z_MESSAGE_SESSION_EXPIRATION_TITLE:"Session About to Expire",z_MESSAGE_SESSION_TIMEOUT_TITLE:"Session Timeout",z_MESSAGE_SESSION_EXPIRATION:"Your session will expire soon. Do you wish to extend the session?",z_MESSAGE_SESSION_TIMEOUT:"Your session has expired, and you have been signed out of WebCentral. To continue working, please sign in again.",runRule:function(A,H,D,E,F){try{if(!valueExists(F)){F=Ab.workflow.Workflow.DEFAULT_TIMEOUT}var B=new Ab.workflow.Callback(D,E);var G=B.afterRuleExecuted.createDelegate(B);var I={callback:G,async:false,timeout:F*1000};this.prapareParameters(H);workflow.runWorkflowRule(A,H,I)}catch(C){C.description=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_FAILED)+A;throw C}},runRuleAndReturnResult:function(H,D,E){try{if(!valueExists(E)){E=Ab.workflow.Workflow.DEFAULT_TIMEOUT}var B=new Ab.workflow.Callback(null,null);var G=B.afterRuleExecuted.createDelegate(B);var C={callback:G,async:false,timeout:E*1000};this.prapareParameters(D);workflow.runWorkflowRule(H,D,null,C);var A=B.result;if(!valueExists(A.message)){A.message=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_EXECUTED)+": "+H+" ("+A.executionTime+" ms)"}return A}catch(F){F.description=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_FAILED)+": "+H;throw F}},runRuleWithUpload:function(A,I,B,E,F,G){try{if(!valueExists(G)){G=Ab.workflow.Workflow.DEFAULT_TIMEOUT}var C=new Ab.workflow.Callback(E,F);var H=C.afterRuleExecuted.createDelegate(C);var J={callback:H,timeout:G*1000};this.prapareParameters(I);workflow.runWorkflowRule(A,I,B,J)}catch(D){D.description=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_FAILED)+": "+A;throw D}},call:function(D,B,C){if(!valueExists(B)){B={}}if(B.constructor==Ab.data.Record){B={record:toJSON(B)}}else{if(B.constructor==Ab.data.DataSetList){B={records:toJSON(B)}}else{if(B.constructor==Array){B={records:toJSON(B)}}}}var A=this.runRuleAndReturnResult(D,B,C);if(A.code=="sessionTimeout"){this.handleSessionTimeout(A.message)}else{if(A.code!="executed"){throw A}}return A},callMethod:function(D){var C=[];for(var B=1;B<arguments.length;B++){C.push(arguments[B])}var A=this.call(D,{methodParameters:toJSON(C)});return A},callMethodWithParameters:function(B,A){return this.call(B,A)},handleError:function(A,D,B){if(A.stack){View.showException(A,A.message,D)}else{var C=this.resultCodeToMessage(A.code);View.log(C+": "+A.message,"error","Workflow");View.showMessage("error",C+":<br/>"+A.message,A.detailedMessage,A.data,D,B)}},handleSessionExpiration:function(){var B=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_SESSION_EXPIRATION_TITLE);var A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_SESSION_EXPIRATION);Ext.MessageBox.confirm(B,A,function(C){if(C==="yes"){View.openDialog("ab-about-and-license.axvw",null,false,{width:0,height:0,afterViewLoad:function(){View.closeDialog()}})}})},handleSessionTimeout:function(A){View.sessionTimeoutDetected=true;if(top.View){top.View.sessionTimeoutDetected=true}var C=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_SESSION_TIMEOUT_TITLE);var B=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_SESSION_TIMEOUT);Ext.MessageBox.alert(C,B,function(){top.location=View.getUrlForPath(A)})},handleDwrError:function(B,A){if(B==Workflow.ERROR_SCRIPT_SESSION||B==Workflow.ERROR_NO_DATA){this.handleSessionTimeout(View.logoutView)}else{View.log(B,"error","Workflow")}},handleDwrWarning:function(B,A){View.log(B,"warn","Workflow")},resultCodeToMessage:function(B){var A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_EXECUTED);if(B=="ruleFailed"){A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_FAILED)}else{if(B=="ruleNotFound"){A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_NOT_FOUND)}else{if(B=="containerFailed"){A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_CONTAINER_FAILED)}else{if(B=="ruleNotPermitted"){A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_RULE_NOT_PERMITTED)}else{if(B=="sessionTimeout"){A=View.getLocalizedString(Ab.workflow.Workflow.z_MESSAGE_SESSION_TIMEOUT)}}}}}return A},startJob:function(D){var C=[];for(var B=1;B<arguments.length;B++){C.push(arguments[B])}C=toJSON(C);var A=this.call(D,{methodParameters:C,startAsJob:true},null,arguments[1]);return A.message},startJobWithUpload:function(G,B,C,E){var F=[];for(var D=4;D<arguments.length;D++){F.push(arguments[D])}var A=this.runRuleWithUpload(G,{methodParameters:toJSON(F),startAsJob:true},B,C,E)},getJobStatus:function(B){try{var A=Workflow.call("AbCommonResources-getJobStatus",{jobId:B});var D=A.data;if(valueExists(D.data)){D.dataSet=Ab.data.createDataSet(D.data)}return D}catch(C){Workflow.handleError(C)}},stopJob:function(B){try{var A=Workflow.call("AbCommonResources-stopJob",{jobId:B});return A.data}catch(C){Workflow.handleError(C)}},terminateJob:function(B){try{var A=Workflow.call("AbCommonResources-terminateJob",{jobId:B});return A}catch(C){Workflow.handleError(C)}},getJobStatusesForUser:function(){try{var A=Workflow.call("AbCommonResources-getJobStatusesForUser");return A.data}catch(B){Workflow.handleError(B)}},prapareParameters:function(A){if(valueExists(A)&&!valueExists(A.version)){A.version="2.0"}if(valueExists(A)&&valueExists(A.restriction)&&A.restriction.constructor===String&&A.restriction.length>0&&A.restriction.charAt(0)!=="{"&&A.restriction.charAt(0)!=="["){A.restriction=doSecure(A.restriction)}}});Workflow=Ab.workflow.Workflow;Ab.workflow.Callback=Base.extend({callbackFunction:null,callbackObject:null,result:null,constructor:function(A,B){this.callbackFunction=A;this.callbackObject=B},afterRuleExecuted:function(result){this.result=result;result.data=null;result.dataSet=null;if(valueExists(result.jsonExpression)&&result.jsonExpression!=""){result.data=eval("("+result.jsonExpression+")");if(valueExists(result.data.type)){result.dataSet=Ab.data.createDataSet(result.data)}else{if(valueExists(result.data.records)){result.dataSet=new Ab.data.DataSetList(result.data)}}}var fn=this.callbackFunction;if(valueExists(fn)){if(valueExists(this.callbackObject)){fn.call(this.callbackObject,result)}else{fn.call(window,result)}}}});Ab.namespace("view");Ab.view.Restriction=Base.extend({title:null,clauses:null,sql:"",constructor:function(A){this.clauses=[];this.clauses.constructor=Array.constructor;if(valueExists(A)){for(var C in A){var B=A[C];if(valueExists(B)&&B!==""){this.addClause(C,B)}}}},addClause:function(A,D,E,C,B){if(valueExists(C)&&C.constructor==Boolean){B=C;C="AND"}if(valueExists(B)&&B){this.removeClause(A)}this.clauses.push(new Ab.view.RestrictionClause(A,D,E,C))},removeClause:function(A){var B=this.findClauseIndex(A);while(B>-1){this.clauses.splice(B,1);B=this.findClauseIndex(A)}},addClauses:function(C,A,I,E){if(!valueExists(I)){I=false}var H=false;var G=false;if(valueExists(E)&&E.constructor==Object){if(valueExists(E.addForNullValue)){H=E.addForNullValue}if(!valueExists(E.addForEmptyValue)){G=E.addForEmptyValue}}if(C&&valueExists(C.clauses)){for(var D=0;D<C.clauses.length;D++){var F=C.clauses[D];if(!valueExists(F.value)){if(H){this.addClause(F.name,"","IS NULL")}continue}else{if(F.value==""&&G){this.addClause(F.name,"","IS NULL");continue}}var B=this.findClauseIndex(F.name);if(A){if(B>-1){this.clauses.splice(B,1)}this.addClause(F.name,F.value,F.op,F.relOp)}else{if(B==-1||I){this.addClause(F.name,F.value,F.op,F.relOp)}}}}},findClauseIndex:function(B){var A=-1;for(var C=0;C<this.clauses.length;C++){var D=this.clauses[C];if(D.name==B){A=C}}return A},findClause:function(B){var C=null;var A=this.findClauseIndex(B);if(A!=-1){C=this.clauses[A]}return C},findClauses:function(B){var D=[];var A=-1;for(var C=0;C<this.clauses.length;C++){var E=this.clauses[C];if(E.name==B){D.push(E)}}return D},equals:function(C){var B=true;if(this.clauses==null&&C.clauses!=null){B=false}else{if(this.clauses!=null&&C.clauses==null){B=false}else{if(this.clauses==null&&C.clauses==null){}else{if(this.clauses.length!=C.clauses.length){B=false}else{for(var D=0;D<this.clauses.length;D++){var E=this.clauses[D];var A=C.clauses[D];if(!E.equals(A)){B=false;break}}}}}}return B},getTitle:function(){return this.title?this.title:this.toString(false)},toString:function(B){var C="";for(var A=0;A<this.clauses.length;A++){if(A>0){C+=", "}C+=this.clauses[A].toString(B,false)}return C},isEmpty:function(){return this.clauses.length===0},fromJSON:function(B){Ext.apply(this,B);this.clauses=[];for(var A=0;A<B.clauses.length;A++){var C=new Ab.view.RestrictionClause();C.fromJSON(B.clauses[A]);this.clauses.push(C)}},toJSON:function(){var B={};Ext.apply(B,this);B.clauses=[];for(var A=0;A<this.clauses.length;A++){B.clauses.push(this.clauses[A].toJSON())}B.sql=this.sql;return B}});Ab.view.RestrictionClause=Base.extend({name:"",value:"",op:"=",relOp:"AND",constructor:function(A,C,D,B){this.name=A;this.value=C;if(valueExists(D)){this.op=D}if(valueExists(B)){this.relOp=B}},equals:function(A){return(this.name==A.name&&this.value==A.value&&this.op==A.op&&this.relOp==A.relOp)},toString:function(A,C){var B="";if(C){B+=(" "+this.relOp+" ")}if(A){B+=(this.name+" "+this.op+" ")}B+=this.value;return B},fromJSON:function(A){Ext.apply(this,A)},toJSON:function(){var A={};Ext.apply(A,this);return A}});function setupUrlParameters(){var E={};if(window.location.search){var A=window.location.search.substr(1).split("&");var D=A.length;for(var C=0;C<D;C++){var G=A[C].split("=");var B=G[0];var F=typeof G[1]=="string"?decodeURIComponent(G[1].replace(/\+/g," ")):null;E[B]=F}}window.location.parameters=E}Ab.view.View=new (Base.extend({panels:null,restriction:null,dialogRestriction:null,dialogParameters:null,dialog:null,dialogView:null,newRecord:false,dialogNewRecord:false,parameters:null,selectValueParameters:null,progressReportParameters:null,refreshParameters:null,defaultDialogWidth:900,defaultDialogHeight:600,defaultSelectValueDialogWidth:800,defaultSelectValueDialogHeight:500,defaultMessageDialogWidth:600,defaultMessageDialogHeight:300,defaultMessageDialogTop:5,defaultMessageDialogLeft:5,layoutManagers:null,topLevelLayoutManager:null,defaultLayoutManager:null,nestedLayoutManagers:null,viewport:null,version:"1.0",originalTitle:null,title:"",titleBarId:"viewToolbar_layoutWrapper",titleLink:"",mainView:"",logoutView:"",mainPanelId:null,parentTab:null,parentViewPanel:null,isDevelopmentMode:false,evaluationContext:null,dataSources:null,controllers:null,templates:null,contextPath:"",designInfo:{},showLoadProgress:false,progressWindow:null,progressBar:null,progressBarRequestors:0,state:0,STATE_CREATED:1,STATE_LAYOUT:2,STATE_LAYOUT_COMPLETE:3,STATE_INITIAL_DATA_FETCH:4,STATE_READY:5,sessionTimeoutDetected:false,taskRecord:null,taskInfo:null,jobStatusDialog:null,eventAggregator:null,isWithinSmartClient:(typeof (window.external)!="undefined"&&window.external!=null&&window.external.isSmartClient)?true:false,z_DEFAULT_TITLE:"ARCHIBUS Web Central",z_MESSAGE_VIEW_LOAD_FAILURE:"View loading failed: ",z_TOOLTIP_PRINT_VIEW:"<b>Print</b> this view",z_TOOLTIP_ADD_FAVORITES:"<b>Add</b> this view to MyFavorites",z_TOOLTIP_EMAIL_VIEW_LINK:"<b>Send</b> link to this view via email",z_TOOLTIP_SHOW_HELP:"Show online <b>help</b>",z_MESSAGE_ERROR_IN:"in ",z_MESSAGE_ERROR_LINE:"Line ",z_MESSAGE_ERROR_AT:" at ",z_TITLE_ERROR:"Error",z_TITLE_MESSAGE:"Message",z_TITLE_DETAILS:"Details",z_TITLE_DATA:"Data",z_TITLE_CLOSE:"Close",z_TITLE_CANCEL:"Cancel",z_TITLE_STOP_JOB:"Stop Job",z_TITLE_JOB_COMPLETE:"Completed",z_MESSAGE_LOADING:"Loading",z_TOOLTIP_ALTER_VIEW:"<b>Alter</b> this view",z_MESSAGE_ADD_MYFAVORITE:"Do you want to save this view to your My Favorites list?",z_MESSAGE_OVERWRITE_MYFAVORITE:"This view is already on your My Favorites list. Do you want to overwrite the existing one?",z_MESSAGE_JOBSTATUS:"The status for job (Job Id = jobId) is: <br><br>",z_MESSAGE_CONFIRM:"Confirm",z_MESSAGE_OK:"OK",z_MESSAGE_CANCEL:"Cancel",z_MESSAGE_YES:"Yes",z_MESSAGE_NO:"No",z_MESSAGE_SELECT_VALUE_DWG_NO_RESTRICTION:"Parent form of drawing select value must contain building and floor codes",z_MESSAGE_NO_TASK_MYFAVORITE:"MyFavorites can only be created for views on the navigator or dashboard.",z_MESSAGE_ADD_SUCCESS_MYFAVORITE:"MyFavorite written successfully",z_MESSAGE_ADD_FAIL_MYFAVORITE:"MyFavorite write failed",z_TITLE_LOG_CONSOLE:"Log Console",chartPanelIds:null,currentChartIndex:0,currentChartPanel:null,constructor:function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};YAHOO.widget.Logger.enableBrowserConsole();this.log("View constructor: start");setupUrlParameters();this.panels=new Ext.util.MixedCollection();this.controllers=new Ext.util.MixedCollection();this.dataSources=new Ext.util.MixedCollection();this.templates=new Ext.util.MixedCollection();this.layoutManagers=[];this.nestedLayoutManagers=[];this.refreshParameters={};this.taskInfo={activityId:"",processId:"",taskId:""};var D=this.getOpenerWindow();if(D!=null&&valueExists(D.View)&&D!=self){this.restriction=D.View.dialogRestriction;this.newRecord=D.View.dialogNewRecord;this.parameters=D.View.dialogConfig;var B=D.View.getControl("viewContent");if(B!=null){this.taskRecord=B.taskRecord;this.taskInfo=B.taskInfo}else{if(D.View.taskInfo!=null){this.taskInfo=D.View.taskInfo}}}else{if(top&&valueExists(top.taskInfo)){this.taskInfo=top.taskInfo}else{var E=window.location.parameters;if(valueExists(E)){var A=new Ab.view.Restriction();for(var C in E){var F=E[C];if(C!=="handler"&&C!=="viewName"&&C!="jobId"&&C!="ruleId"&&C!="showResult"&&C!="resultView"){A.addClause(C,F)}}if(A.clauses.length>0){this.restriction=A}}}}this.state=this.STATE_CREATED;Ext.QuickTips.init();this.eventAggregator=_.extend({},Backbone.Events);this.log("View constructor: end")},beforeLoad:function(){this.dateFormat=this.convertJavaDateFormat(strDateShortPattern);this.timeFormat=this.convertJavaDateFormat(timePattern);this.evaluationContext={};if(valueExists(this.user)){this.evaluationContext.user=this.user}if(valueExists(this.project)){this.evaluationContext.project=this.project}this.evaluationContext.messages=this.messages;this.evaluationContext.activityParameters=this.activityParameters},log:function(B,A,C){var C=C||"view";var D=top.YAHOO||self.YAHOO;D.log(B,A,C)},clearDialogParameters:function(){this.dialogRestriction=null;this.dialogParameters=null;this.dialogNewRecord=false;this.dialogConfig=null},init:function(){Ext.apply(Ext,{BLANK_IMAGE_URL:this.contextPath+"/schema/ab-core/libraries/ext/resources/images/default/s.gif"});if(this.type==="errorMessage"){return }this.log("View.init(): start");if(this.showLoadProgress){this.openProgressBar()}dwr.engine.setErrorHandler(Workflow.handleDwrError.createDelegate(Workflow));dwr.engine.setWarningHandler(Workflow.handleDwrWarning.createDelegate(Workflow));this.doLayout();var B=Ext.get("alterButton");if(B!=null&&(typeof this.designInfo.isAlterable=="undefined"||this.designInfo.isAlterable=="null"||this.designInfo.isAlterable=="false")){B.setVisible(false)}this.log("View.init(): end");var C=new Ext.util.TaskRunner();var A={run:function(){if(valueExists(dwr.engine._scriptSessionId)&&View.state>=View.STATE_LAYOUT_COMPLETE){C.stop(A);View.doInitialDataFetch()}},interval:100};C.start(A)},refresh:function(A,B,C){this.restriction=A;this.newRecord=B;this.controllers.each(function(E){E.afterRefresh(A,B,C)});if(this.mainPanelId!=null){var D=this.getMainPanel();if(D.useParentRestriction){D.refresh(A,B,C)}else{D.refresh()}D.show()}this.panels.each(function(E){E.updateHeight()})},clearPanelRestrictions:function(){this.panels.each(function(A){if(A.isDataBound()){A.restriction=null}})},refreshPanels:function(B,C){this.restriction=B;this.openProgressBar();try{var A=0;this.panels.each(function(F){if(F.isDataBound()&&F!==C){A++}});var D=0;this.panels.each(function(F){if(F.isDataBound()&&F!==C){for(var G in View.refreshParameters){var H=View.refreshParameters[G];F.addParameter(G,H)}F.refresh(B);D++;View.updateProgressBar(D/A)}});this.closeProgressBar()}catch(E){this.closeProgressBar()}},addRefreshParameter:function(A,B){this.refreshParameters[A]=B},reload:function(){if(this.parentViewPanel){this.parentViewPanel.reloadView()}else{if(this.parentTab){this.parentTab.loadView()}else{if(window==top){window.location.reload(false)}}}},loadView:function(B){var A=top.View.panels.get("viewContent");if(valueExists(A)){A.loadView(B)}else{window.location=B}},beforeUnload:function(){this.panels.each(function(A){A.beforeUnload()})},evaluateExpressions:function(){var A={view:this,user:this.user};var B=this.evaluateString(this.originalTitle,A);if(B!==this.title){this.setTitle(B)}this.panels.each(function(C){C.evaluateExpressions()})},evaluateString:function(C,A){var B=C;if(valueExists(C)){C=C.replace(/%{/g,"${");C=C.replace(/&apos;/g,"'");if(C.indexOf("$")>=0||C.indexOf("{if")>=0){C=C.replace(/&quot;/g,"'");C=C.replace(/&amp;/g,"&");B=C.process(A)}}return B},evaluateBoolean:function(D,C,B){if(typeof (D)=="boolean"){return D}var A=B;if(valueExists(D)&&typeof (D)=="string"){strOut=this.evaluateString(D,C);A=(strOut=="true")?true:false}return A},getMainPanel:function(){return this.getControl("",this.mainPanelId)},getViewToolbar:function(){return this.getControl("","viewToolbar")},setTitle:function(B){if(!this.originalTitle){this.originalTitle=B}this.title=B;if(valueExists(B)){document.title=B}else{document.title=Ab.view.View.z_DEFAULT_TITLE}if(this.hasTitle()){if(this.parentTab!=null){this.parentTab.setTitle(this.title)}else{var A=Ext.get("viewToolbar_title");if(A){A.dom.innerHTML=B}else{this.createTitleBar()}}}},createTitleBar:function(){var A=[{id:"alterButton",icon:Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-icon-alterview.png",tooltip:this.getLocalizedString(Ab.view.View.z_TOOLTIP_ALTER_VIEW),cls:"x-btn-icon",handler:this.onAlterView.createDelegate(this)}];if(!this.getParentDialog()&&this.taskRecord!=null&&(this.taskRecord.getValue("afm_ptasks.task_file")||this.taskRecord.getValue("afm_processes.dashboard_view"))){A.push({id:"favoritesButton",icon:Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-icon-add-my-favorites.png",tooltip:this.getLocalizedString(Ab.view.View.z_TOOLTIP_ADD_FAVORITES),cls:"x-btn-icon",handler:this.onAddFavorite.createDelegate(this)})}if(!this.isPaginatedReport()){A.push({id:"printButton",icon:Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-icon-printview.png",tooltip:this.getLocalizedString(Ab.view.View.z_TOOLTIP_PRINT_VIEW),cls:"x-btn-icon",handler:this.onPrintView.createDelegate(this)});A.push({id:"emailButton",icon:Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-icon-emailview.png",tooltip:this.getLocalizedString(Ab.view.View.z_TOOLTIP_EMAIL_VIEW_LINK),cls:"x-btn-icon",handler:this.onEmailView.createDelegate(this)})}if(this.isDevelopmentMode){A.push({id:"loggingButton",icon:Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/bug.png",tooltip:"Open Log Console",cls:"x-btn-icon",enableToggle:true,handler:this.onLogger.createDelegate(this)})}viewTitlebar=new Ab.view.Toolbar("viewToolbar",new Ab.view.ConfigObject({title:this.title,titleLink:this.titleLink,layout:"viewLayout",region:"north",cls:"viewToolbar",buttons:A}))},isPaginatedReport:function(){return(Ab.view.View.originalRequestURL.indexOf("ab-paginated-report-job.axvw")!=-1)},setToolbarButtonVisible:function(D,F){var E=this.getViewToolbar();if(!valueExists(E)){return }var C=null;for(var B=0,A;A=E.buttons[B];B++){if(A.id==D){C=A;break}}if(C==null){return }if(!valueExists(F)){F=true}C.setVisible(F)},onAlterView:function(){this.openDialog(Ab.view.View.contextPath+"/schema/ab-core/system-administration/alter-view-wizard/ab-alterview-wizard.axvw",null,true)},hasTitle:function(){return valueExistsNotEmpty(this.title)},isTopLevel:function(){return(self==top||window.name==="viewContent_iframe"||window.name==="myFavoriteView_iframe")},hasBorder:function(){return(self==top||(window.name==="viewContent_iframe"||window.name==="myFavoriteView_iframe")&&View.type==="dashboard")},getParentDialog:function(){var B=null;var A=this.getOpenerWindow();if(A!=null&&valueExists(A.View)&&A!=self){B=A.View.dialog}return B},useScroller:function(){return View.preferences.useScroller&&!View.hasNativeScroller()},hasNativeScroller:function(){return navigator.userAgent.match(/Android/i)!==null||navigator.userAgent.match(/iPhone|iPad/i)!==null},doLayout:function(){this.state=this.STATE_LAYOUT;try{var C=[{region:"center",autoScroll:true,tabPosition:"top",margins:(self==top)?Ab.view.Layout.DEFAULT_MARGINS:""}];if(this.hasTitle()&&this.parentTab==null){C.push({id:"viewToolbarRegion",region:"north",split:false,height:28,contentEl:"viewToolbar_layoutWrapper"})}this.topLevelLayoutManager=new Ab.view.Layout("viewLayout","border",null,null,C);this.panels.each(function(D){D.doLayout()});for(var A=0;A<this.layoutManagers.length;A++){this.layoutManagers[A].bindToParentLayout()}for(var A=0;A<this.layoutManagers.length;A++){this.layoutManagers[A].doLayout()}for(var A=0;A<this.layoutManagers.length;A++){this.layoutManagers[A].afterLayout()}this.controllers.each(function(D){D.afterLayout()})}catch(B){this.state=this.STATE_READY;this.showException(B,this.getLocalizedString(Ab.view.View.z_MESSAGE_VIEW_LOAD_FAILURE)+this.viewName)}},doInitialDataFetch:function(){this.log("View.doInitialDataFetch(): start");if(!this.supportsPlaceholders()){Placeholders.init({hideOnFocus:true})}try{this.afterViewLoad();this.state=this.STATE_INITIAL_DATA_FETCH;this.chartPanelIds=[];this.panels.each(function(B){if(View.type==="dashboard"&&B.type==="chart"){View.chartPanelIds.push(B.id)}});this.totalProgressSteps=0;this.panels.each(function(B){if(B.isDataBound()){View.totalProgressSteps++}});this.totalProgressSteps+=this.chartPanelIds.length;this.currentProgressStep=0;this.panels.each(function(B){if(View.type==="dashboard"&&B.type==="chart"){B.loadChartSWFIntoFlash()}else{B.initialDataFetch()}this.currentProgressStep++;if(this.showLoadProgress){this.updateProgressBar(this.currentProgressStep/this.totalProgressSteps)}});if(this.chartPanelIds.length>0){View.chartLoader.defer(1000,View)}else{this.finishInitialDataFetch()}}catch(A){if(this.showLoadProgress){this.closeProgressBar()}this.state=this.STATE_READY;this.showException(A,this.getLocalizedString(Ab.view.View.z_MESSAGE_VIEW_LOAD_FAILURE)+this.viewName)}this.log("View.doInitialDataFetch(): end")},finishInitialDataFetch:function(){this.evaluateExpressions();var B=this.getOpenerWindow();if(B!=null&&B!=self&&valueExists(B.View)){var A=this.getParentTab();if(A){this.parentTab=A;View.restriction=A.restriction;View.newRecord=A.newRecord;A.afterLoadView.defer(500,A,[this])}else{var C=this.getParentViewPanel();B.View.afterLoadDialog(this,C)}}this.state=this.STATE_READY;this.afterInitialDataFetch();if(this.showLoadProgress){this.closeProgressBar()}if(!this.supportsPlaceholders()){Placeholders.create()}},chartLoader:function(){loadChart=function(){View.currentChartPanel=View.panels.get(View.chartPanelIds[View.currentChartIndex]);if(View.currentChartPanel.showOnLoad){View.currentChartPanel.refresh()}this.currentProgressStep++;if(this.showLoadProgress){this.updateProgressBar(this.currentProgressStep/this.totalProgressSteps)}};if(View.currentChartPanel==null){loadChart();View.chartLoader.defer(300,View)}else{if(View.currentChartPanel.isLoadComplete||!View.currentChartPanel.showOnLoad){if(View.currentChartIndex==View.chartPanelIds.length-1){View.finishInitialDataFetch()}else{View.currentChartIndex++;loadChart();View.chartLoader.defer(300,View)}}else{View.chartLoader.defer(300,View)}}},afterViewLoad:function(){if(valueExists(self.afterViewLoad)){self.afterViewLoad(this)}this.controllers.each(function(A){A._afterViewLoad()})},afterInitialDataFetch:function(){if(valueExists(self.afterInitialDataFetch)){self.afterInitialDataFetch(this)}this.panels.each(function(A){A.afterInitialDataFetch()});this.controllers.each(function(A){A.afterInitialDataFetch()})},isReady:function(){return(this.state===this.STATE_READY)},addLayoutManager:function(A){this.layoutManagers.push(A);if(this.defaultLayoutManager==null){this.defaultLayoutManager=A}},addTemplate:function(A){this.templates.add(new Ab.view.Template(A))},openDialog:function(F,C,D,B,H,G,A){var E={};if(valueExists(B)&&(B.constructor==Object||typeof (B)=="object")){E=B}else{E.width=G;E.height=A}this.ensureInViewport(E);this.dialogConfig=E;this.dialogRestriction=valueExists(C)?C:null;this.dialogNewRecord=valueExists(D)?D:false;this.openExtDialog(E,F)},supportsPlaceholders:function(){var A=document.createElement("input");return"placeholder" in A},openExtDialog:function(B,A){var D={layout:"fit",height:B.height,width:B.width,modal:true,shadow:true,autoScroll:!valueExistsNotEmpty(A),closable:true,maximizable:true,collapsible:valueExists(B.collapsible)?B.collapsible:false,buttonAlign:"right",title:B.title};D.buttons=[{id:"closeButton",text:this.getLocalizedString(Ab.view.View.z_TITLE_CLOSE),handler:this.closeDialog.createDelegate(this),hidden:(valueExists(B.closeButton)&&B.closeButton==false),hideMode:"display"}];D.defaultButton="closeButton";if(valueExistsNotEmpty(A)){if(A.constructor==String){var F=new Ext.ux.ManagedIFrame({autoCreate:{width:"100%",height:"100%"}});F.setStyle("border","none");F.setSrc(A,true);D.contentEl=F}else{D.contentEl=A}}this.dialogConfig=B;var C=new Ext.Window(D);C.show();var E=C.tools.close.dom;Ext.get(E).removeAllListeners();Ext.get(E).addListener("click",this.closeDialog.createDelegate(this));if(B.useAddNewSelectVDialog==true){this.addNewSelectVDialog=C}else{this.dialog=C}if(valueExists(B.maximize)&&B.maximize){this.dialog.maximize()}},afterLoadDialog:function(B,A){this.dialogView=B;if(valueExists(this.dialogConfig)){if(valueExists(this.dialogConfig.afterViewLoad)){this.dialogConfig.afterViewLoad(B)}if(valueExists(this.dialogConfig.afterInitialDataFetch)){this.dialogConfig.afterInitialDataFetch(B)}}else{if(A){A.afterViewLoad(B)}}},openPaginatedReportDialog:function(G,C,I,F,E,B,H){var D={};if(valueExists(F)&&F.constructor==Object){D=F}else{D.width=B;D.height=H}this.ensureInViewport(D);this.dialogConfig=D;this.dialogRestriction=valueExists(C)?C:null;this.dialogParameters=valueExists(I)?I:null;var A="ab-paginated-report-job.axvw?viewName="+G;this.openExtDialog(D,A)},closeDialog:function(){if(this.dialog!=null){if(this.dialogView){this.dialogView.beforeUnload()}if(this.dialog.contentEl&&this.dialog.contentEl.destroy){this.dialog.contentEl.destroy()}this.dialog.close();this.dialog=null;this.dialogRestriction=null;this.dialogView=null}},closeThisDialog:function(){var A=this.getOpenerView();if(A!=null){A.closeDialog()}},addDialogParameter:function(A,B){if(this.dialogParameters==null){this.dialogParameters={}}this.dialogParameters[A]=B},ensureInViewport:function(B){if(!valueExists(B.width)){B.width=this.defaultDialogWidth}if(!valueExists(B.height)){B.height=this.defaultDialogHeight}var A=this.topLevelLayoutManager.viewport.getSize();if(B.width>A.width-20){B.width=A.width-20}if(B.height>A.height-80){B.height=A.height-80}else{if(B.height>A.height-60){B.height=A.height-60}else{if(B.height>A.height-40){B.height=A.height-40}else{if(B.height>A.height-20){B.height=A.height-20}}}}if(valueExists(B.x)){if(B.x+B.width>A.width){B.x=A.width-B.width-25}}else{B.x=A.width-B.width-25}if(valueExists(B.y)){if(B.y+B.height>A.height){B.y=A.height-B.height-25}}else{B.y=A.height-B.height-25}},showException:function(F,D,G,A){var D;var B;var E;if(valueExists(F.localizedMessage)){D=F.localizedMessage;if(this.isDevelopmentMode){B=F.details}}else{if(valueExists(F.cause)){D=F.cause.localizedMessage;if(this.isDevelopmentMode){B=F.cause.details}}else{var C=valueExists(F.description)?F.description:F.message;D=D+":<br/>"+C;if(this.isDevelopmentMode){B=F.message+"<br/>"+this.getLocalizedString(Ab.view.View.z_MESSAGE_ERROR_LINE)+F.lineNumber+" "+this.getLocalizedString(Ab.view.View.z_MESSAGE_ERROR_AT)+" "+F.fileName;if(F.stack&&F.stack.replace){E=F.stack.replace(/\s/g,"<br/>")}}}}this.showMessage("error",D,B,E,G,A)},message:function(C,D,B,E,F,A){this.showMessage(C,D,B,E,F,A)},showMessage:function(I,L,A,E,K,D){if(this.sessionTimeoutDetected){return }this.localizeExtMessageBox();if(arguments.length==1){Ext.MessageBox.alert(this.getLocalizedString(Ab.view.View.z_TITLE_MESSAGE),I,K);return }var J=Ext.get("message_dialog_div");if(J!=null){J.remove()}var F='<div id="message_dialog_div" class="x-hidden"><div class="x-window-header"> </div><div id="message_dialog_tabs"></div> </div>';Ext.DomHelper.insertHtml("afterBegin",document.body,F);var C=[];if(valueExistsNotEmpty(L)){C.push({title:this.getLocalizedString(Ab.view.View.z_TITLE_MESSAGE),html:prettyPrintJson(L),fitToFrame:true,autoScroll:true,bodyStyle:"padding:4px"})}if(valueExistsNotEmpty(A)){C.push({title:this.getLocalizedString(Ab.view.View.z_TITLE_DETAILS),html:prettyPrintJson(A),fitToFrame:true,autoScroll:true,bodyStyle:"padding:4px"})}if(valueExistsNotEmpty(E)){C.push({title:this.getLocalizedString(Ab.view.View.z_TITLE_DATA),html:prettyPrintJson(E),fitToFrame:true,autoScroll:true,bodyStyle:"padding:4px"})}var B=this.defaultMessageDialogLeft;var G=this.defaultMessageDialogTop;if(valueExistsNotEmpty(D)&&valueExistsNotEmpty(D.x)&&valueExistsNotEmpty(D.y)){B=D.x;G=D.y}var H=new Ext.Window({el:"message_dialog_div",layout:"fit",x:B,y:G,height:this.defaultMessageDialogHeight,width:this.defaultMessageDialogWidth,modal:true,shadow:false,autoScroll:false,closable:true,items:new Ext.TabPanel({el:"message_dialog_tabs",activeTab:0,autoTabs:true,border:false,items:C,style:"padding-bottom: 8px"}),buttons:[{text:this.getLocalizedString(Ab.view.View.z_TITLE_CLOSE),handler:function(){H.close();if(K){K()}}}]});if(I=="error"){H.setTitle(this.getLocalizedString(Ab.view.View.z_TITLE_ERROR))}else{H.setTitle(this.getLocalizedString(Ab.view.View.z_TITLE_MESSAGE))}H.show()},localizeExtMessageBox:function(){var C=this.getLocalizedString(Ab.view.View.z_MESSAGE_OK);var B=this.getLocalizedString(Ab.view.View.z_MESSAGE_CANCEL);var D=this.getLocalizedString(Ab.view.View.z_MESSAGE_YES);var A=this.getLocalizedString(Ab.view.View.z_MESSAGE_NO);Ext.MessageBox.buttonText={ok:C,cancel:B,yes:D,no:A}},confirm:function(A,B){this.localizeExtMessageBox();Ext.MessageBox.confirm(this.getLocalizedString(Ab.view.View.z_MESSAGE_CONFIRM),A,B)},prompt:function(B,A,C){this.localizeExtMessageBox();Ext.MessageBox.prompt(B,A,C)},alert:function(A,B){this.localizeExtMessageBox();Ext.MessageBox.alert(this.getLocalizedString(Ab.view.View.z_TITLE_MESSAGE),A,B)},closePanelWindows:function(){this.panels.each(function(A){if(A.isShownInWindow()){A.closeWindow()}})},selectValue:function(configOrFormId,title,fieldNames,selectTableName,selectFieldNames,visibleFieldNames,restriction,actionListener,applyFilter,showIndex,workflowRuleId,width,height,selectValueType,recordLimit,sortValues,applyVpaRestrictions,addNewDialog,showNullFilters,showAddNewButton){var config={};if(valueExists(configOrFormId)&&configOrFormId.constructor==Object){config=configOrFormId;selectValueType=configOrFormId.selectValueType}else{config.formId=configOrFormId;config.title=title;config.fieldNames=fieldNames;config.selectTableName=selectTableName;config.selectFieldNames=selectFieldNames;config.visibleFieldNames=visibleFieldNames;config.restriction=restriction;config.actionListener=actionListener;config.applyFilter=getValueIfExists(applyFilter,true);config.showIndex=getValueIfExists(showIndex,true);config.workflowRuleId=workflowRuleId;config.recordLimit=recordLimit;config.width=width;config.height=height;config.sortValues=getValueIfExists(sortValues,null);config.selectValueType=getValueIfExists(selectValueType,null);config.applyVpaRestrictions=getValueIfExists(applyVpaRestrictions,true);config.addNewDialog=getValueIfExists(addNewDialog,null);config.showNullFilters=showNullFilters;config.showAddNewButton=getValueIfExists(showAddNewButton,null)}var form=this.getControl("self",config.formId);if(form!=null){config.filterValues=form.getFieldValues()}if(valueExists(config.sortValues)){var evaluatedSortValues=eval("("+config.sortValues+")");config.sortValues=toJSON(evaluatedSortValues)}this.selectValueParameters=config;this.openDialog(null,restriction,false,{x:100,y:100,width:config.width,height:config.height});if(!valueExists(selectValueType)||selectValueType==="grid"||selectValueType==="multiple"){this.dialog.panel=new Ab.grid.SelectValue(this.dialog)}else{this.dialog.panel=new Ab.tree.SelectValueTree(this.dialog)}if(View.useScroller()){this.dialog.body.dom.style.overflow="hidden"}},selectValueFloorDrawing:function(K,I,C,H,G){var J=null;var D=new Ab.view.Restriction();var B=View.getControl("self",K);if(B!=null){var A=B.getFieldValues();for(name in A){var F=name.split(".");if(F.length==2){if(F[1]=="bl_id"||F[1]=="fl_id"||F[1]=="rm_id"){D.addClause(name,A[name]);J=F[0]}}}}if(D.clauses.length<2){this.message("error",View.getLocalizedString(Ab.view.View.z_MESSAGE_SELECT_VALUE_DWG_NO_RESTRICTION));return }var E=this;E.form=B;E.roomName=J+".rm_id";View.openDialog("ab-select-value-floor-dwg.axvw",D,false,{callback:function(L){var M=L.clauses[2].value;E.form.setFieldValue(E.roomName,L.clauses[2].value)}})},showDocument:function(E,D,A,C,B){var F=function(G){var I=false;var H=G.substring(G.lastIndexOf(".")+1);if(valueExistsNotEmpty(H)){H=H.toLowerCase();I=(H=="bmp"||H=="gif"||H=="jpg"||H=="png")}return I};if(F(C)){DocumentService.getImage(E,D,A,"1",true,{callback:function(G){if(valueExists(B)){dwr.util.setValue(B,G)}else{View.openDialog(G)}},errorHandler:function(G,H){View.showException(H)}})}else{DocumentService.show(E,D,A,C,"",true,"showDocument",{callback:function(G){dwr.engine.openInDownload(G)},errorHandler:function(G,H){View.showException(H)}})}},openProgressBar:function(B,A){this.initializeProgressBar(B);if(!valueExists(A)){A={interval:500}}this.progressBar.wait(A)},updateProgressBar:function(A){View.progressBar.updateProgress(A)},openJobProgressBar:function(F,A,B,H,D){var E=new Ext.util.TaskRunner();var G=this.initializeProgressBar(F,[{text:this.getLocalizedString(Ab.view.View.z_TITLE_STOP_JOB),handler:function(){Workflow.stopJob(A)}},{text:this.getLocalizedString(Ab.view.View.z_TITLE_CLOSE),handler:function(){E.stopAll();View.closeProgressBar()}}]);var C={run:function(){try{var I=Workflow.getJobStatus(A);if(valueExists(G)){var J=0;if(I.jobTotalNumber>0){J=I.jobCurrentNumber/I.jobTotalNumber}G.updateProgress(J);if(valueExistsNotEmpty(I.jobMessage)){View.progressWindow.setTitle(F+" - "+I.jobMessage)}}if(I.jobFinished){E.stop(C);if(valueExists(G)){View.progressWindow.buttons[0].disable();var L=View.progressWindow.title+" - "+View.getLocalizedString(Ab.view.View.z_TITLE_JOB_COMPLETE);View.progressWindow.setTitle(L)}if(valueExistsNotEmpty(B)){View.loadView(B)}else{if(valueExists(H)){(function(){View.closeProgressBar();H(I)}).defer(1000)}}}if(I.jobStatusCode==8){if(valueExists(D)){E.stop(C);(function(){View.closeProgressBar();D(I)}).defer(1000)}}}catch(K){E.stop(C);Workflow.handleError(K)}},interval:1000};E.start(C)},initializeProgressBar:function(C,B){this.progressBarRequestors++;if(this.progressWindow){return null}var A={width:500,height:"auto",closable:false,modal:true,title:valueExists(C)?C:this.getLocalizedString(this.z_MESSAGE_LOADING)};if(valueExists(B)){A.buttons=B}this.progressWindow=new Ext.Window(A);this.progressWindow.show();this.progressBar=new Ext.ProgressBar({renderTo:this.progressWindow.body});return this.progressBar},closeProgressBar:function(){if(this.progressBarRequestors>0){this.progressBarRequestors--}if(this.progressBarRequestors==0&&this.progressWindow){this.progressBar.reset();this.progressWindow.close();this.progressWindow=null}},getParentTab:function(){var A=null;var B=this.getOpenerView();var D=window.frameElement;if(D&&B){var C=D.name;B.panels.each(function(E){if(E.type==="tabs"){for(var F=0;F<E.tabs.length;F++){var G=E.tabs[F];if(G.name===C||G.name+"_frame"===C){A=G;break}}}})}return A},getParentViewPanel:function(){var A=null;var C=this.getOpenerView();var D=window.frameElement;if(D&&C){var B=D.name.substring(0,D.name.indexOf("_iframe"));A=C.panels.get(B)}return A},getOpenerWindow:function(){var B=opener;if(B==null){B=parent}if(B==null&&top){B=top.opener}if(B==null){B=window}try{var A=B.name}catch(C){B=parent}try{if(B.applicationsTabHtmlFragment){B=window}}catch(C){}return B},getOpenerView:function(){return this.getOpenerWindow().View},getWindow:function(A){var B=null;if(A=="self"||A==""||A==null){B=self}else{if(A=="parent"){B=parent}else{if(A=="top"){B=top}else{if(A=="opener"){B=opener;if(B==null){B=parent.opener}}else{if(A=="dialog"){B=this.dialog}else{B=getFrameObject(parent,A);if(B==null){B=getFrameObject(parent,A+"_iframe")}}}}}}if(B==null){B=top}if(B==null){B=this.getWindow(A+"_iframe")}return B},getView:function(B){var A=null;var C=this.getWindow(B);if(C!=null){A=C.Ab.view.View}return A},getLayoutManager:function(B){var A=this.defaultLayoutManager;if(valueExistsNotEmpty(B)){for(var C=0;C<this.layoutManagers.length;C++){if(this.layoutManagers[C].id==B){A=this.layoutManagers[C];break}}}return A},getLayoutAndRegionById:function(E){var A=null;for(var C=0;C<this.layoutManagers.length;C++){var B=this.layoutManagers[C];var D=B.getRegionNameById(E);if(D!=null){A={layout:B.id,region:D,layoutManager:B};break}}return A},registerControl:function(A,B){this.panels.add(A,B);if(this.mainPanelId==null&&A!=="viewToolbar"){this.mainPanelId=A}},getControl:function(F,D){var E=null;if(!valueExists(D)){D=F;F=self}if(typeof (F)=="string"){F=this.getWindow(F)}if(!valueExists(F.Ab)||!valueExists(F.Ab.view)||!valueExists(F.Ab.view.View)){return null}var B=F.Ab.view.View;E=B.panels.get(D);if(E==null&&F.parent!=null&&F.parent!=F){E=this.getControl(F.parent,D)}if(E==null&&B!=null){for(var C=0,A;A=B.panels.items[C];C++){if(A.contentView!=null){E=A.contentView.panels.get(D);if(D!=null){break}}}}return E},getControlsByType:function(C,D){var A=[];if(typeof (C)=="string"){C=this.getWindow(C)}var B=C.Ab.view.View;if(B){B.panels.each(function(E){if(E.type==D||!valueExistsNotEmpty(D)){A.push(E)}})}return A},getLocalizedString:function(C){var A=C;if(typeof (Ab.localization)!="undefined"){for(var B=0,D;D=Ab.localization.Localization.localizedStrings[B];B++){if(D.key3==C){(D.value=="")?A="*"+D.key3:A=D.value;return A}}}if(valueExistsNotEmpty(A)){A=convertFromXMLValue(A)}return A},currencyCodeFor:function(D){var C="";for(var B=0;B<View.project.currencies.length;B++){var A=View.project.currencies[B];if(A.symbol==D){C=A.code;break}}return C},currencySymbolFor:function(C){var D="";for(var B=0;B<View.project.currencies.length;B++){var A=View.project.currencies[B];if(A.code==C){D=A.symbol;break}}return D},isMemberOfGroup:function(B,H){if(H===""){return true}H=H.toLowerCase();for(var C=0;C<B.groups.length;C++){var E=B.groups[C];E=E.toLowerCase();if(E==="%"){return true}var I=(E.match("^%")!=null);var J=(E.match("%$")!=null);if(I){E=E.substring(1)}if(J){E=E.substring(0,E.length-1)}var A=false;var G=false;var F=false;if(I){if(J){F=true}else{A=true}}else{if(J){G=true}}var D=false;if(F){D=H.indexOf(E)>-1?true:false}else{if(A){D=(H.match(E+"$")!=null)}else{if(G){D=(H.match("^"+E)!=null)}else{D=(E.match("^"+H)!=null)}}}if(D){return true}}return false},isProcessAssignedToUser:function(B){try{var A=Workflow.callMethod("AbSystemAdministration-ConfigHandlers-isProcessAssignedToUser",B);return A.value}catch(C){Workflow.handleError(C)}},convertJavaDateFormat:function(A){A=A.replace(/H+/g,"G");A=A.replace(/h+/g,"g");A=A.replace(/m+/g,"i");A=A.replace(/s+/g,"s");A=A.replace(/S+/g,"u");A=A.replace(/a/g,"A");A=A.replace(/z/g,"T");A=A.replace(/Z/g,"O");A=A.replace(/Y{3,}/g,"X");A=A.replace(/y{3,}/g,"x");A=A.replace(/Y{1,2}/g,"y");A=A.replace(/y{1,2}/g,"y");A=A.replace(/X/g,"Y");A=A.replace(/x/g,"Y");A=A.replace(/M{4,}/g,"F");A=A.replace(/M{3}/g,"M");A=A.replace(/M{1,2}/g,"m");A=A.replace(/D+/g,"j");A=A.replace(/d+/g,"j");A=A.replace(/E{4,}/g,"l");A=A.replace(/E{1,3}/g,"D");return A},onPrintView:function(){self.focus();self.print()},onEmailView:function(){this.openDialog(Ab.view.View.contextPath+"/schema/ab-core/views/ab-system-send-view-link.axvw",null,false,0,0,750,350)},onAddFavorite:function(){var A=null;var C=this.taskRecord;if(C==null){View.showMessage("error",View.getLocalizedString(this.z_MESSAGE_NO_TASK_MYFAVORITE));return }var D=true;var H=C.getValue("afm_ptasks.task_file");if(typeof H=="undefined"){H=C.getValue("afm_processes.dashboard_view");D=false}if(typeof H=="undefined"){View.showMessage("error",View.getLocalizedString(this.z_MESSAGE_NO_TASK_MYFAVORITE));return }var F=this.user.name;var B=false;if(C.getValue("afm_ptasks.is_hotlist.raw")=="1"&&C.getValue("afm_ptasks.hot_user_name")==F){B=true;H=H.substring(0,H.indexOf("-"+F))+".axvw"}else{var G=H.substring(0,H.indexOf(".axvw"))+"-"+F+".axvw";A=Workflow.call("AbSystemAdministration-checkIfViewExists",{fileName:G});if(A.data.recordExists=="true"){B=true}}var E=B?this.getLocalizedString(Ab.view.View.z_MESSAGE_OVERWRITE_MYFAVORITE):this.getLocalizedString(Ab.view.View.z_MESSAGE_ADD_MYFAVORITE);View.confirm(E,function(I){if(I=="yes"){var J=new Object();J.viewName=H;J.isWritePtask=!B;J.taskId=D?C.getValue("afm_ptasks.task_id.key"):C.getValue("afm_processes.title");J.taskIdLocalized=D?C.getValue("afm_ptasks.task_id"):C.getValue("afm_processes.title");J.processId=D?C.getValue("afm_ptasks.process_id"):C.getValue("afm_processes.process_id");J.activityId=D?C.getValue("afm_ptasks.activity_id"):C.getValue("afm_processes.activity_id");try{Workflow.call("AbSystemAdministration-addViewToMyFavorites",J)}catch(K){View.showMessage("error",K.message)}}})},onLogger:function(){if(!this.logWindow){Ext.get("logger").setStyle("font-size","12px");this.logWindow=new Ext.Window({title:"Log Console",contentEl:"logger",autoScroll:true,collapsible:true,maximizable:true,layout:"fit",width:800,height:600,closeAction:"hide"});this.logReader=new YAHOO.widget.LogReader("logger",{newestOnTop:false,verboseOutput:false});Ext.get("yui-log-hd0").remove()}if(this.logWindow.isVisible()){this.logWindow.hide()}else{this.logWindow.show()}},getBaseUrl:function(){return window.location.protocol+"//"+window.location.host+this.contextPath},getUrlForPath:function(A){return this.getBaseUrl()+"/"+A},createController:function(D,B){var C=Ab.view.Controller.extend(B);var A=new (C);A.extend=new Base().extend;return this.initController(D,A)},extendController:function(D,C,B){var A=new (C.extend(B));return this.initController(D,A)},initController:function(B,A){A.id=B;A.view=this;this.controllers.add(B,A);A.setElement(jQuery("body"),false);A.delegateEvents(A.events);if(A.afterCreate){A.afterCreate()}if(this.state===this.STATE_READY){A._afterViewLoad();A.afterInitialDataFetch()}return A},openJobStatusDialog:function(jobId){var result=Workflow.getJobStatus(jobId);if(result.code=="executed"){if(valueExists(result.jsonExpression)&&result.jsonExpression!=""){result.data=eval("("+result.jsonExpression+")");var strJobStatus=this.getLocalizedString(Ab.view.View.z_MESSAGE_JOBSTATUS);strJobStatus=strJobStatus.replace(/jobId/g,jobId);var job_status_div=Ext.get("job_status_div");if(job_status_div==null){var html='<div id="job_status_div" class="x-hidden"><div class="x-window-header"> </div><div id="x-window-body">'+strJobStatus+result.data.jobStatus+"</div></div>";Ext.DomHelper.insertHtml("afterBegin",document.body,html)}else{var html='<div class="x-window-header"> </div><div id="x-window-body">'+strJobStatus+result.data.jobStatus+"</div>";Ext.DomHelper.overwrite(job_status_div,html,true)}if(!this.jobStatusDialog){this.jobStatusDialog=new Ext.Window({title:"Job Status",contentEl:"job_status_div",autoScroll:true,collapsible:true,maximizable:true,layout:"fit",width:400,height:200,closeAction:"hide"})}this.jobStatusDialog.show()}}},closeJobStatusDialog:function(){if(!this.jobStatusDialog){this.jobStatusDialog.hide()}}}));View=Ab.view.View;AFM=Ab;Ab.view.ViewDef=Base.extend({viewName:null,tableGroupIndex:0,tableName:null,fieldNames:null,dataSourceId:null,constructor:function(E,A,C,D,B){this.viewName=E;if(typeof C!="undefined"){this.tableName=C;this.fieldNames=D}this.tableGroupIndex=A;if(typeof B!="undefined"){this.dataSourceId=B}},getFields:function(){return this.fieldNames}});Ab.view.Controller=Backbone.View.extend({inherit:function(){},_afterViewLoad:function(){var A=this;View.panels.eachKey(function(C){var B=View.panels.get(C);A.autoWirePanel(B)});View.dataSources.eachKey(function(B){var C=View.dataSources.get(B);A[B]=C});this.afterViewLoad()},afterLayout:function(){},afterViewLoad:function(){},afterInitialDataFetch:function(){},afterRefresh:function(A,B,C){},autoWirePanel:function(B){var A=this;var D=B.id;A[D]=B;B.actions.each(function(G){var F=A[D+"_on"+capitalizeFirst(G.id)];if(valueExists(F)&&F.constructor==Function){B.addActionListener(G.id,F,A)}});if(B.actionbar){B.actionbar.actions.each(function(G){var F=A[D+"_on"+capitalizeFirst(G.id)];if(valueExists(F)&&F.constructor==Function){B.addActionbarActionListener(G.id,F,A)}})}B.eventListeners.eachKey(function(F){A.autoWireEventListener(B,F)});this.autoWireEventListener(B,"onClickItem");this.autoWireEventListener(B,"onMultipleSelectionChange");var C=A[D+"_onDragDrop"];if(valueExists(C)){B.addDragDropListener(C,A)}var E=A[D+"_onDragOver"];if(valueExists(E)){B.addDragOverListener(E,A)}if(B.type=="form"){this.autoWireFormFields(B)}else{if(B.type=="grid"){this.autoWireGridRows(B)}}},autoWireFormFields:function(B){var A=this;B.fields.each(function(C){C.actions.each(function(D){A.autoWireActionListener(B,C,D)})});B.fieldsets.each(function(C){C.actions.each(function(D){A.autoWireActionListener(B,C,D)})})},autoWireGridRows:function(B){var A=this;B.gridRows.each(function(C){C.actions.each(function(D){A.autoWireActionListener(B,C,D)})})},autoWireEventListener:function(A,B){var C=this[A.id+"_"+B];if(valueExists(C)&&C.constructor==Function){A.addEventListener(B,C,this)}},autoWireActionListener:function(A,E,D){var F=A.id+"_on"+capitalizeFirst(D.originalId);var B=this[F];if(!valueExists(B)){F=A.id+"_"+D.originalId+"_onClick";B=this[F]}if(valueExists(B)&&B.constructor==Function){var C=B.createDelegate(this,[E,D]);D.addListener(C)}},on:function(A,B){View.eventAggregator.on(A,B,this)},trigger:function(B,D,C,A){View.eventAggregator.trigger(B,D,C,A)}});function capitalizeFirst(B){var A=B.substring(0,1).toUpperCase()+B.substring(1,B.length);return A.replace(".","_")}Ab.view.Template=Base.extend({id:"",template:null,constructor:function(B){this.id=B;var A=jQuery("#"+B).html();this.template=Handlebars.compile(A)},evaluate:function(A){return this.template(A)},render:function(D,B,A){var C=this.evaluate(D);if(valueExists(B)){if("before"===A){jQuery(B).prepend(C)}else{jQuery(B).append(C)}}return C}});Ab.view.LocalStorageProvider=Base.extend({},{load:function(id,data){if(localStorage){var json=eval("("+localStorage.getItem(id)+")");data.fromJSON(json)}},save:function(B,A){if(localStorage){localStorage.setItem(B,toJSON(A.toJSON()))}}});Ab.view.Sidecar=Backbone.Model.extend({defaults:{columns:[],levels:[],recentSearches:[],maxRecentSearches:15},initialize:function(B){this.load();var A=this.get("maxRecentSearches");this.get("recentSearches").add=function(D){var E=null;for(var C=0;C<this.length;C++){if(this[C].equals(D)){E=this[C];break}}if(!E&&D){this.push(D)}if(this.length>A){this.shift()}}},fromJSON:function(D){this.set(this.defaults);if(D){this.set(D);var A=[];for(var C=0;C<D.recentSearches.length;C++){var B=new Ab.view.Restriction();B.fromJSON(D.recentSearches[C]);A.push(B)}this.set("recentSearches",A)}},toJSON:function(){var A={};_.each(this.attributes,function(C,B){if(C instanceof Backbone.Collection){A[B]=C.toJSON()}else{A[B]=_.clone(C)}});A.recentSearches=[];_.each(this.get("recentSearches"),function(B){A.recentSearches.push(B.toJSON())});return A},load:function(){Ab.view.LocalStorageProvider.load(this.get("panelId"),this)},save:function(){Ab.view.LocalStorageProvider.save(this.get("panelId"),this)}});Ab.namespace("command");Ab.command.Command=Base.extend({type:"",parentPanelId:"",enabled:true,target:"self",panelId:"",applyParentRestriction:true,applySelectionRestriction:true,applyMultipleSelectionRestriction:true,applyPrimaryKeyRestriction:false,clearRestriction:false,restriction:null,result:true,context:null,constructor:function(A){this.type=A.type;if(valueExists(A.target)){this.target=A.target}if(valueExists(A.parentPanelId)){this.parentPanelId=A.parentPanelId}if(valueExists(A.panelId)){this.panelId=A.panelId}if(valueExists(A.applyParentRestriction)){this.applyParentRestriction=(A.applyParentRestriction=="true")}if(valueExists(A.applySelectionRestriction)){this.applySelectionRestriction=(A.applySelectionRestriction=="true")}if(valueExists(A.applyMultipleSelectionRestriction)){this.applyMultipleSelectionRestriction=(A.applyMultipleSelectionRestriction=="true")}if(valueExists(A.applyPrimaryKeyRestriction)){this.applyPrimaryKeyRestriction=(A.applyPrimaryKeyRestriction=="true")}if(valueExists(A.clearRestriction)){this.clearRestriction=(A.clearRestriction=="true")}},getTargetView:function(){return Ab.view.View.getView(this.target)},getParentPanel:function(){var A=null;if(this.parentPanelId!=""){A=View.getControl("self",this.parentPanelId)}return A},getTargetPanel:function(){var A=this.panelId;if(!valueExistsNotEmpty(A)){A=this.parentPanelId}return View.getControl(this.target,A)},getRestriction:function(){var C=null;if(this.applySelectionRestriction){C=this.restriction}if(C==null){var A=this.getParentPanel();if(A!=null){var B=null;if(this.applyParentRestriction){B=A.restriction}var D=null;if(A.type=="form"){if(this.applyParentRestriction){D=A.getFieldRestriction(true)}else{if(this.applyPrimaryKeyRestriction){D=A.getPrimaryKeyFieldValues(true)}}}else{if(A.type=="grid"){if(this.applyMultipleSelectionRestriction&&A.multipleSelectionEnabled){D=A.getPrimaryKeysForSelectedRows();B=null}}}if(typeof B!="string"&&B!=null&&D!=null&&A.type!="form"){C=B;C.addClauses(D)}else{if(B!=null){C=B}else{if(D!=null){C=D}}}}}return C},trimArrayValues:function(A){if(typeof A==="object"&&A&&A instanceof Array){for(var B=0;B<A.length;B++){A[B]=trim(A[B])}}else{if(typeof A==="string"){A=trim(A)}}return A},handle:function(A){if(typeof (A)!="undefined"){this.context=A;this.context.command=this}this.result=true}});Ab.command.commandChain=Ab.command.Command.extend({commands:null,constructor:function(B,A){this.inherit({type:"commandChain",parentPanelId:B});if(typeof (A)!="undefined"){this.restriction=A}this.commands=new Array()},addCommand:function(A){A.restriction=this.restriction;if(this.parentPanelId!=""){A.parentPanelId=this.parentPanelId}this.commands.push(A)},addCommands:function(A){for(var C=0;C<A.length;C++){var E=A[C];if(E!=null){var D=E.type;var B=Ab.command[D];if(B==null){B=Ab.command.Command}var F=new B(E);this.addCommand(F)}}},handle:function(B){if(!this.enabled){return }this.inherit(B);if(valueExists(B)){this.context=B}else{this.context={}}for(var A=0;A<this.commands.length;A++){var D=this.commands[A];if(!D.enabled){continue}D.restriction=this.restriction;try{D.handle(this.context)}catch(C){if(typeof View!="undefined"){View.showMessage("error",C.message,"Line "+C.lineNumber+" at "+C.fileName,C.stack)}this.result=false;break}if(!D.result){this.result=false;break}}}});Ab.command.openView=Ab.command.Command.extend({viewName:"",fieldNames:[],constructor:function(A){this.inherit(A);this.viewName=A.viewName;if(valueExists(A.fieldNames)){this.fieldNames=A.fieldNames.split(",")}},handle:function(B){this.inherit(B);var A=this.viewName+"?";var C=this;_.each(this.fieldNames,function(F){var E=C.getFieldValue(F);var D=F.indexOf(".");if(D!=-1){F=F.slice(D+1)}if(valueExistsNotEmpty(E)){A+=F+"="+E+"&"}});View.dialogRestriction=null;window.open(A)},getFieldValue:function(E){var C=null;var B=this.getTargetPanel();if(B&&B.type=="grid"){var D=B.getSelectedRecords();if(D.length>0){var A=D[0];C=A.getValue(E)}}return C}});Ab.command.openDialog=Ab.command.Command.extend({viewName:"",newRecord:false,x:null,y:null,width:null,height:null,dialogTitle:"",closeButton:true,maximize:false,constructor:function(A){this.inherit(A);this.viewName=A.viewName;if(valueExists(A.newRecord)&&A.newRecord=="true"){this.newRecord=true}if(valueExists(A.width)){this.width=parseInt(A.width)}if(valueExists(A.height)){this.height=parseInt(A.height)}if(A.closeButton==false||A.closeButton=="false"){this.closeButton=false}if(valueExists(A.maximize)&&A.maximize=="true"){this.maximize=true}if(valueExists(A.dialogTitle)){this.dialogTitle=A.dialogTitle}},handle:function(D){this.inherit(D);if(D&&D.clientX&&!this.x){this.x=D.clientX}if(D&&D.clientY&&!this.y){this.y=D.clientY}var C=this.getTargetView();var B=this.getParentPanel();if(valueExistsNotEmpty(this.viewName)){C.dialogOpenerPanel=B;C.openDialog(this.viewName,this.getRestriction(),this.newRecord,this.getWindowConfig(D))}else{var A=this.getTargetPanel();A.refresh(this.getRestriction(),this.newRecord);A.showInWindow(this.getWindowConfig(D))}},getWindowConfig:function(A){return{anchor:(A&&A.target)||(A&&A.el?A.el.dom:null),x:this.x,y:this.y,width:this.width,height:this.height,title:this.dialogTitle,closeButton:this.closeButton,maximize:this.maximize,collapsible:false}}});Ab.command.closeDialog=Ab.command.Command.extend({constructor:function(A){this.inherit(A)},handle:function(C){this.inherit(C);var B=this.getParentPanel();if(B&&B.isShownInWindow()){B.closeWindow()}else{if(B&&B.parentTab&&B.parentTab.parentPanel.isShownInWindow()){B.parentTab.parentPanel.closeWindow()}else{if(View.getOpenerView().addNewSelectVDialog){View.getParentDialog().panel.refresh();View.getOpenerView().addNewSelectVDialog.hide()}else{var A=View.getOpenerWindow().View;if(A!=null){A.closeDialog()}}}}}});Ab.command.showPanel=Ab.command.Command.extend({newRecord:false,show:true,includeHeader:true,constructor:function(A){this.inherit(A);if(valueExists(A.newRecord)&&A.newRecord=="true"){this.newRecord=true}if(valueExists(A.show)&&(A.show==="false"||!A.show)){this.show=false}if(valueExists(A.includeHeader)&&A.includeHeader=="true"){this.includeHeader=true}},handle:function(C){this.inherit(C);var B=this.getTargetPanel();if(B!=null){var A=this.getRestriction();if(this.clearRestriction){B.restriction=null;A=null}if(this.show){B.refresh(A,this.newRecord)}B.show(this.show,this.includeHeader)}}});Ab.command.clearPanel=Ab.command.Command.extend({constructor:function(A){this.inherit(A)},handle:function(B){this.inherit(B);var A=this.getTargetPanel();if(A!=null){A.clear()}}});Ab.command.loadView=Ab.command.Command.extend({fileName:"",constructor:function(A){this.inherit(A);this.fileName=A.fileName},handle:function(C){this.inherit(C);var B=this.getTargetPanel();if(B!=null){var A=this.getRestriction();B.loadView(this.fileName,A)}}});Ab.command.showRegion=Ab.command.Command.extend({layout:"mainLayout",region:"",action:"show",constructor:function(A){this.inherit(A);Ext.apply(this,A)},handle:function(C){this.inherit(C);var B=this.getTargetView();var A=B.getLayoutManager(this.layout);if(A){if(this.action=="show"){A.expandRegion(this.region)}else{if(this.action=="hide"){A.collapseRegion(this.region)}else{if(A.isRegionCollapsed(this.region)){A.expandRegion(this.region)}else{A.collapseRegion(this.region)}}}}}});Ab.command.FormCommand=Ab.command.Command.extend({formId:null,workflowRuleId:null,constructor:function(A){this.inherit(A);if(valueExists(A.formId)){this.formId=A.formId}if(valueExists(A.workflowRuleId)){this.workflowRuleId=A.workflowRuleId}},getForm:function(A){var B=null;if(this.formId==null){B=this.getParentPanel()}else{B=this.getTargetPanel()}return B}});Ab.command.saveForm=Ab.command.FormCommand.extend({constructor:function(A){this.inherit(A)},handle:function(A){this.inherit(A);var B=this.getForm();if(B!=null){this.result=B.save(this.workflowRuleId)}}});Ab.command.clearForm=Ab.command.FormCommand.extend({constructor:function(A){this.inherit(A)},handle:function(A){this.inherit(A);var B=this.getForm();if(B!=null){this.result=B.clear()}}});Ab.command.deleteRecord=Ab.command.FormCommand.extend({z_CONFIRM_DELETE_MESSAGE:"Record [{0}] will be deleted.",z_MESSAGE_INVALID_PK_FIELD:"One or more required fields need a value.",z_CONFIRM_DELETE_MISMATCH_MESSAGE:"Record to delete does not match the record that was selected.",constructor:function(A){this.inherit(A)},handle:function(C){this.inherit(C);var B=this.getForm();var D=B.getPrimaryKeyFields();var N=B.record;var K=B.getPrimaryKeyFieldValues();var L=true;var E={};for(var H=0;H<D.length;H++){var P=D[H];var A=N.getValue(P);var G=K[P];var F=B.fields.get(P).fieldDef;if(F.isDate&&A.constructor!=String){A=A.format(F.getDateFormat(false))}if(F.isTime&&A.constructor!=String){A=A.format(F.getTimeFormat(false))}if(A!=G){L=false}E[D[H]]=A}var I=(L)?B.getPrimaryKeyFieldValues():E;var M="";for(H in I){if(!valueExistsNotEmpty(I[H])){alert(Ab.view.View.getLocalizedString(this.z_MESSAGE_INVALID_PK_FIELD));this.result=false;return }M+=I[H]+" "}var J=(!L)?Ab.view.View.getLocalizedString(this.z_CONFIRM_DELETE_MISMATCH_MESSAGE)+"\n":"";J+=String.format(Ab.view.View.getLocalizedString(this.z_CONFIRM_DELETE_MESSAGE),trim(M));var O=confirm(J);if((B!=null)&&(O)){this.result=B.deleteRecord()}else{this.result=false}}});Ab.command.TabPageCommand=Ab.command.Command.extend({tabPanelId:null,tabPageName:"",constructor:function(A){this.inherit(A);if(valueExists(A.tabPanelId)){this.tabPanelId=A.tabPanelId}if(valueExists(A.tabPageName)){this.tabPageName=A.tabPageName}},getTabs:function(){var B=null;var A=this.getTargetView();if(valueExists(this.tabPanelId)){B=A.getControl("",this.tabPanelId)}else{var C=A.getControlsByType(self,"tabs");if(C.length==0){C=A.getControlsByType(parent,"tabs")}B=C[0]}return B}});Ab.command.selectTabPage=Ab.command.TabPageCommand.extend({newRecord:false,constructor:function(A){this.inherit(A);if(valueExists(A.newRecord)&&A.newRecord=="true"){this.newRecord=true}},handle:function(C){this.inherit(C);var A=this.getRestriction();var B=this.getTabs();if(B){B.selectTab(this.tabPageName,A,this.newRecord,this.clearRestriction)}}});Ab.command.createTabPage=Ab.command.TabPageCommand.extend({viewName:"",newRecord:false,constructor:function(A){this.inherit(A);this.viewName=A.viewName;if(valueExists(A.newRecord)&&A.newRecord=="true"){this.newRecord=true}},handle:function(C){this.inherit(C);var A=this.getRestriction();var B=this.getTabs();if(B){B.createTab(this.viewName,A,this.newRecord)}}});Ab.command.closeTabPage=Ab.command.TabPageCommand.extend({constructor:function(A){this.inherit(A)},handle:function(B){this.inherit(B);var A=this.getTabs();if(A){A.closeTab(this.tabPageName)}}});Ab.command.workflowRule=Ab.command.Command.extend({ruleId:"",showMessageAsPopup:false,constructor:function(A){this.inherit(A);if(typeof (A.ruleId)!="undefined"){this.ruleId=A.ruleId}if(valueExists(A.showMessageAsPopup)&&A.showMessageAsPopup=="true"){this.showMessageAsPopup=true}},getParameters:function(){var C=new Object();var A=this.getParentPanel();if(A!=null){C.viewName=A.viewDef.viewName;C.groupIndex=(typeof A.viewDef.tableGroupIndex=="undefined")?0:A.viewDef.tableGroupIndex;C.controlId=(typeof A.panelId=="undefined")?A.id:A.panelId;C.version=Ab.view.View.version;C.dataSourceId=A.dataSourceId;if(A.type=="form"){C.fieldValues=toJSON(A.getFieldValues());C.oldFieldValues=toJSON(A.getOldFieldValues())}else{if(A.type=="grid"){if(this.applyMultipleSelectionRestriction&&A.multipleSelectionEnabled){C.records=toJSON(A.getPrimaryKeysForSelectedRows())}else{var B=this.getRestriction();if(B!=null){C.fieldValues=toJSON(B)}}}}}return C},handle:function(B){this.inherit(B);var A=Ab.workflow.Workflow.runRuleAndReturnResult(this.ruleId,this.getParameters());if(A.code=="executed"){this.result=true;this.context.message=A.message;this.context.data=A.data;this.context.dataSet=A.dataSet;if(this.showMessageAsPopup){View.alert(A.message)}}else{this.result=false;Ab.workflow.Workflow.handleError(A)}}});Ab.command.startJob=Ab.command.workflowRule.extend({z_MESSAGE_PROGRESS_TITLE:"Job Progress",useSingleJobView:false,messageId:null,resultView:"",constructor:function(A){this.inherit(A);if(valueExists(A.useSingleJobView)&&A.useSingleJobView=="true"){this.useSingleJobView=true}if(valueExists(A.messageId)){this.messageId=A.messageId}if(valueExists(A.resultView)){this.resultView=A.resultView}},handle:function(D){var E="";if(valueExists(this.messageId)){E=getMessage(this.messageId)}else{E=View.getLocalizedString(this.z_PROGRESS_TITLE)}try{var A=Workflow.startJob(this.ruleId);if(this.useSingleJobView){var C="ab-paginated-report-job.axvw?jobId="+A;if(valueExistsNotEmpty(this.resultView)){C=C+"&resultView="+this.resultView}var B=this.getTargetView();B.openDialog(C,"","",false)}else{View.openJobProgressBar(E,A,this.resultView)}}catch(F){Workflow.handleError(F)}}});Ab.command.deleteSelectedRows=Ab.command.workflowRule.extend({constructor:function(A){this.inherit(A);this.ruleId="AbCommonResources-deleteDataRecords"}});Ab.command.documentCommand=Ab.command.openDialog.extend({tableName:"",fieldName:"",constructor:function(A){this.inherit(A);this.tableName=A.tableName;this.fieldName=A.fieldName;this.closeButton=false;this.applyParentRestriction=false},handle:function(C){var B=this.getTargetView();var A=this.getParentPanel();var D=B.dataSources.get(A.dataSourceId).primaryKeyFields;B.dialogDocumentParameters={tableName:this.tableName,fieldName:this.fieldName,fieldValue:A.getFieldValue(this.tableName+"."+this.fieldName),primaryKeyFields:D,panel:A};this.inherit(C)}});Ab.command.checkInNewDocument=Ab.command.documentCommand.extend({constructor:function(A){this.inherit(A);this.viewName="ab-doc-checkin.axvw";this.width=600;this.height=400}});Ab.command.checkInNewDocumentVersion=Ab.command.documentCommand.extend({constructor:function(A){this.inherit(A);this.viewName="ab-doc-checkin-new-version.axvw";this.width=600;this.height=400}});Ab.command.checkOutDocument=Ab.command.documentCommand.extend({constructor:function(A){this.inherit(A);this.viewName="ab-doc-checkout.axvw"}});Ab.command.showDocument=Ab.command.documentCommand.extend({displayFieldName:"",constructor:function(A){this.inherit(A);this.displayFieldName=A.displayFieldName},handle:function(){var C=this.getParentPanel();var D=C.getFieldValue(this.tableName+"."+this.fieldName);var B=this.getKeysFromForm(C);var A=valueExistsNotEmpty(this.displayFieldName)?C.getFieldElementName(this.displayFieldName):null;View.showDocument(B,this.tableName,this.fieldName,D,A)},getKeysFromForm:function(D){var F=[];var G=D.getPrimaryKeyFields();for(var B=0,A;A=G[B];B++){if(A.indexOf(this.tableName+".")==0&&A!=this.tableName+"."+this.fieldName){var E=D.getFieldValue(A);F.push({name:A,value:E})}}var C={};for(var B=0,H;H=F[B];B++){C[H.name.substring(H.name.lastIndexOf(".")+1)]=H.value}return C}});Ab.command.lockDocument=Ab.command.documentCommand.extend({constructor:function(A){this.inherit(A);this.viewName="ab-doc-lock.axvw";this.width=500;this.height=250}});Ab.command.deleteDocument=Ab.command.documentCommand.extend({constructor:function(A){this.inherit(A);this.viewName="ab-doc-mark-deleted.axvw";this.width=500;this.height=250}});Ab.command.callFunction=Ab.command.Command.extend({functionName:"",constructor:function(A){this.inherit(A);this.functionName=A.functionName},handle:function(context){this.inherit(context);var fn=window[this.functionName];if(fn&&fn.call){this.context.restriction=this.getRestriction();var result=fn(context);if(valueExists(result)){this.result=result}}else{var script=this.functionName.replace(/&quot;/g,"'");eval(script)}}});Ab.command.exportPanel=Ab.command.Command.extend({z_PROGRESS_MESSAGE:"Exporting data, please wait",z_ERROR_MESSAGE:"Export failed",outputType:"",file:"",exportReportViewName:null,openDialog:true,useDialog:false,isExportDocument:false,isImportDocument:false,printRestriction:false,orientation:null,handler:null,recordLimit:null,pageSize:null,constructor:function(A){this.inherit(A);if(valueExists(A.outputType)){this.outputType=A.outputType}if(valueExists(A.viewName)){this.exportReportViewName=A.viewName}if(valueExists(A.file)){this.file=A.file}if(valueExists(A.openDialog)&&A.openDialog=="false"){this.openDialog=false}if(valueExists(A.useDialog)&&(A.useDialog=="true")){this.useDialog=true}if(valueExists(A.isExportDocument)&&A.isExportDocument=="true"){this.isExportDocument=true}if(valueExists(A.isImportDocument)&&A.isImportDocument=="true"){this.isImportDocument=true}if(valueExists(A.printRestriction)&&A.printRestriction=="true"){this.printRestriction=true}if(valueExistsNotEmpty(A.orientation)){this.orientation=A.orientation}if(valueExists(A.handler)){this.handler=A.handler}if(valueExists(A.recordLimit)){this.recordLimit=A.recordLimit}if(valueExists(A.pageSize)){this.pageSize=A.pageSize}},handle:function(B){this.inherit(B);var A=this.getTargetPanel();if(A!=null){if(this.clearRestriction){A.restriction=null}if(this.outputType==="pdf"&&A.type!="htmlChart"){if(valueExistsNotEmpty(this.file)){this.generatePDFReport.defer(500,this,[A])}else{this.openReport(A)}}else{if(this.outputType==="xls"||this.outputType==="docx"||this.outputType==="jpg"||this.outputType==="png"||(this.outputType==="pdf"&&A.type=="htmlChart")){this.openReport(A)}else{if(this.outputType==="txfr"){this.openDataTransferUI(A)}}}}},openReport:function(B){View.openProgressBar(View.getLocalizedString(this.z_PROGRESS_MESSAGE));try{if(valueExists(B)&&B.callReportJob){var D={outputType:this.outputType,printRestriction:this.printRestriction,orientation:this.orientation,handler:this.handler,recordLimit:this.recordLimit,pageSize:this.pageSize};var A=B.callReportJob(D);if(B.type!="htmlChart"){this.displayReport(A,this.outputType)}}}catch(E){var C=View.getLocalizedString(this.z_ERROR_MESSAGE);View.showMessage("error",C,E.message,E.data)}View.closeProgressBar()},displayReport:function(A,D){if(A!=null){var C=Workflow.getJobStatus(A);while(C.jobFinished!=true&&C.jobStatusCode!=8){C=Workflow.getJobStatus(A)}if(C.jobFinished){var B=C.jobFile.url;if(valueExists(D)&&D==="pdf"){window.open(B)}else{window.location=B}}}},openDataTransferUI:function(D){var G=D.viewDef.viewName+".axvw";var A=D.dataSourceId;var F=D.title;var C=toJSON(D.restriction);var E="ab-data-transfer-main.axvw?viewName="+G+"&panelId="+D.id;if(this.isExportDocument){E=E+"&isExportDocument=true"}else{E=E+"&isExportDocument=false"}if(this.isImportDocument){E=E+"&isImportDocument=true"}else{E=E+"&isImportDocument=false"}var B=this.getTargetView();if(this.useDialog){B.progressReportParameters={};B.progressReportParameters.viewName=G;B.progressReportParameters.panelId=D.id;B.progressReportParameters.isExportDocument=this.isExportDocument;B.progressReportParameters.isImportDocument=this.isImportDocument;B.openDialog(E,"","",false);this.styleInteractiveDialog(B)}else{window.open(E)}},generatePDFReport:function(B){View.openProgressBar(View.getLocalizedString(this.z_PROGRESS_MESSAGE));try{B.exportType=this.outputType;B.exportFile=this.file;if(valueExistsNotEmpty(this.orientation)){B.orientation=this.orientation}if(valueExists(this.exportReportViewName)){B.exportReportViewName=this.exportReportViewName}B.refresh(B.restriction,this.newRecord);B.exportType="";B.exportFile="";var C=B.exportURL;if(this.openDialog&&C!=null&&C!=""){var A=this.getTargetView();A.openDialog(C,"","",{collapsible:false})}B.show(this.show);View.closeProgressBar()}catch(E){View.closeProgressBar();var D=View.getLocalizedString(this.z_ERROR_MESSAGE);View.showMessage("error",D,E.message,E.data)}},styleInteractiveDialog:function(A){A.dialog.maximize();if(A.dialog.tools.restore!=null){A.dialog.tools.restore.hide()}if(A.dialog.tools.maximize!=null){A.dialog.tools.maximize.hide()}if(A.dialog.tools.close!=null){A.dialog.tools.close.hide()}if(A.dialog.tools.toggle!=null){A.dialog.tools.toggle.hide()}if(A.dialog.buttons!=null&&A.dialog.buttons.length>0){A.dialog.buttons[0].hide()}}});Ab.command.showHelp=Ab.command.Command.extend({file:"",openDialog:true,width:null,height:null,constructor:function(A){this.inherit(A);if(valueExists(A.file)){this.file=A.file}if(valueExists(A.openDialog)&&A.openDialog=="false"){this.openDialog=false}if(valueExists(A.width)){this.width=parseInt(A.width)}if(valueExists(A.height)){this.height=parseInt(A.height)}},handle:function(B){this.inherit(B);this.normalizeLegacyHelpLinks();if(this.openDialog&&this.file!=""){var A=this.getTargetView();openNewContent(this.file,"","toolbar=yes,menubar=no,resizable=yes,scrollbars=yes,status=yes,width=800,height=600")}},normalizeLegacyHelpLinks:function(){var A=("/help/user");var B=("/help/system/Content/");var D=View.helpLink.replace("(user.helpExtension)",View.user.helpExtension)+"#..";var C=View.systemAdministrationHelpLink+"#";if(this.file.indexOf(A)===0){this.file=D+this.file.substring(A.length)}else{if(this.file.indexOf(B)===0){this.file=C+this.file.substring(B.length)}}}});Ab.command.selectFields=Ab.command.Command.extend({panelId:"",openDialog:true,width:null,height:null,constructor:function(A){this.inherit(A);if(valueExists(A.panelId)){this.panelId=A.panelId}if(valueExists(A.openDialog)&&A.openDialog=="false"){this.openDialog=false}if(valueExists(A.width)){this.width=parseInt(A.width)}if(valueExists(A.height)){this.height=parseInt(A.height)}},handle:function(C){this.inherit(C);if(this.openDialog){var A=this.getTargetPanel();var B=View.openDialog("ab-select-fields.axvw","",false,{width:465,height:430,isDialog:true,closeButton:false,panel:A})}}});Ab.command.captureSvgImage=Ab.command.Command.extend({id:"",displayImage:true,functionName:null,constructor:function(A){this.inherit(A);if(valueExists(A.id)){this.id=A.id}if(valueExists(A.displayImage)){this.displayImage=A.displayImage}if(valueExists(A.functionName)){this.functionName=A.functionName}},handle:function(context){this.inherit(context);var imageCapture=new ImageCapture();var callback=window[this.functionName];if(!callback&&this.functionName){var script=this.functionName.replace(/&quot;/g,"'");callback=eval(script)}var divId;if(this.id){divId=this.id}else{if(this.panelId){divId=this.panelId}else{if(this.parentPanelId){divId=this.parentPanelId}}}imageCapture.captureImage(divId,this.displayImage,callback)}});Ab.command.selectValue=Ab.command.Command.extend({z_MESSAGE_SELECT_VALUE_DWG_PARAMS:"Command must use the fieldNames attribute",fieldNames:null,selectFieldNames:null,visibleFieldNames:null,sortFieldNames:null,dialogTitle:"",dialogRestriction:null,actionListener:null,applyFilter:true,showIndex:true,workflowRuleId:null,selectValueType:"grid",recordLimit:null,applyVpaRestrictions:true,showNullFilters:false,autoComplete:true,minLength:1,maxResults:0,dataSource:"",addNewDialog:null,showDialog:true,showAddNewButton:null,beforeSelect:null,constructor:function(A){this.inherit(A);Ext.apply(this,A);if(this.autoComplete=="false"){this.autoComplete=false}if(this.showIndex=="false"){this.showIndex=false}if(this.applyFilter=="false"){this.applyFilter=false}if(this.applyVpaRestrictions=="false"){this.applyVpaRestrictions=false}if(!valueExists(this.visibleFieldNames)){this.visibleFieldNames=this.selectFieldNames}if(this.showNullFilters=="true"){this.showNullFilters=true}if(this.showDialog=="false"){this.showDialog=false}this.dialogRestriction=Ext.util.Format.htmlDecode(A.restriction)},handle:function(context){if(valueExistsNotEmpty(this.beforeSelect)){if(!this.beforeSelect.call){this.beforeSelect=window[this.beforeSelect]}if(this.beforeSelect.call){this.beforeSelect.call(window,this)}}if(!this.showDialog){return }var sortValues=[];if(valueExists(this.sortFieldNames)){var sortValuesKeys=this.trimArrayValues(this.sortFieldNames.split(","));for(var i=0;i<sortValuesKeys.length;i++){sortValues.push({fieldName:sortValuesKeys[i],sortOrder:1})}}else{if(valueExists(this.sortValues)){sortValues=eval(this.sortValues)}else{var fieldArray=this.trimArrayValues(this.visibleFieldNames.split(","));for(var i=0;i<fieldArray.length;i++){sortValues.push({fieldName:fieldArray[i],sortOrder:1})}}}if(!valueExistsNotEmpty(this.dialogTitle)){var targetForm=this.getParentPanel();if(targetForm!=null){var title="";var fieldDefs=targetForm.getDataSource().fieldDefs;var fieldNamesArray=this.trimArrayValues(this.fieldNames.split(","));for(var i=0;i<fieldNamesArray.length;i++){var fieldName=fieldNamesArray[i];var fieldDef=fieldDefs.get(fieldName);if(fieldDef!=null){if(title!=""){title=title+", "+fieldDef.title}else{title=fieldDef.title}}}this.dialogTitle=title}}if(!valueExists(this.selectValueType)||this.selectValueType=="tree"||this.selectValueType=="hierTree"||this.selectValueType=="grid"||this.selectValueType=="multiple"){View.selectValue(this.parentPanelId,this.dialogTitle,this.trimArrayValues(this.fieldNames.split(",")),trim(this.selectFieldNames.split(",")[0].split(".")[0]),this.trimArrayValues(this.selectFieldNames.split(",")),this.trimArrayValues(this.visibleFieldNames.split(",")),this.dialogRestriction,this.actionListener,this.applyFilter,this.showIndex,this.workflowRuleId,null,null,this.selectValueType,this.recordLimit,toJSON(sortValues),this.applyVpaRestrictions,this.addNewDialog,this.showNullFilters,this.showAddNewButton)}else{if(this.selectValueType=="floorDrawing"){if(this.fieldNames==null){View.showMessage("error",Ab.view.View.getLocalizedString(this.z_MESSAGE_SELECT_VALUE_DWG_PARAMS));return }if(this.selectFieldNames==null){this.selectFieldNames="rm.rm_id"}View.selectValueFloorDrawing(this.parentPanelId,this.dialogTitle,this.trimArrayValues(this.fieldNames.split(",")),trim(this.selectFieldNames.split(",")[0].split(".")[0]),this.trimArrayValues(this.selectFieldNames.split(",")))}}}});Ab.namespace("view");Ab.view.Component=Base.extend({type:"",id:"",format:"",isTopLevel:true,parentElementId:"",parentElement:null,parentEl:null,restriction:null,useParentRestriction:true,showOnLoad:true,showIfNoData:true,hidden:false,visible:false,actions:null,translatableDisplayStrings:[],datasource:null,layoutRegion:"",layout:"",region:"",height:"",eventListeners:null,onDragDropListener:null,onDragOverListener:null,dropTarget:null,title:null,config:null,parameters:null,dataSourceId:"",buttonsPosition:"top",collapsible:false,collapsed:false,window:null,windowBox:null,overlay:null,overlayAnchorEl:null,overriddenProperties:null,sidecar:null,isSingleVisiblePanel:false,constructor:function(G,C,D){this.config=D;this.type=C;this.id=G;this.parentElementId=this.getParentElementId();this.parentElement=$(this.parentElementId);this.parentEl=Ext.get(this.parentElement);this.restriction={};this.parameters={};this.overriddenProperties={};this.sidecar=new Ab.view.Sidecar({panelId:G});Ab.view.View.registerControl(this.id,this);this.format=D.getConfigParameter("format","");this.title=D.getConfigParameter("title",null);this.layoutRegion=D.getConfigParameter("layoutRegion","");this.layout=D.getConfigParameter("layout","");this.region=D.getConfigParameter("region","");this.height=D.getConfigParameter("height",0);this.isTopLevel=D.getConfigParameter("isTopLevel",true);this.showOnLoad=D.getConfigParameter("showOnLoad",true);this.showIfNoData=D.getConfigParameter("showIfNoData",true);this.hidden=D.getConfigParameter("hidden",false);this.useParentRestriction=D.getConfigParameter("useParentRestriction",true);this.dataSourceId=D.getConfigParameter("dataSourceId","dataSource");this.buttonsPosition=D.getConfigParameter("buttonsPosition","top");this.collapsible=D.getConfigParameterIfExists("collapsible",false);this.collapsed=D.getConfigParameterIfExists("collapsed",false);if(this.useParentRestriction){this.restriction=Ab.view.View.restriction}var E=D.getConfigParameterIfExists("dataSourceObject");if(valueExists(E)){this.datasource=new Ab.view.DataSource();this.datasource.mainTableName=E.mainTable;this.datasource.tablesAndRoles.push({role:"main",tableName:E.mainTable});if(E.fieldNames!=null){this.datasource.fieldNames=E.fieldNames.split(",")}if(E.primaryKeyFields!=null){this.datasource.primaryKeyFields=E.primaryKeyFields.split(",")}}this.actions=new Ext.util.MixedCollection();this.eventListeners=new Ext.util.MixedCollection(true);var F=Ext.get(this.id+"_head");if(F!==null){this.toolbar=new Ext.Toolbar({autoHeight:true,cls:"panelToolbar",renderTo:F});if(this.collapsible){this.toolbar.add({id:this.id+"_collapse",cls:"x-btn-icon",icon:View.contextPath+"/schema/ab-core/graphics/icons/tri-opened.png",listeners:{click:this.toggleCollapsed.createDelegate(this)}})}var B=new Ext.Toolbar.TextItem(this.title||"");B.getEl().id=this.id+"_title";this.toolbar.add(B);this.toolbar.addFill();if(this.hidden||!this.showIfNoData){this.toolbar.setVisible(false)}}var A=D.getConfigParameter("instructions",null);if(A){this.setInstructions(replaceHTMLPlaceholders(A))}this.addEventListenerFromConfig("afterResize",D);this.addEventListenerFromConfig("afterRefresh",D);this.addEventListenerFromConfig("beforeRefresh",D)},getSidecar:function(){return this.sidecar},isDataBound:function(){return this.type==="grid"||this.type==="form"||this.type==="tree"||this.type==="crossTable"||this.type==="chart"||this.type==="columnReport"},setParentElement:function(A){this.parentElement=A;this.parentElementId=A.id},getParentElementId:function(){return this.id},getEl:function(){return Ext.get(this.getParentElementId())},getHeaderEl:function(){return Ext.get(this.id+"_head")},getInstructionsEl:function(){return Ext.get(this.id+"_instructions")},getWrapperElementId:function(){return this.id+"_layoutWrapper"},setLayout:function(A,B){this.layout=A;this.region=B},hasLayout:function(){var A=View.getLayoutAndRegionById(this.layoutRegion);return !this.hidden&&(A!==null||valueExistsNotEmpty(this.region))},doLayout:function(){this._handleLayoutRegion();if(this.hasLayout()){var A=Ab.view.View.getLayoutManager(this.layout);A.addComponentToRegion(this.region,this.getWrapperElementId(),this)}},getLayoutRegion:function(){this._handleLayoutRegion();var B=null;var A=Ab.view.View.getLayoutManager(this.layout);if(A!==null){B=A.getRegion(this.region)}return B},getLayoutRegionPanel:function(){this._handleLayoutRegion();var A=null;var B=Ab.view.View.getLayoutManager(this.layout);if(B!==null){A=B.getRegionPanel(this.region)}return A},ownsLayoutRegion:function(){var C=true;var B=this;var A=this.getLayoutRegionPanel();View.panels.each(function(D){if(D!==B&&!D.hidden&&D.type!=="viewPanel"){var E=D.getLayoutRegionPanel();if(E===A){C=false}}});return C},lastInLayoutRegion:function(){var A=this.getLayoutRegionPanel();if(!A){return false}var B=null;View.panels.each(function(C){var D=C.getLayoutRegionPanel();if(D===A&&!C.hidden){B=C}});return(this===B)},lastInTab:function(){var A=null;var B=this.parentTab;if(valueExists(B)){View.panels.each(function(C){if(C.parentTab===B&&!C.hidden){A=C}})}return(this===A)},singleVisibleTabPanel:function(){var C=this.parentTab;var A=0;var B=null;if(valueExists(C)){View.panels.each(function(D){if(D.parentTab===C&&D.visible){A+=1;if(A>1){B=null}else{B=D}}})}return B},singleVisiblePanel:function(){var B=0;var A=null;if(this.isSingleVisiblePanel){A=this}else{View.panels.each(function(C){if(!C.hidden&&C.id!=="viewToolbar"&&C.type!=="viewPanel"){B+=1;if(B>1){A=null}else{A=C}}})}return A},setSingleVisiblePanel:function(A){this.isSingleVisiblePanel=A},_handleLayoutRegion:function(){if(valueExistsNotEmpty(this.layoutRegion)){var A=Ab.view.View.getLayoutAndRegionById(this.layoutRegion);if(A){this.layout=A.layout;this.region=A.region}}},resizeListenerAttached:false,afterLayout:function(){var A=this.getLayoutRegionPanel();if(this.window){if(!this.resizeListenerAttached){this.resizeListenerAttached=true;this.window.addListener("resize",this.afterResize,this);this.window.addListener("maximize",this.afterResize,this);this.window.addListener("restore",this.afterResize,this)}this.afterResize()}else{if(A){if(!this.resizeListenerAttached){this.resizeListenerAttached=true;A.addListener("resize",this.afterResize,this);A.addListener("expand",this.afterResize,this)}this.afterResize()}}},afterResize:function(){var A=this.getEventListener("afterResize");if(A){A(this)}this.updateHeight()},initialDataFetch:function(){this.show(this.showOnLoad)},afterInitialDataFetch:function(){this.addShowInfo()},clear:function(){},refresh:function(A,B){this.beforeRefresh(A,B);this.doRefresh();this.afterRefresh()},beforeRefresh:function(A,B){var D=String.format("Before refresh: {0} = [{1}], restriction = [{2}], newRecord = [{3}]",this.type,this.id,A?toJSON(A):"none",B);View.log(D);if(valueExists(A)){this.restriction=A}if(valueExists(B)){this.newRecord=B}this.clearScroller();var C=this.getEventListener("beforeRefresh");if(C){C(this)}},doRefresh:function(){this.getData();this.show();this.removeErrorIndicator()},afterRefresh:function(){this.evaluateExpressions();var B=this.getEventListener("afterRefresh");if(B){B(this)}var A=String.format("After refresh: {0} = [{1}]",this.type,this.id);View.log(A)},getData:function(){},getDataSource:function(){return View.dataSources.get(this.dataSourceId)},addParameter:function(A,B){this.parameters[A]=B},addParameters:function(A){_.extend(this.parameters,A)},clearParameters:function(){this.parameters={}},setPropertyOverridden:function(B,A){if(!valueExists(A)){A=true}this.overriddenProperties[B]=A},isPropertyOverridden:function(B){var A=this.overriddenProperties[B];return(valueExists(A)&&A==true)},evaluateExpressions:function(A){if(!valueExists(A)){A=this.createEvaluationContext()}if(!this.isPropertyOverridden("title")){var C=Ab.view.View.evaluateString(this.config.title,A);if(valueExists(C)&&C!==this.title){this.setTitle(C)}}this.actions.each(function(D){D.evaluateExpressions(A)});var B=this.getDataSource();if(B){B.fieldDefs.each(function(D){var E=View.evaluateString(D.title,A,false);if(E!=D.title){D.title=E}})}return A},createEvaluationContext:function(){var A={view:Ab.view.View,date:this.createDateContext(),panel:this};for(name in Ab.view.View.evaluationContext){A[name]=Ab.view.View.evaluationContext[name]}return A},createDateContext:function(A,D){var B=new Date();if(typeof A=="undefined"||A==""){A=View.dateFormat}if(typeof D=="undefined"||D==""){D=View.timeFormat}var C=new Object();C.currentDate=B.format(A);C.currentTime=B.format(D);C.date=B;return C},show:function(A,B){if(!valueExists(A)){A=true}if(!valueExists(B)){B=true}this.updateVisible(A,B);this.updateHeight();if(!A){this.setSingleVisiblePanel(false)}},showAt:function(A){Ext.get(A).appendChild(this.getParentElementId());this.show(true)},updateVisible:function(B,C){this.visible=B;if(C){this.showHeader(B)}if(this.getInstructionsEl()){this.showElement(this.getInstructionsEl(),B)}this.showElement(this.parentElement,B);var A=this.createEvaluationContext();this.actions.each(function(E){var D=Ab.view.View.evaluateBoolean(E.enabled,A);E.forceDisable(!B||!D)})},showHeader:function(A){var B=Ext.get(this.id+"_head");if(B!==null){B.setDisplayed(A)}if(this.toolbar){this.toolbar.setVisible(A)}},showActions:function(A){this.actions.each(function(B){B.render(A);B.enableButton(B.enabled)})},appendTitle:function(A){this.setTitle(this.config.title+" - "+A);this.setPropertyOverridden("title")},setTitle:function(B){this.title=B;var A=this.getTitleEl();if(A){A.dom.innerHTML=B}},getTitle:function(){return this.title},getTitleEl:function(){return Ext.get(this.id+"_title")},setInstructions:function(C){var B=Ext.get(this.id+"_instructions");if(valueExistsNotEmpty(C)){if(!B){B=Ext.DomHelper.insertBefore(this.parentEl,{tag:"div",id:this.id+"_instructions",cls:"instructions"},true);Ext.DomHelper.append(B,{tag:"div",id:this.id+"_instructionsText",cls:"instructionsText"});B.on("click",this.toggleInstructions.createDelegate(this));this.showElement(B,this.visible)}var A=Ext.get(this.id+"_instructionsText");A.dom.innerHTML=C}else{if(B){var A=Ext.get(this.id+"_instructionsText");A.dom.innerHTML=""}}},toggleInstructions:function(){var A=Ext.get(this.id+"_instructionsText");if(valueExists(this.instructionsCollapsed)&&this.instructionsCollapsed){this.instructionsCollapsed=false}else{this.instructionsCollapsed=true}if(this.instructionsCollapsed){this.instructionsTextHeight=A.getHeight()}A.setVisible(!this.instructionsCollapsed);A.setHeight(this.instructionsCollapsed?0:this.instructionsTextHeight);if(this.isShownInWindow()){this.updateWindowHeight()}},getInstructionsHeight:function(){var A=0;var B=Ext.get(this.id+"_instructions");if(B){A=B.getHeight()}return A},updateCollapsed:function(){if(this.collapsible){this.setCollapsed(this.collapsed)}},toggleCollapsed:function(){this.setCollapsed(!this.collapsed);if(this.collapsed===false&&this.type==="grid"){this.updateHeight()}},setCollapsed:function(D){if(Ext.get(this.id).hasClass("panel-behind")){this.showElement(this.getWrapperElementId(),!D)}this.updateVisible(!D,false);var B=View.contextPath+"/schema/ab-core/graphics/icons/tri-opened.png";if(D){B=View.contextPath+"/schema/ab-core/graphics/icons/tri-closed.png"}if(this.toolbar){if(D){this.toolbar.el.addClass("collapsed")}else{this.toolbar.el.removeClass("collapsed")}var C=Ext.get(this.id+"_collapse");var A=C.child("button",true);A.style.backgroundImage="url("+B+")"}this.collapsed=D;this.afterSetCollapsed()},afterSetCollapsed:function(){var A=this.getEventListener("afterSetCollapsed");if(A){A(this)}},toggleHidden:function(){this.setHidden(!this.hidden)},setHidden:function(A){this.showElement(this.getWrapperElementId(),!A);this.hidden=A},getLocalizedString:function(A){return Ab.view.View.getLocalizedString(A)},showElement:function(B,A){if(B!=null){var C=Ext.get(B);if(C!=null){C.setDisplayed(A)}}},syncHeight:function(B){if(valueExists(B)){var A=this.determineHeight(B);if(A>0){B.setHeight(A-2)}}},isScrollable:function(){var A=false;if((this.showOnLoad||!this.hidden)&&(this.type=="grid"||this.type=="tree"||this.type=="selectValueTree"||this.type=="selectValueHierTree"||this.type=="chart")){A=true}return A},isScrollInLayout:function(){return !this.isAutoScroll()},isAutoScroll:function(){return false},getScrollableEl:function(){return this.getEl()},updateHeight:function(){var D=this.determineAvailableHeight();var C=this.getScrollableEl();if(D>0&&C!=null){C.setHeight(D);if(this.isAutoScroll()&&!this.isScrollInLayout()){this.updateScroller()}else{this.updateLayoutScroller()}}if(!valueExistsNotEmpty(C)){var B=this.getLayoutRegionPanel();if(B&&B.scrollContent){var A=View.getLayoutManager(this.layout);A.updateScroller(B)}else{if(this.parentTab&&this.parentTab.isScrollContent()){this.parentTab.updateScroller()}}}this.updateCollapsed()},updateLayoutScroller:function(){if(this.isScrollInLayout()&&this.hasLayout()){var A=Ab.view.View.getLayoutManager(this.layout);if(A!==null&&A.isScrollContent(this.getLayoutRegion())){A.updateScroller(this.getLayoutRegionPanel())}}},updateScroller:function(B){var A=this.getScrollableEl();if(!View.useScroller()||!A||!A.dom||!A.dom.firstChild||A.dom.firstChild.nodeType==3){if(A){A.addClass("scroll-v")}return }if(!this.scroller){this.createScroller(A,B)}else{this.scroller.update()}},createScroller:function(A,B){A.dom.style.overflow="hidden";this.scroller=new Ab.view.Scroller(A.dom.firstChild,B)},clearScroller:function(){var A=this.getScrollableEl();if(View.useScroller()&&A&&A.dom){A.removeClass("jssb-applied")}if(this.scroller){this.scroller.detach();this.scroller=null}},determineAvailableHeight:function(){var A=0;var B=12;if(this.window){A=this.window.body.getHeight()-this.getTitlebarHeight()}else{if(this.singleVisibleTabPanel()){A=this.determineRemainingHeight()-B}else{if(this.ownsLayoutRegion()){A=this.determineHeight()}else{if(this.lastInLayoutRegion()){A=this.determineRemainingHeight()}else{if(this.lastInTab()){A=this.determineRemainingHeight()-B}else{if(this.singleVisiblePanel()){A=this.determineRemainingHeight()}}}}}}return A},determineHeight:function(E){var A=0;var F=this.getParentElementId();if(!valueExists(E)){E=this.parentEl}var B=this.getLayoutRegion();if(valueExists(B)){var C=Ext.get(B.contentEl).parent().getHeight();var D=this.getTitlebarHeight();A=C-D-4}else{if(valueExists(E)&&this.parentTab!=null){if(valueExists(this.parentTab.parentPanel.tabHeight)){A=this.parentTab.parentPanel.tabHeight-this.parentTab.parentPanel.getTabStripHeight()}else{A=this.parentTab.tabPanel.getInnerHeight()}}}return A},determineWidth:function(){var B=0;var A=this.getLayoutRegion();if(valueExists(A)){B=Ext.get(A.contentEl).parent().getWidth()-2}else{if(this.parentTab!=null){if(valueExists(this.parentTab.parentPanel.tabHeight)){B=this.parentTab.parentPanel.tabWidth}else{B=this.parentTab.tabPanel.getInnerWidth()}}}return B},determineRemainingHeight:function(C){var A=0;if(!valueExists(C)){C=this.parentEl}if(valueExists(C)){var B=this.determineHeight(C);A=B-C.dom.offsetTop+this.getTitlebarHeight();if(C.dom.offsetParent){if(Ext.get(C.dom.offsetParent).hasClass("x-panel")){A-=31}}}return A},getTitlebarHeight:function(){var A=0;var B=Ext.get(this.getParentElementId()+"_head");if(B){A=B.getHeight()}return A},getActionbarHeight:function(){var A=0;if(this.actionbar){A=this.actionbar.toolbar.getSize().height}return A},addEventListener:function(A,C,B){if(C&&C.constructor==Array){var D=new Ab.command.commandChain();D.addCommands(C);C=D}else{if(C&&C.constructor==String){C=window[C]}if(valueExists(B)){C=C.createDelegate(B)}}if(this.eventListeners.containsKey(A)){this.eventListeners.replace(A,C)}else{this.eventListeners.add(A,C)}},addEventListenerFromConfig:function(A,B){var C=B.getConfigParameter(A+"Listener",null);this.addEventListener(A,C)},getEventListener:function(A){var B=this.eventListeners.get(A);if(!valueExists(B)){B=null}return B},removeEventListener:function(A){this.eventListeners.removeKey(A)},addActionListener:function(C,B,A){this.actions.get(C).addListener(B,A)},addActionbarActionListener:function(C,B,A){this.actionbar.actions.get(C).addListener(B,A)},addAction:function(A){A.topLevel=true;var B=new Ab.view.Action(this,A);this.actions.add(B.id,B)},removeAction:function(A){this.actions.remove(A)},addCustomAction:function(A){A.useExtButton=false;var B=new Ab.view.Action(this,A);this.actions.add(B.id,B)},enableAction:function(C,A){var B=this.actions.get(C);if(B){B.enable(A)}},enableButton:function(B,A){this.enableAction(B,A)},addDragDropListener:function(B,A){if(valueExists(A)){B=B.createDelegate(A)}this.onDragDropListener=B;this.enableDropTarget()},addDragOverListener:function(B,A){if(valueExists(A)){B=B.createDelegate(A)}this.onDragOverListener=B;this.enableDropTarget()},enableDropTarget:function(){if(this.dropTarget==null){this.dropTarget=new Ab.view.DropTarget(this)}},enable:function(){var A=this.getLayoutRegionPanel();if(A){A.enable()}},disable:function(){var A=this.getLayoutRegionPanel();if(A){A.disable()}},showInWindow:function(B){if(B.anchor){this.anchorEl=Ext.get(B.anchor)}if(!valueExists(B.closeButton)){B.closeButton=false}if(!valueExists(B.collapsible)){B.collapsible=false}if(!valueExists(B.maximizable)){B.maximizable=true}if(!valueExists(B.modal)){B.modal=false}if(!valueExists(B.closable)){B.closable=true}if(!valueExists(B.autoScroll)){B.autoScroll=true}if(!valueExists(B.shadow)){B.shadow=true}if(!valueExists(B.height)){B.height=400}if(!this.window){var D=[];if(this.actions.getCount()>0||B.closeButton){D.push({id:"closeButton",text:this.getLocalizedString(Ab.view.View.z_TITLE_CLOSE),handler:this.closeWindow.createDelegate(this),hidden:!B.closeButton,hideMode:"display"})}this.window=new Ext.Window({contentEl:this.getWrapperElementId(),layout:"fit",modal:B.modal,shadow:B.shadow,autoScroll:B.autoScroll,closable:B.closable,maximizable:B.maximizable,collapsible:B.collapsible,closeAction:"hide",buttonAlign:"right",buttons:D})}this.window.setTitle(B.title);var C=B;C.autoHeight=!valueExists(C.height);if(this.getAnchorEl()){if(!C.x){C.x=this.getAnchorEl().getLeft()}if(!C.y){if(this.getAnchorEl()==this.anchorEl){C.y=this.anchorEl.getTop()}else{C.y=this.anchorEl.getTop()+this.anchorEl.getHeight()+1}}}if(B.width&&B.height){this.window.setSize(B.width,B.height)}this.window.setPosition(10000,10000);this.window.show();var A=this;this.window.on("resize",function(){A.updateWindowScroller()});this.window.on("maximize",function(){A.updateWindowScroller.defer(500,A)});if(B.restriction){this.refresh(B.restriction,B.newRecord)}this.show(true,true);this.windowBox=C;this.updateWindowHeight();if(valueExists(B.maximize)&&B.maximize){this.window.maximize()}this.resizeListenerAttached=false;this.showActions();this.afterLayout();this.updateWindowScroller()},updateWindowHeight:function(){if(this.windowBox){if(this.windowBox.autoHeight){this.windowBox.height=100;var B=[this.getHeaderEl(),this.getInstructionsEl(),this.getEl()];for(var A=0;A<B.length;A++){if(B[A]){this.windowBox.height+=B[A].getHeight()}}}View.ensureInViewport(this.windowBox);this.window.setPosition(this.windowBox.x,this.windowBox.y);this.window.setSize(this.windowBox.width,this.windowBox.height)}},updateWindowScroller:function(){if(this.window.scroller){this.window.scroller.update()}else{this.window.body.dom.style.overflow="hidden";this.window.scroller=new Ab.view.Scroller(this.window.body.dom.firstChild)}},isShownInWindow:function(){return this.window!=null},closeWindow:function(){if(this.window){this.window.hide()}},beforeUnload:function(){},getAnchorEl:function(){return(this.anchorEl&&this.anchorEl.parent().hasClass("button"))?this.anchorEl.parent():this.anchorEl},addShowInfo:function(){var A=this.id+"_showRestriction";if(View.isDevelopmentMode&&this.isDataBound()&&this.actions.get(A)==null&&valueExists(this.toolbar)){this.addAction({id:A,icon:"/schema/ab-core/graphics/icons/information.png",tooltip:"Show this panel debugging information",listener:this.showInfo.createDelegate(this)})}},showInfo:function(){var A=this.getInfo();Ext.MessageBox.alert("Panel Information",A)},getInfo:function(){var A="<pre>ID: "+this.id+"<br/>";A=A+"Type: "+this.type+"<br/>";A=A+"Restriction: ";if(valueExists(this.restriction)){A=A+prettyPrintJson(this.restriction)}else{A=A+"none"}A=A+"</pre>";return A},lastErrorMessage:"",showLastError:function(){View.showMessage("error",this.lastErrorMessage)},addErrorIndicator:function(A){this.lastErrorMessage=A;var C=this.id+"_showError";var B=this.actions.get(C);if(B){B.show(true)}else{this.addAction({id:C,icon:"/schema/ab-core/graphics/error.gif",cls:"x-btn-icon",tooltip:this.getLocalizedString(Ab.view.Component.z_MESSAGE_SHOW_ERROR_TOOLTIP),listener:this.showLastError.createDelegate(this)})}},removeErrorIndicator:function(){var B=this.id+"_showError";var A=this.actions.get(B);if(A){A.show(false)}},handleError:function(A){if(valueExists(A.jobMessage)){A={message:A.jobMessage}}if(View.showLoadProgress){this.addErrorIndicator(A.message)}else{Workflow.handleError(A)}}},{z_MESSAGE_SHOW_ERROR_TOOLTIP:"Error occured, click to display details"});Ab.view.DropTarget=function(A){this.panel=A;Ab.view.DropTarget.superclass.constructor.call(this,A.getLayoutRegionPanel().getEl())};Ext.extend(Ab.view.DropTarget,Ext.dd.DropTarget,{notifyDrop:function(A,C,B){if(this.panel.onDragDropListener){return this.panel.onDragDropListener(A,B,C)}},notifyOver:function(A,C,B){if(this.panel.onDragOverListener){return(this.panel.onDragOverListener(A,B,C)?"x-dd-drop-ok":"x-dd-drop-nodrop")}}});Ab.view.HtmlPanel=Ab.view.Component.extend({contentPanel:null,constructor:function(B,A){this.inherit(B,"htmlPanel",A)},setContentPanel:function(A){this.contentPanel=A;this.afterLayout()},afterLayout:function(){if(this.contentPanel){this.syncHeight(this.contentPanel)}}});Ab.view.ViewPanel=Ab.view.Component.extend({fileName:null,url:null,useFrame:false,childPanelId:null,isContentLoading:false,panel:null,frame:null,contentView:null,constructor:function(B,A){this.inherit(B,"viewPanel",A);this.fileName=A.getConfigParameter("fileName",null);this.url=A.getConfigParameter("url",null);this.useFrame=A.getConfigParameter("useFrame",false);this.childPanelId=A.getConfigParameter("childPanelId",null)},isScrollInLayout:function(){return false},getParentElementId:function(){return this.id+"_iframe"},createFrame:function(){this.frame=new Ext.ux.ManagedIFrame({autoCreate:{id:this.getParentElementId(),width:"100%",height:"100%"}});this.frame.setStyle("border","none");this.loadView(this.fileName);this.panel=new Ext.Panel({renderTo:this.getWrapperElementId(),contentEl:this.frame,autoWidth:true,autoHeight:true,border:true,closable:true});this.syncHeight.defer(100,this);this.doLayout();var A=this.getLayoutRegionPanel();A.on("bodyresize",this.syncHeight.createDelegate(this))},getContentFrame:function(){var A=null;if(this.useFrame){A=this.frame.getWindow()}return A},getMainPanel:function(){return View.panels.get(this.childPanelId)},doLayout:function(){this.inherit();if(this.useFrame){var A=this.getLayoutRegion();A.border=false}},syncHeight:function(){if(this.useFrame&&this.frame){var A=this.getLayoutRegion();var B=Ext.get(A.contentEl).parent().getHeight();var C=Ext.get(A.contentEl).parent().getWidth();this.frame.setHeight(B-2);this.frame.setWidth(C-2)}},initialDataFetch:function(){if(this.useFrame){this.createFrame();if(this.url){this.loadView(this.url)}}else{if(View.type==="dashboard"){this.addShowAsDialog(this.getMainPanel(),this.fileName)}}},loadView:function(F,C,E){if(!valueExistsNotEmpty(F)){return }View.log("Request to load view: "+F);var A=Workflow.call("AbCommonResources-getUser");if(View.sessionTimeoutDetected){Ab.workflow.Workflow.handleSessionTimeout(View.logoutView);return }View.clearDialogParameters();if(valueExists(C)){View.dialogRestriction=C}this.fileName=F;this.isContentLoading=true;this.contentView=null;var B=this;this.frame.setSrc(F,true);if(valueExists(E)&&E){var D=top.View.panels.get("processNavigator");if(valueExists(D)){D.controller.highlightTask(F)}}},reloadView:function(){this.loadView(this.fileName)},afterViewLoad:function(D){this.isContentLoading=false;this.enable();this.contentView=D;this.contentView.parentViewPanel=this;if(View.type==="dashboard"){var B=this;var A=function(){var F=B.contentView.getMainPanel();B.contentView.setToolbarButtonVisible("printButton",false);B.addShowAsDialog(F,B.fileName);var E=F.getTitleEl();if(E){E.dom.style.fontSize="13px"}};A()}var C=this.getEventListener("afterLoad");if(C){C()}},addShowAsDialog:function(A,B){if(A!=null&&valueExists(A.toolbar)){A.addAction({id:A.id+"_showAsDialog",icon:"/schema/ab-core/graphics/show.gif",cls:"x-btn-icon",tooltip:this.getLocalizedString(Ab.view.ViewPanel.z_MESSAGE_MAXIMIZE_VIEW),listener:function(){View.openDialog(B,A.restriction,false,{maximize:true})}})}}},{z_MESSAGE_MAXIMIZE_VIEW:"Maximize this view",z_MESSAGE_LOADING:"Loading"});Ab.view.TranslatableDisplayString=Base.extend({stringKey:"",stringValue:"",constructor:function(A,B){this.stringKey=A;this.stringValue=B}});Ab.view.ConfigObject=Base.extend({constructor:function(A){if(valueExists(A)){for(var B in A){var C=A[B];this.setConfigParameter(B,C)}}},setConfigParameter:function(B,C){var A=this.getConfigParameterIfExists(B);this[B]=C;return A},addParameterIfNotExists:function(A,B){if(!valueExists(this[A])){this[A]=B}},getConfigParameterIfExists:function(A){var B=this[A];if(!valueExists(B)){B=null}return B},getConfigParameter:function(B,A){var C=this.getConfigParameterIfExists(B);if(!valueExists(C)){C=A}return C},getConfigParameterNotEmpty:function(B,A){var C=this.getConfigParameterIfExists(B);if(!valueExistsNotEmpty(C)){C=A}return C},getFunction:function(A){var B=this.getConfigParameter(A);return self[B]},toJSONString:function(){var B={};for(var A in this){if(this.getConfigParameterIfExists(A)!=null){if(!(this[A] instanceof Function)){B[A]=this[A]}}}return toJSON(B)}});Ab.view.Action=Base.extend({panel:null,id:"",originalId:"",actions:null,menuAction:null,menu:null,enabled:true,forcedDisabled:false,hidden:false,command:null,listener:null,button:null,buttonRendered:false,config:null,pendingListener:null,constructor:function(A,B){this.panel=A;this.config=B;this.id=B.id;this.originalId=valueExistsNotEmpty(B.originalId)?B.originalId:B.id;this.enabled=(B.enabled!=="false");this.hidden=(B.hidden==="true");this.type=B.type;this.menuAction=B.menuAction;if(valueExists(B.enabled)&&B.enabled.substring(0,2)=="${"){this.enabled=B.enabled}if(valueExists(B.command)){this.command=B.command}else{if(valueExists(B.commands)&&B.commands.length>0){this.command=new Ab.command.commandChain(A.id);this.command.addCommands(B.commands)}else{if(valueExists(B.onclick)){this.command=new Ab.command.commandChain(A.id);this.command.addCommand(new Ab.command.callFunction({functionName:B.onclick}))}}}if(valueExists(this.command)){this.listener=this.command.handle.createDelegate(this.command)}else{if(valueExists(B.listener)){this.listener=B.listener}}this.actions=new Ext.util.MixedCollection();if(valueExists(B.actions)){for(var C=0;C<B.actions.length;C++){B.actions[C].menuAction=this;var D=new Ab.view.Action(A,B.actions[C]);this.actions.add(D.id,D)}}if(!this.panel.hidden||!this.config.topLevel){this.bind()}},bind:function(){if(this.button){return }var B=this.config;if(valueExists(this.menuAction)){}else{if(valueExists(B.useExtButton)&&B.useExtButton==false){this.button=Ext.get(this.id);if(valueExists(B.title)){this.button.dom.innerHTML=B.title}if(valueExistsNotEmpty(B.tooltip)){Ext.QuickTips.register({target:this.id,text:B.tooltip})}if(this.type==="menu"){this.button.menu=this.createMenu();this.button.addClass("x-btn-with-menu");if(!this.listener){this.listener=this.showMenu.createDelegate(this,[this.menu])}}}else{var A={id:this.id,text:B.text,renderTo:B.renderTo,hidden:this.hidden};if(valueExistsNotEmpty(B.tooltip)){A.tooltip=B.tooltip}if(valueExists(B.cls)){A.cls=B.cls}else{A.cls=""}if(valueExists(B.icon)){if(valueExistsNotEmpty(B.text)){A.cls=A.cls+" x-btn-text-icon"}else{A.cls=A.cls+" x-btn-icon"}A.icon=View.contextPath+this.config.icon}if(B.mainAction){A.cls=A.cls+" mainAction"}else{if(this.panel.buttonsPosition==="footer"){A.cls=A.cls+" mediumAction"}}if(this.type==="menu"){A.menu=this.createMenu()}if(valueExists(B.renderTo)){A.template=Ab.view.Action.DEFAULT_TEMPLATE;this.button=new Ext.Toolbar.Button(A)}else{var C=this.panel.window||View.getParentDialog();if((C&&this.panel.buttonsPosition=="footer")||this.panel.window){this.button=new Ext.Button(A);this.render()}else{if(B.isActionbarAction){this.button=this.panel.actionbar.toolbar.addButton(A)}else{if(this.panel.toolbar){this.panel.toolbar.addSpacer();this.panel.toolbar.addSpacer();this.button=this.panel.toolbar.addButton(A)}}}}}}if(this.listener&&this.button){if(valueExists(this.button.dom)){this.button.dom.onclick=this.listener}else{this.button.on("click",this.listener)}}if(this.pendingListener){this.addListener(this.pendingListener.callback,this.pendingListener.scope);this.pendingLisneter=null}},createMenu:function(){var C=[];for(var B=0;B<this.actions.getCount();B++){var E=this.actions.itemAt(B);var D={};if(valueExists(E.listener)){D.click=E.listener}var A={id:E.config.id,text:E.config.text,listeners:D};if(valueExists(E.config.checked)){A.checked=E.config.checked;delete D.click;D.checkchange=E.listener}if(valueExists(E.config.icon)){A.icon=View.contextPath+E.config.icon}C.push(A)}this.menu=new Ext.menu.Menu({items:C,autoWidth:function(){var G=this.el;if(!G){return }var F=this.width;if(F){G.setWidth(F)}}});return this.menu},showMenu:function(B){var A=Ext.get(this.id);B.show(A)},removeListeners:function(){if(this.button){this.button.dom.onclick=null}},render:function(H){if(!this.button){this.bind()}if(!valueExists(H)){H=true}var E=this.panel.window||View.getParentDialog();if((E&&this.panel.buttonsPosition=="footer")||this.panel.window){if(H){if(!this.buttonRendered){this.buttonRendered=true;var B=this.button.cls?this.button.cls:"";if(valueExists(this.config.icon)){if(valueExistsNotEmpty(this.config.text)){B=B+" x-btn-text-icon"}else{B=B+" x-btn-icon"}}var G=E.footer.child("table:first tr:first");var D=Ext;var C=View.getOpenerWindow();if(C&&C.Ext){D=C.Ext}var F=this.getButtonId();var A=D.DomHelper.append(G,{tag:"td",cls:"x-panel-btn-td "+B,id:F+"_footer"});this.button.id=F+"_footer";this.button.rendered=false;this.button.render(A)}}else{if(this.buttonRendered){this.buttonRendered=false;var G=E.footer.child("table:first tr:first");var A=G.child("#"+this.getButtonId()+"_footer");A.remove()}}}},getButtonId:function(){return this.panel.id+"_"+this.id},addListener:function(B,A){if(this.button){this.button.on("click",B,A)}else{this.pendingListener={callback:B,scope:A}}},enable:function(A){this.enabled=A;if(!this.forcedDisabled){this.enableButton(A)}},forceDisable:function(A){this.forcedDisabled=A;if(this.forcedDisabled){this.enableButton(false)}else{this.enableButton(this.enabled)}},enableButton:function(A){if(this.button){if(this.button.setDisabled){this.button.setDisabled(!A);if(Ext.isIE&&this.button.el){jQuery(this.button.el.dom).find("button").prop("disabled",!A);if(A){jQuery(this.button.el.dom).removeClass("x-item-disabled")}}}else{this.button.dom.disabled=!A}}else{if(this.menuAction&&this.menuAction.menu){var B=this.menuAction.menu.items.item(this.id);if(B){if(A){B.enable()}else{B.disable()}}}}if(this.command){this.command.enabled=A}},show:function(A){this.visible=A;if(!this.forcedHidden&&this.button){this.button.setVisible(A)}},forceHidden:function(A){this.forcedHidden=A;if(this.button){if(this.forcedHidden){this.button.setVisible(false)}else{this.button.setVisible(this.visible)}}},setTitle:function(B){if(this.button){if(valueExists(this.config.useExtButton)&&this.config.useExtButton==false){if(this.button.dom.innerHTML){this.button.dom.innerHTML=B}this.button.dom.value=B}else{this.button.setText(B)}}else{if(this.menuAction&&this.menuAction.menu){var A=this.menuAction.menu.items.item(this.id);if(A){A.setText(B)}}}},setTooltip:function(B){if(this.button){Ext.QuickTips.register({target:this.button.id,text:B});var A=Ext.DomQuery.select("button",this.button.el.dom)[0];if(A){Ext.QuickTips.register({target:A.id,text:B})}}},setImage:function(B){var A=View.contextPath+"/"+B;this.button.dom.src=A},evaluateExpressions:function(A){var C=Ab.view.View.evaluateBoolean(this.config.enabled,A,true);this.enable(C);var B=Ab.view.View.evaluateBoolean(this.config.hidden,A,false);if(B!=this.hidden){this.hidden=B;this.show(!B)}var D=Ab.view.View.evaluateString(this.config.text,A);if(D!=this.config.text){this.setTitle(D)}},clear:function(){if(this.menu){this.menu.removeAll();this.button.setDisabled(true)}},addAction:function(C,B,A){if(this.menu){this.menu.addItem(new Ext.menu.Item({text:B,listeners:{click:A}}));this.button.setDisabled(false)}}},{CHEVRON:"&#187; ",DEFAULT_TEMPLATE:new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}</button></em></td><td class="x-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>")});Ab.view.Actionbar=Ab.view.Component.extend({panelId:"",control:null,actions:null,toolbar:null,titleItem:null,constructor:function(A,B){this.panelId=A;this.control=B;this.actions=new Ext.util.MixedCollection();this.toolbar=new Ext.Toolbar({id:B.id+"_actionbar",autoHeight:true,cls:"actionbar",renderTo:B.parentElement}).show();this.titleItem=new Ext.Toolbar.TextItem("");this.titleItem.getEl().className="itemsSelected";this.toolbar.add(this.titleItem);this.toolbar.addSpacer();this.setTitle("");B.actionbar=this;this.updateSelected(0)},addAction:function(A){A.cls=A.mainAction?"mainAction":"mediumAction";A.isActionbarAction=true;var B=new Ab.view.Action(this.control,A);B.enableButton(false);B.show(false);this.actions.add(B)},getAction:function(A){return this.actions.get(A)},show:function(){this.toolbar.show()},hide:function(){this.toolbar.hide()},setTitle:function(A){this.titleItem.getEl().innerHTML=A;this.titleItem.setVisible(A.length>0)},updateSelected:function(A){for(var B=0;B<this.actions.getCount();B++){var C=this.actions.get(B);C.enableButton(A>0)}this.setTitle(A+"&nbsp;"+View.getLocalizedString(Ab.view.Actionbar.z_MESSAGE_ITEMS_SELECTED))}},{z_MESSAGE_ITEMS_SELECTED:"selected"});Ab.namespace("view");Ab.view.Layout=Base.extend({id:"",type:"border",parentLayoutName:"",parentLayoutRegion:"",regions:null,regionsByName:null,viewport:null,parentPanelId:null,parentTabName:null,constructor:function(B,H,C,G,D,J,A){this.id=B;this.type=H;this.parentLayoutName=C;this.parentLayoutRegion=G;var E=function(L){return(valueExists(L)&&L.indexOf("%")==-1)};this.regions=D;this.regionsByName={};for(var F=0;F<D.length;F++){var I=D[F];this.regionsByName[I.region]=I;I.layoutManager=this;if(I.region=="north"||I.region=="south"){if(E(I.initialSize)){I.height=parseFloat(I.initialSize)}if(E(I.minSize)){I.minHeight=parseFloat(I.minSize)}if(E(I.maxSize)){I.maxHeight=parseFloat(I.maxSize)}}else{if(I.region=="west"||I.region=="east"){if(E(I.initialSize)){I.width=parseFloat(I.initialSize)}if(E(I.minSize)){I.minWidth=parseFloat(I.minSize)}if(E(I.maxSize)){I.maxWidth=parseFloat(I.maxSize)}}}I.border=valueExists(I.id);if(!valueExists(I.contentEl)){var K="";if(!this.isTopLevel()&&I.id!=="viewContentRegion"){K="layoutRegion"}I.contentEl=this.id+"_"+I.region+"_div";Ext.DomHelper.append(document.body,{tag:"div",id:I.contentEl,cls:K})}}if(valueExists(J)&&valueExists(A)){this.parentPanelId=J;this.parentTabName=A}View.addLayoutManager(this)},isTopLevel:function(){return !valueExistsNotEmpty(this.parentLayoutName)},getRegion:function(A){return this.regionsByName[A]},getRegionEl:function(B){var A=this.regionsByName[B];return Ext.get(A.contentEl)},getRegionPanel:function(C){if(C.constructor===String){C=this.getRegion(C)}var A=null;if(valueExists(C)){var B=Ext.get(C.contentEl).dom.parentNode.parentNode.parentNode.id;A=Ext.ComponentMgr.get(B);if(!A){A=Ext.ComponentMgr.get(C.id)}}return A},getRegionNameById:function(D){var C=null;for(var A=0;A<this.regions.length;A++){var B=this.regions[A];if(B.id===D){C=B.region;break}}return C},getParentRegion:function(){var A=View.getLayoutManager(this.parentLayoutName);return A.getRegion(this.parentLayoutRegion)},addComponentToRegion:function(D,B,A){var C=this.getRegion(D);C.border=View.hasBorder();C.layout="fit";if("viewPanel"!==A.type){C.autoScroll=true}if(this.isToolbarRegion(C)){C.autoScroll=false;C.border=false}if(C.contentEl!==B){Ext.get(C.contentEl).appendChild(B)}},isToolbarRegion:function(A){return(A.id==="dashboardTabsRegion"||A.id=="toolbarRegion"||A.id=="viewToolbarRegion")},bindToParentLayout:function(){if(this.parentPanelId){}else{if(!this.isTopLevel()){var A=this.getParentRegion();A.childLayout=this}}},getPanelsForRegion:function(B){var A=[];View.panels.each(function(D){var C=D.getLayoutRegion();if(C&&C.contentEl===B.contentEl&&D.type!=="viewPanel"&&!D.hidden){A.push(D)}});return A},doLayout:function(){for(var B=0;B<this.regions.length;B++){var C=this.regions[B];C.collapseMode="mini";C.useSplitTips=true;C.splitTip=View.getLocalizedString(Ab.view.Layout.z_MESSAGE_SPLIT_TIP);C.cmargins=C.region=="north"||C.region=="south"?{left:5,top:5,right:5,bottom:5}:{left:5,top:0,right:5,bottom:0};var A=this.getPanelsForRegion(C);if(A.length==1&&!A[0].isScrollInLayout()){C.autoScroll=false}if(valueExists(C.childLayout)){C.items=C.childLayout.regions;C.layout="border"}}if(this.isTopLevel()){this.viewport=new Ext.Viewport({layout:"border",border:false,bufferResize:true,items:this.regions})}Ext.EventManager.onWindowResize(this.recalculateLayout,this);if(Ext.isIE){this.recalculateLayout.defer(200,this)}else{this.recalculateLayout()}},afterLayout:function(){for(var E=0,B=this.regions.length;E<B;E++){var G=this.regions[E];if(valueExists(G)&&G.collapsed){this.collapseRegion(G.region)}}var F=this;for(var E=0,B=this.regions.length;E<B;E++){var G=this.regions[E];var D=this.getRegionPanel(G);if(D){if(D.el){D.el.dom.parentNode.style.overflow="hidden"}var A=this.isScrollContent(G);var C=this.getPanelsForRegion(G);if(G.region==="north"&&!valueExists(G.initialSize)&&C.length==1&&(C[0].type==="console"||C[0].type==="form")){D.getEl().dom.firstChild.firstChild.style.overflowY="hidden"}if(C.length>0){D.firstPanel=C[0];D.scrollContent=A;D.on("resize",function(){this.firstPanel.syncHeight();if(this.scrollContent){F.updateScroller(this)}})}if(A){F.updateScroller(D);F.updateScroller.defer(500,F,[D])}}}},isScrollContent:function(D){var A=false;if(View.useScroller()&&!this.isToolbarRegion(D)){var C=this.getRegionPanel(D);if(C){var B=this.getPanelsForRegion(D);if(B.length>0){if(B.length==1&&B[0].isScrollInLayout()){A=true}else{if(B.length>1&&B[B.length-1].isScrollInLayout()){A=true}}if(valueExists(B[0].parentTab)){A=false}}}}return A},updateScroller:function(A){if(!A.el||A.el.getHeight()<=0){return }if(!A.scroller){A.scroller=new Ab.view.Scroller(A.body.dom.firstChild);A.body.dom.style.overflow="hidden"}A.scroller.update()},recalculateLayout:function(C,B){try{if(!valueExists(C)){var J=Ext.get(document.body).getViewSize();C=J.width;B=J.height}if(C===5000){C=1024}var D=false;for(var E=0,F=this.regions.length;E<F;E++){var I=this.regions[E];if(valueExists(I)){var J=I.initialSize;if(valueExists(J)&&J.constructor==String&&J.search("%")!=-1){var H=parseInt(J.substr(0,J.length-1));var A=this.getRegionPanel(I);if(!valueExists(A)){A=Ext.get(I.contentEl)}switch(I.region){case"east":case"west":J=C*H/100;Ext.isIE?A.setWidth(J):I.width=J;break;case"north":J=B*H/100;if(J>0){if(A.el){A.setHeight(J)}else{I.height=J}}break;case"south":J=B*H/100;Ext.isIE?A.setHeight(J):I.height=J;break}D=true}}}if(this.isTopLevel()){this.viewport.doLayout();View.panels.each(function(K){K.afterLayout()});View.state=View.STATE_LAYOUT_COMPLETE}}catch(G){if(this.isTopLevel()){View.state=View.STATE_LAYOUT_COMPLETE;View.showException(G,View.getLocalizedString(Ab.view.View.z_MESSAGE_VIEW_LOAD_FAILURE)+View.viewName)}}},collapseRegion:function(B){var A=this.getRegionPanel(B);if(A){A.collapse(false)}},expandRegion:function(B){var A=this.getRegionPanel(B);if(A){A.expand(false)}},isRegionCollapsed:function(B){var C=false;var A=this.getRegionPanel(B);if(A){var B=A.ownerCt.layout[B];C=B.isCollapsed}return C},setRegionSize:function(C,B){var A=this.getRegionPanel(C);if(A){switch(C){case"east":case"west":A.setWidth(B);break;case"north":case"south":A.setHeight(B);break}A.afterExpand()}}},{z_MESSAGE_SPLIT_TIP:"Drag to resize, or click the dotted area to hide.",DEFAULT_MARGINS:"4 4 4 4"});Ab.view.Toolbar=Ab.view.Component.extend({title:"",titleLink:"",toolbar:null,buttonConfigs:null,style:"",cls:null,buttons:null,constructor:function(B,A){this.inherit(B,"toolbar",A);this.title=A.getConfigParameter("title","");this.titleLink=A.getConfigParameter("titleLink","");this.buttonConfigs=A.getConfigParameter("buttons",[]);this.style=A.getConfigParameter("style","");this.cls=A.getConfigParameter("cls",null);this.buttons=[]},isScrollInLayout:function(){return false},doLayout:function(){this.inherit();var D=Ab.view.View.getLayoutManager(this.layout);var E=D.getRegion(this.region);var C=D.getRegionEl(this.region);this.toolbar=new Ext.Toolbar({renderTo:C,style:this.style,cls:this.cls});this.beforeBuild();this.toolbar.add(this.getTitleElement());if(this.buttonConfigs.length>0){this.toolbar.addFill();for(var B=0;B<this.buttonConfigs.length;B++){if(this.buttonConfigs[B].text===""){this.toolbar.addSeparator()}else{var A=this.toolbar.addButton(this.buttonConfigs[B]);this.buttons.push(A)}}}},getTitleElement:function(){if(this.titleLink!=""){var A=document.createElement("a");A.setAttribute("id",this.id+"_title");A.setAttribute("class",this.cls);A.setAttribute("href",this.titleLink);A.setAttribute("target","_blank");A.innerHTML=this.title;return A}else{var B=new Ext.Toolbar.TextItem(this.title);B.getEl().id=this.id+"_title";return B}},beforeBuild:function(){}});Ab.namespace("tabs");Ab.tabs.Tabs=Ab.view.Component.extend({workflow:"free",tabs:null,selectedTabName:"",previouslySelectedTabName:"",tabPanel:null,enableTabScroll:true,tabRefreshPolicy:"refreshOnSelect",tabCreateCounter:1,constructor:function(B,A){this.inherit(B,"tabs",A);this.workflow=A.getConfigParameter("workflow","free");this.tabRefreshPolicy=A.getConfigParameter("tabRefreshPolicy","refreshOnSelect");this.enableTabScroll=A.getConfigParameter("enableTabScroll",true);this.tabs=[]},addTab:function(A){A.parentPanel=this;A.index=this.tabs.length;this.tabs.push(A)},doLayout:function(){if(!this.hasLayout()&&this.isTopLevel){this.layout="viewLayout";this.region="center"}else{if(valueExistsNotEmpty(this.layoutRegion)){var M=Ab.view.View.getLayoutAndRegionById(this.layoutRegion);this.layout=M.layout;this.region=M.region}}var E=[];for(var H=0;H<this.tabs.length;H++){var D=this.tabs[H];var F={title:D.title,contentEl:D.name,autoScroll:true,autoWidth:true,autoHeight:!this.isTopLevel&&D.childPanelIds.length==0};var K=this.id;var C=_.find(View.layoutManagers,function(N){return N.parentPanelId==K&&N.parentTabName==D.name});if(C){D.nestedLayout=C;F.layout="border";F.items=C.regions}else{for(var A=0;A<D.childPanelIds.length;A++){var B=D.childPanelIds[A];Ext.get(D.name).appendChild(B+"_layoutWrapper")}}E.push(F)}this.tabPanel=new Ext.TabPanel({renderTo:this.getWrapperElementId(),activeTab:0,items:E,border:false,enableTabScroll:this.enableTabScroll});this.inherit();var L=null;for(var H=0;H<this.tabs.length;H++){var D=this.tabs[H];if(D.selected){L=D.name}var G=this.tabPanel.getItem(H);D.setTabPanel(G);var J=this.tabPanel.getTabEl(H);if(Ext.get(this.getWrapperElementId()).hasClass("numberedSteps")){var I=Ext.DomQuery.selectNode(".x-tab-strip-text",J.childNodes[1]);if(I){Ext.DomHelper.insertBefore(I,'<span class="wizardTabHeader">'+(H+1)+"</span>")}}}for(var H=0;H<this.tabs.length;H++){var D=this.tabs[H];D.showContent(false);if(D.hasView()&&D.selected){D.loadView.defer(100,D)}this.tabPanel.activate(H)}if(L){this.selectTab(L,null,false,false,true)}this.tabPanel.on("tabchange",this.afterTabChange,this,true);this.tabPanel.on("beforetabchange",this.beforeTabChange,this,true);this.tabPanel.on("beforeremove",this.beforeTabClose,this,true);this.tabPanel.on("remove",this.onTabClose,this,true)},updateHeight:function(){this.syncHeight();this.tabPanel.autoScrollTabs()},syncHeight:function(){var A=this.getLayoutRegion();var D=Ext.get(this.getWrapperElementId());if(this.window){this.tabHeight=this.window.getInnerHeight()-10}else{if(A){this.tabHeight=Ext.get(A.contentEl).parent().getHeight()-3;this.tabWidth=Ext.get(A.contentEl).parent().getWidth()}else{if(this.parentTab){this.tabHeight=this.parentTab.parentPanel.tabHeight-this.getTabStripHeight();this.tabWidth=this.parentTab.parentPanel.tabWidth}}}this.tabHeight-=D.dom.offsetTop;if(Ext.isIE){D.setStyle("height","auto")}else{D.setHeight(this.tabHeight);D.first().setHeight(this.tabHeight)}for(var B=0;B<this.tabs.length;B++){var C=this.tabs[B];C.tabPanel.setHeight(this.tabHeight-this.getTabStripHeight());C.syncHeight()}var E=Ext.DomQuery.selectNode(".x-tab-strip-wrap",D.dom);if(E){E.style.width="100%"}},getTabStripHeight:function(){var A=Ab.tabs.Tabs.TAB_HEIGHT;var B=Ext.get(this.getWrapperElementId());if(B.hasClass("tabs-light")){A+=16}else{if(B.hasClass("numberedSteps")){A+=50}}return A},show:function(A,B){var C=Ext.get(this.getWrapperElementId());if(C&&C.dom.style.display){C.setDisplayed(A)}if(A){this.syncHeight()}},evaluateExpressions:function(A){if(!valueExists(A)){A=this.createEvaluationContext()}for(var B=0;B<this.tabs.length;B++){var C=this.tabs[B];C.evaluateExpressions(A)}},selectFirstVisibleTab:function(){var A=this.tabs[0].name;for(var B=0;B<this.tabs.length;B++){var C=this.tabs[B];if(C.selected&&!C.hidden){var A=C.name}}this.selectTab(A,null,false,false,true)},updateTabStates:function(){for(var A=0;A<this.tabs.length;A++){var B=this.tabs[A];if(this.isWorkflowEnforced()&&B.name!=this.selectedTabName){this.disableTab(B.name)}if(!B.enabled){this.disableTab(B.name)}if(B.hidden){this.hideTab(B.name)}}},isWorkflowEnforced:function(){return(this.workflow=="enforced")},isRefreshOnLoad:function(){return(this.tabRefreshPolicy=="refreshOnLoad")},isRefreshOnSelect:function(){return(this.tabRefreshPolicy=="refreshOnSelect")},refresh:function(A){if(valueExists(A)){this.restriction=A}if(this.isRefreshOnLoad()){for(var B=0;B<this.tabs.length;B++){var C=this.tabs[B];this.refreshTab(C.name)}}else{if(this.isRefreshOnSelect()){this.refreshTab(this.selectedTabName)}}},refreshTab:function(B){var A=this.findTab(B);A.refresh(this.restriction)},findTab:function(C){if(C.constructor==Number){return this.tabs[C]}var B=null;for(var A=0;A<this.tabs.length;A++){if(this.tabs[A].name==C){B=this.tabs[A];break}}return B},findTabById:function(A){var C=null;for(var B=0;B<this.tabs.length;B++){if(this.tabs[B].id==A){C=this.tabs[B];break}}return C},findTabByRestriction:function(A){var D=null;for(var C=0;C<this.tabs.length&&D==null;C++){var B=this.tabs[C];if(valueExists(B.restriction)){if(valueExists(A.equals)){if(A.equals(B.restriction)){D=B}}else{if(objectsEqual(A,B.restriction)){D=B}}}}return D},selectTab:function(H,A,B,G,F){View.log(String.format("Selecting tab [{0}], restriction [{1}]",H,toJSON(A)));var E=this.findTab(H);if(valueExists(A)){E.restriction=A}if(valueExists(B)){E.newRecord=B}if(valueExists(G)){E.clearRestriction=G}this.enableTab(E.name);if(this.selectedTabName!=E.name){this.selectedTabName=E.name;this.tabPanel.activate(E.index)}else{if(this.isRefreshOnSelect()||E.mustRefresh()){if(!valueExists(F)||!F){this.refreshTab(E.name)}}}this.updateTabStates();var C=navigator.userAgent.toLowerCase();if(C.indexOf("msie 8")>-1){var D=E.getContentFrame();if(D&&D.location!="about:blank"){}}return E},createTab:function(H,A,B){if(valueExists(A)){var D=this.findTabByRestriction(A);if(D!=null){this.selectTab(D.name,A,B);return }}this.tabCreateCounter=this.tabCreateCounter+1;var G="page_"+this.tabCreateCounter;var F="&nbsp;&nbsp;&nbsp;&nbsp;";var E=new Ab.tabs.Tab({name:G,title:F,fileName:H,selected:false,enabled:true,hidden:false,useParentRestriction:true,isDynamic:true,useFrame:true});this.addTab(E);if(valueExists(A)){E.restriction=A}if(valueExists(B)){E.newRecord=B}var C=this;E.createTabPanel(function(){C.selectTab(G,A,B)})},closeTab:function(B){if(!valueExistsNotEmpty(B)){B=this.selectedTabName}var A=this.findTab(B);this.tabPanel.remove(A.index)},enableTab:function(B,A){if(!valueExists(A)){A=true}this.findTab(B).enable(A)},disableTab:function(A){this.findTab(A).enable(false)},showTab:function(B,C){if(valueExists(C)&&C===false){this.hideTab(B)}else{var A=this.findTab(B);A.forcedHidden=false;this.tabPanel.unhideTabStripItem(A.index)}},hideTab:function(B){var A=this.findTab(B);A.forcedHidden=true;this.tabPanel.hideTabStripItem(A.index)},setTabRestriction:function(B,A){this.findTab(B).restriction=A},setTabsRestriction:function(A,B){if(valueExists(B)){this.setTabRestriction(B,A)}else{this.restriction=A}},getTabsRestriction:function(A){if(valuExists(A)){return this.findTab(A).restriction}else{return this.restriction}},setTabEnabled:function(B,A){this.enableTab(B,A)},setAllTabsEnabled:function(A){for(var B=0;B<this.tabs.length;B++){var C=this.tabs[B];this.enableTab(C.name,A)}},setTabVisible:function(A,B){this.showTab(A,B)},setTabTitle:function(A,B){this.findTab(A).setTitle(B)},getSelectedTabName:function(){return this.selectedTabName},addTabsEventListener:function(eventListenerCode){var f=function(){eval(eventListenerCode)};this.addEventListener("beforeTabChange",f)},beforeTabChange:function(G,D,B){var I=true;var E=this.findTabById(D.id);var F=this.findTabById(B.id);var H=(F)?F.name:this.selectedTabName;var A=this.getEventListener("beforeTabChange");if(valueExists(A)){if(A.call){I=A(this,H,E.name)}else{var C={tabPanel:this,currentTab:H,newTab:E.name};A.handle(C);I=C.canChange}}if(I){if(E.hasView()&&!E.isContentLoaded){E.loadView()}if(this.isRefreshOnSelect()||E.mustRefresh()){this.refreshTab(E.name)}if(F&&!F.isClosed){F.showContent(false)}}return I},afterTabChange:function(C,D){var B=this.findTabById(D.id);B.showContent(true);this.previouslySelectedTabName=this.selectedTabName;this.selectedTabName=B.name;B.afterSelect();eventListener=this.getEventListener("afterTabChange");if(valueExists(eventListener)){if(eventListener.call){eventListener(this,this.selectedTabName)}else{var A={tabPanel:this,selectedTab:this.selectedTabName};eventListener.handle()}}this.updateHeight()},beforeTabClose:function(E,B){var A=true;eventListener=this.getEventListener("beforeTabClose");if(valueExists(eventListener)){if(eventListener.call){A=eventListener(this,B.id)}else{var C={tabPanel:this,tabName:B.id};eventListener.handle(C);A=C.canClose}}if(A){var D=this.findTabById(B.id);D.isClosed=true}return A},onTabClose:function(D,A){var C=this.findTabById(A.id);this.tabs.splice(C.index,1);for(var B=0;B<this.tabs.length;B++){this.tabs[B].index=B}if(this.previouslySelectedTabName!=C.name){this.selectTab(this.previouslySelectedTabName)}}},{TAB_HEIGHT:32});Ab.tabs.Tab=Ab.view.Component.extend({index:0,id:"",name:"",title:"",fileName:"",useFrame:true,selected:false,enabled:true,hidden:false,forcedHidden:false,useParentRestriction:true,clearRestriction:false,restriction:null,newRecord:false,childPanelIds:null,isDynamic:false,isContentLoaded:false,isContentLoading:false,isRefreshed:false,isClosed:false,frame:null,tabPanel:null,parentPanel:null,config:null,constructor:function(A){this.config=A;Ext.apply(this,A);this.enabled=true;this.hidden=false;this.childPanelIds=[];if(valueExists(this.config.title)){this.config.title=convertFromXMLValue(this.config.title)}this.eventListeners=new Ext.util.MixedCollection(true)},evaluateExpressions:function(A){if(this.forcedHidden){return }var D=Ab.view.View.evaluateString(this.config.title,A);if(D.indexOf("${")==-1){this.tabPanel.setTitle(D)}if(!this.parentPanel.isWorkflowEnforced()){var C=Ab.view.View.evaluateBoolean(this.config.enabled,A,true);this.enable(C)}var B=Ab.view.View.evaluateBoolean(this.config.hidden,A,false);this.show(!B)},setTabPanel:function(A){this.tabPanel=A;this.id=A.id;this.frame=new Ext.ux.ManagedIFrame(this.name);this.syncHeight.defer(100,this)},createTabPanel:function(B){this.frame=new Ext.ux.ManagedIFrame({autoCreate:{id:this.name+"_frame",width:"100%",height:"100%"}});this.frame.setStyle("border","none");this.loadView(B);var A=this.parentPanel.tabPanel.add({id:this.name,title:this.title,contentEl:this.frame,autoWidth:true,autoHeight:true,border:false,closable:true});this.tabPanel=A;this.id=this.name},addChildPanelId:function(A){this.childPanelIds.push(A)},loadView:function(A){this.log("loading view "+this.fileName);if(View.showLoadProgress){View.openProgressBar()}this.callback=A;this.isContentLoading=true;this.frame.setSrc(this.fileName,true)},afterLoadView:function(B){this.log("Child view loaded");this.isContentLoading=false;this.syncHeight();this.setTitle(B.title);this.log("Before refreshing child view");if(valueExists(this.callback)&&typeof this.callback=="function"){this.callback()}else{if(valueExists(this.restriction)||this.newRecord){B.refresh(this.restriction,this.newRecord,this.clearRestriction)}}this.isRefreshed=true;this.isContentLoaded=true;View.closeProgressBar();var A=this.getEventListener("afterLoad");if(A){A(this,B)}this.log("After refreshing child view")},getContentFrame:function(){var A=null;if(this.hasView()){A=this.frame.getWindow()}return A},setTitle:function(A){if(A&&A.indexOf("${")==-1&&A!=""){this.title=A;this.config.title=A;this.tabPanel.setTitle(A)}},mustRefresh:function(){return(this.isDynamic&&!this.isRefreshed)},refresh:function(B){if(valueExists(this.restriction)){B=this.restriction}if(this.hasView()){if(!this.isContentLoading){var E=this.getContentFrame();var F=E.View;if(valueExists(F)){F.refresh(B,this.newRecord,this.clearRestriction)}this.isRefreshed=true}}else{for(var D=0;D<this.childPanelIds.length;D++){var C=this.childPanelIds[D];var A=View.panels.get(C);if(A.useParentRestriction){A.refresh(B,this.newRecord)}else{A.refresh()}this.isRefreshed=true;break}}},afterSelect:function(){if(this.hasView()){if(this.isContentLoading){this.afterSelect.defer(100,this)}else{var C=this.getContentFrame();if(C!=null&&valueExists(C.View)&&valueExists(C.user_form_afterSelect)){C.user_form_afterSelect()}var D=this.getEventListener("afterSelect");if(D){D(this)}if(C!=null&&valueExists(C.View)){for(var B=0;B<C.View.panels.length;B++){var A=C.View.panels.get(B);this.updateChildPanelHeight(A)}}}}else{for(var B=0;B<this.childPanelIds.length;B++){var A=View.panels.get(this.childPanelIds[B]);this.updateChildPanelHeight(A)}}},updateChildPanelHeight:function(A){if(A){if(A.type=="grid"||A.type=="tree"||A.type=="tabs"){A.updateHeight()}else{if(A.type=="chart"){A.syncHeight()}}}},showContent:function(E){if(this.hasView()){var D=this.getContentFrame();if(D!=null&&valueExists(D.View)){var A=D.View.getMainPanel();if(A){A.showActions(E)}}}else{for(var C=0;C<this.childPanelIds.length;C++){var B=this.childPanelIds[C];var A=View.panels.get(B);A.showActions(E)}}},syncHeight:function(){if(this.hasView()&&!this.isContentLoading){var C=this.parentPanel.getLayoutRegion();if(C){var F=Ext.get(C.contentEl).parent().getHeight();this.frame.setHeight(F-this.parentPanel.getTabStripHeight()-8)}else{var F=this.parentPanel.tabHeight;this.frame.setHeight(F-this.parentPanel.getTabStripHeight()-(Ext.isIE?4:0))}var H=this.getContentFrame();if(H&&H.document&&H.document.body){H.document.body.style.position=""}}if(!this.hasView()){for(var E=0;E<this.childPanelIds.length;E++){var B=View.panels.get(this.childPanelIds[E]);if(B){B.parentTab=this}}var B=View.panels.get(this.childPanelIds[0]);if(B){if(B.type==="tabs"||B.type==="chart"||B.type=="htmlPanel"){B.syncHeight()}else{B.updateHeight()}}if(this.childPanelIds.length>1){var B=View.panels.get(this.childPanelIds[this.childPanelIds.length-1]);if(B){B.updateHeight()}}if(this.isScrollContent()){this.updateScroller()}}if(this.nestedLayout){for(var E=0,A=this.nestedLayout.regions.length;E<A;E++){var G=this.nestedLayout.regions[E];var D=this.nestedLayout.getPanelsForRegion(G);if(D.length>0){D[0].clearScroller();D[0].updateHeight()}}}this.showContent(this.name==this.parentPanel.selectedTabName)},isScrollContent:function(){var A=false;if(View.useScroller()&&!this.hasView()){var B=this.getChildPanels();if(B.length>0){if(B.length==1&&B[0].isScrollInLayout()){A=true}else{if(B.length>1&&B[B.length-1].isScrollInLayout()){A=true}}}}return A},updateScroller:function(){if(this.tabPanel.el.getHeight()<=0){return }if(!this.tabPanel.scroller){this.tabPanel.scroller=new Ab.view.Scroller(this.tabPanel.body.dom.firstChild);this.tabPanel.body.dom.style.overflow="hidden"}this.tabPanel.scroller.update()},getChildPanels:function(){var A=[];if(!this.hasView()){A=_.map(this.childPanelIds,function(B){return View.panels.get(B)});A=_.filter(A,function(B){return(B.type!=="viewPanel"&&!B.hidden)})}return A},hasView:function(){return this.useFrame&&valueExistsNotEmpty(this.fileName)},hasChanges:function(){var A=false;if(this.hasView()){var B=this.getContentFrame();A=B.afm_form_values_changed}return A},enable:function(A){if(A){this.tabPanel.enable()}else{this.tabPanel.disable()}},show:function(A){this.hidden=!A;if(A){this.parentPanel.showTab(this.name)}else{this.parentPanel.hideTab(this.name);this.parentPanel.selectFirstVisibleTab()}},log:function(A){A=String.format("Tab panel [{0}], tab [{1}]: {2}",this.parentPanel.id,this.name,A);View.log(A)}});Ab.namespace("form");Ab.form.ValidationResult=Base.extend({valid:true,message:"",detailedMessage:"",invalidFields:null,constructor:function(){this.invalidFields={}}});Ab.form.FieldBase=Base.extend({panel:null,config:null,actions:null,constructor:function(A,B){this.panel=A;this.config=B;this.actions=new Ext.util.MixedCollection();if(valueExists(B.actions)){for(var C=0;C<B.actions.length;C++){this.addAction(B.actions[C])}}},addAction:function(A){A.useExtButton=false;var B=new Ab.view.Action(this.panel,A);this.actions.add(B.id,B)}});Ab.form.Field=Ab.form.FieldBase.extend({dom:null,fieldDef:null,hidden:false,docFieldEventListeners:null,focus:false,unevaluatedTitle:null,fieldSetId:null,constructor:function(B,D){this.inherit(B,D);this.focus=D.focus;this.fieldDef=new Ab.data.FieldDef(D);this.unevaluatedTitle=this.title;this.dom=this.panel.getFieldElement(this.getId());var E=this.panel.getFieldCell(this.getId());if(E){E.onmouseover=function(){Ext.get(this).addClass("hovered")};E.onmouseout=function(){Ext.get(this).removeClass("hovered")}}if(this.dom){if(this.fieldDef.rowspan>1&&this.fieldDef.format==="Memo"){var F=("top"===this.panel.labelsPosition)?22:0;var C=22;var A=26;Ext.get(this.dom).setHeight(C+(this.fieldDef.rowspan-1)*(F+A))}this.dom.onkeyup=this.afterChange.createDelegate(this);this.dom.onkeydown=this.afterKeyDown.createDelegate(this)}if(D.isDocument){this.docFieldEventListeners=new Ext.util.MixedCollection(true)}},afterKeyDown:function(){this.panel.clearLookupFieldValue(this.getId())},afterChange:function(){if(this.config.controlType==="multiEdit"){if(this.dom.clientHeight<this.dom.scrollHeight){this.dom.style.height=this.dom.scrollHeight+"px";if(this.dom.clientHeight<this.dom.scrollHeight){this.dom.style.height=(this.dom.scrollHeight*2-this.dom.clientHeight)+"px"}}}},evaluateExpressions:function(A){var F=this.getId();var B=Ab.view.View.evaluateBoolean(this.config.readOnly,A,false);if(B!=this.fieldDef.readOnly){this.fieldDef.readOnly=B;this.panel.enableField(F,!B)}var D=Ab.view.View.evaluateBoolean(this.config.hidden,A,false);if(D!=this.hidden){this.hidden=D;this.panel.showField(F,!D)}var E=Ab.view.View.evaluateString(this.config.title,A,false);if(E!=this.fieldDef.title){this.panel.setFieldLabel(F,E)}var C=Ab.view.View.evaluateString(this.config.value,A,false);if(C!=this.fieldDef.value){this.fieldDef.value=C;this.panel.record.setValue(F,C);this.setUIValue(C)}this.actions.each(function(G){G.evaluateExpressions(A)})},getId:function(){return this.fieldDef.id},getFullName:function(){return this.fieldDef.fullName},getInitialValue:function(){return this.fieldDef.value},getStoredValue:function(){var C=this.getId();var A=C.indexOf("_lookupFor_");if(A!=-1){var B=C.slice(0,A);if(this.panel.lookupFieldsProcessed&&!valueExists(this.panel.lookupFieldsProcessed[B])){this.panel.lookupFieldsProcessed[B]=true;C=C.slice(0,A)}}return this.panel.record.getValue(C)},setStoredValue:function(A){this.panel.record.setValue(this.getId(),A)},getUIValue:function(){return this.panel.getFieldValue(this.getId())},setUIValue:function(B,C,A){this.panel.setFieldValue(this.getId(),B,C,A)},getInstructionsEl:function(){return Ext.get(this.panel.getFieldElementName(this.getId())+"_instructionsText")},clear:function(){if(this.panel.isConsole&&this.fieldDef.isEnum){this.addAllToEnumFieldForConsole()}this.panel.setFieldTooltip(this.getId(),"");this.setUIValue(this.getInitialValue(),null,false);if(this.fieldDef.controlType==="image"){this.panel.clearImage(this.getId())}this.panel.clearLookupFieldValue(this.getId())},addAllToEnumFieldForConsole:function(){if(this.dom&&this.dom.firstChild&&this.dom.firstChild.text!=""){var A=document.createElement("option");A.value="";A.appendChild(document.createTextNode(""));this.dom.insertBefore(A,this.dom.firstChild)}},clearOptions:function(){if(this.fieldDef.controlType==="comboBox"){for(var A=this.dom.length-1;A>=0;A--){this.dom.remove(A)}}},addOption:function(B,C){var A=document.createElement("option");A.value=B;A.appendChild(document.createTextNode(C));this.dom.appendChild(A)},removeOptions:function(B){if(this.fieldDef.controlType==="comboBox"){for(var A in B){for(var C=this.dom.length-1;C>=0;C--){if(A==this.dom[C].value){this.dom.remove(C);break}}}}},syncToUI:function(){var A=this.getStoredValue();if(valueExists(A)){var B=A;A=this.fieldDef.formatValue(A,true,false);this.setUIValue(A,B)}return A},syncFromUI:function(){var A=this.getUIValue();if(valueExists(A)){A=this.fieldDef.parseValue(A,false);this.setStoredValue(A)}return A},setInvalid:function(A){this.panel.addInvalidField(this.getId(),A)},addDocumentFieldEventListener:function(A,E,C){if(!this.docFieldEventListeners){return }var B=null;if(typeof E=="function"){B=E}else{View.controllers.each(function(F){var G=F[E];if(valueExists(G)&&G.constructor==Function){B=G;return }})}if(valueExists(B)){if(valueExists(C)){B=B.createDelegate(C)}if(this.docFieldEventListeners.containsKey(A)){this.docFieldEventListeners.replace(A,B)}else{this.docFieldEventListeners.add(A,B)}}else{var D="The document field listener for event "+A+" was not found";View.showMessage("message",D)}},getDocumentFieldEventListener:function(A){return this.docFieldEventListeners.get(A)},removeDocumentFieldEventListener:function(A){this.docFieldEventListeners.removeKey(A)}});Ab.form.FieldSet=Ab.form.FieldBase.extend({fields:null,collapsed:false,constructor:function(A,E){this.inherit(A,E);this.fields=new Ext.util.MixedCollection();for(var I=0;I<E.fieldDefs.length;I++){var F=E.fieldDefs[I];var J=new Ab.form.Field(A,F);J.fieldSetId=this.config.id;A.fields.add(F.id,J);this.fields.add(F.id,J)}var C=A.id+"_"+E.id+"_labelCell";var G=$(C);this.collapsible=E.collapsible;this.collapsed=E.collapsed;if(this.collapsible){var D=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/tri-opened.png";var H=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/tri-closed.png";G.style.paddingLeft="18px";var K=this;var B=function(){K.collapsed=!K.collapsed;var L=K.collapsed?H:D;G.style.background="url("+L+") no-repeat 0 50%";jQuery(G).parent().siblings().toggle(!K.collapsed);A.updateLayoutScroller()};Ext.get(C).addListener("click",B);this.collapsed=!this.collapsed;B()}}});Ab.form.Form=Ab.view.Component.extend({formId:"",viewDef:null,fields:null,fieldsets:null,clearWorkflowRuleId:"",refreshWorkflowRuleId:"",saveWorkflowRuleId:"",deleteWorkflowRuleId:"",validationResult:null,newRecord:false,showOnLoad:false,record:null,defaultRecord:null,isConsole:false,labelsPosition:"left",columns:1,constructor:function(E,C){this.inherit(E,"form",C);this.viewDef=new Ab.view.ViewDef(C.getConfigParameter("viewDef"),C.getConfigParameter("groupIndex"),null,null,C.getConfigParameter("dataSourceId"));this.formId=C.getConfigParameter("panelId");this.isConsole=C.getConfigParameter("isConsole",false);this.labelsPosition=C.getConfigParameter("labelsPosition","left");this.showOnLoad=C.getConfigParameter("showOnLoad",false);this.newRecord=C.getConfigParameter("newRecord",false);if(this.newRecord==false){this.newRecord=Ab.view.View.newRecord}this.fields=new Ext.util.MixedCollection();this.fieldsets=new Ext.util.MixedCollection();var D=C.getConfigParameter("fieldDefs");for(var B=0;B<D.length;B++){var A=D[B];if(A){if("fieldset"===A.type){this.fieldsets.add(A.id,new Ab.form.FieldSet(this,A))}else{this.fields.add(A.id,new Ab.form.Field(this,A))}}}this.record=new Ab.data.Record(this.getFieldValues());this.defaultRecord=new Ab.data.Record(this.getFieldValues());this.addEventListenerFromConfig("beforeSave",C);this.addEventListenerFromConfig("beforeDelete",C);this.addEventListenerFromConfig("onAutoCompleteClear",C);this.addEventListenerFromConfig("onAutoCompleteQuery",C);this.addEventListenerFromConfig("onAutoCompleteSelect",C);this.refreshWorkflowRuleId=C.getConfigParameterNotEmpty("refreshWorkflowRuleId",Ab.form.Form.WORKFLOW_RULE_REFRESH);this.saveWorkflowRuleId=C.getConfigParameterNotEmpty("saveWorkflowRuleId",Ab.form.Form.WORKFLOW_RULE_SAVE);this.deleteWorkflowRuleId=C.getConfigParameterNotEmpty("deleteWorkflowRuleId",Ab.form.Form.WORKFLOW_RULE_DELETE);this.clearWorkflowRuleId=C.getConfigParameterNotEmpty("clearWorkflowRuleId",Ab.form.Form.WORKFLOW_RULE_CLEAR);this.updateDocumentButtons();this.visible=true;this.columns=C.getConfigParameter("columns",1)},getScrollableEl:function(){return null},getParentElementId:function(){return this.id+"_body"},initialDataFetch:function(){if(this.isConsole){this.clear()}else{if((this.showOnLoad||this.restriction!=null||this.newRecord)&&this.viewDef.dataSourceId!="none"){this.refresh()}}this.show(this.showOnLoad);var A=new Ab.form.AutoComplete();A.addAutoCompleteToFormFields.defer(1000,A,[this])},show:function(A,B){this.inherit(A,B);if(this.visible){this.setFocusField.defer(500,this)}},setFocusField:function(){var A=this.fields.find(function(C){return(C.focus)});if(A){var B=this.getFieldElement(A.getId());if(B){B.focus()}}},clear:function(){this.fields.each(function(A){A.clear()});this.defaultRecord=new Ab.data.Record(this.getFieldValues());this.clearValidationResult();if(!View.supportsPlaceholders()){Placeholders.create()}},createEvaluationContext:function(){var A=this.inherit();A.record=this.record.values;return A},evaluateExpressions:function(A){this.inherit();if(!A){A=this.createEvaluationContext()}this.fields.each(function(B){B.evaluateExpressions(A)});this.updateDocumentButtons()},doRefresh:function(){this.clear();this.clearValidationResult();var D=(this.newRecord==true)?this.clearWorkflowRuleId:this.refreshWorkflowRuleId;try{var A=Workflow.call(D,this.getParameters(false));var B=this.getDataSource().processInboundRecord(A.dataSet);this.setRecord(B);this.show(true)}catch(C){this.validationResult.valid=false;this.displayValidationResult(C)}if(this.newRecord){this.fields.eachKey(function(I){var F=this.defaultRecord.getValue(I);if(valueExistsNotEmpty(F)){var H=this.fields.get(I).fieldDef;if(H.isEnum){var E=true;for(var G in H.enumValues){if(G===F&&!E){this.setFieldValue(I,F);break}E=false}}else{if(!H.isNumber()||F>0){this.setFieldValue(I,F)}}}},this)}else{this.updateLookupFieldValues()}if(!View.supportsPlaceholders()){Placeholders.refresh()}},save:function(D){if(!valueExists(D)){D=this.saveWorkflowRuleId}if(this.canSave()){try{var A=Workflow.call(D,this.getParameters(true));if(valueExists(A.dataSet)){var B=this.getDataSource().processInboundRecord(A.dataSet);this.setRecord(B);this.newRecord=false;this.refresh(this.getPrimaryKeyRestriction());this.displayValidationResult(A)}else{this.updateOldFieldValues();this.newRecord=false;this.displayValidationResult(A)}}catch(C){this.validationResult.valid=false;this.displayValidationResult(C)}}return this.validationResult.valid},canSave:function(){this.clearValidationResult();var A=this.getEventListener("beforeSave");if(A){var B=A(this);if(valueExists(B)&&B==false){this.validationResult.valid=false;this.displayValidationResult();return false}}return this.validateFields(false)},deleteRecord:function(){this.clearValidationResult();var B=this.getEventListener("beforeDelete");if(B){var D=B(this);if(valueExists(D)&&D==false){this.validationResult.valid=false;this.displayValidationResult();return false}}var C=this.getParameters(true);C.fieldValues=C.oldFieldValues;var A=Workflow.runRuleAndReturnResult(this.deleteWorkflowRuleId,C,this.afterDelete,this);if(A.code=="executed"){this.displayValidationResult(A)}else{this.validationResult.valid=false;this.displayValidationResult(A)}return this.validationResult.valid},getRecord:function(){this.fields.each(function(A){A.syncFromUI()});return this.record},setRecord:function(A){this.record=A;this.onModelUpdate()},onModelUpdate:function(){this.lookupFieldsProcessed={};this.fields.each(function(B){B.syncToUI()});this.updateDocumentButtons();this.evaluateExpressions();var A=String.format("Form model updated: {0}",this.id);View.log(A)},showFieldDescription:function(A,B){var E=A+"_descriptionText";var D=Ext.get(E);if(D===null){var F=this.getFieldElement(A);var C=Ext.DomHelper.insertAfter(F,{tag:"br"},true);D=Ext.DomHelper.insertAfter(C,{tag:"span",id:E,cls:"showingDateAndTimeLongFormat"},true)}D.dom.innerHTML=B},validateFields:function(A){if(!valueExists(A)){A=true}this.fields.eachKey(function(E){var B=this.getFieldElement(E);var D=this.fields.get(E);if(valueExists(B)&&D&&!D.hidden){var C=this.validateField(E,true,A);if(!C){this.addInvalidField(E,"")}}},this);if(this.validationResult.valid==false){this.displayValidationResult()}return this.validationResult.valid},addInvalidField:function(B,A){this.validationResult.valid=false;this.validationResult.message=Ab.view.View.getLocalizedString(Ab.form.Form.z_MESSAGE_INVALID_FIELD);this.validationResult.invalidFields[B]=A},getOutboundRecord:function(){var A=new Ab.data.Record();A.isNew=this.newRecord;A.values=this.getFieldValues(true);A.oldValues=this.getOldFieldValues();return this.getDataSource().processOutboundRecord(A)},getParameters:function(B){var A={viewName:this.viewDef.viewName,groupIndex:this.viewDef.tableGroupIndex,controlId:this.id,controlType:this.type,isNewRecord:this.newRecord,version:Ab.view.View.version};if(this.restriction!=null){A.restriction=toJSON(this.restriction)}if(this.viewDef.dataSourceId!=null){A.dataSourceId=this.viewDef.dataSourceId}if(B){A.fieldValues=toJSON(this.getFieldValues(true));A.oldFieldValues=toJSON(this.getOldFieldValues())}Ext.apply(A,this.parameters);return A},getFieldQueryParameter:function(D){var C=" IS NOT NULL";if(this.hasFieldMultipleValues(D)){var A=this.getFieldMultipleValues(D);C=" IN ('"+A.join("','")+"')"}else{var B=this.getFieldValue(D);if(B){C=" = '"+B+"'"}}return C},getFieldRestriction:function(){var A=new Ab.view.Restriction();var B=this;this.fields.each(function(D){var C=D.getUIValue();if(D.fieldDef.type==="java.lang.Double"){C=D.fieldDef.formatValue(C,false,false)}if(valueExistsNotEmpty(C)){var E=D.getFullName();if(B.isLookupField(E)){}else{if(B.hasFieldMultipleValues(E)){A.addClause(E,B.getFieldMultipleValues(E),"IN")}else{if(C==="NULL"||C==="NOT NULL"){A.addClause(E,null,"IS "+C)}else{A.addClause(E,C,D.fieldDef.op)}}}}});return A},setFieldRestriction:function(A){var B=this;this.fields.each(function(D){var E=D.getId();var C=A.findClause(E);if(C){B.setFieldValue(E,C.value)}else{B.setFieldValue(E,"")}})},getFieldValues:function(B){B=B||false;var A={};this.fields.each(function(D){if(valueExists(D.fieldDef)&&valueExists(D.fieldDef.controlType)&&valueExists(D.fieldDef.controlType)&&D.fieldDef.controlType!="image"){var C=D.getUIValue();if((B&&valueExists(C))||valueExistsNotEmpty(C)){A[D.getId()]=C}}});return A},hasFieldValues:function(){var A=false;this.fields.each(function(C){var B=C.getUIValue();if(valueExistsNotEmpty(B)){A=true}});return A},getOldFieldValues:function(){var A={};this.fields.each(function(C){var B=C.getStoredValue();if(B!=null){B=C.fieldDef.formatValue(B,false);A[C.getId()]=B}});return A},updateOldFieldValues:function(){this.fields.each(function(B){var A=B.getUIValue();if(A!=null){A=B.fieldDef.formatValue(A,false);B.setStoredValue(A)}})},containsField:function(A){return(this.getFieldElement(A)!=null)},getFieldValue:function(L){var K="";var B=this.getFieldElement(L);if(B!=null&&valueExists(B.value)){var I=B.getAttribute("placeholder")||"";if(I.toUpperCase()===B.value.toUpperCase()){K=""}else{K=trim(B.value)}var H=this.fields.get(L);var G=H.fieldDef.type.toUpperCase();var J=H.fieldDef.format.toUpperCase();K=convertFieldValueIntoValidFormat(G,J,K);if(G!="JAVA.SQL.TIME"){K=convert2validXMLValue(K)}else{var F=this.getFieldElement(L,"Stored");if(F){K=F.value}}K=convertFromXMLValue(K)}else{var A=document.forms[this.formId];var E=this.getFieldElementName(L);var D=A[E];if(D){for(var C=0;C<D.length;C++){if(D[C].checked){K=D[C].value;break}}}}return K},getCheckboxValues:function(F){var B=[];var D=document.forms[this.formId];var E=this.getFieldElementName(F);var A=D[E];if(A){if(A.length){for(var C=0;C<A.length;C++){if(A[C].checked){B.push(A[C].value)}}}else{if(A.checked){B.push(A.value)}}}return B},clearCheckbox:function(E){var C=document.forms[this.formId];var D=this.getFieldElementName(E);var A=C[D];if(A){if(A.length){for(var B=0;B<A.length;B++){A[B].checked=false}}else{A.checked=false}}},setCheckbox:function(G,E,D){var C=document.forms[this.formId];var F=this.getFieldElementName(G);var A=C[F];if(A){if(A.length){for(var B=0;B<A.length;B++){if(A[B].value===E){A[B].checked=D;break}}}else{A.checked=D}}},setFieldValue:function(P,E,Q,O){if(!valueExists(Q)){Q=E}if(!valueExists(O)){O=true}var J=this.getFieldElement(P);if(J!=null){if(J.tagName=="SELECT"){if(valueExistsNotEmpty(Q)){this.setInputValue(P,Q,O)}else{J.selectedIndex=0}}else{J.value="";var L=this.fields.get(P);var K=L.fieldDef.type.toUpperCase();var N=L.fieldDef.format.toUpperCase();if(K==="JAVA.SQL.TIME"){Q=""+Q;var C=Q.substring(Q.indexOf(":")-2);C=C.substring(0,8);this.setInputValue(P,C,O)}else{if(K==="JAVA.SQL.DATE"){this.setInputValue(P,""+E,O);if(valueExistsNotEmpty(E)){var I=[];if(E.getMonth){E=getIsoFormatDate(E)}if(isBeingISODateFormat(E)){var M=E.split("-");I.year=M[0];I.month=M[1];I.day=M[2]}else{I=gettingYearMonthDayFromDate(E)}E=FormattingDate(I.day,I.month,I.year,strDateShortPattern)}}else{this.setInputValue(P,""+E,O);if(N=="MEMO"&&valueExistsNotEmpty(E)){E=E.replace(/\r\n/g,"<br/>");E=E.replace(/\n/g,"<br/>")}}}}}else{var B=document.forms[this.formId];var H=this.getFieldElementName(P);var G=B[H];if(G){for(var F=0;F<G.length;F++){G[F].checked=(G[F].value===Q)}}}var A=this.getFieldElement(P,"Show");if(A!=null){A.innerHTML=E}var D=this.getFieldElement(P+"_numeric","Show");if(D==null){D=this.getFieldElement(P+"_short","Show")}if(D!=null){D.innerHTML=E}this.updateLookupFieldValue(P)},setInputValue:function(I,B,H){if(!valueExists(H)){H=true}var G=this.fields.get(I);var C=G.fieldDef;var F=C.type.toUpperCase();if(F!="JAVA.SQL.DATE"&&F!="JAVA.SQL.TIME"){B=convertFromXMLValue(B)}var E=this.getFieldElement(I);E.value=B;G.afterChange();if(H){this.validateField(I,false)}if(F=="JAVA.SQL.DATE"){var A=[];if(valueExistsNotEmpty(B)){if(isBeingISODateFormat(B)){A=B.split("-")}else{var D=gettingYearMonthDayFromDate(B);A[0]=D.year;A[1]=D.month;A[2]=D.day}validationAndConvertionDateInput(E,E.name,A,C.required,true,true)}else{validationAndConvertionDateInput(E,E.name,null,"false",true,false)}}else{if(F=="JAVA.SQL.TIME"){var J=null;if(valueExistsNotEmpty(B)){J=B.split(":")}validationAndConvertionTimeInput(E,E.name,J,"false",true,true)}}return true},hasFieldMultipleValues:function(B){var A=this.getFieldValue(B);return(A.indexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR)>0)},getFieldMultipleValues:function(D,C){var A;if(!valueExists(C)){C=true}var B=this.getFieldValue(D);if(this.hasFieldMultipleValues(D)){A=B.split(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR);if(C){A=this.getFieldUniqueMultipleValues(A)}}else{A=[];A.push(B)}return A},getFieldUniqueMultipleValues:function(A){var D={},C=[];for(var B=0;B<A.length;B++){if(!D[A[B]]){D[A[B]]=true;C.push(A[B])}}return C},setFieldMultipleValues:function(C,A){var B=A.join(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR);this.setFieldValue(C,B)},setFieldLabel:function(C,A){var B=this.getFieldLabelElement(C);if(B!=null){B.innerHTML=A}else{fieldEl=this.getFieldElement(C,"Show");if(fieldEl!=null){fieldEl.parentNode.parentNode.firstChild.innerHTML=A}}},setFieldTooltip:function(C,A){var B=this.getFieldElementName(C,"");Ext.QuickTips.unregister(B);A=A.replace(/\^/g," ");A=replaceHTMLPlaceholders(A);if(A!=""){Ext.QuickTips.register({target:B,text:A})}},toUpperCase:function(B){var A=B.value;if(valueExistsNotEmpty(A)){B.value=A.toUpperCase()}},validateField:function(K,M,A){if(!valueExists(A)){A=true}var E=true;var D=this.getFieldElement(K);if(D!=null){var I=this.fields.get(K).fieldDef;var C=I.size;var J=I.format.toUpperCase();var H=I.type.toUpperCase();var B=I.decimals;var F=I.required;var L=(I.selectValueType==="multiple");if(!I.isEnum){if(H=="JAVA.LANG.INTEGER"){E=validationIntegerOrSmallint(D,A,I)}else{if(H=="JAVA.LANG.DOUBLE"||H=="JAVA.LANG.FLOAT"){var G="";if(valueExistsNotEmpty(I.defaultValue)&&I.defaultValue!="null"&&I.defaultValue!="NULL"){G=I.formatValue(I.defaultValue,true)}E=validationNumeric(D,B,A,G,I)}}if(I.isUpperCase()){this.toUpperCase(D)}if(J==="UPPERALPHANUM"){E=validationUPPERALPHANUMString(D.value,A,I)}else{if(J==="UPPERALPHA"){E=validationUPPERALPHAString(D.value,A,I)}}if(M&&(!validationRequiredField(D,F?"true":"false"))){E=false}if(E){if(H=="JAVA.LANG.INTEGER"||H=="JAVA.LANG.DOUBLE"||H=="JAVA.LANG.FLOAT"){E=doMaxAndMinValidation(D.value,I,A)}}if(E){if(H!="JAVA.SQL.DATE"&&H!="JAVA.SQL.TIME"&&!L){E=validationDataMaxSize(D,I,A)}}}}return E},enableField:function(G,C){var F=this.getFieldElement(G);if(F!=null){var E=this.fields.get(G);var A=[];if(this.fieldsets.length>0&&valueExistsNotEmpty(E.fieldSetId)){A.push(F)}else{A=F.parentNode.childNodes}for(var D=0;D<A.length;D++){var B=A[D];if(B.type==="hidden"||!valueExists(B.type)){}else{if(B.tagName==="SELECT"){B.disabled=!C}else{B.readOnly=!C}}}this.enableFieldHover(G,C)}this.enableFieldActions(G,C)},enableFieldHover:function(D,A){var C=this.getFieldElement(D);if(C!=null){var B=this.fields.get(D);if(this.fieldsets.length>0&&valueExistsNotEmpty(B.fieldSetId)){A=this.hasVisibleFields(B.fieldSetId)}if(A){Ext.get(C.parentNode).removeClass("nohover")}else{Ext.get(C.parentNode).addClass("nohover")}}},enableFieldActions:function(C,A){var B=this.fields.get(C);if(B!=null){B.actions.each(function(D){D.enable(A)});this.enableFieldHover(C,A)}},showField:function(H,B){var F=this.getFieldElement(H);if(F!=null){var D=F.parentNode;if(this.fieldsets.length>0){D=F;var C=this.getFieldElement(H+"_selectValue");if(C){this.showElement(C,B)}if(jQuery(D.parentElement.parentElement).hasClass("fieldsetFluid")){if(D.previousSibling&&D.previousSibling.previousSibling&&D.previousSibling.previousSibling.tagName.toUpperCase()=="SPAN"){this.showElement(D.previousSibling.previousSibling,B)}}else{this.showElement(D.parentElement.parentElement,B)}}else{if(this.columns<2){while(D.tagName!="tr"&&D.tagName!="TR"&&D.parentNode){D=D.parentNode}}}this.showElement(D,B);var A=this.getFieldLabelElement(H);if(A){this.showElement(A,B)}var E=this.fields.get(H);if(B){if(E){var G=E.actions.get(0);if(!G||G.enabled){this.enableFieldHover(H,B)}}}else{this.enableFieldHover(H,B)}}},hasVisibleFields:function(B){var A=false;var C=this.fieldsets.get(B);C.fields.each(function(D){A=!D.hidden});return A},getFieldElement:function(B,A){return $(this.getFieldElementName(B,A),false)},getFieldElementName:function(C,B){var A="";if(valueExists(B)){A=B}return A+this.id+"_"+C},getFieldCell:function(C){var B=null;var A=this.getFieldElement(C);if(A){B=A.parentNode}else{B=$(this.id+"_"+C+"_fieldCell")}return B},getFieldLabelElement:function(B){var A=this.getFieldElementName(B,"")+"_labelCell";return $(A,false)},updateDocumentButtons:function(){var A=this.id;this.fields.each(function(K){var E=K.fieldDef;if(E.isDocument){var B=K.panel;var D=E.fullName;var F=B.getFieldElement(D);F.disabled=B.newRecord;var H=B.getFieldValue(D);var M=(H!="");var C=M;var J=(!M&&!E.readOnly&&!B.newRecord);var L=(M&&!E.readOnly&&!B.newRecord);var I=J&&!E.showCheckInDialog;var G=A+"_"+D;B.showElement(G+"_showDocument",C);B.showElement(G+"_checkInNewDocument",J&&E.showCheckInDialog);B.showElement(G+"_checkInNewDocumentVersion",L);B.showElement(G+"_checkOutDocument",L);B.showElement(G+"_lockDocument",L);B.showElement(G+"_deleteDocument",L);B.showElement(G,!I);B.showElement(G+"_browseDocument_div",I)}})},updateLookupFieldValues:function(){var A={};this.fields.eachKey(function(I){var H=this.fields.get(I);if(H&&H.fieldDef.lookupName){var J=H.fieldDef.lookupName;var F=J.indexOf("_lookupFor_");if(F!=-1){J=J.slice(0,F)}if(A[J]){var D=new Ab.view.Restriction();D.addClause("PRIMARY_KEY_FOR_THIS_TABLE",H.getUIValue());var B=Ab.data.createDataSourceForFields({tableNames:[J.split(".")[0]],fieldNames:[J.split(".")[1]]});try{var C=B.getRecords(D);if(C&&C.length>0){var E=this.fields.get(H.fieldDef.lookupName);if(E){E.setUIValue(C[0].getValue(J))}}}catch(G){View.log("Failed to retrieve lookup value: "+H.fieldDef.lookupName,"error")}}else{A[J]=J}}this.updateLookupFieldValue(I)},this)},updateLookupFieldValue:function(D){var C=this.fields.get(D);var A=function(G,F){var E=G.getInstructionsEl();if(E){E.dom.innerHTML=F.getUIValue()}};if(C&&C.fieldDef.lookupName){var B=this.fields.get(C.fieldDef.lookupName);if(B){A(C,B)}}if(C&&!C.fieldDef.lookupName){this.fields.each(function(E){if(E.fieldDef.lookupName===D){A(E,C)}})}},clearLookupFieldValue:function(D){var C=this.fields.get(D);if(C&&C.fieldDef.lookupName){var A=C.getInstructionsEl();if(A){A.dom.innerHTML=""}var B=this.getFieldElement(C.fieldDef.lookupName);if(B!=null){B.value=""}}},isLookupField:function(B){var A=false;this.fields.each(function(E){var D=E.fieldDef.lookupName;if(D){var C=D.indexOf("_lookupFor_");if(C!=-1){D=D.slice(0,C)}if(D===B){A=true}}});return A},addFieldEventListener:function(A,B,E,C){var D=this.fields.get(A);if(valueExists(D)&&D.fieldDef.isDocument){D.addDocumentFieldEventListener(B,E,C)}},getFieldEventListener:function(A,B){var C=null;var D=this.fields.get(A);if(valueExists(D)&&D.fieldDef.isDocument){C=D.getDocumentFieldEventListener(B)}return C},removeFieldEventListener:function(A,B){var C=this.fields.get(A);if(valueExists(C)&&C.fieldDef.isDocument){C.removeDocumentFieldEventListener(B)}},getPrimaryKeyFields:function(){var A=[];this.fields.each(function(B){if(B.fieldDef.primaryKey){A.push(B.fieldDef.fullName)}});return A},getPrimaryKeyFieldValues:function(B){if(!valueExists(B)){B=false}var A={};this.fields.each(function(D){var E=D.fieldDef.fullName;var C=D.panel.getFieldValue(E);if(!B||C!=""){if(D.fieldDef.primaryKey){A[E]=C}}});return A},getPrimaryKeyRestriction:function(){var B=this.getPrimaryKeyFieldValues(true);var A=new Ab.view.Restriction(B);return A},clearValidationResult:function(){this.validationResult=new Ab.form.ValidationResult();var A=this.getMessageCell();if(A!==null){A.dom.innerHTML=""}this.fields.eachKey(function(G){var B=this.getFieldElement(G);if(valueExists(B)){var D=B.parentNode;if(valueExists(D)){Ext.fly(D).removeClass("formError");var F=Ext.query(".formErrorText",D);for(var E=0;E<F.length;E++){D.removeChild(F[E])}}}var C=this.getFieldLabelElement(G);if(C){if(valueExists(D)){Ext.fly(C).removeClass("formError")}}},this);afm_form_values_changed=false},displayValidationResult:function(K){if(valueExists(K)){this.validationResult.message=K.message;this.validationResult.detailedMessage=K.detailedMessage}var I=this.validationResult.message;var D=this.validationResult.detailedMessage;if(valueExists(I)&&I!=""){var H=I.indexOf("::");if(H!=-1){I=I.substring(0,H)}if(!this.validationResult.valid){this.displayValidationMessage(I,D)}else{this.displayTemporaryMessage(I)}}for(var G in this.validationResult.invalidFields){var C=this.getFieldElement(G);if(C){Ext.fly(C.parentNode).addClass("formError")}var B=this.getFieldLabelElement(G);if(B){Ext.fly(B).addClass("formError")}var J=this.validationResult.invalidFields[G];if(J!=""){var F=C.parentNode;var A=document.createElement("br");A.className="formErrorText";F.appendChild(A);var E=document.createElement("span");E.className="formErrorText";E.appendChild(document.createTextNode(J));F.appendChild(E)}}},displayTemporaryMessage:function(B,C){var D=this.getMessageCell();D.dom.innerHTML="";var A=Ext.DomHelper.append(D,"<p>"+B+"</p>",true);A.addClass("formMessage");A.setVisible(true,{duration:1});A.setHeight(20,{duration:1});this.dismissMessage.defer(valueExistsNotEmpty(C)?C:3000,this,[A]);if(this.isShownInWindow()){this.updateWindowHeight()}},displayValidationMessage:function(C,D){var F=this.getMessageCell();if(valueExists(F)){F.dom.innerHTML=""}var E="<p>"+C;if(D){E+=" <a>"+Ab.view.View.getLocalizedString(Ab.form.Form.z_MESSAGE_LABEL_DETAILS)+"</a>"}E+="</p>";var A=Ext.DomHelper.append(F,E,true);A.addClass("formError");var B=this;A.dom.onclick=function(){B.dismissMessage(A)};if(D){A.dom.childNodes[1].onclick=function(){View.showMessage("error",C,D)}}if(this.isShownInWindow()){this.updateWindowHeight()}},dismissMessage:function(A){var B=this;A.setVisible(false,{duration:0.25});A.setHeight(0,{duration:1,callback:function(){A.remove();if(B.isShownInWindow()){B.updateWindowHeight()}}})},getMessageCell:function(){return Ext.fly(Ext.query(".formTopSpace",this.parentElement)[0])},setMaxValue:function(A,C){var B=this.fields.get(A).fieldDef;B.maxValue=C},setMinValue:function(A,C){var B=this.fields.get(A).fieldDef;B.minValue=C},formatDate:function(A,D,B,C){var E=FormattingDate(A,D,B,strDateShortPattern);if(!valueExists(C)||C){E=getDateWithISOFormat(E)}return E},processingFileInputChange:function(F,D){var H=this.validateDocumentFileNameElement(F);if(H==null||H==""){return }H=this.removeDirectories(H);var E=this;var C=D.split(".")[0];var G=D.split(".")[1];var A=this.getDocSvcPrimaryKeyFieldValues();var B=F.id+"_div";DocumentService.checkinNewFile(F,A,C,G,H,"auto","0",{callback:function(){if(document.getElementById(B)){document.getElementById(B).innerHTML=document.getElementById(B).innerHTML}E.refresh()},errorHandler:function(I,J){Ab.view.View.showException(J)}})},validateDocumentFileNameElement:function(A){var C=A.value;if(A==null||A.value==null&&A.value.trim()==""){var B=Ab.form.Form.z_MESSAGE_EMPTY_FILENAME;View.showMessage("error",B,B);return null}return C},removeDirectories:function(B){var A=B.lastIndexOf("\\");if(A>=0){B=B.substring(A+1)}else{A=B.lastIndexOf("/");if(A>=0){B=B.substring(A+1)}}return B},getDocSvcPrimaryKeyFieldValues:function(){var A=this.getPrimaryKeyFieldValues(true);var B={};for(fullName in A){B[fullName.split(".")[1]]=A[fullName]}return B},showImageDoc:function(B,E,C){var J=[];if(E instanceof Array){J=E}else{J.push(E)}var I={};var H="";for(var D=0;D<J.length;D++){H=J[D].split(".")[1];I[H]=this.getFieldValue(J[D])}var F=J[0].split(".")[0];var G=C.split(".")[1];var A=this;A.disable();DocumentService.getImage(I,F,G,"1",true,{callback:function(K){dwr.util.setValue(A.getFieldElementName(B),K);A.enable()},errorHandler:function(K,L){Ab.view.View.showException(L);A.enable()}})},showImageFile:function(A,C){var B=this.fields.get(A);B.dom.src=C},clearImage:function(A){this.showImageFile(A,Ab.view.View.contextPath+"/schema/ab-system/graphics/blank.gif")}},{z_MESSAGE_INVALID_FIELD:"Please correct highlighted values and save again.",z_MESSAGE_NO_DWG_VIEW:"no drawing view!!!",z_MESSAGE_EMPTY_FILENAME:"Please choose a file for the document.",z_MESSAGE_INVALID_NUMERIC_TOO_LARGE:"Value entered for [{0}] exceeds the maximum storage limits defined for the field. Please enter a number less than {1}.",z_MESSAGE_INVALID_NUMERIC_TOO_SMALL:"Value entered for [{0}] is smaller than the minimum storage limits defined for the field. Please enter a number greater than -{1}.",z_MESSAGE_INVALID_NUMERIC_MAX:"Value entered for [{0}] exceeds the maximum limits defined for the field. Please enter a number less than or equal to {1}.",z_MESSAGE_INVALID_NUMERIC_MIN:"Value entered for [{0}] is smaller than the minimum limits defined for the field. Please enter a number greater than or equal to {1}.",z_MESSAGE_INVALID_UPPERALPHANUM:"Value entered for [{0}] is invalid. Please enter alpha characters and/or numbers.",z_MESSAGE_INVALID_INTEGERORSMALLINT:"Value entered for [{0}] is not an integer. Please enter an integer.",z_MESSAGE_INVALID_NUMERIC:"Value entered for [{0}] is not a number. Please enter a numeric value.",z_MESSAGE_INVALID_NUMERIC_DECIMAL:"Value entered for [{0}] exceeds the number of decimal places defined for the field. Please enter a number with {1} or fewer numbers after the decimal.",z_MESSAGE_INVALID_MEMO_TOO_LARGE:"Value exceeds the maximum storage limits defined for the field.  Value will be truncated to {0} characters.",z_MESSAGE_LABEL_OK:"OK",z_MESSAGE_LABEL_DETAILS:"Details",WORKFLOW_RULE_CLEAR:"AbCommonResources-getDefaultDataRecord",WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecord",WORKFLOW_RULE_SAVE:"AbCommonResources-saveDataRecord",WORKFLOW_RULE_DELETE:"AbCommonResources-deleteDataRecords",MULTIPLE_VALUES_SEPARATOR:", \u200C",DOC_EVENT_CHECKIN:"onCheckInDocument",DOC_EVENT_CHECKIN_NEW_VERSION:"onCheckinNewVersion",DOC_EVENT_CHECKOUT:"onCheckOutDocument",DOC_EVENT_DELETE:"onDeleteDocument",DOC_EVENT_CHANGE_LOCK_STATUS:"onChangeLockStatus"});function getInputValue(E){var D="";var A=Ab.view.View.getControlsByType("","form");for(var B=0;B<A.length;B++){var C=A[B];if(C.containsField(E)){D=C.getFieldValue(E);break}}return D}function setInputValue(E,D){var A=Ab.view.View.getControlsByType("","form");for(var B=0;B<A.length;B++){var C=A[B];if(C.containsField(E)){value=C.setFieldValue(E,D);break}}}Ab.form.AutoComplete=Base.extend({addAutoCompleteToFormFields:function(A){var C=0,P=[],H=[],I="",K=false,E=null;var N=function(){var R="";for(var S=0;S<C;S++){var T=A.fields.get(P[S]);if(T&&T.fieldDef&&T.fieldDef.lookupName){R=T.fieldDef.lookupName}}if(R){var Q=R.indexOf("_lookupFor_");if(Q!=-1){R=R.slice(0,Q)}}return R};var O=function(U,V){var Q=new Ab.view.Restriction();var R=N();for(var T=0;T<C;T++){if(H[T]!==I&&H[T]!==R){var S=A.getFieldValue(P[T]);if(valueExistsNotEmpty(S)){Q.addClause(H[T],S)}}}if(valueExistsNotEmpty(U)){if(U==="?"){}else{if(I.indexOf("em_id")==-1){Q.addClause(I,U.toUpperCase(),"LIKE",")AND(");Q.addClause(I,U.toLowerCase(),"LIKE","OR");if(R&&R!==""){Q.addClause(R,U.toUpperCase(),"LIKE","OR");Q.addClause(R,U.toLowerCase(),"LIKE","OR")}}else{Q.addClause(I,U.toUpperCase()+"%","LIKE",")AND(");Q.addClause(I,"%, "+U.toUpperCase()+"%","LIKE","OR");Q.addClause(I,U.toLowerCase()+"%","LIKE","OR");Q.addClause(I,"%, "+U.toLowerCase()+"%","LIKE","OR");if(R&&R!==""){Q.addClause(R,U.toUpperCase(),"LIKE","OR");Q.addClause(R,"%, "+U.toUpperCase()+"%","LIKE","OR");Q.addClause(R,U.toLowerCase(),"LIKE","OR");Q.addClause(R,"%, "+U.toLowerCase()+"%","LIKE","OR")}}}}return Q};var B=function(e,T,Q){var V=T.term,R=A.fields.get(e),U=R.actions.get(0).config.commands[0];P=_.map(U.fieldNames.split(","),function(f){return f.trim()});H=_.map(U.selectFieldNames.split(","),function(f){return f.trim()});_.each(P,function(m,f){if(m===e){I=H[f]}});C=P.length;K=false;E=U.actionListener;var X=I.split(".")[0],Z=[];var l=valueExistsNotEmpty(U.dataSource)?View.dataSources.get(U.dataSource):Ab.data.createDataSourceForFields({id:A.id+"_"+e+"_autoComplete",tableNames:[X],fieldNames:H});l.recordLimit=U.recordLimit;var W=O(V,R);W.sql=U.restriction;var Y=[{fieldName:I,sortOrder:1}];var h=l.getRecords(W,{isDistinct:true,sortValues:toJSON(Y),controlType:"autoComplete"});if(C>0){for(var a=0;a<h.length;a++){var S={};for(var k=0;k<C;k++){var b=h[a].getValue(H[k]);S[H[k]]=b}for(var g=0;g<H.length;g++){if(H[g].indexOf("image_file")!=-1){K=true;var c=h[a].getValue(H[g]);if(c){S.imageFile=c}}}Z.push(S)}}else{for(var a=0;a<h.length;a++){var b=h[a].getValue(H[0]);Z.push(b)}}Q(Z)};var D=function(R){var Q="{0} - {1}";var S=A.fields.get(R);if(S&&S.fieldDef&&S.fieldDef.lookupName){if(S.fieldDef.lookupDisplayType==="concatenate"){Q=S.fieldDef.lookupDisplayFormat}}Q=Q.replace(/\{0\}/g,"{{idValue}}");Q=Q.replace(/\{1\}/g,"{{lookupValue}}");return function(T,W){var V=Handlebars.compile(Q);var U={idValue:T,lookupValue:W};return V(U)}};var M=function(V,W,Z){var R=Z[I];var a=N();var T=Z[a];if(valueExists(T)){R=D(V)(R,T)}var X="";for(var U=0;U<C;U++){if(H[U]!==I&&H[U]!==a){var Y=Z[H[U]];if(valueExists(Y)){if(X===""){X=Y}else{X=D(H[U])(X,Y);break}}}}var Q="";if(K){Q="height:50px; padding-left: 54px;";if(Z.imageFile){Q+="background: url("+View.getBaseUrl()+"/projects/hq/graphics/"+Z.imageFile.toLowerCase()+") no-repeat;";Q+="background-position: left center;";Q+="background-size: 50px;"}}var S='<a style = "'+Q+'">'+R+"</a><span>"+X+"</span>";return jQuery("<li></li>").data("item.autocomplete",Z).append(S).appendTo(W)};var L=function(R,V){var U=V.item[I];if(U){var T=A.getEventListener("onAutoCompleteSelect");for(var S=C-1;S>=0;S--){A.setFieldValue(P[S],V.item[H[S]]);if(T){T(A,P[S],V.item[H[S]])}if(E){if(!E.call){E=window[E]}if(E.call){var Q=E.call(window,P[S],V.item[H[S]])}}}}R.preventDefault()};var G=function(Q,S){var R=A.getEventListener("onAutoCompleteQuery");if(R){R(A,Q,Q.target.value);return false}};var J=function(Q){var R=A.getEventListener("onAutoCompleteClear");if(R){R(A,Q)}};var F=function(R,S){var Q=jQuery(R.target).autocomplete("widget");Q.context.style.zIndex=9999};A.fields.each(function(U){var R=U.fieldDef;var S=A.getFieldElement(R.id);var Q=jQuery(S);if(S&&!R.isDate){var T=U.actions.get(0);if(T&&T.command){var V=T.command.commands[0];if(V&&V.type=="selectValue"&&V.autoComplete){Q.autocomplete({minLength:V.minLength,delay:250,source:function(X,W){B(R.id,X,W)},select:L,search:G,clear:J,open:F,position:{collision:"flip"}}).autocomplete("instance")._renderItem=function(W,X){return M(R.id,W,X)};if(V.minLength==="0"){V.handle=function(W){if(Q.autocomplete("widget").is(":visible")){Q.autocomplete("close")}else{Q.autocomplete("search",Q.val());Q.focus()}}}}}}})}});Ab.namespace("form");Ab.form.ColumnReport=Ab.view.Component.extend({viewDef:null,fieldDefs:null,refreshWorkflowRuleId:"",showOnLoad:false,afterRefreshListener:null,columns:1,record:null,constructor:function(B,A){this.inherit(B,"columnReport",A);this.viewDef=new Ab.view.ViewDef(A.getConfigParameter("viewDef"),A.getConfigParameter("groupIndex"),null,null,A.getConfigParameter("dataSourceId"));this.columns=A.getConfigParameter("columns",1);this.showOnLoad=A.getConfigParameter("showOnLoad",false);this.refreshWorkflowRuleId=A.getConfigParameterNotEmpty("refreshWorkflowRuleId",Ab.form.Form.WORKFLOW_RULE_REFRESH);this.fieldDefs=A.getConfigParameter("fieldDefs",[]);this.visible=true},determineAvailableHeight:function(){var A=this.inherit();return A-16},createEvaluationContext:function(){var A=this.inherit();if(this.record!=null){A.record=this.record.values}return A},initialDataFetch:function(){if(this.showOnLoad||this.restriction!=null){this.getData();this.show(true)}this.show(this.showOnLoad)},getData:function(){var D=this.getDataSource();if(!D){this.setRecord(new Ab.data.Record());return }try{var A=Ab.workflow.Workflow.call(this.refreshWorkflowRuleId,this.getParameters());if(valueExists(A.dataSet)){var B=this.getDataSource().processInboundRecord(A.dataSet);this.setRecord(B)}}catch(C){this.handleError(C)}},clear:function(){var B=this.parentElementId+"_table";var A=Ext.get(B);if(A!=null){A.remove()}},getFieldValue:function(B){var A=null;if(this.record!=null){A=this.record.getValue(B)}return A},getRecord:function(){return this.record},getOutboundRecord:function(){var A=this.record;var B=this.getDataSource();if(B){A=B.processOutboundRecord(A)}return A},setRecord:function(A){this.record=A;this.onModelUpdate()},onModelUpdate:function(){this.clear();var L=this.createEvaluationContext();var H=this.parentElementId+"_table";var G='<table id="'+H+'" class="columnReport">';var C={};var A=0;for(var N=0;N<this.fieldDefs.length;N++){var S=this.fieldDefs[N];var M=Ab.view.View.evaluateBoolean(S.hidden,L,false);if(M){continue}var E=this.getFieldValue(S.id);if(valueExistsNotEmpty(E)){var R=this.getDataSource();if(R){E=R.formatValue(S.id,E,true,true,this.record.values)}}else{E="&nbsp;"}var U="";if(valueExistsNotEmpty(S.title)){U=Ab.view.View.evaluateString(S.title,L,false);if(U.charAt(U.length-1)!=":"&&U.charAt(U.length-1)!="?"&&U.indexOf("<div")<0){U=U+":"}U=U.replace("&apos;","'")}if(A==0){G=G+"<tr>"}var J=this.id+"_"+S.id;var I=(S.type==="java.lang.Double"||S.type==="java.lang.Integer");var P=I?"text-align:right;":"";var K=S.colspan>1?5+((S.colspan-2)*4):1;var O=S.format.toUpperCase();if(O=="MEMO"&&valueExistsNotEmpty(E)){E=E.replace(/\n/g,"<br/>")}else{if(S.isDocument){var D=this.id+"_"+S.id+"_link";var F={};F.key=this.getPrimaryKey();F.fullName=S.id;F.value=E;C[D]=F;E=' <a href="javascript: //" id="'+D+'">'+E+"</a>"}}G+=this.getLabelValueHTML(J,U,P,K,S,E);A=A+S.colspan;if(A==this.columns){A=0;G=G+"</tr>"}}G=G+"</table>";Ext.DomHelper.insertHtml("afterBegin",this.parentElement,G);for(D in C){var T=C[D];var B=Ext.get(D);var Q=this.showDocumentLinkCommand.createDelegate(this,[D,T]);Ext.get(B).addListener("click",Q)}},getFieldElement:function(A){return $(this.id+"_"+A,false)},getFieldEl:function(A){return Ext.get(this.id+"_"+A)},getLabelValueHTML:function(G,F,D,A,C,E){var B='<td class="columnReportSpacer"> </td><td class="columnReportLabel'+this.getLabelClassIfExists(C)+'">'+F+'</td><td id="'+G+'" class="columnReportValue" style="'+D+'" colspan="'+A+'">'+E+'</td><td class="columnReportSpacer"> </td>';return B},getLabelClassIfExists:function(B){var A="";if(B.labelClass!=null){A+=" "+B.labelClass}return A},getParameters:function(){var A={viewName:this.viewDef.viewName,groupIndex:this.viewDef.tableGroupIndex,controlId:this.id,version:Ab.view.View.version};if(this.restriction!=null){A.restriction=toJSON(this.restriction)}if(this.viewDef.dataSourceId!=null){A.dataSourceId=this.viewDef.dataSourceId}Ext.apply(A,this.parameters);return A},showDocumentLinkCommand:function(E,D){var A=D.fullName.split(".");var F=D.value;var C=D.key;for(name in C){var B=name.split(".")[1];C[B]=C[name]}View.showDocument(C,A[0],A[1],F,null)},getPrimaryKey:function(){var C={};for(var B=0,A;A=this.fieldDefs[B];B++){if(A.primaryKey){C[A.fullName]=this.getFieldValue(A.fullName)}}return C},callReportJob:function(F){var G=F.outputType,C=F.printRestriction,B=F.orientation;var A=null;if(G==="docx"){var D=this.title;if(D==""){D=Ab.view.View.title}var E={};E.recordLimit=1;E.columns=this.columns;if(valueExists(C)){E.printRestriction=C}if(valueExistsNotEmpty(B)){E.orientation=B}A=this.callDOCXReportJob(D,this.restriction,E)}else{View.showMessage("error",G+" action is NOT supported for a column report panel.")}return A},callDOCXReportJob:function(D,A,B){var C=this.viewDef.viewName+".axvw";B.formatType="column";return Workflow.startJob(Ab.grid.ReportGrid.WORKFLOW_RULE_DOCX_REPORT,C,this.dataSourceId,D,this.getVisibleFieldDefs(),toJSON(A),B)},getVisibleFieldDefs:function(){var A=this.createEvaluationContext();var D=this.fieldDefs;if(D&&D.length==0){this.getDataSource().fieldDefs.each(function(G){D.push(G)})}var F=[];for(var B=0;B<this.fieldDefs.length;B++){var E=this.fieldDefs[B];if(E.hidden==="true"){continue}if(valueExists(E)){if(E.controlType===""||E.controlType==="color"||E.controlType==="link"||E.controlType==="recurring"){E.title=Ab.view.View.evaluateString(E.title,A,false);E.hidden=Ab.view.View.evaluateString(E.hidden,A,false);F.push(E)}}}var C=this.getEventListener("beforeExportReport");if(C){F=C(this,F)}return F},beforeExportReport:function(A,B){return B},getFieldDefById:function(C,E,A){if(A<C.length){var D=C[A];if(valueExists(D)&&(E==D.fullName)){return D}}for(var B=0,D;D=C[B];B++){if(E===D.fullName){return D}}return null}},{WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecord"});Ab.namespace("view");Ab.view.Scroller=Base.extend({el:null,scrollbars:[],constructor:function(G,C){this.el=jQuery(G);this.el.addClass("jssb-content");var B={tweenDuration:500,tweenFn:function(H){return -Math.cos(H*Math.PI)/2+0.5}};jQuery.extend(B,C);this.scrollbars=jsScrollbar(this.el.parent(),B);var F=jQuery(this.el.parent());if(!F.children().first().hasClass("jssb-content")){var D=F.children().first().innerHeight()+3;F.find(".jssb-content").css({"margin-top":D+"px"});F.find(".jssb-y").css({top:D+"px"})}var A=function(H){var I=jQuery(H);if(I.hasClass("jssb-scrolly")){I.find(".jssb-y").fadeIn(500)}if(I.hasClass("jssb-scrollx")){I.find(".jssb-x").fadeIn(500)}};var E=function(H){var I=jQuery(H);if(I.hasClass("jssb-scrolly")){I.find(".jssb-y").fadeOut(500)}if(I.hasClass("jssb-scrollx")){I.find(".jssb-x").fadeOut(500)}};F.hover(function(){A(this)},function(){E(this)}).mousemove(function(){A(this)});E.defer(1000,this,[F])},update:function(){var A=this;setTimeout(function(){if(A.scrollbars){if(valueExists(A.scrollbars.length)){for(var B=0;B<A.scrollbars.length;B++){A.scrollbars[B].recalc()}}else{A.scrollbars.recalc()}}},100)},detach:function(){var A=jQuery(this.el.parent());A.off()},setOnVerticalScroll:function(A){if(this.scrollbars){this.scrollbars.onVerticalScroll=A}},setOnHorizontalScroll:function(A){if(this.scrollbars){this.scrollbars.onHorizontalScroll=A}}});(function(){this.jsScrollbar=function(T,P){var S=[],Q,R;if(typeof P==="undefined"){P=null}if(typeof T==="string"){R=T.replace(/\s/g,"").replace(/,$/,"").replace(/#/g,"").split(",");for(Q=0;Q<R.length;Q++){if(N(H(R[Q]))){S.push(new jsScrollbar.init(H(R[Q]),P))}}}else{if(T.nodeType&&T.nodeType==1){if(N(T)){S.push(new jsScrollbar.init(T,P))}}else{if(T.length&&T.length>0){for(Q=0;Q<T.length;Q++){if(N(T[Q])){S.push(new jsScrollbar.init(T[Q],P))}}}}}if(S.length==0){return null}else{if(S.length==1){return S[0]}else{return S}}};jsScrollbar.scrollbars=[];jsScrollbar.defaults={scrollSpeed:30,scrollDistance:10,wheelDistance:40,tweenFn:function(P){return -Math.cos(P*Math.PI)/2+0.5},tweenDuration:500,disableTweening:true,horizontalScrolling:true,verticalScrolling:true,fixedThumb:false,template:'<div class="jssb"><div class="jssb-track"><div class="jssb-track-mid"></div><div class="jssb-track-end"></div><div class="jssb-thumb"><div class="jssb-thumb-mid"></div><div class="jssb-thumb-end"></div></div></div></div>'};this.jsScrollbar._closures={objs:[],fns:[]};C(window,"unload",function(){this.jsScrollbar._closures.objs=null;this.jsScrollbar._closures.fns=null;this.jsScrollbar._closures=null;this.jsScrollbar.scrollbars=null});jsScrollbar.init=function(){jsScrollbar.scrollbars.push(this);this.parent=arguments[0];this._prefs=K(jsScrollbar.defaults,arguments[1]);this._init()};jsScrollbar.init.prototype={_enabled:true,_doScrollX:false,_doScrollY:false,_isAnimating:false,_hasFocus:false,_temp:null,_scrollX:null,_scrollY:null,_prefs:null,content:null,parent:null,onVerticalScroll:null,onHorizontalScroll:null,_init:function(){var S=this.parent,V=this.content,P=this._prefs;if(!this._temp){this._temp={}}G(S,"jssb-applied");var U=null;if(P.horizontalScrolling){U=H("jssb-x",S);if(!U&&(!this._scrollX||!this._scrollX.el)){var Q=P.template.replace(/jssb/g,"jssb-x").replace(/-up/g,"-left").replace(/-down/g,"-right");jQuery(S).append(Q)}else{if(U){U.style.display="block"}}}var T=null;if(P.verticalScrolling){T=H("jssb-y",S);if(!T&&(!this._scrollY||!this._scrollY.el)){var Q=P.template.replace(/jssb/g,"jssb-y");jQuery(S).append(Q)}else{if(T){T.style.display="block"}}}if(!V||(V&&!V.parentNode)){V=this.content=H("jssb-content",S)}this._doScrollX=(P.horizontalScrolling&&V&&V.scrollWidth-V.clientWidth>1)?true:false;this._doScrollY=(P.verticalScrolling&&V&&V.scrollHeight-V.clientHeight>1)?true:false;if(this._doScrollX){G(S,"jssb-scrollx");if(P.verticalScrolling&&V.scrollHeight>V.clientHeight){this._doScrollY=true}}else{O(S,"jssb-scrollx")}if(this._doScrollY){G(S,"jssb-scrolly");if(!this._doScrollX&&P.horizontalScrolling&&V.scrollWidth>V.clientWidth){this._doScrollX=true;G(S,"jssb-scrollx")}}else{O(S,"jssb-scrolly")}if(P.horizontalScrolling){if(this._scrollX===null){this._scrollX=new E(H("jssb-x",S),"x")}this._prepComponent(this._scrollX,this._doScrollX);var R=jQuery(this._scrollX.el);if(this._doScrollX){R.fadeIn(500)}else{R.hide();if(U){U.style.display="none"}}}if(P.verticalScrolling){if(this._scrollY===null){this._scrollY=new E(H("jssb-y",S),"y")}this._prepComponent(this._scrollY,this._doScrollY);var R=jQuery(this._scrollY.el);if(this._doScrollY){R.fadeIn(500)}else{R.hide();if(T){T.style.display="none"}}}if(P.verticalScrolling){C(S,"mousewheel",J(this._mouseWheel,this));C(S,"DOMMouseScroll",J(this._mouseWheel,this))}C(S,"mousedown",J(this._focus,this));C(document,"mousedown",J(this._blur,this));C(V,"mousedown",J(this._selectStart,this));C(V,"scroll",J(this._keepUp,this))},_prepComponent:function(R,P){if(R.el&&!R.el.parentNode){L(R.el,"mousedown",J(this._mouseDown,this));R=new E(H("jssb-"+R.axis,this.parent),R.axis,R.minThumb)}if(P){var U=this.content,T=R.track.relevantDim(),Q=R.thumb.relevantDim(),V=R.axis=="x"?U.clientWidth:U.clientHeight,S=R.axis=="x"?U.scrollWidth:U.scrollHeight;if(!this._prefs.fixedThumb){Q=R.thumb.relevantDim(Math.round(T*V/S>=R.minThumb?T*V/S:R.minThumb))}R.ratio=(S-V)/(T-Q);if(R.ratio<=0){R.ratio=1}L(R.el,"mousedown",J(this._mouseDown,this));C(R.el,"mousedown",J(this._mouseDown,this))}},_mouseDown:function(U){U=A(U);var f=this._prefs,Y=this.content,b=this._temp,P=D(U.target,"jssb-x",true)?"x":"y",Z=P=="x"?this._scrollX:this._scrollY,g,W;if(D(U.target,"jssb-"+P+"-thumb",true)){G(Z.thumb.el," jssb-"+P+"-thumb-click");b.clicked=Z.thumb.el;b.trackPos=(P=="x")?F(Z.track.el):M(Z.track.el);b.grabPoint=(P=="x")?U.pageX-F(Z.thumb.el):U.pageY-M(Z.thumb.el);b.axis=P;L(this.content,"scroll",J(this._keepUp,this));C(document,"mousemove",J(this._drag,this))}else{if(D(U.target,"jssb-"+P+"-track",true)){G(Z.track.el," jssb-"+P+"-track-click");b.clicked=Z.track.el;g=(P=="x")?F(Z.track.el):M(Z.track.el);if(f.disableTweening){b.newPos=(U["page"+P.toUpperCase()]-g)*Z.ratio;if(P=="x"){this._startScroll(b.newPos<Y.scrollLeft?-Y.clientWidth:Y.clientWidth,0)}else{this._startScroll(0,b.newPos<Y.scrollTop?-Y.clientHeight:Y.clientHeight)}}else{W=(U["page"+P.toUpperCase()]-g-Z.thumb.relevantDim()/2)*Z.ratio;if(P=="x"){this.tweenTo(W,null)}else{this.tweenTo(null,W)}}}else{if(D(U.target,"jssb-y-up",true)){G(Z.prev.el,"jssb-y-up-click");b.clicked=Z.prev.el;this._startScroll(0,-f.scrollDistance)}else{if(D(U.target,"jssb-y-down",true)){G(Z.next.el,"jssb-y-down-click");b.clicked=Z.next.el;this._startScroll(0,f.scrollDistance)}else{if(D(U.target,"jssb-x-left",true)){G(Z.prev.el,"jssb-x-left-click");b.clicked=Z.prev.el;this._startScroll(-f.scrollDistance,0)}else{if(D(U.target,"jssb-x-right",true)){G(Z.next.el,"jssb-x-right-click");b.clicked=Z.next.el;this._startScroll(f.scrollDistance,0)}}}}}}C(window.parent.document,"mouseup",J(this._mouseUp,this));C(document,"mouseup",J(this._mouseUp,this));var V=document.getElementsByTagName("iframe");if(V.length){for(var R=0;R<V.length;++R){var T=window.parent.jQuery(V[R]),X=T.offset(),Q=X.left,c=X.top,a=T.width(),S=T.height();jQuery("body").append('<div class="iframe-mask" style="position:absolute;top:'+c+"px;left:"+Q+"px;width:"+a+"px;height:"+S+'px;background:none">&nbsp;</div>')}}C(document,"selectstart",I);if(U.preventDefault){U.preventDefault()}},_mouseUp:function(Q){if(frames.length){jQuery(".iframe-mask").remove()}var P=this._temp;O(P.clicked,/jssb-[x|y]-[a-z]*-click/g);if(P.scrollTimer){window.clearInterval(P.scrollTimer);P.scrollTimer=null}if(typeof P.newPos=="number"){P.newPos=null}L(document,"mousemove",J(this._drag,this));L(document,"mouseup",J(this._mouseUp,this));L(document,"selectstart",I);C(this.content,"scroll",J(this._keepUp,this))},_drag:function(T){T=A(T);var P=this._temp,R=P.axis,S=R=="x"?this._scrollX:this._scrollY,U=T["page"+R.toUpperCase()]-P.trackPos,Q=U-P.grabPoint;if(R=="x"){this._scroll(Q*S.ratio,null)}else{this._scroll(null,Q*S.ratio)}this._keepUp()},_mouseWheel:function(Q){Q=Q?Q:event;var P=0,R=this.content;if(typeof Q.wheelDelta=="undefined"){if(Q.detail>0){P=1}if(Q.detail<0){P=-1}}else{if(Q.wheelDelta>=120){P=-1}if(Q.wheelDelta<=-120){P=1}}if(this._prefs.verticalScrolling===false){this.scrollBy(P*this._prefs.wheelDistance,null)}else{this.scrollBy(null,P*this._prefs.wheelDistance)}if(R.scrollTop>0&&R.scrollTop<R.scrollHeight-R.clientHeight){return I(Q)}},_focus:function(P){P=A(P);this._focusFlag=true;if(this._hasFocus){return }this._hasFocus=true;G(this.parent,"jssb-focus");C(document,"keydown",J(this._keyDown,this))},_blur:function(){if(!this._focusFlag&&this._hasFocus){this._hasFocus=false;O(this.parent,"jssb-focus");L(document,"keydown",J(this._keyDown,this))}this._focusFlag=false},_keyDown:function(T){T=A(T);var U=this.content,Q=this._prefs,P=T.target.tagName.toLowerCase(),R=Q.disableTweening?this.scrollTo:this.tweenTo,S=Q.disableTweening?this.scrollBy:this.tweenBy;if(P==="input"||P==="select"||P==="textarea"){return }switch(T.keyCode){case 33:S.call(this,0,-U.clientHeight);break;case 32:case 34:S.call(this,0,U.clientHeight);break;case 35:R.call(this,U.scrollLeft,U.scrollHeight);break;case 36:R.call(this,U.scrollLeft,0);break;case 37:this.scrollBy(-Q.scrollDistance,0);break;case 38:this.scrollBy(0,-Q.scrollDistance);break;case 39:this.scrollBy(Q.scrollDistance,0);break;case 40:this.scrollBy(0,Q.scrollDistance);break}return(T.keyCode>=32&&T.keyCode<=40)?I(T):true},_keepUp:function(){var Q=this._scrollX,P=this._scrollY;if(this._doScrollX&&Q.ratio!==0){Q.thumb.x(Math.round(this.content.scrollLeft/Q.ratio))}if(this._doScrollY&&P.ratio!==0){P.thumb.y(Math.round(this.content.scrollTop/P.ratio))}},_scroll:function(P,Q){if(P!==null&&typeof P!=="undefined"){this.content.scrollLeft=P;if(this.onHorizontalScroll){this.onHorizontalScroll(P)}}if(Q!==null&&typeof Q!=="undefined"){this.content.scrollTop=Q;if(this.onVerticalScroll){this.onVerticalScroll(Q)}}},_startScroll:function(P,Q){this.scrollBy(P,Q);this._temp.scrollByX=P;this._temp.scrollByY=Q;this._temp.scrollTimer=setTimeout(J(this._startScrollDelay,this),300)},_startScrollDelay:function(){this._temp.scrollTimer=setInterval(J(this._startScrollInterval,this),this._prefs.scrollSpeed)},_startScrollInterval:function(){var R=this.content,Q=this._temp,P=Q.scrollByX,S=Q.scrollByY;if(typeof Q.newPos=="number"){if((P&&Q.newPos>=R.scrollLeft&&Q.newPos<=R.scrollLeft+R.clientWidth)||(S&&Q.newPos>=R.scrollTop&&Q.newPos<=R.scrollTop+R.clientHeight)){clearTimeout(Q.scrollTimer);Q.scrollByX=0;Q.scrollByY=0;return }}this.scrollBy(P,S)},_selectStart:function(){this._temp.coTop=M(this.content);this._temp.coLeft=F(this.content);C(document,"mousemove",J(this._select,this));C(document,"mouseup",J(this._selectStop,this))},_select:function(S){S=A(S);var U=this.content,P=this._temp,Q=this._prefs,T=0,R=0;if(Q.horizontalScrolling){if(S.pageX<P.coLeft){T=-Q.scrollDistance}else{if(S.pageX>P.coLeft&&S.pageX<P.coLeft+U.clientWidth){T=0}else{if(S.pageX>P.coLeft+U.clientWidth){T=Q.scrollDistance}}}}if(Q.verticalScrolling){if(S.pageY<P.coTop){R=-Q.scrollDistance}else{if(S.pageY>P.coTop&&S.pageY<P.coTop+U.clientHeight){R=0}else{if(S.pageY>P.coTop+U.clientHeight){R=Q.scrollDistance}}}}if(!P.isScrolling&&(T!==0||R!==0)){this._startScroll(T,R);P.isScrolling=true}else{if(P.isScrolling&&T===0&&R===0){clearInterval(P.scrollTimer);P.isScrolling=false}else{P.scrollByX=T;P.scrollByY=R}}},_selectStop:function(P){clearInterval(this._temp.scrollTimer);L(document,"mousemove",J(this._select,this));L(document,"mouseup",J(this._selectStop,this))},scrollTo:function(Q,P){if(typeof P=="undefined"){if(this._prefs.horizontalScrolling===false){this._scroll(null,Q)}else{this._scroll(Q,null)}}else{this._scroll(Q,P)}},scrollBy:function(Q,P){if(typeof P=="undefined"){if(this._prefs.horizontalScrolling===false){this._scroll(null,this.content.scrollTop+Q)}else{this._scroll(this.content.scrollLeft+Q,null)}}else{this._scroll(this.content.scrollLeft+Q,this.content.scrollTop+P)}},tweenTo:function(X,W){if(this._isAnimating){return }var V=this.content,c=this._prefs,Z=this._temp,R=V.scrollLeft,Q=V.scrollTop,Y,U,T,S,P=+new Date;if(typeof W=="undefined"){if(c.horizontalScrolling===false){Y=null;U=X}else{Y=X;U=null}}else{Y=X;U=W}if(Y!==null&&Y!=V.scrollLeft){if(Y<0){Y=0}if(Y>V.scrollWidth-V.clientWidth){Y=V.scrollWidth-V.clientWidth}T=Y-R}if(U!==null&&U!=V.scrollTop){if(U<0){U=0}if(U>V.scrollHeight-V.clientHeight){U=V.scrollHeight-V.clientHeight}S=U-Q}this._isAnimating=true;Z.tweenData={start:P,fin:P+c.tweenDuration,sx:R,sy:Q,dx:T,dy:S,x:Y,y:U};Z.tweenTimer=setInterval(J(this._tweenToFn,this),10)},_tweenToFn:function(){var P=this._temp.tweenData,Q=this._prefs;var R=+new Date,S=R>P.fin?1:(R-P.start)/Q.tweenDuration;if(Q.tweenFn){S=Q.tweenFn(S)}this.scrollTo(P.x===null?null:(P.sx+P.dx*S),P.y===null?null:(P.sy+P.dy*S));if(R>P.fin){clearInterval(this._temp.tweenTimer);this._isAnimating=false}},tweenBy:function(Q,P){if(typeof P=="undefined"){if(this._prefs.horizontalScrolling===false){this.tweenTo(null,this.content.scrollTop+Q)}else{this.tweenTo(this.content.scrollLeft+Q,null)}}else{this.tweenTo(this.content.scrollLeft+Q,this.content.scrollTop+P)}},recalc:function(){if(!this._enabled){return }var P=this.parent,Q=this.content;L(P,"mousewheel",J(this._mouseWheel,this));L(P,"DOMMouseScroll",J(this._mouseWheel,this));L(P,"mousedown",J(this._focus,this));L(document,"mousedown",J(this._blur,this));L(Q,"mousedown",J(this._selectStart,this));L(Q,"scroll",J(this._keepUp,this));this._init();this._keepUp();if(Q&&Q.scrollWidth-Q.clientWidth-Q.scrollLeft<0){this._scroll(Q.scrollWidth-Q.clientWidth,null)}if(Q&&Q.scrollHeight-Q.clientHeight-Q.scrollTop<0){this._scroll(null,Q.scrollHeight-Q.clientHeight)}},disable:function(){if(!this._enabled){return }var Q=this.content,P=this.parent;this._enabled=false;this._blur();O(P,"jssb-applied");O(P,"jssb-scrolly");O(P,"jssb-scrollx");L(Q,"mousedown",J(this._selectStart,this));L(Q,"scroll",J(this._keepUp,this));L(P,"mousedown",J(this._focus,this));L(document,"mousedown",J(this._blur,this))},enable:function(){if(this._enabled){return }this._enabled=true;this.recalc()},prefs:function(P,Q){if(Q||typeof P=="object"){if(typeof P=="string"){this._prefs[P]=Q}else{if(typeof P=="object"){this._prefs=K(P,this._prefs)}}return true}return this._prefs[P]}};function E(R,Q,P){this.el=R;this.axis=Q;this.track=new B(H("jssb-"+Q+"-track",R),Q);this.thumb=new B(H("jssb-"+Q+"-thumb",this.track.el),Q);this.minThumb=typeof P=="undefined"?this.thumb.relevantDim():P}E.prototype={track:null,thumb:null,prev:null,next:null,minThumb:0,ratio:0};function B(Q,P){this.el=Q;this.axis=P}B.prototype={width:function(P){if(typeof P!="undefined"){this.el.style.width=P+"px"}if(!this.el.style.width){return this.el.offsetWidth}return parseFloat(this.el.style.width)},height:function(P){if(typeof P!="undefined"){this.el.style.height=P+"px"}if(!this.el.style.height){return this.el.offsetHeight}return parseFloat(this.el.style.height)},x:function(P){if((typeof P!="undefined")&&!isNaN(P)){this.el.style.left=P+"px"}return parseFloat(this.el.style.left)},y:function(P){if((typeof P!="undefined")&&!isNaN(P)){this.el.style.top=P+"px"}return parseFloat(this.el.style.top)},relevantDim:function(P){return this.axis=="x"?this.width(P):this.height(P)},relevantPos:function(P){return this.axis=="x"?this.x(P):this.y(P)}};function K(Q,P){var S={},R;if(typeof Q!=undefined&&Q!=null){for(R in Q){S[R]=Q[R]}}for(R in P){S[R]=P[R]}return S}function N(S){if(!S){return false}if(D(S,"jssb-applied")){return false}var P,Q,R=H("jssb-content",S);if(!R){return false}G(S,"jssb-applied");P=jQuery(R).css("overflow");Q=jQuery(S).css("position");O(S,"jssb-applied");if(P=="hidden"){if(Q=="static"){S.style.position="relative"}return true}return false}function C(R,Q,P){if(R&&R.addEventListener){R.addEventListener(Q,P,false)}else{if(R){R.attachEvent("on"+Q,P)}}}function L(R,Q,P){if(R&&R.removeEventListener){R.removeEventListener(Q,P,false)}else{if(R){R.detachEvent("on"+Q,P)}}}function I(P){if(!P){P=window.event}if(P.stopPropagation){P.stopPropagation()}if(P.preventDefault){P.preventDefault()}P.cancelBubble=true;P.cancel=true;P.returnValue=false;return false}function A(P){P=P?P:window.event;if(typeof P.target=="undefined"){P.target=P.srcElement}if(typeof P.pageX=="undefined"){P.pageX=P.clientX+document.body.scrollLeft}if(typeof P.pageY=="undefined"){P.pageY=P.clientY+document.body.scrollTop}return P}function H(T,S){if(S&&typeof S!="undefined"){var Q=S.getElementsByTagName("*",S),R,P;for(R=0,P=Q.length;R<P;R++){if(Q[R].className&&D(Q[R],T)){return Q[R]}}return null}else{return document.getElementById(T)}}function G(P,Q){if(!D(P,Q)){if(P.className.length==0){P.className=Q}else{P.className+=" "+Q}}}function O(R,S){var Q,P=R.className.split(" ");for(Q=0;Q<P.length;Q++){if(typeof S=="string"){if(P[Q]==S){P[Q]=""}}else{if(P[Q].match(S)){P[Q]=""}}}R.className=P.join(" ")}function D(S,T,R){if(typeof R=="undefined"&&S.className.split){var Q,P=S.className.split(" ");for(Q=0;Q<P.length;Q++){if(P[Q]==T){return true}}}else{if(S.className.indexOf&&S.className.indexOf(T)>-1){return true}}return false}function M(S){var P=0;try{var R=S.offsetParent}catch(Q){}try{if(S.offsetParent){while(S.offsetParent){P+=S.offsetTop;S=S.offsetParent}}}catch(Q){}return P}function F(S){var P=0;try{var R=S.offsetParent}catch(Q){}if(S.offsetParent){while(S.offsetParent){P+=S.offsetLeft;S=S.offsetParent}}return P}function J(S,T){var U=window.jsScrollbar._closures.objs,R=window.jsScrollbar._closures.fns,Q=T.__objId,P=S.__fnId;if(!Q){U[Q=T.__objId=U.length]=T}if(!P){R[P=S.__fnId=R.length]=S}if(!T.__closures){T.__closures=[]}if(T.__closures[P]){return T.__closures[P]}T=S=U=R=null;return window.jsScrollbar._closures.objs[Q].__closures[P]=function(){return window.jsScrollbar._closures.fns[P].apply(window.jsScrollbar._closures.objs[Q],arguments)}}})();Ab.namespace("grid");Ab.grid.Column=Base.extend({id:"",fullName:"",name:"",type:"text",supportedTypes:["text","link","number","number_link","date","time","button","radiobutton","checkbox","image","color"],defaultActionHandler:null,onCreateCell:null,colSpan:1,width:null,text:null,isVirtual:false,commands:[],imageName:null,javaType:null,constructor:function(B,A,I,E,K,G,C,J,D,H){this.id=B;this.name=A;this.type=this.supportedTypes[0];for(var F=0;F<this.supportedTypes.length;F++){if(this.supportedTypes[F]==I){this.type=I;break}}if(valueExists(E)){this.defaultActionHandler=E}if(valueExists(K)){this.onCreateCell=K}if(valueExists(G)){this.colSpan=G}if(valueExists(C)){this.width=C}if(valueExists(J)){this.text=J}if(valueExists(D)){this.commands=D}if(valueExists(H)){this.imageName=H}},addCommand:function(A){this.commands.push(A)}});Ab.grid.ColumnCommand=Base.extend({columnId:null,commandIndex:0,command:"",constructor:function(){}});Ab.grid.Grid=Ab.view.Component.extend({columns:null,columns2:null,rows:null,cssClassName:"panelReport",cssHeaderClassName:"",cells:null,headerCells:null,headerCells2:null,rowElements:null,colorOpacity:null,maxCellContentWidth:50,constructor:function(G,D){this.inherit(G,"grid",D);this.rows=[];this.columns=[];this.columns2=[];var E=D.getConfigParameterIfExists("rows");if(valueExists(E)){this.addRows(E)}var B=D.getConfigParameterIfExists("columns");if(valueExists(B)){this.addColumns(B)}var F=D.getConfigParameterIfExists("maxCellContentWidth");if(valueExists(F)){this.maxCellContentWidth=F}var A=D.getConfigParameterIfExists("cssClassName");if(valueExists(A)){this.cssClassName=A}var C=D.getConfigParameterIfExists("headerClass");if(valueExists(C)){this.cssHeaderClassName=C}},addColumn:function(A,B){this.getColumnsForLevel(B).push(A)},addColumnFirst:function(A){this.columns.unshift(A)},addColumns:function(A){this.columns=this.columns.concat(A)},removeColumn:function(A){this.columns.splice(A,1)},removeColumns:function(B,C){var A=this.getColumnsForLevel(C);A.splice(B,A.length-B)},getColumnsForLevel:function(A){if(typeof A!="undefined"&&A==2){return this.columns2}else{return this.columns}},addRow:function(A){A.grid=this;this.rows.push(A)},addRows:function(B){for(var A=0;A<B.length;A++){B[A].grid=this}this.rows=this.rows.concat(B)},removeRow:function(A){this.rows.splice(A,1)},removeRows:function(A){this.rows.splice(A,this.rows.length-A)},getNumberOfColumns:function(){var A=0;for(var C=0;C<this.columns.length;C++){var B=this.columns[C];A+=B.colSpan}return A},getCell:function(B,A){return this.cells[B][A]},setColorOpacity:function(A){this.colorOpacity=A},clear:function(){this.cells=null;if(null==this.parentElement){return false}var A=this.parentElement.getElementsByTagName("table");if(A!=null&&A.length>0){if(A[0].id=="grid_"+this.parentElement.id){this.parentElement.removeChild(A[0])}}},build:function(){this.clear();var C=document.createElement("table");C.id="grid_"+this.parentElement.id;C.className=this.cssClassName;var D=document.createElement("thead");var A=document.createElement("tbody");this.rowElements=new Array();this.headerCells=new Array();this.headerCells2=new Array();var B=this.columns;this.createHeaderRow(D,B,this.headerCells);if(this.columns2.length>0){B=this.columns2;this.createHeaderRow(D,B,this.headerCells2)}C.appendChild(D);this.createDataRows(A,B);C.appendChild(A);this.parentElement.appendChild(C)},beforeBuild:function(){},afterBuild:function(){},createHeaderRow:function(B,C,A){var E=document.createElement("tr");for(var G=0;G<C.length;G++){var D=C[G];var F=document.createElement("th");F.colSpan=D.colSpan;if(D.width!=null){F.style.width=D.width}E.appendChild(F);F.appendChild(document.createTextNode(D.name));A.push(F)}B.appendChild(E);this.rowElements.push(E)},hasMultiline:function(B){var A=false;for(var D=0,C;C=B[D];D++){if(C.width){A=true}}return A},createDataRows:function(K,E){var H=this.rows.length;this.cells=new Array(H);var B=this.hasMultiline(E);for(var A=0;A<H;A++){var L=this.rows[A];L.index=A;var F=document.createElement("tr");F.className="dataRow";F.className+=(B)?" multiline":" singleline";var C=E.length;this.cells[A]=new Array(C);for(var I=0;I<C;I++){var D=E[I];var J=document.createElement("td");this.cells[A][I]=J;if(D.onCreateCell!=null){D.onCreateCell(L,D,J);var G=J.colSpan;I=I+G-1}else{this.createCellContent(L,D,J)}if(D.width!=null){J.style.width=D.width}F.appendChild(J)}K.appendChild(F);this.rowElements.push(F)}},createCellContent:function(O,D,N,F){var H="";var M=O[D.id];if(typeof M=="undefined"){M=O[D.fullName]}var J=(Ext.isIE)?"title":"ext:qtip";if(D.type=="text"||D.type=="number"||D.type=="date"||D.type=="time"){if(typeof M=="undefined"){M=""}M=this.transformCellValueSpecialChars(M);if(valueExistsNotEmpty(D.width)){H=M}else{H=Ext.util.Format.ellipsis(M,this.maxCellContentWidth)}if(M.length>this.maxCellContentWidth){M=M.replace(/\r\n/g,"<br/>");if(!valueExistsNotEmpty(D.width)){N.setAttribute(J,M)}}if(D.type=="number"){N.style.textAlign="right"}}else{if(D.type=="link"||D.type=="number_link"){if(typeof M=="undefined"){M=""}if(D.type=="number_link"){N.style.textAlign="right"}if(D.javaType=="java.lang.String"){M=this.transformCellValueSpecialChars(M)}if(valueExistsNotEmpty(D.width)){if(D.format=="Memo"){H="<p class='memo'><a href='javascript: //' "+J+"='"+this.getDisplayableTooltip(M)+"'>"+M+"</a></p>"}else{H="<a href='javascript: //'>"+M+"</a>"}}else{H="<a href='javascript: //'>"+Ext.util.Format.ellipsis(M,this.maxCellContentWidth)+"</a>"}if(M.length>this.maxCellContentWidth&&!valueExistsNotEmpty(D.width)){N.setAttribute(J,M.replace(/\r\n/g,"<br/>"))}}else{if(D.type=="button"){if(typeof M=="undefined"||M==true){H="<input type='button' value='"+D.text+"'/>"}}else{if(D.type=="image"){if(typeof M=="undefined"||M==true){H="<input type='image' alt='"+D.text+"' title='"+D.text+"' src='"+D.imageName+"' hspace='1' border='0' />"}}else{if(D.type=="checkbox"){H="<input type='checkbox'";if(M=="true"){H=H+" checked='true' "}H=H+"/>"}else{if(D.type=="radiobutton"){H="<input type='radio' name='"+D.id+"'";if(M=="true"){H=H+" checked='true' "}H=H+"/>"}else{if(D.type=="color"){if(M==undefined){M=""}H=(valueExistsNotEmpty(D.width))?"":Ext.util.Format.ellipsis("",50);var C=new Ab.data.HighlightPattern(M);if(C.isHatched()){var G=this.getLegendBitmapName(D.id,O,C);if(G){H="<img src='"+View.project.projectGraphicsFolder+"/"+G+".png' hspace='0' border='0' style='width:100%;height:16px;'/>"}}else{var E="";if(M.substr(0,2)=="0x"){E=M.substr(2)}else{E=gAcadColorMgr.getRGBFromPatternForGrid(M,true);if(E=="-1"){if(F==undefined||!F.length){E=gAcadColorMgr.getUnassignedColor(true)}else{E=gAcadColorMgr.getColorFromValue(F,true)}}}var A=this.getLegendKeyColumn();if(valueExists(A)){gAcadColorMgr.setColor(A.id,O[A.id],E)}var B=(valueExistsNotEmpty(this.colorOpacity))?"opacity: "+this.colorOpacity+"; filter: alpha(opacity='"+(this.colorOpacity*100).toFixed()+"')":"";H='<div class="colorSwatch" style="background-color:#'+E+";"+B+'"></div>'}N.style.padding="0"}}}}}}}N.innerHTML=H;var L=N.childNodes[0];if(valueExists(L)&&L.nodeType!=3){L.id=this.generateId(O,D)}if(D.defaultActionHandler!=null){var K=D.defaultActionHandler;if(!K.call){K=window[K]}var I=K.createDelegate(O,[O,D]);jQuery(L).on("click",I)}this.afterCreateCellContent(O,D,N)},getDisplayableTooltip:function(A){if(valueExistsNotEmpty(A)){A=A.replace(/'/g,"&apos;")}return A},getLegendKeyColumn:function(){for(var A=0;A<this.columns.length;A++){var B=this.columns[A];if(valueExistsNotEmpty(B.legendKey)&&B.legendKey==="true"){return B}}return null},transformCellValueSpecialChars:function(A){A=A.replace(/\&/g,"&amp;");A=A.replace(/>/g,"&gt;");A=A.replace(/</g,"&lt;");return A},getLegendBitmapName:function(C,B,A){return null},afterCreateCellContent:function(C,B,A){},isActiveColumn:function(A){return(A.defaultActionHandler!=null||(A.commands!=null&&A.commands.length>0))},generateId:function(B,A){return(this.id+"_row"+B.index+"_"+A.id)},createImage:function(F,E,B,C,A){var D=document.createElement("img");D.src=F;D.alt=E;D.title=E;D.border=0;D.hspace=B;if(valueExists(C)){D.width=C}if(valueExists(A)){D.height=A}return D},createLink:function(){var A=document.createElement("a");A.href="javascript: //";return A}});Ab.grid.ReportGrid=Ab.grid.Grid.extend({refreshWorkflowRuleId:"",viewDef:null,isDistinct:false,primaryKeyIds:[],fieldDefs:[],showCounts:false,applyVpaRestrictions:true,headerRows:[],tableElement:null,tableHeadElement:null,tableBodyElement:null,tableFootElement:null,selectionEnabled:true,selectedRowIndex:-1,multipleSelectionEnabled:false,sortEnabled:true,sortColumnID:"",sortColumnOrder:1,sortColumns:[],sortDirections:[],sortListener:null,sortListening:true,exportType:"",exportFile:"",exportReportViewName:null,exportURL:"",hasMoreRecords:false,hasNoRecords:false,recordLimit:-1,recordSet:null,gridRows:null,imageSortAscending:"ab-sort-asc.png",imageSortDescending:"ab-sort-desc.png",imageSortNatural:"ab-sort-natl.png",initialSortDirection:0,userDefinedFooterHtml:null,sortValues:null,totals:null,average:null,minimum:null,maximum:null,statisticAttributes:null,statisticWorkflowRuleId:"",scrollbarFactor:20,selectionModel:null,selectionModelStore:null,selectionAcrossPagesEnabled:false,constructor:function(A,I){this.inherit(A,I);this.showCounts=I.getConfigParameter("showCounts",false);this.fieldDefs=I.getConfigParameter("fieldDefs",[]);this.primaryKeyIds=[];for(var F=0;F<this.fieldDefs.length;F++){var D=this.fieldDefs[F];if(D.primaryKey){this.primaryKeyIds.push(D.fullName)}}var N=this.createEvaluationContext();var K=this.getSidecar().get("columns");if(K&&K.length>0){if(K[0].id=="multipleSelectionColumn"){K.shift()}this.columns=K}else{this.defaultCommands=this.getDefaultCommands(this.fieldDefs);for(var F=0;F<this.fieldDefs.length;F++){var D=this.fieldDefs[F];var C;var B=null;if(D.defaultActionHandler){B=D.defaultActionHandler}else{if(D.isDocument){B=this.showDocumentLinkCommand.createDelegate(this)}}if(valueExistsNotEmpty(D.controlType)||this.defaultCommands){if(D.controlType=="button"){C=new Ab.grid.Column(D.id,"","button",B,null,null,null,D.title,D.commands)}else{if(D.controlType=="image"){C=new Ab.grid.Column(D.id,D.title,"image",B,null,null,null,D.title,D.commands,D.imageName)}else{if((D.controlType=="link")||(this.getEventListener("onClickItem"))||this.defaultCommands){var L="link";if(D.type==="java.lang.Double"||D.type==="java.lang.Integer"){L="number_link"}var E=(this.defaultCommands)?this.defaultCommands:D.commands;C=new Ab.grid.Column(D.id,D.title,L,B,null,null,null,D.title,E)}else{C=new Ab.grid.Column(D.id,D.title,D.controlType)}}}}else{if(D.isDate){C=new Ab.grid.Column(D.id,D.title,"date")}else{if(D.isTime){C=new Ab.grid.Column(D.id,D.title,"time")}else{var L="text";if(D.type==="java.lang.Double"||D.type==="java.lang.Integer"){L="number"}C=new Ab.grid.Column(D.id,D.title,L)}}}C.fullName=D.fullName;C.tooltip=D.tooltip;C.enabled=D.enabled;C.width=D.width;C.hidden=Ab.view.View.evaluateBoolean(D.hidden,N,false);C.javaType=D.type;C.legendKey=D.legendKey;C.format=D.format;this.addColumn(C)}}this.sortValues=I.getConfigParameterIfExists("sortValues");var J=I.getConfigParameterIfExists("viewDef");if(typeof J=="string"){var M=I.getConfigParameter("groupIndex");var H=I.getConfigParameter("dataSourceId");this.viewDef=new Ab.view.ViewDef(J,M,null,null,H)}else{this.viewDef=J}this.imageSortAscending=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-sort-asc.png";this.imageSortDescending=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-sort-desc.png";this.imageSortNatural=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-sort-natl.png";var G=I.getConfigParameterIfExists("sortColumns");if(valueExists(G)&&G.length>0){this.sortColumns=G;this.sortColumnOrder=G[0].ascending==true?1:-1}this.sortListener=this.onClickSort;this.applyVpaRestrictions=I.getConfigParameter("applyVpaRestrictions",true);this.sortEnabled=I.getConfigParameter("sortEnabled",true);this.selectionEnabled=I.getConfigParameter("selectionEnabled",true);this.multipleSelectionEnabled=I.getConfigParameterIfExists("multipleSelectionEnabled",false);this.refreshWorkflowRuleId=I.getConfigParameterNotEmpty("refreshWorkflowRuleId",Ab.grid.ReportGrid.WORKFLOW_RULE_REFRESH);this.recordLimit=I.getConfigParameter("recordLimit",-1);this.gridRows=new Ext.util.MixedCollection();this.addEventListenerFromConfig("onMultipleSelectionChange",I);this.addEventListenerFromConfig("afterGetData",I);if(!this.getEventListener("afterGetData")){this.addEventListener("afterGetData",this.afterGetData)}if(!this.getEventListener("beforeExportReport")){this.addEventListener("beforeExportReport",this.beforeExportReport)}this.statisticAttributes={formulas:[],fields:[],currencyCode:"",exchangeRateType:"",currencyFields:[],formulaFields:[],formulaValues:[]};if(this.multipleSelectionEnabled&&this.columns.length>0){this.addColumnFirst(new Ab.grid.Column(Ab.grid.ReportGrid.COLUMN_NAME_MULTIPLE_SELECTION,"","checkbox",this.onChangeMultipleSelection.createDelegate(this)))}this.initializeColumns();this.selectionModelStore={};this.initializeSelectionModel()},initializeSelectionModel:function(A){if(valueExistsNotEmpty(A)){if(!(A in this.selectionModelStore)){this.selectionModelStore[A]=new Ab.grid.SelectionModel()}this.selectionModel=this.selectionModelStore[A]}else{this.selectionModel=new Ab.grid.SelectionModel()}},getDefaultCommands:function(E){var A=null;var D=false;for(var C=0;C<E.length;C++){var B=E[C];if(valueExistsNotEmpty(B.controlType)&&D){return null}if(valueExistsNotEmpty(B.controlType)){D=true;if(B.controlType=="link"){A=B.commands}}}return A},getData:function(D){var B=null;var C=this.refreshWorkflowRuleId.split("-").length==3;if(C){B=Workflow.callMethod(this.refreshWorkflowRuleId,D)}else{B=Workflow.call(this.refreshWorkflowRuleId,D)}var A=this.getStatisticData(D);if(valueExists(A)){if(valueExists(A.data.totals)){B.data.totals=A.data.totals}if(valueExists(A.data.maximum)){B.data.maximum=A.data.maximum}if(valueExists(A.data.minimum)){B.data.minimum=A.data.minimum}if(valueExists(A.data.average)){B.data.average=A.data.average}}if(C){this.handleDataSet(B)}else{this.formatDataRecords(B)}return B},getStatisticData:function(B){var A=null;var C=this.getDataSource();if(this.isShowMax()||this.isShowMin()||this.isShowAverage()||(this.isShowSum()&&C&&C.type=="grouping")||this.isCustomTotal()){if(C&&C.type!="grouping"){B.showTotals=false}else{if(C&&C.type=="grouping"){B.showTotals=this.isShowSum()}}if(this.isCustomTotal()){B.showTotals=this.isShowSum()}B.statisticFields=toJSON(this.statisticAttributes.fields);B.showMax=this.isShowMax();B.showMin=this.isShowMin();B.showAvg=this.isShowAverage();B.currencyCode=this.statisticAttributes.currencyCode;B.exchangeRateType=this.statisticAttributes.exchangeRateType;B.currencyFields=toJSON(this.statisticAttributes.currencyFields);B.formulaFields=toJSON(this.statisticAttributes.formulaFields);B.formulaValues=toJSON(this.statisticAttributes.formulaValues);A=Workflow.call(this.statisticWorkflowRuleId,B)}return A},handleDataSet:function(A){if(valueExists(A.dataSet)){var C=[];for(var D=0;D<A.dataSet.records.length;D++){var B=this.recordToRow(A.dataSet.records[D]);C.push(B)}A.data.records=C;A.data.hasMoreRecords=A.dataSet.hasMoreRecords}},formatDataRecords:function(A){var E=this.getDataSource();if(valueExists(E)&&valueExists(A.data.records)){for(var B=0;B<A.data.records.length;B++){var C=E.formatCurrencyValues(A.data.records[B]);Ext.apply(A.data.records[B],C)}var D="";if(valueExists(this.statisticAttributes.currencyCode)){D=this.statisticAttributes.currencyCode}if(valueExists(A.data.totals)){A.data.totals.totalsCurrency=D;var C=E.formatCurrencyValues(A.data.totals);Ext.apply(A.data.totals,C)}if(valueExists(A.data.maximum)){A.data.maximum.totalsCurrency=D;var C=E.formatCurrencyValues(A.data.maximum);Ext.apply(A.data.maximum,C)}if(valueExists(A.data.minimum)){A.data.minimum.totalsCurrency=D;var C=E.formatCurrencyValues(A.data.minimum);Ext.apply(A.data.minimum,C)}if(valueExists(A.data.average)){A.data.average.totalsCurrency=D;var C=E.formatCurrencyValues(A.data.average);Ext.apply(A.data.average,C)}}},initialDataFetch:function(){if(this.showOnLoad){try{View.log("Before initial data fetch: grid = ["+this.id+"]");var A=this.getData(this.getParametersForRefresh());if(valueExists(A.data.totals)){this.totals=new Ab.data.Record();this.totals.fromJSON(A.data.totals)}if(valueExists(A.data.maximum)){this.maximum=new Ab.data.Record();this.maximum.fromJSON(A.data.maximum)}if(valueExists(A.data.minimum)){this.minimum=new Ab.data.Record();this.minimum.fromJSON(A.data.minimum)}if(valueExists(A.data.average)){this.average=new Ab.data.Record();this.average.fromJSON(A.data.average)}var D=this.getEventListener("afterGetData");if(D){D(this,A.data)}this.onInitialDataFetch(A);var C=A.data;if(this.columns.length==0&&valueExists(C.columns)){if(this.multipleSelectionEnabled){this.addColumn(new Ab.grid.Column(Ab.grid.ReportGrid.COLUMN_NAME_MULTIPLE_SELECTION,"","checkbox",this.onChangeMultipleSelection.createDelegate(this)))}this.addColumnsFromData(C);this.initializeColumns()}if(C.records){this.addRows(C.records);this.hasMoreRecords=C.hasMoreRecords;this.hasNoRecords=(C.records.length<1)}else{this.hasNoRecords=true}this.beforeBuild();this.build();this.afterBuild();this.visible=true;if(this.getInstructionsEl()){this.showElement(this.getInstructionsEl(),true)}this.afterRefresh();View.log("After initial data fetch: grid = ["+this.id+"]")}catch(E){this.handleError(E)}}else{var B=this;this.show(this.showOnLoad)}},onInitialDataFetch:function(A){},addColumnsFromData:function(A){this.addColumns(A.columns)},addGridRow:function(A,B){if(A.constructor===Ab.data.Record){A=this.recordToRow(A)}if(valueExists(B)){this.rows.splice(B,0,A);for(var C=B+1;C<this.rows.length;C++){this.rows[C].index=this.rows[C].index+1}}else{this.rows.push(A)}},removeGridRow:function(A){var C=this.rows.splice(A,1);for(var B=A+1;B<this.rows.length;B++){this.rows[B].index=this.rows[B].index+1}return C[0]},moveGridRow:function(B,C){var A=this.removeGridRow(B);this.addGridRow(A,C)},clearGridRows:function(){this.rows=[]},getColumns:function(){return this.columns},findColumnIndex:function(C){var A=-1;for(var B=0;B<this.columns.length;B++){if(this.columns[B].id===C){A=B;break}}return A},showColumn:function(C,A){if(!valueExists(A)){A=true}if(typeof C==="number"){this.columns[C].hidden=!A}else{for(var B=0;B<this.columns.length;B++){if(this.columns[B].id===C){this.columns[B].hidden=!A;break}}}},hideColumn:function(A){this.showColumn(A,false)},hideAllColumns:function(){for(var A=0;A<this.columns.length;A++){this.columns[A].hidden=true}},setColumnDisplayOrder:function(D,C){var A=this.findColumnIndex(D);if(A>=0){var B=this.columns[A];this.columns.splice(A,1);this.columns.splice(C,0,B)}},sortColumns:function(C,D){var B=this.columns.slice(C,D);B.sort(function(F,E){return F.name.localeCompare(E.name)});for(var A=C;A<D;A++){this.columns[A]=B[A-C]}},update:function(){this.updateHeader();this.reloadGrid();this.afterRefresh()},updateHeader:function(){if(this.tableHeadElement){rows=this.tableHeadElement.getElementsByTagName("tr");for(var A=0,B;B=rows[0];){this.tableHeadElement.removeChild(B)}this.buildHeader(this.tableHeadElement)}},refresh:function(A,B,C){this.beforeRefresh(A,B);this.firstRecords=[];if(valueExists(C)&&C==true){this.restriction=null}this.doRefresh();this.afterRefresh(false)},doRefresh:function(){this.selectedRowIndex=-1;try{var A=this.getData(this.getParametersForRefresh());var B=this.getEventListener("afterGetData");if(B){B(this,A.data)}this.reloadGrid(A.data);this.exportURL=A.data.exportURL}catch(C){this.handleError(C)}},afterGetData:function(K,E){var B=K.getMsgKeyPrefixesFromColumns();if(!K.hasMessagesForColumns(B)){return }for(var A=0,F;F=E.records[A];A++){for(var H=0,D;D=K.columns[H];H++){var J=F[D.id];if(D.hidden||!J||(typeof J!="string")||J.length==0){continue}var I=J.split(" ");var G=I[0].toLowerCase();for(var L=1,C;C=I[L];L++){C=C.toUpperCase().substr(0,1)+C.toLowerCase().substr(1);G+=C}G=B[H]+G;if(valueExists(View.messages[G])){F[D.id]=View.messages[G]}}}},getMsgKeyPrefixesFromColumns:function(){var D=new Array(this.columns.length);for(var A=0,B;B=this.columns[A];A++){if(B.hidden){continue}var C=valueExists(B.fullName)?B.fullName:B.id;var E=C.split(".");D[A]=E[0]+"_"+E[1]+"_"}return D},hasMessagesForColumns:function(C){var D=false;for(msg in View.messages){if(D){break}for(var A=0,B;B=C[A];A++){if(msg.indexOf(B)==0){D=true;break}}}return D},afterRefresh:function(C){var A=this;View.controllers.each(function(D){D.autoWireGridRows(A)});var B=Ext.get(this.id+"_checkAll");if(valueExists(B)){B.dom.checked=false}if(this.actionbar&&!this.selectionAcrossPagesEnabled){this.actionbar.updateSelected(0)}this.inherit();if(!valueExists(C)){C=true}if(C){this.updateHeight()}},clear:function(){if(null==this.parentElement){return false}this.removeRowsFromTable()},reloadGrid:function(A){if(this.actionbar&&!this.selectionAcrossPagesEnabled){this.actionbar.updateSelected(0)}var B=this.getReloadDataFromGrid(A);if(this.tableHeadElement==null){this.beforeBuild();this.build();this.afterBuild()}this.rows=new Array();this.addRows(B.records);this.removeRowsFromTable();this.rebuildHeader(this.tableHeadElement,B);this.createDataRows(this.tableBodyElement,this.columns);this.buildFooterRows(this.tableFootElement,B);this.displayHeaderRows();if(!this.showIfNoData&&B.records.length==0){this.show(false,true)}else{this.show(true)}},rebuildHeader:function(A,C){this.buildPreHeaderRows(A);for(var B=0;B<this.headerRows.length;B++){A.appendChild(this.headerRows[B])}},getReloadDataFromGrid:function(A){var B={};if(valueExists(A)&&valueExists(A.records)){B.records=A.records;B.hasMoreRecords=A.hasMoreRecords}else{B.records=this.rows;B.hasMoreRecords=this.hasMoreRecords}B.hasNoRecords=(B.records.length<1);if(valueExists(A)&&valueExists(A.totals)){this.totals=new Ab.data.Record();this.totals.fromJSON(A.totals)}if(valueExists(A)&&valueExists(A.maximum)){this.maximum=new Ab.data.Record();this.maximum.fromJSON(A.maximum)}if(valueExists(A)&&valueExists(A.minimum)){this.minimum=new Ab.data.Record();this.minimum.fromJSON(A.minimum)}if(valueExists(A)&&valueExists(A.average)){this.average=new Ab.data.Record();this.average.fromJSON(A.average)}return B},initializeColumns:function(){this.initializeSortDirections()},getParameters:function(A){var B={controlId:this.id,viewName:this.viewDef.viewName,groupIndex:this.viewDef.tableGroupIndex,tableName:this.viewDef.tableName,fieldNames:this.viewDef.getFields(),isDistinct:this.isDistinct,sortValues:A,showData:true,exportType:this.exportType,exportFile:this.exportFile,exportReportViewName:valueExists(this.exportReportViewName)?this.exportReportViewName:this.viewDef.viewName,exportTitle:this.title,version:Ab.view.View.version};if(this.applyVpaRestrictions===false){B.applyVpaRestrictions=this.applyVpaRestrictions}if(this.restriction!=null){B.restriction=toJSON(this.restriction)}if(this.viewDef.dataSourceId!=null){B.dataSourceId=this.viewDef.dataSourceId}if((B.viewName==""&&B.tableName==""&&B.fieldNames=="")&&this.columns.length>0){B.tableName=this.columns[0].id.split(".",1)[0];B.fieldNames=this.getFieldNamesParameterFromColumns()}if(this.recordLimit>=0){B.recordLimit=this.recordLimit}if(!B.groupIndex){B.groupIndex="0"}B.showTotals=(this.isShowTotals()||this.isShowCounts());B.showCounts=this.isShowCounts();Ext.apply(B,this.parameters);return B},getParametersForRefresh:function(){return this.getParameters(this.getCurrentSortValues())},isShowTotals:function(){var A=false;var D=this.getDataSource();if(D&&D.type!="grouping"){for(var C=0;C<this.fieldDefs.length;C++){var B=this.fieldDefs[C];if(B.showTotals){A=true;break}}}return A},isShowCounts:function(){return this.showCounts},getCurrentSortValues:function(){var B=[];if(this.sortEnabled){if(valueExistsNotEmpty(this.sortColumnID)){if(this.hasFilterConfiguration(this.sortColumnID)){var D=this.getFilterConfigurationFields(this.sortColumnID);for(var A=0;A<D.length;A++){B.push({fieldName:D[A],sortOrder:this.sortColumnOrder})}}else{B.push({fieldName:this.sortColumnID,sortOrder:this.sortColumnOrder})}}else{if(this.sortColumns&&this.sortColumns.length>0&&typeof this.sortColumns[0]!="function"){for(var A=0,C;C=this.sortColumns[A];A++){B.push({fieldName:C.fieldName,sortOrder:(C.ascending==true)?1:-1})}}else{if(valueExistsNotEmpty(this.sortValues)){return this.sortValues}}}}return toJSON(B)},getFieldNamesParameterFromColumns:function(){var A=new Array();for(var C=0,B;B=this.columns[C];C++){A.push(B.id)}return toJSON(A)},updateHeight:function(){this.inherit();if(this.scroller&&this.scroller.el.length>0&&this.selectValueType==null){this.setScrollerToPosition(0)}var C=Ext.get(this.headerTableElement);if(C){C.addClass(this.cssClassName);if(this.format==="table"){C.addClass("panelReportAutoWidth")}}var D=Ext.get(this.tableElement);if(D){D.addClass(this.cssClassName);if(this.format==="table"){D.addClass("panelReportAutoWidth")}}var B=Ext.get(this.footerTableElement);if(B){B.addClass(this.cssClassName);if(this.format==="table"){B.addClass("panelReportAutoWidth")}}var A=this.determineDivBodyHeight();if(A==="auto"||!isNaN(A)){this.setDivBodyHeight(A)}this.resizeColumnWidths();if(this.useScroller()&&(A==="auto"||A>Ab.grid.ReportGrid.MIN_SCROLLING_HEIGHT)){this.updateScroller()}else{this.updateScroller({verticalScrolling:false,horizontalScrolling:this.hasScrollingHeight()})}if(this.scroller&&this.scroller.el.length>0&&this.selectValueType==null){this.setScrollerToPosition(this.divHeadElement.scrollLeft)}},useScroller:function(){return valueExists(this.window)||(this.ownsLayoutRegion()&&this.hasScrollingHeight())||(this.lastInLayoutRegion()&&this.hasScrollingHeight())||this.lastInTab()||this.singleVisiblePanel()||this.hidden},createScroller:function(B,C){this.inherit(B,C);var A=this;this.scroller.setOnHorizontalScroll(function(D){A.divHeadElement.scrollLeft=D;A.divFootElement.scrollLeft=D})},hasScrollingHeight:function(){var B=false;if(this.divBodyElement){var A=Ext.get(this.divBodyElement).getHeight();B=(A>Ab.grid.ReportGrid.MIN_SCROLLING_HEIGHT)}return B},setDivBodyHeight:function(A){if(this.divBodyElement){if(A!="auto"&&A<this.scrollbarFactor){A="auto"}this.divBodyElement.style.height=(A=="auto")?A:A+"px";if(A==="auto"){var B=Ext.get(this.tableElement).getHeight();this.divBodyElement.style.height=(B+16)+"px"}}},determineDivBodyHeight:function(){var C=0;var I=Ext.get(this.headerTableElement);if(I){this.divHeadElement.style.width="auto";this.headerTableElement.style.width="auto";this.divHeadElement.style.overflow="hidden";this.divFootElement.style.width="auto";this.footerTableElement.style.width="auto";this.divFootElement.style.overflow="hidden";var M=this.getScrollableEl().dom.scrollWidth;var D=M;var G=M;var B=M;var N=M;var E=M;var A=this.headerTableElement.scrollWidth;var L=this.tableElement.scrollWidth;var H=this.footerTableElement.scrollWidth;var K=M;var F=K;var J=0;if((Math.max(L,A,H)+this.scrollbarFactor)<M){J=this.scrollbarFactor;D=M;G=M;N=M;E=M-J}this.divHeadElement.style.width=D+"px";this.headerTableElement.style.width=(G)+"px";if(!this.hasNoRecords&&(navigator.appVersion.toLowerCase().indexOf("MSIE 8")==-1)){this.divBodyElement.style.width=(N>0)?(N)+"px":"auto";this.tableElement.style.width=(E>0)?(E)+"px":"auto"}this.footerTableElement.style.width=(B)+"px";C=this.calculateDivBodyHeight()}return C},calculateDivBodyHeight:function(){var B="auto";var C=this.determineAvailableHeight();if(!this.hasNoRecords&&C>0){B=C;B-=this.divHeadElement.scrollHeight;B-=this.divFootElement.scrollHeight;B-=this.getScrollableEl().getPadding("tb");B-=2;if(this.actionbar){B-=(Ext.get(this.id+"_actionbar").getHeight()+Ext.get(this.id+"_actionbar").getPadding("tb"))}var A=Ext.get(this.id+"_instructions");if(A){B-=A.getHeight()}if(B<0){B="auto"}}return B},getFirstRowIndex:function(){var A=this.getDataRows();this.columnWidthRowIndex=(A.length>0)?A[0].rowIndex:-1;return this.columnWidthRowIndex},getCustomWidths:function(A,B){var E=new Array();var F=this.getScrollableEl().getWidth();for(var C=0;C<A.length;C++){var G=A[C];var D=G.width;if(D.match(/%/)){D=Number(D.replace("%",""));D=Math.round((this.tableElement.scrollWidth)*0.01*D)}E.push(Number(D))}return E},clearGridWidths:function(C,B,A){this.divHeadElement.style.width="auto";this.headerTableElement.style.width="auto";this.divBodyElement.style.width="auto";this.tableElement.style.width="auto";this.divFootElement.style.width="auto";this.footerTableElement.style.width="auto";this.nestedBodyDiv.style.width="auto";for(var E=0;E<C.length;E++){if(E==0&&this.multipleSelectionEnabled){B[E].style.width="22px";C[E].style.width="22px"}else{B[E].style.width="auto";C[E].style.width="auto"}}for(var D=0;D<A.length;D++){if(A[D]){if(D==0&&this.multipleSelectionEnabled){A[D].style.width="22px"}else{A[D].style.width="auto"}if(A[D].id&&Ext.get(A[D].id)){Ext.get(A[D].id).removeClass("lastFooterCell")}}}},resizeColumnWidths:function(){if(this.tableBodyElement&&this.tableHeadElement){var m=(Ext.isIE)?1:0;var e=this.getFirstRowIndex();if(e>=0&&this.tableBodyElement.rows[e]){var c=this.getHeaderColumns();var q=Ext.get(this.headerTableElement);var V=Ext.get(this.tableElement);var B=this.tableBodyElement.rows[e].cells;if(c.length!=B.length){return }var Z=this.getFooterRowWithMostColumns();var y=(Z)?Z.cells:[];var l=this.getCustomWidths(B,c);this.clearGridWidths(c,B,y);var Q=new Array();var R=new Array();var A=new Array();var L=new Array();var H=new Array();var G=new Array();var X=0;for(var v=0;v<c.length;v++){var N=Ext.get(c[v]);if(Ext.isIE&&N&&N.dom.style.display=="none"){L.push(0);Q.push(0);H.push(0);R.push(0);A.push(0);G.push(0)}else{L.push(N.getWidth());var J=N.getPadding("lr")+N.getBorderWidth("lr")+m;Q.push(J);var h=Ext.get(this.tableElement.rows[e].cells[v]);H.push(h.getWidth());var f=h.getPadding("lr")+h.getBorderWidth("lr")+m;R.push(f);var P=Ext.get(y[v]);if(P){var M=P.getPadding("lr")+P.getBorderWidth("lr")+m;A.push(M);G.push(P.getWidth());if(v==y.length-1){X=P.getPadding("r")}}}}var x=new Array();var T=0;for(var v=0;v<B.length;v++){var w=l[v];var s=(y.length==B.length)?G[v]:0;var Y=Math.max(L[v],H[v],c[v].width,s);if((w>0)&&w>Y){x[v]=w}else{x[v]=Y}T+=x[v]}for(var u=(this.multipleSelectionEnabled)?1:0;u<c.length;u++){var o=((x[u]-Q[u])<=0)?0:(x[u]-Q[u]);var O=((x[u]-R[u])<=0)?0:(x[u]-R[u]);var z=((x[u]-A[u])<=0)?0:(x[u]-A[u]);c[u].style.width=(o)+"px";B[u].style.width=(O)+"px";if(y.length==c.length){y[u].style.width=(z)+"px"}}this.tableElement.style.width=Number(T)+"px";var r=c.length-1;var S=c[r];this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";this.footerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";S.style.width=(o+this.scrollbarFactor)+"px";if(y.length>0){var W=y[y.length-1];W.style.width=(y.length==1)?Number(T+this.scrollbarFactor):(z+this.scrollbarFactor)+"px";if(this.divBodyElement.scrollHeight>this.divBodyElement.clientHeight){W.style.width=(y.length==1)?Number(T+X):(z+X)+"px";Ext.get(W.id).addClass("lastFooterCell")}}var C=this.getScrollableEl();var I=this.headerTableElement;var K=this.tableElement;var Y=Math.max(I.scrollWidth,K.scrollWidth);var U=B[r];var a=C.dom.scrollWidth-Y;if(a>0){this.headerTableElement.style.width=Number(T+this.scrollbarFactor+a)+"px";this.tableElement.style.width=Number(T+a)+"px";this.footerTableElement.style.width=Number(T+this.scrollbarFactor+a)+"px";var D=a/c.length;for(var u=(this.multipleSelectionEnabled)?1:0;u<c.length;u++){var o=(x[u]-Q[u]);var O=(x[u]-R[u]);var z=(x[u]-A[u]);c[u].style.width=(o+D)+"px";B[u].style.width=(O+D)+"px";if(y.length==c.length){y[u].style.width=(z+D)+"px"}}S.style.width=(o+this.scrollbarFactor+D)+"px";if(y.length==c.length){if(this.divBodyElement.scrollHeight>this.divBodyElement.clientHeight){W.style.width=(z+X+D)+"px"}else{W.style.width=(z+this.scrollbarFactor+D)+"px"}}if(this.divBodyElement.scrollHeight>this.divBodyElement.clientHeight){U.style.width=(O+D)+"px";var E=this.divHeadElement.scrollWidth-this.headerTableElement.scrollWidth;if(E>0){this.headerTableElement.style.width=Number(T+this.scrollbarFactor+a+E)+"px";this.tableElement.style.width=Number(T+a+E)+"px"}var p=this.divFootElement.scrollWidth-this.footerTableElement.scrollWidth;if(p>0){this.footerTableElement.style.width=Number(T+this.scrollbarFactor+a+p)+"px"}}else{if(this.scroller){this.tableElement.style.width=Number(T+a)+"px";U.style.width=(O+D)+"px"}else{this.tableElement.style.width=Number(T+a+this.scrollbarFactor-1)+"px";U.style.width=(O+D+this.scrollbarFactor)+"px"}}}else{if(a<0){this.scrollHeaderAndFooter();var t=this.calculateDivBodyHeight();this.setDivBodyHeight(t);if(this.ownsLayoutRegion()&&Ext.get(this.id+"_layoutWrapper")){var F=Ext.get(this.id+"_layoutWrapper").dom.parentElement;if(F.parentElement.scrollWidth>F.parentElement.clientWidth){this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";if(F.parentElement){if((F.parentElement.scrollHeight>F.parentElement.clientHeight)){F.style.height=F.parentElement.clientHeight+"px"}}}}else{this.setDivBodyHeight(t)}if((this.divBodyElement.scrollHeight-this.divBodyElement.clientHeight<0)){S.style.width=(o)+"px";this.headerTableElement.style.width=Number(T)+"px"}else{if(this.divBodyElement.scrollHeight-this.divBodyElement.clientHeight==0){if(this.divBodyElement.scrollWidth-this.divBodyElement.clientWidth>0){this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";this.tableElement.style.width=Number(T+this.scrollbarFactor)+"px";U.style.width=(O+this.scrollbarFactor)+"px"}else{if(this.scroller&&this.scroller.el.length>0){if(this.scroller.el[0].scrollHeight-this.tableElement.scrollHeight<2){S.style.width=(o+this.scrollbarFactor)+"px";this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";U.style.width=(O+2)+"px";this.tableElement.style.width=Number(T+2)+"px"}else{S.style.width=(o+this.scrollbarFactor)+"px";this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";U.style.width=(O+this.scrollbarFactor)+"px";this.tableElement.style.width=Number(T+this.scrollbarFactor)+"px"}}else{S.style.width=(o+this.scrollbarFactor)+"px";this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px"}}}else{if(this.scroller&&this.scroller.el[0].scrollHeight-this.tableElement.scrollHeight<2){}else{S.style.width=(o+this.scrollbarFactor)+"px";this.headerTableElement.style.width=Number(T+this.scrollbarFactor)+"px";U.style.width=(O+2)+"px";this.tableElement.style.width=Number(T+2)+"px"}}}}}}else{if(this.tableFootElement&&this.tableHeadElement&&this.hasNoRecords){this.headerTableElement.style.width=(Ext.get(this.divFootElement).getWidth())+"px";this.divHeadElement.style.width=(Ext.get(this.divFootElement).getWidth())+"px";this.footerTableElement.style.width=(Ext.get(this.divFootElement).getWidth())+"px"}}if(this.divBodyElement&&this.nestedBodyDiv.style.width!=""){var g=Ext.get(this.parentElement.id+"_head");if(g){var b=g.dom;if(b.scrollWidth>this.nestedBodyDiv.scrollWidth&&this.nestedBodyDiv.offsetWidth!=b.scrollWidth){this.nestedHeaderDiv.style.width=b.scrollWidth+"px";this.nestedBodyDiv.style.width=(this.divBodyElement.scrollHeight-this.divBodyElement.clientHeight>0)?(b.scrollWidth-this.scrollbarFactor)+"px":+(b.scrollWidth)+"px";this.nestedFooterDiv.style.width=b.scrollWidth+"px"}}}}},getHeaderColumns:function(){var A=this.tableHeadElement.getElementsByTagName("th");var B=[];for(var D=0;D<this.columns.length;D++){for(var C=0,E;E=A[C];C++){if(E.id=="sortHeader_"+D){B.push(E)}}}return B},getFooterRowWithMostColumns:function(){var E=null;var A=this.footerTableElement.rows;var C=[];for(var D=0;D<A.length;D++){var B=A[D].cells;if(B.length>C.length){C=B;E=A[D]}}return E},isScrollInLayout:function(){return !this.useScroller()},isAutoScroll:function(){return false},getScrollableEl:function(){return Ext.get(this.divBodyElement)},callReportJob:function(G){var A=G.outputType,J=G.printRestriction,C=G.orientation,I=G.handler,D=G.recordLimit,F=G.pageSize;var E=null;var B=this.title;if(B==""){B=Ab.view.View.title}var H=this.getParametersForRefresh();if(valueExists(I)){H.handler=I}if(valueExists(D)){H.recordLimit=D}else{if(valueExists(H.recordLimit)){delete H.recordLimit}}if(valueExists(J)){H.printRestriction=J}if(A==="docx"||A==="pdf"){if(valueExistsNotEmpty(C)){H.orientation=C}if(valueExistsNotEmpty(F)){H.pageSize=F}H.outputType=A;E=this.callDOCXReportJob(B,this.restriction,H)}else{if(A==="xls"){E=this.callXLSReportJob(B,this.restriction,H)}}return E},callDOCXReportJob:function(D,A,B){var C=this.viewDef.viewName+".axvw";return Workflow.startJob(Ab.grid.ReportGrid.WORKFLOW_RULE_DOCX_REPORT,C,this.dataSourceId,D,this.getVisibleFieldDefs(),toJSON(A),B)},callXLSReportJob:function(D,A,B){var C=this.viewDef.viewName+".axvw";return Workflow.startJob(Ab.grid.ReportGrid.WORKFLOW_RULE_XLS_REPORT,C,this.dataSourceId,D,this.getVisibleFieldDefs(),toJSON(A),B)},getVisibleFieldDefs:function(){var A=this.createEvaluationContext();var E=this.fieldDefs;if(E&&E.length==0){this.getDataSource().fieldDefs.each(function(H){E.push(H)})}var G=[];for(var B=0,C;C=this.columns[B];B++){if(C.hidden){continue}var F=this.getFieldDefById(E,C.fullName,B);if(valueExists(F)){if(F.controlType===""||F.controlType==="color"||F.controlType==="link"||F.controlType==="recurring"){F.title=Ab.view.View.evaluateString(F.title,A,false);F.hidden="false";G.push(F)}}}var D=this.getEventListener("beforeExportReport");if(D){G=D(this,G)}return G},beforeExportReport:function(A,B){return B},getFieldDefById:function(C,E,A){if(A<C.length){var D=C[A];if(valueExists(D)&&(E==D.fullName)){return D}}for(var B=0,D;D=C[B];B++){if(E===D.fullName){return D}}return null},getDataSourceFieldDefById:function(B){var A=this.getDataSource();return(A&&A.hasOwnProperty("fieldDefs"))?A.fieldDefs.get(B):null},onChangeMultipleSelection:function(C){this.updateSelectionModel(C,C.row.isSelected(),true);if(!C.row.isSelected()){var B=Ext.get(this.id+"_checkAll");if(valueExists(B)){B.dom.checked=false}}if(this.actionbar){if(this.selectionAcrossPagesEnabled){this.actionbar.updateSelected(this.getAllSelectedRows().length)}else{this.actionbar.updateSelected(this.getSelectedRows().length)}}var A=this.getEventListener("onMultipleSelectionChange");if(A){A(C)}},enableSelectAll:function(A){if(this.multipleSelectionEnabled){var B=Ext.get(this.id+"_checkAll");if(B){B.setDisplayed(A)}}},columnTypeIsSortable:function(B){var A=false;if(B=="text"||B=="number"||B=="date"||B=="time"||B=="link"||B=="number_link"){A=true}return A},initializeSortDirections:function(){this.sortDirections=[];for(var D=0,C;C=this.columns[D];D++){this.sortDirections[D]="";for(var B=0,A;A=this.sortColumns[B];B++){if(C.id==A.fieldName){this.sortDirections[D]=A.ascending?1:-1;continue}}if(this.columnTypeIsSortable(C.type)&&this.sortDirections[D]==""){this.sortDirections[D]=this.initialSortDirection}}},incrementSortDirection:function(A){return(A==1)?-1:A+1},incrementHdrSortDirections:function(A){var F;var G=this.headerRows[0].getElementsByTagName("th");for(var C=0,B;B=G[C];C++){var I=B.id.substring(11);var E=B.getElementsByTagName("img");var F;if(E!=null&&E.length>0){F=E[0]}if(I==""||(I!=A&&this.sortDirections[I]==this.initialSortDirection)){continue}else{if(I==A&&F!=null){var H=this.incrementSortDirection(this.sortDirections[I]);this.sortDirections[I]=H;var D=this.getSortImage(H);D.id="sortLink_"+I;B.replaceChild(D,F)}else{if(F!=null){this.sortDirections[I]=this.initialSortDirection;var D=this.getSortImage(this.initialSortDirection);D.id="sortLink_"+I;B.replaceChild(D,F)}}}}},getSortImage:function(B){var A;switch(B){case 1:A=this.createImage(this.imageSortAscending,"",4);break;case -1:A=this.createImage(this.imageSortDescending,"",4);break;default:A=this.createImage(this.imageSortNatural,"",4)}return A},activateSortListener:function(A,C){if(this.sortListener!=null&&typeof this.sortListener=="function"){var B=this.sortListener.createDelegate(this,[C]);Ext.fly(A).addListener("click",B)}},removeSortListener:function(A){if(this.sortListener!=null&&typeof this.sortListener=="function"){Ext.fly(A).removeListener("click",this.sortListener)}},setScrollerToPosition:function(A){if(this.scroller&&this.scroller.el.length>0){try{this.scroller.el[0].scrollLeft=A}catch(B){}this.scroller.update()}},addOffsetToHeaderAndFooter:function(A){if(this.scroller){this.divHeadElement.scrollLeft=this.divHeadElement.scrollLeft+A;this.divFooterElement.scrollLeft=this.divFooterElement.scrollLeft+A}},onClickSort:function(B){if(!this.sortListening){return }var F=this.columns[B];this.sortColumnID=valueExists(F.fullName)?F.fullName:F.id;var C=this.getParameters(this.getNextSortValues(B));try{if(this.scroller&&this.scroller.el.length>0){this.setScrollerToPosition(0);this.divHeadElement.scrollLeft=this.scroller.el[0].scrollLeft}var A=this.getData(C);var D=this.getEventListener("afterGetData");if(D){D(this,A.data)}this.reloadOnSort(A.data)}catch(E){this.handleError(E)}this.incrementHdrSortDirections(B);this.setScrollerToPosition(0);this.updateHeight();if(this.filterEnabled&&this.filterRow&&this.getFilterValues().length>2&&B===this.columns.length-1){this.setScrollerToPosition(0)}else{window.location.hash="#sortHeader_"+B;this.setScrollerToPosition(this.divHeadElement.scrollLeft)}},getNextSortValues:function(A){var C=new Array();this.sortColumnOrder=this.incrementSortDirection(this.sortDirections[A]);if(this.sortEnabled){if(this.hasFilterConfiguration(this.sortColumnID)){var D=this.getFilterConfigurationFields(this.sortColumnID);for(var B=0;B<D.length;B++){C.push({fieldName:D[B],sortOrder:this.sortColumnOrder})}}else{C.push({fieldName:this.sortColumnID,sortOrder:this.sortColumnOrder})}}return toJSON(C)},getFilterConfigurationFields:function(A){return this.filterConfiguration.columns[A].fields},beforeBuild:function(){this.inherit()},build:function(){this.clear();var D="grid_"+this.parentElement.id;this.removeHtmlTable(D);this.removeHtmlTable(D+"_divHead");this.removeHtmlTable(D+"_divBody");this.removeHtmlTable(D+"_divFooter");var G=document.createElement("table");G.id=D+"_header";var J=document.createElement("thead");this.tableHeadElement=J;this.headerTableElement=G;G.appendChild(J);var A=document.createElement("div");A.id=D+"_divHead";A.appendChild(G);this.divHeadElement=A;this.nestedHeaderDiv=document.createElement("div");this.nestedHeaderDiv.appendChild(G);A.appendChild(this.nestedHeaderDiv);this.parentElement.appendChild(A);var I=document.createElement("table");I.id=D+"_body";this.tableElement=I;var A=document.createElement("div");A.id=D+"_divBody";this.nestedBodyDiv=document.createElement("div");this.nestedBodyDiv.appendChild(I);A.appendChild(this.nestedBodyDiv);A.className="panelReport";A.style.overflow="auto";this.divBodyElement=A;this.parentElement.appendChild(A);var H=document.createElement("tbody");this.tableBodyElement=H;I.appendChild(H);var F=document.createElement("table");F.id=D+"_footer";this.footerTableElement=F;var A=document.createElement("div");A.id=D+"_divFooter";A.appendChild(F);A.style.overflow="hidden";A.className="footerDiv";this.divFootElement=A;this.nestedFooterDiv=document.createElement("div");this.nestedFooterDiv.appendChild(F);A.appendChild(this.nestedFooterDiv);this.parentElement.appendChild(A);var B=document.createElement("tfoot");this.tableFootElement=B;F.appendChild(B);this.headerRows=new Array();this.buildHeader(J);var E=this.columns2.length>0?this.columns2:this.columns;this.createDataRows(this.tableBodyElement,E);this.buildFooterRows(B);var C=this.getScrollableEl();Ext.get(this.divHeadElement).on("scroll",this.scrollBodyAndFooter,this);Ext.get(this.divBodyElement).on("scroll",this.scrollHeaderAndFooter,this);this.displayHeaderRows();this.updateHeight()},removeHtmlTable:function(B){var A=Ext.get(B);if(A){A.remove()}},scrollHeaderAndFooter:function(){var A=this.divBodyElement;this.divHeadElement.scrollLeft=A.scrollLeft;this.divFootElement.scrollLeft=A.scrollLeft;this.scrollPanelTitle(A)},scrollBodyAndFooter:function(){var A=this.divHeadElement;this.divBodyElement.scrollLeft=A.scrollLeft;this.divFootElement.scrollLeft=A.scrollLeft;this.scrollPanelTitle(A)},scrollPanelTitle:function(C){var B=Ext.get(this.parentElement.id+"_head");if(B){var A=B.dom;A.style.overflow="hidden";A.scrollLeft=C.scrollLeft}},displayHeaderRows:function(){for(var A=0;A<this.headerRows.length;A++){this.headerRows[A].style.display=(this.rows.length==0)?"none":""}},buildHeader:function(A){this.buildPreHeaderRows(A);var B=this.columns;this.createHeaderRow(A,B,0);if(this.columns2.length>0){B=this.columns2;this.createHeaderRow(A,B,1)}var C=this.getEventListener("afterBuildHeader");if(C){C(this,A)}},buildPreHeaderRows:function(A){},getTableBodyElement:function(){return this.tableBodyElement},getTableHeadElement:function(){return this.tableHeadElement},getTableFootElement:function(){return this.tableFootElement},removeRowsFromTBody:function(){this.removeRowsFromTable()},removeRowsFromTable:function(){this.removeActionListeners();if(this.tableBodyElement){jQuery(this.tableBodyElement).empty()}if(this.tableHeadElement){jQuery(this.tableHeadElement).empty()}if(this.tableFootElement){jQuery(this.tableFootElement).empty()}this.clearScroller()},getDisplayableTitle:function(A){if(valueExistsNotEmpty(A)){A=A.replace(/&amp;/g,"&");A=A.replace(/&gt;/g,">");A=A.replace(/&lt;/g,"<");A=A.replace(/&apos;/g,"'");A=A.replace(/&quot;/g,'"')}return A},createHeaderRow:function(I,D,B){var F=document.createElement("tr");F.id="headerRow_"+B;if(this.cssHeaderClassName!=""){F.className=this.cssHeaderClassName}for(var G=0,C;C=D[G];G++){if(C.hidden===true){continue}var E=document.createElement("th");E.colSpan=C.colSpan;E.id="sortHeader_"+G;if(C.width!=null){E.style.width=C.width}var H=this.getDisplayableTitle(C.name);E.innerHTML="<div>"+Ext.util.Format.ellipsis(H,80)+"</div>";if(G==0&&this.multipleSelectionEnabled){var K=this.onChangeMultipleSelection.createDelegate(this);E.innerHTML='<input id="'+this.id+'_checkAll" type="checkbox"/>'}this.decorateHeaderCell(B,G,C,E);if(G>0||!this.multipleSelectionEnabled){E.className=((C.type=="number"||C.type=="number_link")&&!this.sortEnabled&&(G<this.columns.length-1||!this.filterEnabled))?"headerTitleNumberNoSort":"headerTitleText"}F.appendChild(E)}if(I==null){I=this.tableHeadElement}I.appendChild(F);this.headerRows[B]=F;var J=Ext.get(this.id+"_checkAll");if(valueExists(J)){var A=this;J.on("click",function(M,L){A.selectAll(L.checked)})}},decorateHeaderCell:function(E,D,A,B){if(this.sortEnabled&&E==0&&this.columnIsSortable(A)){var C=this.getSortImage(this.sortDirections[D]);C.id="sortLink_"+D;this.activateSortListener(B,D);B.appendChild(C)}},columnIsSortable:function(A){return(this.columnTypeIsSortable(A.type))||this.hasFilterConfiguration(A.id)},hasFilterConfiguration:function(A){return !this.getDataSourceFieldDefById(A)&&this.filterConfiguration&&this.filterConfiguration.columns&&this.filterConfiguration.columns[A]},removeSorting:function(){var A=this.headerRows[0].getElementsByTagName("th");this.sortListening=false;for(var B=0,C;C=A[B];B++){var D=C.getElementsByTagName("img");if(D.length>0&&D[0].id.substr(0,8)=="sortLink"){C.removeChild(D[0])}}},restoreSorting:function(){var A=this.headerRows[0].getElementsByTagName("th");this.sortListening=true;for(var B=0,C;C=A[B];B++){var E=C.getElementsByTagName("img");if(E.length>0&&E[0].id.substr(0,8)=="sortLink"){continue}if(typeof this.sortDirections[B]=="number"){var D=this.getSortImage(this.sortDirections[B]);D.id="sortLink_"+B;C.appendChild(D)}}},createDataRows:function(K,E){this.gridRows=new Ext.util.MixedCollection();var C=this.hasMultiline(E);var M=this.rows;var B=this.getEventListener("onClickItem");for(var A=0,G;G=M[A];A++){var F=document.createElement("tr");F.className=(A%2==0)?"dataRow":"dataRow odd";F.onmouseover=function(){this.className=this.className+" hovered"};F.onmouseout=function(){this.className=this.className.replace(" hovered","")};F.className+=(C)?" multiline":" singleline";var L=new Ab.grid.Row(this,G,F);this.gridRows.add(L);G.index=A;G.row=L;for(var H=0,D;D=E[H];H++){if(D.hidden===true){continue}var J=document.createElement("td");if(B&&this.columnTypeIsSortable(D.type)&&D.type!="image"&&D.enabled=="true"){D.type="link";if(D.javaType==="java.lang.Double"||D.javaType==="java.lang.Integer"){D.type="number_link"}}J.className=D.type;if(D.width!=null){if(!D.width.match(/%/)||(D.width.match(/%/)&&A==0)){J.width=D.width}}if(D.onCreateCell!=null){D.onCreateCell(G,D,J)}else{this.createCellContent(G,D,J)}F.appendChild(J);var I=new Ab.grid.Cell(L,D,J);L.cells.add(D.id,I)}K.appendChild(F)}if(this.rows.length==0){var F=document.createElement("tr");var J=document.createElement("td");F.appendChild(J);K.appendChild(F)}this.addRowLevelActions(B,E);this.afterCreateDataRows(K,E)},addRowLevelActions:function(D,B){var A=this;var C=this.getEventListener("onMultipleSelectionChange");this.gridRows.each(function(H){for(var J=0,F;F=B[J];J++){if(F.hidden===true){continue}var E=H.record;var I=A.generateId(E,F);var G=Ext.get(I);if(G||D){if(!(D&&C&&J==0)){A.createCellActions(E,F,I)}}}})},removeActionListeners:function(){this.gridRows.each(function(A){A.removeActionListeners()})},afterCreateDataRows:function(A,B){},addExtraRowCells:function(A){},createCellActions:function(L,E,B){var F=new Ab.command.commandChain(this.id,this.getPrimaryKeysForRow(L));var D=this.getEventListener("onClickItem");if(this.selectionEnabled){var C=new Ab.grid.SelectionCommand(this,L);F.addCommand(C)}if(typeof (E.commands)!="undefined"&&E.commands.length>0){F.addCommands(E.commands)}if(D&&E.type!="image"){if(typeof (D.commands)!="undefined"&&D.commands.length>0){var H=D.commands;for(var G=0;G<D.commands.length;G++){var I=D.commands[G];delete I.applySelectionRestriction;var K={};for(var J in I){if(J!="applySelectionRestriction"){K[J]=I[J]}}D.commands[G]=K}F.addCommands(D.commands)}else{F.addCommand(new Ab.grid.OnClickCommand(L,D))}}var A={useExtButton:false,id:B,originalId:E.id,text:(E.type=="button")?E.text:null,tooltip:E.tooltip,enabled:(D)?"true":E.enabled,hidden:E.hidden,command:F};L.row.addAction(A)},buildFooterRows:function(A,C){this.buildPreFooterRows(A);if(C){this.hasMoreRecords=C.hasMoreRecords;this.hasNoRecords=(!valueExists(C.hasNoRecords))?(C.records.length<1):C.hasNoRecords;if(valueExists(C.totals)){this.totals=new Ab.data.Record();this.totals.fromJSON(C.totals)}if(valueExists(C.maximum)){this.maximum=new Ab.data.Record();this.maximum.fromJSON(C.maximum)}if(valueExists(C.minimum)){this.minimum=new Ab.data.Record();this.minimum.fromJSON(C.minimum)}if(valueExists(C.average)){this.average=new Ab.data.Record();this.average.fromJSON(C.average)}}if(this.hasMoreRecords&&!(this.hasPaging)){this.buildMoreRecordsFooterRow(A,this.getLocalizedString(Ab.grid.ReportGrid.z_NOT_ALL_RECORDS_CAN_BE_SHOWN))}if(this.hasNoRecords){this.buildMoreRecordsFooterRow(A,this.getLocalizedString(Ab.grid.ReportGrid.z_NO_RECORDS_TO_DISPLAY))}else{if(this.hasPaging&&(this.rows.length>0)&&(this.rows.length<this.allCount)){this.buildMoreRecordsFooterRow(A,"")}for(var B=0;B<this.statisticAttributes.formulas.length;B++){var D=this.statisticAttributes.formulas[B];this.buildStatisticFooterRow(A,D)}if(this.isShowTotals()&&!this.isShowSum()&&this.statisticAttributes.formulas.length==0){this.buildTotalsFooterRow(A)}else{if(this.isShowTotals()&&!this.isShowSum()&&this.statisticAttributes.formulas.length>0){this.buildStatisticFooterRow(A,"sum")}}if(this.isShowCounts()){this.buildCountsFooterRow(A)}}this.buildPostFooterRows(A)},buildPreFooterRows:function(A){},buildPostFooterRows:function(A){},buildMoreRecordsFooterRow:function(B,D){var C=document.createElement("tr");var A=document.createElement("td");var F=this.userDefinedFooterHtml!=null?this.userDefinedFooterHtml:D;A.className="message";A.colSpan=this.getNumberOfColumns();A.innerHTML=F;if(this.hasPaging){this.createPagingLinks(A)}if(D==this.getLocalizedString(Ab.grid.ReportGrid.z_NOT_ALL_RECORDS_CAN_BE_SHOWN)){var E=this.getLocalizedString(Ab.grid.ReportGrid.z_NOT_ALL_RECORDS_CAN_BE_SHOWN2);E=E.replace("{0}",this.rows.length);A.setAttribute("ext:qtip",E)}C.appendChild(A);B.appendChild(C)},buildCountsFooterRow:function(C){var E=document.createElement("tr");E.id=this.id+"_count";var B=this.getDataSource().mainTableName;var D=this.getRecordCountValue();var A=document.createElement("td");A.className="count";A.colSpan=this.getNumberOfColumns();A.innerHTML=View.getLocalizedString(Ab.grid.ReportGrid.z_COUNT_OF_RECORDS)+" "+D;E.appendChild(A);C.appendChild(E)},getRecordCountValue:function(){var B=null;var A=this.getDataSource().mainTableName;if(valueExists(this.totals)){B=this.totals.getLocalizedValue(A+".count_of_records")}else{if(valueExists(this.maximum)){B=this.maximum.getLocalizedValue(A+".count_of_records")}else{if(valueExists(this.minimum)){B=this.minimum.getLocalizedValue(A+".count_of_records")}else{if(valueExists(this.average)){B=this.average.getLocalizedValue(A+".count_of_records")}}}}return B},buildTotalsFooterRow:function(H){var E=document.createElement("tr");E.id=this.id+"_totals";var G=this.getDataSource().mainTableName;for(var F=0;F<this.columns.length;F++){var D=this.columns[F];if(D.hidden){continue}var I=document.createElement("td");I.className="totals";var B=valueExists(D.fullName)?D.fullName:D.id;var A=B;if(A.indexOf(".")!=-1){A=A.substring(A.indexOf(".")+1)}var C=this.totals.getLocalizedValue(G+".sum_"+A);if(valueExists(C)){I.innerHTML=C}E.appendChild(I)}H.appendChild(E)},buildStatisticFooterRow:function(P,H){var L=this.getStatisticTitleByType(H);var D=this.getFieldSufix(H);var K="."+H+"_";var G=this.getStatisticRecord(H);var F=document.createElement("tr");F.id=this.id+D;var N=this.getDataSource().mainTableName;var J=false;for(var I=0;I<this.columns.length;I++){var E=this.columns[I];if(E.hidden||J){if(J){J=false}continue}var O=document.createElement("td");O.className="totals";var B=valueExists(E.fullName)?E.fullName:E.id;var A=B;if(A.indexOf(".")!=-1){A=A.substring(A.indexOf(".")+1)}var M=G.getLocalizedValue(N+K+A);if(valueExists(M)){O.innerHTML=M;L=null}if(valueExists(L)){O.className="count";O.innerHTML=View.getLocalizedString(L);var C=this.getColspanForStatisticTitle(I,E.id);O.colSpan=C;J=(C==2);L=null}F.appendChild(O)}P.appendChild(F)},getColspanForStatisticTitle:function(D,B){var A=1;if(B=="multipleSelectionColumn"){var C=null;for(var F=D+1;F<this.columns.length;F++){var G=this.columns[F];if(G.hidden){continue}else{C=G.id;break}}if(valueExists(C)){var E=null;for(var F=0;F<this.fieldDefs.length;F++){E=this.fieldDefs[F];if(E.id==C){break}}if(this.statisticAttributes.fields.indexOf(C)==-1&&!E.showTotals){A=2}}}return A},getStatisticTitleByType:function(B){var A=null;if(B=="avg"){A=Ab.grid.ReportGrid.z_TITLE_AVERAGE}else{if(B=="min"){A=Ab.grid.ReportGrid.z_TITLE_MINIMUM}else{if(B=="max"){A=Ab.grid.ReportGrid.z_TITLE_MAXIMUM}else{if(B=="sum"){A=Ab.grid.ReportGrid.z_TITLE_TOTALS}}}}return A},getStatisticRecord:function(B){var A=null;if(B=="avg"){A=this.average}else{if(B=="min"){A=this.minimum}else{if(B=="max"){A=this.maximum}else{if(B=="sum"){A=this.totals}}}}return A},getFieldSufix:function(B){var A=null;if(B=="avg"){A="_average"}else{if(B=="min"){A="_minimum"}else{if(B=="max"){A="_maximum"}else{if(B=="sum"){A="_totals"}}}}return A},setFooter:function(A){this.userDefinedFooterHtml=A},getCellElement:function(D,B){var C=this.getDataRows()[D];var A=C.childNodes[B];return A},getPrimaryKeysForRow:function(C){var B=new Object();for(var A=0;A<this.primaryKeyIds.length;A++){var D=this.primaryKeyIds[A];B[D]=C[D+".key"]}return B},getPrimaryKeyRecordForRow:function(C){var B="";for(var A=0;A<this.primaryKeyIds.length;A++){var D=this.primaryKeyIds[A];B=B+D+"='"+C[D+".key"]+"' "}return"<record "+B+"><keys "+B+"/></record>"},getPrimaryKeysForSelectedRows:function(){var F=new Array();var B=this.getDataRows();for(var D=0;D<B.length;D++){var A=B[D];var E=A.firstChild.firstChild;if(E.checked){var C=this.getPrimaryKeysForRow(this.rows[D]);F.push(C)}}return F},reloadOnSort:function(A){this.beforeRefresh();this.rows=[];this.addRows(A.records);this.removeRowsFromTBody();this.rebuildHeader(this.tableHeadElement,A);this.createDataRows(this.tableBodyElement,this.columns);this.buildFooterRows(this.tableFootElement,A);this.afterRefresh()},getAllSelectedRecords:function(){return this.selectionModel.getRecords()},getAllSelectedRows:function(){return this.selectionModel.getRows()},getPrimaryKeysForAllSelectedRows:function(){var A=[];var D=this.getAllSelectedRows();var C,E,B;for(C=0;C<D.length;C++){E=D[C];B=this.getPrimaryKeysForRow(E);A.push(B)}return A},clearAllSelected:function(){this.setAllRowsSelected(false);this.selectionModel.clear();this.selectionModelStore={};if(this.actionbar){this.actionbar.updateSelected(0)}},updateSelectionModel:function(C,B,A){this.selectionModel.update(C,B,A)},getSelectedRows:function(){var E=new Array();var B=this.getDataRows();for(var C=0;C<B.length;C++){var A=B[C];var D=A.firstChild.firstChild;if(D.checked){E.push(this.rows[C])}}return E},getSelectedGridRows:function(){var A=[];this.gridRows.each(function(B){if(B.isSelected()){A.push(B)}});return A},getSelectedRecords:function(){var A=[];this.gridRows.each(function(B){if(B.isSelected()){A.push(B.getRecord())}});return A},getFieldValuesForSelectedRows:function(B){var A=[];this.gridRows.each(function(C){if(C.isSelected()){A.push(C.getRecord().getValue(B))}});return A},setAllRowsSelected:function(D){var A=((typeof D=="undefined")||D==true)?true:false;var G=new Array();var C=this.getDataRows();for(var E=0;E<C.length;E++){var B=C[E];var F=B.firstChild.firstChild;if(typeof F.checked!="undefined"){if(F.checked!=A){F.checked=A;this.onChangeMultipleSelection(this.rows[E])}G.push(this.rows[E])}}return G},selectAll:function(A){this.setAllRowsSelected(A)},setAllRowsUnselected:function(){return this.setAllRowsSelected(false)},unselectAll:function(){this.setAllRowsUnselected()},selectRow:function(A){var B=this.getDataRows();if(this.selectedRowIndex>=0&&B.length>this.selectedRowIndex){Ext.get(B[this.selectedRowIndex]).removeClass("selected")}this.selectedRowIndex=A;if(B.length>this.selectedRowIndex){Ext.get(B[this.selectedRowIndex]).addClass("selected")}},selectRowChecked:function(C,D){var A=((typeof D=="undefined")||D==true)?true:false;var B=this.getDataRows()[C];var E=B.firstChild.firstChild;if(typeof E.checked!="undefined"&&E.checked!=A){E.checked=A;var F=this.getSelectedRow(C);this.onChangeMultipleSelection(F)}},getSelectedRow:function(A){var B=this.rows[A];if(this.config.controlType=="category"){B=this.gridRows.get(A).record}return B},getDataRows:function(){return Ext.query(".dataRow",this.parentElement)},evaluateExpressions:function(A){if(!valueExists(A)){A=this.createEvaluationContext()}this.inherit(A);for(var C=0,B;B=this.fieldDefs[C];C++){if(B.controlType=="button"){continue}var D=Ab.view.View.evaluateString(B.title,A,false);if(D!=B.title){this.setFieldLabel(B.id,D)}}this.gridRows.each(function(E){A.record=E.record;E.evaluateExpressions(A);A.record=null})},setFieldLabel:function(I,A){if(!this.tableHeadElement){return }var D=-1;for(var F=0,B;B=this.columns[F];F++){if(B.id==I){D=F;break}}if(D<0){return }var H="sortHeader_"+D;var E=this.tableHeadElement.getElementsByTagName("th");for(var C=0,G;G=E[C];C++){if(G.id==H){if(G.firstChild.textContent){G.firstChild.textContent=A}else{G.firstChild.innerHTML=A}return }}},addColumnActionListener:function(C,B,A){if(!valueExists(A)){A=this}this.gridRows.each(function(E){var D=E.actions.get(C);if(D){D.addListener(B.createDelegate(A,[E,D]))}})},rowToRecord:function(H,I){var E={};if(valueExists(I)){for(var C=0;C<I.length;C++){var A=I[C];var B=H[A+".raw"];if(!valueExists(B)){B=H[A]}E[A]=B}}else{for(var A in H){if(!endsWith(A,".key")&&!endsWith(A,".raw")&&A!="grid"&&A!="index"&&A!="row"){var B=H[A+".raw"];if(!valueExists(B)){B=H[A]}E[A]=B}}}var F=this.getDataSource().parseValues(E,false);var G=this.getDataSource().parseValues(E,false);var D=new Ab.data.Record(F,false);D.oldValues=G;return D},recordToRow:function(A){var C=this.getDataSource().formatValues(A.values,false);var E=this.getDataSource().formatValues(A.values,true);var F={};for(var B in C){F[B+".raw"]=C[B]}for(var B in E){F[B]=E[B]}for(var D=0;D<this.primaryKeyIds.length;D++){var B=this.primaryKeyIds[D];F[B+".key"]=C[B]}return F},setRecords:function(A,E){this.beforeRefresh();if(!valueExists(E)){E=false}this.hasMoreRecords=E;var C=[];for(var B=0;B<A.length;B++){var D=this.recordToRow(A[B]);C.push(D)}this.rows=[];this.addRows(C);this.beforeBuild();this.build();this.afterBuild();this.afterRefresh()},showDocumentLinkCommand:function(E,C){var A=C.fullName.split(".");var F=E[C.fullName];var D=E.grid.getPrimaryKeysForRow(E);for(name in D){var B=name.split(".")[1];D[B]=D[name]}View.showDocument(D,A[0],A[1],F,null)},getLegendBitmapName:function(H,G,B){var A="";for(var D=0;D<this.fieldDefs.length;D++){var C=this.fieldDefs[D];if(C.id===H){A=C.fullName.substring(0,C.fullName.indexOf("."));break}}var E=[];for(var D=0;D<this.primaryKeyIds.length;D++){var H=this.primaryKeyIds[D];if(H.indexOf(A+".")!=0){continue}var F=G[H+".key"];if(!valueExists(F)){F=G[H]}E.push(F)}return B.getLegendBitmapName(A,E)},setStatisticAttributes:function(A){if(valueExists(A.formulas)){this.statisticAttributes.formulas=A.formulas}if(valueExists(A.fields)){this.statisticAttributes.fields=A.fields}if(this.statisticAttributes.fields.length==0||this.statisticAttributes.formulas.length==0){this.statisticAttributes.formulas=[];this.statisticAttributes.fields=[]}var B=this.statisticAttributes.formulas.join(",").toLowerCase();this.statisticAttributes.formulas=B.split(",");if(valueExists(A.currencyCode)){this.statisticAttributes.currencyCode=A.currencyCode}if(valueExists(A.exchangeRateType)){this.statisticAttributes.exchangeRateType=A.exchangeRateType}if(valueExists(A.currencyFields)){this.statisticAttributes.currencyFields=A.currencyFields}if(this.statisticAttributes.currencyFields.length==0||!valueExistsNotEmpty(this.statisticAttributes.currencyCode)||!valueExistsNotEmpty(this.statisticAttributes.exchangeRateType)){this.statisticAttributes.currencyCode="";this.statisticAttributes.exchangeRateType="";this.statisticAttributes.currencyFields=[]}if(valueExists(A.formulaFields)){this.statisticAttributes.formulaFields=A.formulaFields}if(valueExists(A.formulaValues)){this.statisticAttributes.formulaValues=A.formulaValues}if(this.statisticAttributes.formulaFields.length==0||this.statisticAttributes.formulaValues.length==0){this.statisticAttributes.formulaFields=[];this.statisticAttributes.formulaValues=[]}this.statisticWorkflowRuleId=Ab.grid.ReportGrid.WORKFLOW_RULE_STATISTIC_DATA},isShowAverage:function(){return(this.statisticAttributes.formulas.indexOf("avg")!=-1)},isShowMax:function(){return(this.statisticAttributes.formulas.indexOf("max")!=-1)},isShowMin:function(){return(this.statisticAttributes.formulas.indexOf("min")!=-1)},isShowSum:function(){return(this.statisticAttributes.formulas.indexOf("sum")!=-1)},isCustomTotal:function(){var A=false;A=((valueExistsNotEmpty(this.statisticAttributes.currencyCode)||valueExistsNotEmpty(this.statisticAttributes.exchangeRateType))&&(this.statisticAttributes.currencyFields.length>0));A=A||(this.statisticAttributes.formulaFields.length>0&&this.statisticAttributes.formulaValues.length>0);return A},showNoRecordsMessage:function(){this.hasNoRecords=true;this.buildMoreRecordsFooterRow(this.tableFootElement,this.getLocalizedString(Ab.grid.ReportGrid.z_NO_RECORDS_TO_DISPLAY))},showMoreRecordsMessage:function(){this.hasMoreRecords=true;this.buildMoreRecordsFooterRow(this.tableFootElement,this.getLocalizedString(Ab.grid.ReportGrid.z_NOT_ALL_RECORDS_CAN_BE_SHOWN))}},{z_NOT_ALL_RECORDS_CAN_BE_SHOWN:"Not all records are shown.",z_NOT_ALL_RECORDS_CAN_BE_SHOWN2:"This view displays the first {0} records.",z_NO_RECORDS_TO_DISPLAY:"No records to display.",z_PAGING_NOT_ALL_RECORDS_CAN_BE_SHOWN:"Not all records can be shown.",z_COUNT_OF_RECORDS:"Total records:",z_TITLE_TOTALS:"Totals:",z_TITLE_MAXIMUM:"Maximum:",z_TITLE_MINIMUM:"Minimum:",z_TITLE_AVERAGE:"Average:",COLUMN_NAME_MULTIPLE_SELECTION:"multipleSelectionColumn",WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecords",WORKFLOW_RULE_STATISTIC_DATA:"AbCommonResources-StatisticDataService-getStatisticDataRecords",WORKFLOW_RULE_DOCX_REPORT:"AbSystemAdministration-generatePaginatedReport-buildDocxFromDataSource",WORKFLOW_RULE_XLS_REPORT:"AbSystemAdministration-generatePaginatedReport-generateGridXLSReport",MIN_SCROLLING_HEIGHT:30});Ab.grid.Cell=Base.extend({row:null,column:null,dom:null,constructor:function(C,B,A){this.row=C;this.column=B;this.dom=A},getEl:function(){return Ext.get(this.dom)}});Ab.grid.Row=Base.extend({panel:null,record:null,actions:null,cells:null,dom:null,constructor:function(B,A,C){this.panel=B;this.record=A;this.dom=C;this.actions=new Ext.util.MixedCollection();this.cells=new Ext.util.MixedCollection()},addAction:function(A){var B=new Ab.view.Action(this.panel,A);B.row=this;this.actions.add(B.originalId,B)},removeActionListeners:function(){this.actions.each(function(A){A.removeListeners()})},getRecord:function(A){return this.panel.rowToRecord(this.record,A)},getFieldValue:function(D){var B=this.record[D+".raw"];if(!valueExists(B)){B=this.record[D]}var A=B;var C=this.panel.getDataSource();if(C){A=C.parseValue(D,B,false)}return A},setFieldValue:function(G,F,B){if(!valueExists(B)){B=true}var D=F;this.record[G+".raw"]=F;if(B){var E=this.panel.getDataSource().formatValue(G,F,false);this.record[G+".raw"]=E;D=this.panel.getDataSource().formatValue(G,F,true)}var A=Ext.get(this.cells.get(G).dom);var C=A.child("a");if(C){C.dom.innerHTML=D}else{A.dom.innerHTML=D}},isSelected:function(){var A=this.dom.firstChild.firstChild;return(A.checked)},select:function(A){if(!valueExists(A)){A=true}var B=this.dom.firstChild.firstChild;if(valueExists(B.checked)){B.checked=A}},unselect:function(){this.select(false)},highlight:function(A){if(A){Ext.get(this.dom).addClass("selected")}else{Ext.get(this.dom).removeClass("selected")}},getIndex:function(){return this.record.index},evaluateExpressions:function(A){this.actions.each(function(B){B.evaluateExpressions(A)})}});Ab.grid.SelectionCommand=Ab.command.Command.extend({grid:null,row:null,constructor:function(A,B){this.grid=A;this.row=B},handle:function(){if(this.grid.selectionEnabled){this.grid.selectRow(this.row.index)}}});Ab.grid.OnClickCommand=Ab.command.Command.extend({row:null,listener:null,constructor:function(B,A){this.row=B;this.listener=A},handle:function(){this.listener(this.row.row)}});Ab.grid.SelectionModel=Base.extend({rows:null,add:function(A){if(!this.find(A)){this.rows.push(A)}},remove:function(B){var A=this.getIndex(B);if(A!==-1){this.rows.splice(A,1)}},find:function(B){var A=this.getIndex(B);return(A>-1)},getIndex:function(B){for(var A=0;A<this.rows.length;A++){if(this.isIdentical(this.rows[A],B)){return A}}return -1},isIdentical:function(C,B){for(var A in C.row.record){if(A.indexOf(".")<0){continue}if(C.row.record[A]!==B.row.record[A]){return false}}return true},constructor:function(){this.rows=[]},update:function(C,A,B){if(!valueExists(B)){B=false}if(A){this.add(C)}else{this.remove(C)}if(B){C.row.select(A)}},getRows:function(){return this.rows},getRecords:function(){var A=[];for(var B=0,C;C=this.rows[B];B++){A.push(C.row.record)}return A},clear:function(){this.rows=[]},size:function(){return this.rows.length}});var INDEX_DISPLAY_THRESHOLD=50;Ab.grid.MiniConsole=Ab.grid.ReportGrid.extend({filterRow:null,indexRow:null,indexEnabled:false,indexColumnIndex:-1,indexColumnID:null,indexValue:"",indexLevel:0,indexEntries:null,filterEnabled:false,filterValues:[],indexListener:null,filterListener:null,clearFilterListener:null,filterPaletteElement:null,filterPaletteEntryCount:0,filterPaletteIsActive:false,isCollapsed:false,imageFilterClear:"",imageExpand:"",imageCollapse:"",configurationRecordLimit:-1,hasPaging:false,prevListener:null,nextListener:null,currentPageFirstRecord:{},currentPageLastRecord:{},firstRecords:null,allCount:0,pagingAction:null,currentPage:-1,totalPages:-1,pagingRecordLimit:-1,constructor:function(H,E){this.inherit(H,E);var D=E.getConfigParameterIfExists("indexColumnID");if(valueExistsNotEmpty(D)){this.indexEnabled=true;this.indexColumnID=D;this.indexListener=this.onClickIndex;this.prevListener=this.onClickPrev;this.nextListener=this.onClickNext;this.isCollapsed=false}else{this.indexEnabled=false;this.indexColumnID=""}this.filterListener=this.onClickFilter;this.clearFilterListener=this.clearAllFilters;var A=E.getConfigParameterIfExists("restriction");if(valueExists(A)&&A!=""){this.restriction=A}var G=E.getConfigParameterIfExists("filterValues");if(valueExists(G)){this.filterValues=new Array();for(var C in G){var F=G[C];if(F!=null&&trim(F)!=""){this.filterValues.push({fieldName:C,filterValue:F})}}this.filterEnabled=true;this.isCollapsed=false}var B=E.getConfigParameterIfExists("showIndexAndFilterOnLoad");this.isCollapsed=!B;this.imageFilterClear=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/view/ab-filter-clear.png";this.imageExpand=Ab.view.View.contextPath+"/schema/ab-system/graphics/ab-miniconsole-expand.gif";this.imageCollapse=Ab.view.View.contextPath+"/schema/ab-system/graphics/ab-miniconsole-collapse.gif";this.firstRecords=[];this.pagingAction=null;this.currentPageFirstRecord=null;this.currentPageLastRecord=null;this.configurationRecordLimit=E.getConfigParameterIfExists("configurationRecordLimit")},initializeColumns:function(){this.inherit();this.setFilterEnabled()},setFilterEnabled:function(){var D=(View.project.units!=View.user.displayUnits);for(var C=0,A;A=this.columns[C];C++){var B=this.getFieldDef(A.id);var E=(B&&B.hasOwnProperty("type"))?(B.type.toUpperCase()=="JAVA.SQL.DATE"):false;var F=(B&&(B.numericFormat=="area"||B.numericFormat=="length")&&D);if(!A.isVirtual&&!E&&!F&&(A.type=="text"||A.type=="number"||A.type=="link"||A.type=="number_link")){A.filterEnabled=true}else{A.filterEnabled=false}}},beforeBuild:function(){this.inherit();this.enableIndex(this.indexEnabled,this.indexColumnID,this.indexEntries);this.filterEnabled=true},afterBuild:function(){this.inherit();this.showIndexAndFilter();this.addFilterPaletteAndListeners()},updateHeader:function(){this.inherit();this.showIndexAndFilter();this.addFilterPaletteAndListeners()},addFilterPaletteAndListeners:function(){var G="searchDiv_"+this.parentElement.id;var F=document.getElementById(G);if(F==null){this.filterPaletteElement=document.createElement("div");this.filterPaletteElement.id=G;this.filterPaletteElement.style.zIndex=-2;this.filterPaletteElement.style.display="none";this.filterPaletteElement.className="smartFilterPalette";this.parentElement.appendChild(this.filterPaletteElement)}if(this.headerRows.length>0){var E=this.headerRows[0];var D=this;for(var C=0,H;H=this.headerRows[0].childNodes[C];C++){this.activateFilterPaletteListener(H,false)}}if(this.filterRow!=null){for(var B=0,A;A=this.filterRow.childNodes[B];B++){this.activateFilterPaletteListener(A,false)}}this.activateFilterPaletteListener(this.filterPaletteElement,true)},expandIndexAndFilter:function(){if(this.filterEnabled){this.isCollapsed=false;this.showIndexAndFilter()}},activateFilterPaletteListener:function(D,B){var C=!B?this.filterPaletteExposeListener.createDelegate(this):this.filterPaletteExposeSelfListener.createDelegate(this);var A=this.filterPaletteHideListener.createDelegate(this);Ext.fly(D).on({mouseover:{fn:C,scope:D},mouseout:{fn:A,scope:D}})},filterPaletteExposeListener:function(){var B=Ext.fly(this.tableBodyElement).getTop(false);var A=Ext.fly(this.tableBodyElement).getLeft(false);Ext.fly(this.filterPaletteElement).setY(B);Ext.fly(this.filterPaletteElement).setX(A);this.filterPaletteElement.style.zIndex=200;this.filterPaletteElement.style.visibility="visible";this.filterPaletteIsActive=true;if(this.filterPaletteEntryCount==0){this.filterPaletteEntryCount++}},filterPaletteExposeSelfListener:function(){if(this.filterPaletteElement.style.zIndex>=0){this.filterPaletteElement.style.zIndex=200;this.filterPaletteElement.style.visibility="visible";this.filterPaletteIsActive=true;if(this.filterPaletteEntryCount==0){this.filterPaletteEntryCount++}}},filterPaletteHideListener:function(){if(this.filterPaletteEntryCount>0){this.filterPaletteEntryCount--}this.hideFilterPalette.defer(500,this)},hideFilterPalette:function(){if(this.filterPaletteEntryCount<=0){this.filterPaletteElement.style.zIndex=-2;this.filterPaletteElement.style.visibility="hidden";this.filterPaletteIsActive=false}},onClickSort:function(A){this.firstRecords=[];this.inherit(A);this.restorePreviousSelections()},getParameters:function(C,A){var B=this.inherit(C);if(typeof (A)!="undefined"&&A!=null){this.indexColumnID=A.columnName;this.indexLevel=A.index_level;this.indexValue=A.value+"%"}if(typeof (this.indexColumnID)!="undefined"&&this.indexColumnID!=null){B.indexField=this.indexColumnID;B.indexLevel=this.indexLevel;B.indexValue=this.indexValue+"%"}B.filterValues=this.getFilterValues();B.pagingAction=this.pagingAction;B.currentPageFirstRecord=this.currentPageFirstRecord;B.currentPageLastRecord=this.currentPageLastRecord;B.currentPage=this.currentPage;if(this.firstRecords.length>0){B.firstRecords=this.firstRecords[this.firstRecords.length-1]}else{B.pagingAction=null;B.currentPageFirstRecord={};B.currentPageLastRecord={};B.firstRecords={}}return B},getInitialParameters:function(){var A=this.inherit();A.indexField=this.indexColumnID;A.indexLevel="0";A.indexValue="";A.filterValues=this.getFilterValues();A.pagingAction=this.pagingAction;return A},getParametersForRefresh:function(){return this.getParameters(this.getCurrentSortValues(),new Ab.grid.IndexValue(this.indexColumnID,this.indexValue,this.indexLevel))},setIndexColumnByID:function(C){if(this.columns==null&&C.length==0){return }for(var A=0;A<this.columns.length;A++){if(this.columns[A].id==C){this.indexColumnIndex=A;return true}}if(this.sortColumnID!=""){for(var A=0;A<this.columns.length;A++){if(this.columns[A].id==this.sortColumnID){this.indexColumnIndex=A;return true}}}for(var A=0;A<this.columns.length;A++){var B=this.columns[A].type;if(this.columnTypeIsSortable(B)){this.indexColumnIndex=A}}},getIndexColumn:function(){var A=null;if(this.indexColumnIndex>=0){A=this.columns[this.indexColumnIndex]}return A},getIndexColumnName:function(){var B="";var A=this.getIndexColumn();if(null!=A){B=A.name}return B},setIndexEntries:function(A){if(typeof A!="undefined"){this.indexEntries=A}},enableIndex:function(B,A,C,D){this.indexEnabled=B;if(!B||this.columns==null||this.columns.length<=this.indexColumnIndex){return }if(this.indexColumnID!=A){if(D){this.indexLevel=D}else{this.indexLevel=0}}this.setIndexColumnByID(A);this.setIndexEntries(C)},setIndexLevel:function(A){this.indexLevel=A},getIndexLevel:function(){return this.indexLevel},setIndexValue:function(A){indexValue=A},getIndexValue:function(){return(null!=this.indexValue)?this.indexValue:""},setCurrentIndex:function(A){for(var B=0;B<this.columns.length;B++){if(this.columns[B].id==A.columnName){this.indexColumnIndex=B;break}}this.indexValue=A.value;this.indexLevel=A.index_level},getCurrentIndex:function(){return new Ab.grid.IndexValue(this.indexColumnID,this.getIndexValue(),this.indexLevel)},activateIndexListener:function(A,B){if(this.indexListener!=null&&typeof this.indexListener=="function"){var C=this.indexListener.createDelegate(this,[B]);Ext.fly(A).addListener("click",C)}},onClickIndex:function(B){if((B.index_level==0)||(this.indexValue.charAt(0)!=B.value.charAt(0))||(this.indexLevel>B.index_level)){this.firstRecords=[]}this.setCurrentIndex(B);var C=this.getParameters(this.getCurrentSortValues(),B);try{var A=this.getData(C);this.reloadOnIndex(A.data);this.restorePreviousSelections()}catch(D){this.handleError(D)}},restorePreviousSelections:function(){if(!this.selectionAcrossPagesEnabled){return }var D=this.getAllSelectedRows();if(D.length===0){return }if(this.multipleSelectionEnabled||this.selectValueType==="multiple"){for(var C=0,E;E=this.rows[C];C++){for(var A=0,B;B=D[A];A++){if(this.selectionModel.isIdentical(E,B)){this.selectRowChecked(C);break}}}}},activatePrevListener:function(A,B){if(this.prevListener!=null&&typeof this.prevListener=="function"){var C=this.prevListener.createDelegate(this,[B]);Ext.fly(A).addListener("click",C)}},onClickPrev:function(){this.pagingAction="prev";if(this.getDataSource(this.dataSourceId)){var A=this.getDataSource(this.dataSourceId);this.currentPageFirstRecord=toJSON(A.processOutboundRecord(this.rows[0].row.getRecord()).values);this.currentPageLastRecord=toJSON(A.processOutboundRecord(this.rows[this.rows.length-1].row.getRecord()).values)}else{this.currentPageFirstRecord=toJSON(this.getPagingValuesFromRecord(this.rows[0].row.record));this.currentPageLastRecord=toJSON(this.getPagingValuesFromRecord(this.rows[this.rows.length-1].row.record))}if(this.firstRecords.length>0){this.doRefresh();this.firstRecords.pop()}this.afterRefresh();this.restorePreviousSelections()},getPagingRecordLimit:function(){if(this.recordLimit==-1){if(this.configurationRecordLimit){return this.configurationRecordLimit}else{return this.rows.length}}else{return this.recordLimit}},activateNextListener:function(A,B){if(this.nextListener!=null&&typeof this.nextListener=="function"){var C=this.nextListener.createDelegate(this,[B]);Ext.fly(A).addListener("click",C)}},onClickNext:function(){this.pagingAction="next";if(this.getDataSource(this.dataSourceId)){var A=this.getDataSource(this.dataSourceId);this.currentPageFirstRecord=toJSON(A.processOutboundRecord(this.rows[0].row.getRecord()).values);this.currentPageLastRecord=toJSON(A.processOutboundRecord(this.rows[this.rows.length-1].row.getRecord()).values)}else{this.currentPageFirstRecord=toJSON(this.getPagingValuesFromRecord(this.rows[0].row.record));this.currentPageLastRecord=toJSON(this.getPagingValuesFromRecord(this.rows[this.rows.length-1].row.record))}this.firstRecords.push(this.currentPageFirstRecord);this.doRefresh();this.afterRefresh();this.restorePreviousSelections()},getPagingValuesFromRecord:function(A){var B={};for(var C in A){if(C.indexOf(".key")==-1&&C.indexOf(".raw")==-1&&C!="grid"&&C!="index"&&C!="row"){var D=new Object();B[C]=A[C]}}return B},setFilterValue:function(A,C){var B=$(this.getFilterInputId(A));if(null!=B){B.value=C}},clearAllFilterValues:function(){var C=this.getAllFilterElements();for(var A=0,B;B=C[A];A++){if(B.id.indexOf("_filterColumn_")!=-1){B.value=""}}},clearAllNonQuotedFilterValues:function(){var C=this.getAllFilterElements();for(var A=0,B;B=C[A];A++){if(B.id.indexOf("_filterColumn_")!=-1){if(B.value!=""&&B.value.charAt(0)!='"'){B.value=""}}}},clearAllFilters:function(){if(this.filterPaletteIsActive){this.clearAllFilterValues();this.pagingAction=null;this.firstRecords=[];this.currentPageFirstRecord={};this.currentPageLastRecord={};var B=this.getParameters(this.getCurrentSortValues(),new Ab.grid.IndexValue(this.indexColumnID,this.indexValue,this.indexLevel));try{var A=this.getData(B);this.reloadOnFilter(A.data);this.restorePreviousSelections();if(this.actionbar&&this.selectionAcrossPagesEnabled){this.actionbar.updateSelected(this.getAllSelectedRows().length)}}catch(C){this.handleError(C)}}},getAllFilterElements:function(){var D=[];if(this.filterRow!=null&&typeof (this.filterRow)!="undefined"){var A=this.filterRow.getElementsByTagName("input");if(A!=null){for(var C=0;C<A.length;C++){D.push(A[C])}}var B=this.filterRow.getElementsByTagName("select");if(B!=null){for(var C=0;C<B.length;C++){D.push(B[C])}}}return D},getFilterValues:function(){var G=new Array();if(this.filterEnabled){if(this.filterRow!=null&&typeof (this.filterRow)!="undefined"){var F=this.getAllFilterElements();for(var D=0,E;E=F[D];D++){var C=E.id.indexOf("_filterColumn_");if(C!=-1&&null!=E.id&&null!=E.value&&'"'!=E.value&&0<E.value.length){var H=E.id.substring(C+14);var B=E.value;for(var A=0;A<this.columns.length;A++){if(this.columns[A].id==H){if(this.columns[A].type=="number"||this.columns[A].type=="number_link"){B=B.replace(strGroupingSeparator,"");B=B.replace(strDecimalSeparator,sNeutralDecimalSeparator)}}}G.push({fieldName:H,filterValue:B})}}}else{if((this.filterRow==null||typeof (this.filterRow)=="undefined")&&(this.filterValues!=null&&this.filterValues.length>0)){G=this.filterValues}}}return toJSON(G)},setFilterConfiguration:function(A){this.filterConfiguration=A;this.filterEnabled=true},activateClearFilterListener:function(B,A){if(this.clearFilterListener!=null&&typeof this.clearFilterListener=="function"){Ext.fly(B).addListener("click",this.clearFilterListener,this)}},onClickFilter:function(A){if(this.filterPaletteIsActive){this.onFilter()}},onFilter:function(D,B){if(D&&D.target){D.target.blur()}if(this.filterPaletteIsActive){this.firstRecords=[]}var C=this.getParameters(this.getCurrentSortValues(),new Ab.grid.IndexValue(this.indexColumnID,this.indexValue,this.indexLevel));try{var A=this.getData(C);this.reloadOnFilter(A.data);if(B&&B.target){B.target.focus()}this.restorePreviousSelections()}catch(D){this.handleError(D)}},onInitialDataFetch:function(A){if((this.columns.length!=0||A.data.columns.length!=0)&&null!=A.data.index){this.indexEntries=A.data.index}this.inherit(A)},buildHeader:function(A){if(this.indexEnabled&&this.indexEntries!=null){this.createIndexRow(A)}this.inherit(A);if(this.filterEnabled){this.createFilterRow(A);Ext.get(this.filterRow).setDisplayed((this.rows.length==0&&(this.getFilterValues().length==2))?false:true)}var B=this.getEventListener("afterBuildHeader");if(B){B(this,A)}},rebuildHeader:function(A,C){this.buildPreHeaderRows(A);if(this.indexEnabled){this.indexEntries=C.index;if(this.indexEntries!=null&&this.indexEntries.length>0){this.createIndexRow(A)}else{if(this.indexRow){A.appendChild(this.indexRow)}}}for(var B=0;B<this.headerRows.length;B++){A.appendChild(this.headerRows[B])}if(this.filterRow!=null){A.appendChild(this.filterRow);Ext.get(this.filterRow).setDisplayed((this.rows.length==0&&(this.getFilterValues().length==2))?false:true)}},displayHeaderRows:function(){for(var A=0;A<this.headerRows.length;A++){this.headerRows[A].style.display=(this.rows.length==0&&(this.getFilterValues().length==2))?"none":""}},getReloadDataFromGrid:function(A){var B=this.inherit(A);if(valueExists(A)&&valueExists(A.index)){B.index=A.index}return B},indicesEqual:function(E,F){var A=false;if((E&&F)&&(E!=null&&F!=null)&&(E.length==F.length)){for(var B=0,D,C;D=E[B],C=F[B];B++){if(D.value!=C.value||D.count!=C.count||D.index_level!=C.index_level){A=false;return A}}A=true}return A},createIndexRow:function(I){if(this.indexColumnIndex<0){return }var G=document.createElement("tr");G.id=this.id+"_indexRow";I.appendChild(G);var H=document.createElement("th");H.colSpan=this.getNumberOfColumns();H.className="index";G.appendChild(H);var J=document.createElement("div");J.className="indexTitle";J.appendChild(document.createTextNode(""+this.getDisplayableTitle(this.columns[this.indexColumnIndex].name)+":"));H.appendChild(J);var C=document.createElement("div");C.className="indexBody";H.appendChild(C);var D=this.testForDrillDown();var F=0;for(var E=0,A;A=this.indexEntries[E];E++){F=this.createSingleIndexLink(E,C,D,F,A)}this.createPagingLinks(C);this.indexRow=G;var B=Ext.get(this.id+"_indexRow",I);if(B){B.setDisplayed(!this.isCollapsed)}},createPagingLinks:function(A){if(!this.hasGrouping()&&(this.rows.length>0)){this.currentPage=this.firstRecords.length+1;if(this.currentPage==1){this.pagingRecordLimit=this.getPagingRecordLimit()}this.totalPages=(this.pagingRecordLimit==0)?0:Math.ceil((this.allCount/this.pagingRecordLimit));if((this.pagingAction=="prev")&&(this.currentPage>1)){this.currentPage+=-1}if(this.currentPage<this.totalPages){this.hasPaging=true}if(this.hasPaging){var C=A.appendChild(document.createElement("span"));C.style.whiteSpace="nowrap";if(this.currentPage>1){var D=document.createElement("a");D.appendChild(document.createTextNode(this.getLocalizedString(Ab.grid.MiniConsole.z_MESSAGE_PREVIOUS)+"    "));D.style.whiteSpace="pre";C.appendChild(D);D.href="javascript: //";this.activatePrevListener(D,"")}var E=document.createElement("span");E.appendChild(document.createTextNode(this.getLocalizedString(Ab.grid.MiniConsole.z_MESSAGE_PAGE)+" "+this.currentPage+" "+this.getLocalizedString(Ab.grid.MiniConsole.z_MESSAGE_OF)+" "+this.totalPages+"    "));E.style.whiteSpace="pre";C.appendChild(E);if(this.currentPage<this.totalPages){var B=document.createElement("a");B.appendChild(document.createTextNode(this.getLocalizedString(Ab.grid.MiniConsole.z_MESSAGE_NEXT)));C.appendChild(B);B.href="javascript: //";this.activateNextListener(B,"")}}}},hasGrouping:function(){var A=this.getDataSource();if((A)&&(A.hasOwnProperty("type"))){if(A.type){return true}}return false},createSingleIndexLink:function(D,G,C,E,A){var J=false;var F=document.createElement("a");F.href="javascript: //";var H;var B;if(A.count<0&&D>0){F.appendChild(document.createTextNode(A.value));H=this.indexEntries[D-1].value.substring(0,Math.max(this.indexEntries[D-1].value.length-2,1));B=Math.max(0,this.indexLevel+parseInt(A.count))}else{if(A.count>0){if(!C){F=document.createElement("span");J=true}F.appendChild(document.createTextNode(A.value));var L=document.createElement("span");L.appendChild(document.createTextNode("["+A.count+"] "));L.className="count";F.appendChild(L);H=A.value;B=this.indexLevel+1;E+=parseInt(A.count)}else{if(A.count==0){F=document.createElement("span");var I=document.createTextNode(A.value);F.className="all";var L=document.createElement("span");L.appendChild(document.createTextNode("["+E+"]       "));L.style.whiteSpace="pre";if(this.firstRecords.length==0){this.allCount=E}L.className="count";F.appendChild(I);F.appendChild(L);J=true}}}G.appendChild(F);if(!J){var K=new Ab.grid.IndexValue(this.columns[this.indexColumnIndex].id,H,B);this.activateIndexListener(F,K)}return E},testForDrillDown:function(){var B=false;var A=0;for(var C=0,D;D=this.indexEntries[C];C++){if(D.count>A){A=D.count}}if(A>1){B=true}return B},createFilterRow:function(B){var C=document.createElement("tr");C.id=this.id+"_filterRow";this.filterRow=C;this.getLastVisibleColumnIndex();for(var D=0;D<this.columns.length;D++){if(this.columns[D].hidden){continue}var A=document.createElement("th");C.appendChild(A);this.createFilterCellContent(D,A)}B.appendChild(C)},getLastVisibleColumnIndex:function(){for(var A=this.columns.length-1;A>0;A--){if(!this.columns[A].hidden){this.lastVisibleColumnIndex=A;break}}return this.lastVisibleColumnIndex},getFieldDef:function(A){for(var C=0,B;B=this.fieldDefs[C];C++){if(B.id==A){return B}}return null},createFilterCellContent:function(J,L){var F=this.columns[J];var B=valueExists(F.fullName)?F.fullName:F.id;if(F.filterEnabled){var G=this.getFieldDef(F.id);var E=G!=null&&G.isEnum;var K=null;if(E){var I=0;K=document.createElement("select");K.options[I++]=new Option("","",true);for(var D in G.enumValues){K.options[I++]=new Option(G.enumValues[D],D)}K.className="inputField_box";K.className+=((F.type=="number"||F.type=="number_link")&&!this.sortEnabled)?" floatRight":"";Ext.EventManager.addListener(K,"change",this.onFilter.createDelegate(this));K.id=this.getFilterInputId(B);L.appendChild(K)}else{if(!this.getDataSourceFieldDefById(B)&&!valueExists(this.selectValueType)&&this.filterConfiguration){if(this.filterConfiguration&&this.filterConfiguration.columns){var M=this.filterConfiguration.columns[B];if(M){var H=M.fields;if(H){for(var I=0;I<H.length;I++){K=this.createFilterInput(H[I]);K.size=5;if((this.lastVisibleColumnIndex)&&J==this.lastVisibleColumnIndex){L.style.whiteSpace="inherit"}L.appendChild(K);if(M.hasOwnProperty("placeholders")&&jQuery.support.leadingWhitespace){K.placeholder=(M.placeholders[I])?M.placeholders[I]:""}if(M.hasOwnProperty("delimiter")&&I<H.length-1){var A=document.createElement("span");A.innerHTML="-";L.appendChild(A)}}}}}}else{K=this.createFilterInput(B);K.size=12;if(J==(this.columns.length-1)){K.className="floatLeft"}L.appendChild(K)}}for(var I=0,C;C=this.filterValues[I];I++){if(C.fieldName==F.id){K.value=C.filterValue;break}}}else{L.appendChild(document.createTextNode(""))}if(J==this.columns.length-1||((this.lastVisibleColumnIndex)&&J==this.lastVisibleColumnIndex)){this.createFilterButtons(L)}},createFilterInput:function(C){var A=document.createElement("input");var B=this;Ext.get(A).on("keydown",function(D){if(D.keyCode==13){this.blur();B.setScrollerToPosition(0);B.onFilter();this.focus();B.setScrollerToPosition(B.divHeadElement.scrollLeft)}},false);A.style.marginRight="4";A.id=this.getFilterInputId(C);return A},createHeaderButtons:function(B){var A=this.createLink();var C=this.createImage(this.imageExpand,this.getLocalizedString(Ab.grid.MiniConsole.z_TOOLTIP_EXPAND),0);C.id="collapseExpand_"+this.id;A.appendChild(C);B.appendChild(A);Ext.fly(A).addListener("click",this.toggleSmartSearch,this)},createFilterButtons:function(A){var D=document.createElement("a");this.activateClearFilterListener(D,this);D.href="javascript: //";var C=this.getLocalizedString(Ab.grid.MiniConsole.z_TITLE_CLEAR);var B=this.createImage(this.imageFilterClear,C,2,16,16);B.className="clearFilterBtn";D.appendChild(B);A.appendChild(D)},toggleSmartSearch:function(){if(!this.filterPaletteIsActive){return }if(this.isCollapsed==true){this.isCollapsed=false}else{this.isCollapsed=true}this.showIndexAndFilter()},showIndexAndFilter:function(){var C=$("collapseExpand_"+this.id);if(valueExists(C)){if(this.isCollapsed==false){C.src=this.imageCollapse;C.alt=this.getLocalizedString(Ab.grid.MiniConsole.z_TOOLTIP_COLLAPSE);C.title=this.getLocalizedString(Ab.grid.MiniConsole.z_TOOLTIP_COLLAPSE)}else{C.src=this.imageExpand;C.alt=this.getLocalizedString(Ab.grid.MiniConsole.z_TOOLTIP_EXPAND);C.title=this.getLocalizedString(Ab.grid.MiniConsole.z_TOOLTIP_EXPAND)}}var A=this.isCollapsed;if(this.rows.length==0&&(this.getFilterValues().length==2)&&this.visible){A=true}var B=Ext.get(this.id+"_indexRow",this.parentElement);if(B){B.setDisplayed(!A)}var D=Ext.get(this.id+"_filterRow",this.parentElement);if(D){D.setDisplayed(!A)}this.updateHeight()},reloadOnFilter:function(B){this.beforeRefresh();this.rows=[];var A=this.getEventListener("afterGetData");if(A){A(this,B)}this.addRows(B.records);this.removeRowsFromTBody();this.rebuildHeader(this.tableHeadElement,B);this.createDataRows(this.tableBodyElement,this.columns);this.buildFooterRows(this.tableFootElement,B);this.afterRefresh();this.setScrollerToPosition(0);this.updateHeight()},showActions:function(A){this.inherit()},afterRefresh:function(A){this.inherit(A);this.showIndexAndFilter()},repositionSearchPalette:function(){},reloadOnIndex:function(B){this.beforeRefresh();this.indexEntries=B.index;this.rows=[];this.addRows(B.records);this.removeRowsFromTBody();this.buildPreHeaderRows(this.tableHeadElement);if(this.indexEnabled){this.createIndexRow(this.tableHeadElement)}for(var A=0;A<this.headerRows.length;A++){this.tableHeadElement.appendChild(this.headerRows[A])}if(this.filterEnabled){this.tableHeadElement.appendChild(this.filterRow)}this.createDataRows(this.tableBodyElement,this.columns);this.buildFooterRows(this.tableFootElement,B);this.afterRefresh()},getFilterInputId:function(A){return this.id+"_filterColumn_"+A}},{z_TITLE_CLEAR:"Clear",z_TOOLTIP_COLLAPSE:"Collapse",z_TOOLTIP_EXPAND:"Expand",z_MESSAGE_NEXT:"Next >>",z_MESSAGE_PREVIOUS:"<< Prev",z_MESSAGE_PAGE:"Page",z_MESSAGE_OF:"of"});Ab.grid.IndexValue=Base.extend({columnName:"",value:"",index_level:0,constructor:function(B,C,A){this.columnName=B;this.value=C;this.index_level=A}});Ab.grid.Category=Ab.grid.MiniConsole.extend({categoryDataSource:null,categoryDataSourceId:"",categoryField:"",categoryOrder:[],isCustomCategoryOrder:false,categoryRecords:[],categoryColors:{},categoryDisplayedLimit:100,categoryCollapsed:true,categoryCollapsedInfo:{},categoryDisplayedInfo:{},z_NO_FIELD_ERROR_MESSAGE:"No field specified.  Please specify a field name.",z_CATEGORY_FIELD_NOT_FOUND_ERROR_MESSAGE:"Category field could not be matched to field list in details.  Please ensure that a category field has been specified and that a similar field exists in the details datasource and panel.",z_NONE:"<none>",z_TITLE_VIEWMORERECORDS:"more, view next",z_TITLE_VIEWTHEM:"more, view them",constructor:function(B,A){if(A.getConfigParameterIfExists("recordLimit")==-1){A.recordLimit=0}this.inherit(B,A);this.imageCategoryCollapse=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/tri-opened.png";this.imageCategoryExpand=Ab.view.View.contextPath+"/schema/ab-core/graphics/icons/tri-closed.png";this.categoryDataSourceId=A.getConfigParameterIfExists("categoryDataSource");this.categoryCollapsedInfo={};this.categoryDisplayedInfo={}},getCategoryDataSourceId:function(){return this.categoryDataSourceId},setCategoryDataSourceId:function(A){this.categoryDataSourceId=A},getCategoryField:function(){return this.categoryField},setCategoryField:function(A){this.categoryField=A},getCategoryOrder:function(){return this.categoryOrder},setCategoryOrder:function(A){this.isCustomCategoryOrder=true;this.categoryOrder=A},getCategoryColors:function(){return this.categoryColors},setCategoryColors:function(A){this.categoryColors=A},getCategoryRecords:function(){return this.categoryRecords},setCategoryRecords:function(A){return this.categoryRecords},getCategoryField:function(){return this.categoryField},setCategoryField:function(A){this.categoryField=A},getCategoryDataSource:function(){return this.categoryDataSource},setCategoryDataSource:function(A){this.categoryDataSource=A},setCategoryDataSourceById:function(A){this.categoryDataSource=View.dataSources.get(A)},setshowWithoutGroupings:function(A){this.showWithoutGroupings=A},getshowWithoutGroupings:function(){return this.showWithoutGroupings},setCategoryConfiguration:function(B){if(valueExists(B.showWithoutGroupings)){this.setshowWithoutGroupings(B.showWithoutGroupings)}if(this.showWithoutGroupings){return }if(valueExists(B.fieldName)){this.setCategoryField(B.fieldName)}else{var A=View.getLocalizedString(this.z_NO_FIELD_ERROR_MESSAGE);View.showMessage("error",A);return }if(valueExists(B.order)){this.setCategoryOrder(B.order)}if(valueExists(B.categoryDataSourceId)){this.setCategoryDataSourceId(B.categoryDataSourceId)}if(valueExists(B.setCategoryDataSouceById)&&(B.setCategoryDataSouceById==true)){this.setCategoryDataSourceById(B.categoryDataSourceId)}if(valueExists(B.categoryDataSource)){this.setCategoryDataSource(B.categoryDataSource)}if(valueExists(B.getStyleForCategory)){this.getStyleForCategory=B.getStyleForCategory}this.setOrderAndStyle()},setOrderAndStyle:function(){var J=View.dataSources.get(this.getCategoryDataSourceId());var K=[];var C=J.getRecords();if(this.categoryOrder.length==0){this.isCustomCategoryOrder=false;for(var H=0;H<C.length;H++){this.categoryOrder.push(C[H].getValue(this.categoryField))}}var E=this.getFieldDef(this.categoryField);if(E){var I=E.isEnum;this.categoryFieldIsEnum=I;var D=(I)?E.enumValues:{};for(i=0,n=this.categoryOrder.length;i<n;i++){for(var F=0,B=C.length;F<B;F++){var G=C[F];var A=G.getValue(this.categoryField);if(A==this.categoryOrder[i]){G.style=this.getStyleForCategory(G);G.categoryTitle=(I)?D[A]:A;G.category=A;K.push(G)}}}}else{var L=View.getLocalizedString(this.z_CATEGORY_FIELD_NOT_FOUND_ERROR_MESSAGE);View.showMessage("error",L);return }this.categoryRecords=K;return this.categoryRecords},getStyleForCategory:function(A){A.style={};return A},findStopIndex:function(A){var D=this.tableBodyElement.getElementsByTagName("th");var C=0;for(var B=0;B<D.length;B++){if(D[B].parentElement.rowIndex==A){C=(B==D.length-1)?this.tableBodyElement.rows.length+D[0].parentElement.rowIndex:D[B+1].parentElement.rowIndex}}return C},beforeBuild:function(){this.inherit();this.enableIndex(this.indexEnabled,this.indexColumnID,this.indexEntries);this.filterEnabled=this.config.getConfigParameterIfExists("showIndexAndFilterOnLoad")},createDataRows:function(B,C){if(this.showWithoutGroupings){this.inherit(B,C)}else{var A=Ext.get(this.parentElement.id);A.addClass("categoryGrid");this.createCategoryAndDetailRows(B,C)}},createCategoryAndDetailRows:function(O,H){this.gridRows=new Ext.util.MixedCollection();var P=View.getLocalizedString(this.z_NONE);for(var N=0;N<this.categoryRecords.length;N++){var M=this.categoryRecords[N];var C=M.categoryTitle;var F=this.getMatchedRecords(this.rows,M.category);if(F.length===0){continue}if(!valueExistsNotEmpty(C)){C=P}var K=(this.categoryCollapsed)?"none":"";var G=(this.categoryCollapsed)?this.imageCategoryExpand:this.imageCategoryCollapse;if(C in this.categoryCollapsedInfo){K=this.categoryCollapsedInfo[C];if(K==="none"){G=this.imageCategoryExpand}else{G=this.imageCategoryCollapse}}var E=document.createElement("th");E.colSpan=this.columns.length;var I=document.createElement("a");I.className="categoryTitle";var D=document.createElement("span");D.innerHTML=C;D.id=this.id+"_category"+C+"_multipleSelectionColumn";I.appendChild(D);I.style.background="url("+G+") no-repeat 0 50%";if(this.multipleSelectionEnabled){var J=document.createElement("input");J.type="checkBox";J.className="categoryCheckBox";J.id=this.id+"_category"+C+"_checkAll";I.appendChild(J);var A=this;Ext.get(J).addListener("click",function(R){R.stopPropagation();A.handleCategoryCheckBox(this)})}E.appendChild(I);var B=M.style;for(var Q in B){I.style[Q]=B[Q]}var L=document.createElement("tr");L.className="categoryRow";L.appendChild(E);this.tableBodyElement.appendChild(L);Ext.get(E).addListener("click",this.openOrCollapseCategory.createDelegate(this,[I,C]));this.createDetailRows(this.tableBodyElement,H,C,E,I,F,K)}},openOrCollapseCategory:function(E,C){var B=this.findStopIndex(E.parentElement.parentElement.rowIndex);var D=this.tableBodyElement.getElementsByTagName("th");var H=D[0].parentElement.rowIndex;var G="";var F="";if(E.style.background.match(/closed/gi)){G=this.imageCategoryCollapse}else{G=this.imageCategoryExpand;F="none"}this.categoryCollapsedInfo[C]=F;E.style.background="url("+G+") no-repeat 0 50%";for(var A=E.parentElement.parentElement.rowIndex-H+1;A<B-H;A++){this.tableBodyElement.rows[A].style.display=F}this.clearPreviousColumnRowWidths();this.updateHeight()},getMatchedRecords:function(E,H){var A=[];var D=this.categoryField;var C=this.categoryField;if(this.categoryFieldIsEnum===true){C=this.categoryField+".raw"}for(var G=0,B;B=E[G];G++){var F=B[C];if(!valueExistsNotEmpty(B[C])&&valueExistsNotEmpty(B[D])){F=B[D]}if(F===H){A.push(B)}}return A},handleCategoryCheckBox:function(K){var B=this;var H=K.dom.parentElement;var O=H.parentElement.parentElement.rowIndex;var N=B.findStopIndex(O);var M=B.tableBodyElement.getElementsByTagName("th");var J=0;var D=B.getCategoryRows();for(var I=0,C=D.length;I<C;I++){if(D[I].rowIndex===O){numberOfPreviousCategories=I+1}}for(var A=0,C=B.tableBodyElement.rows.length;A<C&&A<O;A++){var L=B.tableBodyElement.rows[A].id;if(L&&L.indexOf("paging_more_records")>=0){numberOfPreviousCategories++}}var G=M[0].parentElement.rowIndex;var F=K.dom.checked;for(var E=H.parentElement.parentElement.rowIndex-G+1;E<N-G;E++){B.tableBodyElement.rows[E].cells[0].getElementsByTagName("input")[0].checked=F;B.onChangeMultipleSelection(B.gridRows.get(E-numberOfPreviousCategories).record)}},createDetailRows:function(I,F,A,D,G,E,H){var C=this.getEventListener("onClickItem");var B=this.hasMultiline(F);this.buildCategoryGridRows(C,B,E,I,F,A,D,G,false,E.length,null,H)},buildCategoryGridRows:function(F,N,W,H,B,U,S,T,J,Z,O,V){var L=0;var X=null;var I=this.getStartInsertIndex(S,J);var Q=this.categoryDisplayedLimit;if((!J&&W.length>this.categoryDisplayedLimit)&&U in this.categoryDisplayedInfo){Q=this.categoryDisplayedInfo[U]}for(var R=0,D;D=W[R];R++){X=document.createElement("tr");X.style.display=V;X.name=U+"_details";X.className=(this.tableBodyElement.rows.length%2===0)?"dataRow":"dataRow odd";X.onmouseover=function(){this.className=this.className+" selected"};X.onmouseout=function(){this.className=this.className.replace(" selected","")};X.className+=(N)?" multiline":" singleline";var K=new Ab.grid.Row(this,D,X);this.gridRows.insert(I+R,K);D.index=this.gridRows.length-1;D.row=K;for(var Y=0,C;C=B[Y];Y++){if(C.hidden){continue}var P=document.createElement("td");if(F&&this.columnTypeIsSortable(C.type)&&C.type!=="image"&&C.enabled==="true"){C.type="link";if(C.javaType==="java.lang.Double"||C.javaType==="java.lang.Integer"){C.type="number_link"}}P.className=C.type;if(C.width!=null){P.width=C.width}if(C.onCreateCell!=null){C.onCreateCell(D,C,P)}else{this.createCellContent(D,C,P)}X.appendChild(P);var A=new Ab.grid.Cell(K,C,P);K.cells.add(C.id,A)}if(O){H.insertBefore(X,O)}else{H.appendChild(X)}++L;if(L>=Q){break}}this.addRowLevelActions(F,B);this.afterCreateDataRows(H,B);var E=this.id+"count"+S.id;var G;if(J){G=$(E)}else{G=document.createElement("span");G.id=E}if(W.length>L){W.splice(0,L);var M=Z-W.length;this.categoryDisplayedInfo[U]=M;G.innerHTML="("+M+"/"+Z+")";this.createViewMoreRecordsAction(X,M,F,N,W,H,B,U,S,T,Z,O,V)}else{this.categoryDisplayedInfo[U]=Z;G.innerHTML="("+Z+")"}G.className="count";T.appendChild(G)},getStartInsertIndex:function(H,B){var D=this.gridRows.length;if(B){var G="paging_more_records"+H.id;var A=$(G);if(A){D=0;var F=Ext.query(".dataRow",this.parentElement);for(var E=0,C;C=F[E];E++){if(A.rowIndex>C.rowIndex){D++}}}}return D},createViewMoreRecordsAction:function(N,E,B,F,M,C,A,K,I,J,R,G,L){var D=document.createElement("tr");D.id="paging_more_records"+I.id;D.style.display=L;C.insertBefore(D,N.nextSibling);var H=document.createElement("td");D.appendChild(H);H=document.createElement("td");D.appendChild(H);H.colSpan=(A.length-1)+"";var O=document.createElement("a");O.className="mainAction button ";var P=document.createElement("span");if(this.categoryDisplayedLimit<M.length){P.innerHTML=M.length+" "+View.getLocalizedString(this.z_TITLE_VIEWMORERECORDS)+" "+this.categoryDisplayedLimit}else{P.innerHTML=M.length+" "+View.getLocalizedString(this.z_TITLE_VIEWTHEM)}O.appendChild(P);var Q=this;Ext.fly(O).addListener("click",function(S){S.stopPropagation();Q.buildCategoryGridRows(B,F,M,C,A,K,I,J,true,R,D);C.removeChild(D);Q.clearAllCategoryCheckBoxs();Q.afterRefresh()});H.appendChild(O)},clearAllCategoryCheckBoxs:function(){var A=document.getElementsByTagName("input");for(var B=0;B<A.length;B++){if(A[B].type==="checkbox"){A[B].checked=false}}},getFirstRowIndex:function(){this.columnWidthRowIndex=this.getFirstUncollapsedRowIndex();return this.columnWidthRowIndex},getFirstUncollapsedRowIndex:function(){var C=Ext.query(".dataRow",this.parentElement);for(var B=0;B<C.length;B++){var A=C[B].rowIndex;if(A<this.tableBodyElement.rows.length){if(this.tableBodyElement.rows[A].style.display==""){return A}}}return -1},clearPreviousColumnRowWidths:function(){if(this.columnWidthRowIndex!=-1){var B=this.tableBodyElement.rows[this.columnWidthRowIndex].cells;for(var A=0;A<B.length;A++){B[A].style.width="auto"}}},selectAll:function(A){this.setAllCategoryRowsSelected(A);this.setAllRowsSelected(A)},setAllRowsSelected:function(D){var A=((typeof D=="undefined")||D==true)?true:false;var G=new Array();var C=this.getDataRows();for(var E=0,H=C.length;E<H;E++){var B=C[E];var F=B.firstChild.firstChild;if(typeof F.checked!="undefined"){if(F.checked!=A){F.checked=A;this.onChangeMultipleSelection(this.gridRows.get(E).record)}G.push(this.gridRows.get(E).record)}}return G},setAllCategoryRowsSelected:function(C){var B=((typeof C=="undefined")||C==true)?true:false;var A=this.getCategoryRows();for(var D=0,G=A.length;D<G;D++){var F=A[D];var E=F.firstChild.firstChild.firstChild.nextSibling;if(typeof E.checked!="undefined"){if(E.checked!=B){E.checked=B}}}},getCategoryRows:function(){return Ext.query(".categoryRow",this.parentElement)},onChangeMultipleSelection:function(B){this.inherit(B);if(B.row.isSelected()==false){var A=Ext.get(this.id+"_category"+B[this.categoryField]+"_checkAll");if(valueExists(A)){A.dom.checked=false}}},callDOCXReportJob:function(D,A,B){this.setCategoryProperties(B);if(!valueExistsNotEmpty(D)){D=""}if(!valueExists(B.recordLimit)){B.recordLimit=0}var C=this.viewDef.viewName+".axvw";return Workflow.startJob(Ab.grid.ReportGrid.WORKFLOW_RULE_DOCX_REPORT,C,this.dataSourceId,D,this.getVisibleFieldDefs(),toJSON(A),B)},callXLSReportJob:function(D,A,B){this.setCategoryProperties(B);if(!valueExistsNotEmpty(D)){D=""}if(!valueExists(B.recordLimit)){B.recordLimit=0}var C=this.viewDef.viewName+".axvw";return Workflow.startJob(Ab.grid.ReportGrid.WORKFLOW_RULE_XLS_REPORT,C,this.dataSourceId,D,this.getVisibleFieldDefs(),toJSON(A),B)},setCategoryProperties:function(B){B.categoryDataSourceId=this.getCategoryDataSourceId();B.categoryFields=[this.getCategoryFieldDef(this.categoryField)];for(var A=0;A<this.getVisibleFieldDefs().length;A++){B.categoryFields.push({})}if(this.isCustomCategoryOrder){B.categoryOrder=this.categoryOrder}B.categoryColors=this.categoryColors},getCategoryFieldDefs:function(){var A=this.createEvaluationContext();var C=[];var B=View.dataSources.get(this.getCategoryDataSourceId());B.fieldDefs.each(function(D){D.title=Ab.view.View.evaluateString(D.title,A,false);D.hidden=Ab.view.View.evaluateString(D.hidden,A,false);C.push(D)});return C},getCategoryFieldDef:function(A){var D=this.getCategoryFieldDefs();for(var B=0,C;C=D[B];B++){if(C.id===A){return C}}return{}},refresh:function(A,B,C){if(this.getCategoryField()!=""){this.setOrderAndStyle()}this.inherit(A,B,C)},showIndexAndFilter:function(){},addFilterPaletteAndListeners:function(){}});Ab.namespace("tree");Ab.tree.TreeControl=Ab.view.Component.extend({_nodes:null,_levels:null,_dragEnabled:null,_viewFile:null,_panelsData:null,_groupIndex:0,_nullValueTextMap:{},_legendTables:[],_legendFields:[],treeView:null,maxLevel:0,showNodesWithoutChildren:true,type:"tree",lastNodeClicked:null,recordLimit:-1,restriction:null,colorOpacity:null,z_EMPTY_TREE_MESSAGE:"No records available.",_addTreeLevel:function(A){this._levels.push(A)},_addTreeNode:function(A){this._nodes.push(A)},_getParameters:function(B,C,E){var D={version:"2",viewName:this._viewFile,dataSourceId:B.dataSourceId,controlId:B.panelId,groupIndex:this._groupIndex,treeType:this.type,treeLevel:E,recordLimit:-1};if(this.recordLimit!=undefined&&this.recordLimit!=-1){D.recordLimit=this.recordLimit}var A=this._createRestrictionForLevel(C,E);if(A&&A.clauses!=undefined&&A.clauses.length>0){D.restriction=toJSON(A)}Ext.apply(D,this.parameters);return D},_createRestrictionForLevel:function(A,D){var B=this.createRestrictionForLevel(A,D);if(!B){B=new Ab.view.Restriction();if(this.restriction&&this.restriction.clauses!=undefined&&this.restriction.clauses.length>0){B.addClauses(this.restriction,true,false,{addForNullValue:true,addForEmptyValue:true})}var C=this.getRestrictionForLevel(D);if(C&&C.clauses!=undefined&&C.clauses.length>0){B.addClauses(C,true,false,{addForNullValue:true,addForEmptyValue:true})}if(!A.isRoot()){if(this.type=="hierTree"||this.type=="selectValueHierTree"){B.addClauses(A.restriction,true,false,{addForNullValue:true,addForEmptyValue:true})}else{if(this._panelsData[D].useParentRestriction==true){B.addClauses(A.restriction,true,false,{addForNullValue:true,addForEmptyValue:true})}}}}this.updateRestrictionForLevel(A,D,B);return B},createRestrictionForLevel:function(A,B){return null},updateRestrictionForLevel:function(A,C,B){},_initTree:function(B,H,A){if(typeof (B)=="undefined"){return }try{var I=Workflow.call("AbCommonResources-getDataRecords",this._getParameters(B,H,A),120);if(I.code=="executed"){var C=this.getEventListener("afterGetData");if(C){C(this,I.data,A)}var D=document.getElementById(B.panelId+"_msg_no_record");if(D!=null){D.parentNode.removeChild(D)}if(I.data.records.length>0){var E=new Ab.tree.TreeLevel(A,I.data,B);this.applySidecarToLevel(E);this._addTreeLevel(E);this._addTreeNodes(I,H,E);if(this.type=="hierTree"&&this.maxLevel<A){this.maxLevel=A}}else{if(A>0){H.isLeafNode=true}else{var D=document.getElementById(B.panelId);if(D!=null){var G=document.createElement("div");G.id=B.panelId+"_msg_no_record";G.className="noRecords";G.innerHTML=this.getLocalizedString(this.z_EMPTY_TREE_MESSAGE);D.parentNode.appendChild(G)}}}}else{this.handleError(I)}}catch(F){this.handleError(F)}},applySidecarToLevel:function(B){var A=this.getSidecar();var C=A.get("levels");if(C&&C[B.levelIndex]){B.visibleFields=C[B.levelIndex].visibleFields}return B},_addTreeNodes:function(J,H,F){var D=J.data.records.length;for(var E=0;E<D;E++){var G=J.data.records[E];for(var I in G){var B=I.indexOf(".key");if(B!==-1){var A=I.substring(0,B);if(!G[A]){G[A]=G[I]}}}var C=this._createTreeNode(F,G,H,false);this._updateTreeNodeChildren(C);if(C.isLeafNode){H.isLeafNode=false}if(H.isRoot()){this._addTreeNode(C)}if(this.showNodesWithoutChildren==false&&C.isLeafNode&&F.levelIndex+1<this._panelsData.length){this.treeView.removeNode(C)}}if(!H.hasChildren()){H.isLeafNode=true}},_createTreeNode:function(B,D,C,A){return new Ab.tree.TreeNode(this,B,D,C,A)},_updateTreeNodeChildren:function(D){var F=D.level.levelIndex;if(this._panelsData&&this._panelsData.length>F){var B=this._panelsData[F+1];if(B){var C=this._getParameters(B,D,F+1);try{var A=Workflow.call("AbCommonResources-getDataRecords",C,120);if(A.data.records.length==0){D.isLeafNode=true}}catch(E){this.handleError(E)}}}},_registerEvents:function(C){var B=0;if(C.level.events.length==0){this.addLink(C)}while(C.level.events[B]){switch(C.level.events[B]["type"]){case"onClickNode":this.addLink(C,B);break;case"onContextMenu":break;case"onChangeMultipleSelection":var A=this.onChangeMultipleSelection.createDelegate(C,[C]);YAHOO.util.Event.addListener(YAHOO.util.Dom.get(C.checkElId),"click",A);break;default:break}B++}if(this.isDragEnabledForLevel(C.level.levelIndex)){new Ext.dd.DragSource(C.labelElId,{dragData:C})}},_loadNodeData:function(B,A){var C=B.level.levelIndex+1;if(B.treeControl.type=="tree"&&C>B.treeControl.maxLevel){B.isLeafNode=true}if(!B.isLeafNode){if(B.treeControl.type=="hierTree"){B.treeControl._initTree(B.treeControl._panelsData[0],B,C)}else{if(B.isLeafNode){B.treeControl._initTree(B.treeControl._panelsData[C],B,C)}else{B.treeControl._initTree(B.treeControl._panelsData[C],B,C)}}}A();B.treeControl._registerNodesEvents(B.children)},addLink:function(E,C){var H=E.labelElId;var D=$(H);var G=null;if(valueExists(C)){var A=E.level.events[C]["commands"];var B=E.restriction;G=new Ab.command.commandChain(this.id,B);G.addCommands(A);D.command=G}var F=function(){E.onLabelClick(E);if(G){G.handle()}};YAHOO.util.Event.addListener(D,"click",F)},getRestrictionForLevel:function(C){if(typeof size=="number"){var A=parseInt(C);for(var B in this._levels){if(B.levelIndex==A){return B.restriction}}}else{if(typeof size=="string"){for(var B in this._levels){if(B.panelId==C){return B.restriction}}}}return null},addRestriction:function(A){if(this.restriction==null){this.restriction=new Ab.view.Restriction()}this.restriction.addClauses(A,true,false,{addForNullValue:true,addForEmptyValue:true})},getLevel:function(A){return this._levels[A]},enableDragForLevel:function(B,A){if(!valueExists(A)){A=true}this._dragEnabled[B]=A},isDragEnabledForLevel:function(A){return this._dragEnabled[A]},constructor:function(A,D){var J=D.getConfigParameterIfExists("viewDef");if(valueExists(J)&&J!=""){this._viewFile=J}var I=D.getConfigParameterIfExists("panelsData");if(valueExists(I)&&I!=""){this._panelsData=I}var H=D.getConfigParameter("groupIndex");if(valueExists(H)&&H!=""){this._groupIndex=H}var C=D.getConfigParameterIfExists("restriction");if(valueExists(C)&&C!=""){this.restriction=C}var G=D.getConfigParameterIfExists("maxLevel");if(valueExists(G)&&G!=""){this.maxLevel=G}var E=D.getConfigParameterIfExists("type");if(valueExists(E)&&E!=""){this.type=E}var F=D.getConfigParameterIfExists("showOnLoad");if(valueExists(F)){this.showOnLoad=F}D.addParameterIfNotExists("useParentRestriction",false);var B=D.getConfigParameterIfExists("recordLimit");if(valueExists(B)&&B!=""){this.recordLimit=B}this.inherit(A,this.type,D);this.treeView=new YAHOO.widget.TreeView(this.id);this.treeView.setDynamicLoad(this._loadNodeData,1);this._nodes=[];this._levels=[];this._dragEnabled=[];this._legendTables=[];this._legendFields=[];this.addEventListenerFromConfig("afterGetData",D);if(!this.getEventListener("afterGetData")){this.addEventListener("afterGetData",this.afterGetData)}if(View.useScroller()){this.treeView.subscribe("expand",this.updateHeight.createDelegate(this));this.treeView.subscribe("collapse",this.updateHeight.createDelegate(this))}},isAutoScroll:function(){return this.isScrollable()},updateHeight:function(){var B=this.determineAvailableHeight();var A=this.getScrollableEl();if(B>0&&A!=null){A.setHeight(B)}if(this.isAutoScroll()&&!this.isScrollInLayout()){this.updateScroller()}else{this.updateLayoutScroller()}if(this.isShownInWindow()){this.updateWindowScroller()}this.updateCollapsed()},initialDataFetch:function(){var A=this.treeView.getRoot();if(this.showOnLoad){if(this.type=="selectValueTree"||this.type=="selectValueHierTree"){this._initTree(null,A,0)}else{if(this.type=="tree"){this._initTree(this._panelsData[0],A,0)}else{this._initTree(this._panelsData[0],A,0)}}}this.treeView.draw();this._registerNodesEvents(this._nodes);this.updateHeight()},_registerNodesEvents:function(A){for(var B=0;B<A.length;B++){this._registerEvents(A[B])}},doRefresh:function(){this.clear();var A=this.treeView.getRoot();if(this.type=="selectValueTree"||this.type=="selectValueHierTree"){this._initTree(null,A,0)}else{if(this.type=="tree"){this._initTree(this._panelsData[0],A,0)}else{this._initTree(this._panelsData[0],A,0)}}A.refresh();this.treeView.draw();this._registerNodesEvents(this._nodes);this.clearScroller();this.updateHeight()},refreshNode:function(A){this.treeView.removeChildren(A);var B=A.level.levelIndex;this._initTree(this._panelsData[B+1],A,B+1);A.refresh();this._registerNodesEvents(A.children)},expandNode:function(A){if(!A.isRoot()){var D=new Array();var B=A;D[0]=B;var C=1;while(B.parent){B=B.parent;D[C]=B;C++}for(C=D.length-1;C>=0;C--){if(D[C].parent!=null){if(C==0){this.treeView.removeChildren(D[C]);D[C].collapse()}D[C].isLeafNode=false;D[C].expand()}}}},afterGetData:function(M,E,B){var K,H,I,G,D,J,C,L;for(var A=0,F;F=E.records[A];A++){for(K in F){H=K.split(".");if(H.length==2){I=F[K];if(!I||typeof I!="string"||I.length==0){continue}G=I.split(" ");D=G[0].toLowerCase();for(J=1,C;C=G[J];J++){C=C.toUpperCase().substr(0,1)+C.toLowerCase().substr(1);D+=C}D=H[0]+"_"+H[1]+"_"+D;L=getMessage(D);if(L!=replaceHTMLPlaceholders(D)){F[K]=L}}}}},clear:function(){var A=this.treeView.getRoot();this.treeView.removeChildren(A);this.lastNodeClicked=null;A.refresh();this._nodes=[];this._levels=[]},collapse:function(){for(var A=0;A<this._nodes.length;A++){this._nodes[A].collapse()}},expand:function(){for(var A=0;A<this._nodes.length;A++){this._nodes[A].expand()}},expandAll:function(B){if(!valueExists(B)){B=1000}var A=this;var C=function(F){if(F.level.levelIndex<B){if(!F.isRoot()){A.refreshNode(F)}F.expand();if(F.hasChildren()){for(var E=0;E<F.children.length;E++){C(F.children[E])}}}};for(var D=0;D<this._nodes.length;D++){C(this._nodes[D])}},setMultipleSelectionEnabled:function(C,A){if(!valueExists(A)){A=true}this._panelsData[C].multipleSelectionEnabled=true;var B={type:"onChangeMultipleSelection"};this._panelsData[C].events.push(B)},getSelectedNodes:function(D){var A=[];for(var B=0;B<this.treeView._nodes.length;B++){var C=this.treeView._nodes[B];if(C&&C.level.levelIndex==D&&C.isSelected()){A.push(C)}}return A},getSelectedRecords:function(F){var B=[];for(var C=0;C<this.treeView._nodes.length;C++){var D=this.treeView._nodes[C];if(D&&D.level.levelIndex==F&&D.isSelected()){var E=D.getPrimaryKeyValues();var A=new Ab.data.Record(E,false);B.push(A)}}return B},onChangeMultipleSelection:function(B){var A=YAHOO.util.Dom.get(B.checkElId);B.setSelected(A.checked);var C=B.treeControl.getEventListener("onChangeMultipleSelection");if(C){C(B)}},selectAll:function(B){if(!valueExists(B)){B=true}for(var A=0;A<this.treeView._nodes.length;A++){var C=this.treeView._nodes[A];if(C){C.setSelected(B)}}},unselectAll:function(){this.selectAll(false)},setTreeNodeConfigForLevel:function(B,A){this._panelsData[B].treeNodeConfig=A},setColorOpacity:function(A){this.colorOpacity=A},setNullValueTitle:function(B,A){if(valueExists(B)&&valueExists(A)){this._nullValueTextMap[B]=A}},setLegendTable:function(B,A){this._legendTables[B]=A},setLegendFields:function(B,A){this._legendFields[B]=A},clearNullValueTextMap:function(){this._nullValueTextMap={}}});Ab.tree.TreeNode=function(B,C,F,E,A){this.treeControl=B;this.level=C;this.tree=B.treeView;this.children=[];this.parent=E;this.restriction=new Ab.view.Restriction();this.init(F,E,A);if((this.treeControl.type=="tree"||this.treeControl.type=="selectValueTree")&&this.level.levelIndex==this.treeControl.maxLevel){this.isLeafNode=true}this.checkElId="ygtvcheck"+this.index;if(this.treeControl.type=="tree"||this.treeControl.type=="hierTree"){var D=0;while(C.events[D]&&!this.hasLabelClickEvent){if(C.events[D]["type"]=="onClickNode"){this.hasLabelClickEvent=true}D++}}this._createLabel()};YAHOO.extend(Ab.tree.TreeNode,YAHOO.widget.TextNode,{level:null,treeControl:null,isLeafNode:false,hasLabelClickEvent:false,restriction:null,selected:false,checkElId:null,_createLabel:function(){var D="";if(this.level.treeNodeConfig){D=this.getLabelForNodeConfig(this.level)}else{for(var B=0;B<this.level.visibleFields.length;B++){var E=this.data[this.level.visibleFields[B].name];var C=this.treeControl._nullValueTextMap[this.level.visibleFields[B].name];if((!valueExists(E)||E=="")&&C!=undefined){E="["+C+"]"}if(E!=undefined){if(B>0){D=D+" "}var A=(this.level.visibleFields[B].controlType=="color");if(A){D=D+"<span class='"+this.level.cssClassName+" colorSpan' >"+this.getColorContentHtml(E,this.level.visibleFields[B],this.data)+"</span>"}else{if(this.level.visibleFields[B].isPk){D=D+"<span class='"+this.level.cssPkClassName+"'>"+E+"</span>"}else{D=D+"<span class='"+this.level.cssClassName+"'>"+E+"</span>"}}}}}this.setUpLabel(D);if(typeof afterGeneratingTreeNode=="function"){afterGeneratingTreeNode(this)}if(this.hasLabelClickEvent){this.href="javascript:void(0);"}for(var B=0;B<this.level.pkFields.length;B++){this.setNodeRestrictions(this.level.pkFields[B])}},setNodeRestrictions:function(C){var B=C+".key";if(this.parent!=null&&!this.parent.isRoot()){var A=this.parent.getPrimaryKeyValue(C);if(A!=null&&A!=""&&this.treeControl.type!="hierTree"&&this.treeControl.type!="selectValueHierTree"){if(typeof (A)!="undefined"){this.restriction.addClause(C,A,"=")}}else{if(typeof (this.data[B])!="undefined"){this.restriction.addClause(C,this.data[B],"=")}}}else{if(typeof (this.data[B])!="undefined"){this.restriction.addClause(C,this.data[B],"=")}}},getLabelForNodeConfig:function(){var E="";for(var D=0;D<this.level.treeNodeConfig.length;D++){var C=this.level.treeNodeConfig[D];var F=C.text;var B=this.level.cssPkClassName;if(!valueExistsNotEmpty(F)&&valueExistsNotEmpty(C.fieldName)){F=this.data[C.fieldName];if(valueExistsNotEmpty(C.length)){if(F.length>C.length){F=F.substr(0,C.length)+" ..."}}if(valueExistsNotEmpty(C.pkCssClass)){B=(C.pkCssClass=="true")?this.level.cssPkClassName:level.cssClassName}else{if(this.level.pkFields.indexOf(C.fieldName)<0){B=this.level.cssClassName}}}if(F!=undefined){if(D>0){E=E+" "}var A=(this.level.treeNodeConfig[D].controlType=="color");if(A){E=E+"<span class='"+this.level.cssClassName+" colorSpan' >"+this.getColorContentHtml(F,this.level.treeNodeConfig[D],this.data)+"</span>"}else{E=E+"<span class='"+B+"'>"+F+"</span>"}}}return E},getColorContentHtml:function(J,E,L,G){if(J==undefined){J=""}var C=new Ab.data.HighlightPattern(J);if(C.isHatched()){var K=this.treeControl._legendTables;if(K.length===0){K[this.level.levelIndex]=E.name.substring(0,E.name.indexOf("."))}var H=C.getLegendBitmapName(K[this.level.levelIndex],this.getLegendKeyValues(L));if(H){content="<img src='"+View.project.projectGraphicsFolder+"/"+H+".png' hspace='0' border='0'/>"}}else{var F="";if(J.substr(0,2)=="0x"){F=J.substr(2)}else{F=gAcadColorMgr.getRGBFromPatternForGrid(J,true);if(F=="-1"){if(G==undefined||!G.length){F=gAcadColorMgr.getUnassignedColor(true)}else{F=gAcadColorMgr.getColorFromValue(G,true)}}}var D=this.getLegendKeyFieldDef();if(valueExists(D)){gAcadColorMgr.setColor(D.name,this.data[D.name],F)}var I=this.treeControl.colorOpacity;var B="alpha(opacity='"+(I*100).toFixed()+"')";var A=(I!=null)?"opacity: "+I+"; filter: "+B:"";content='<div class="colorSwatch" style="background-color:#'+F+";"+A+'"></div>'}return content},getLegendKeyFieldDef:function(){for(var B=0;B<this.level.visibleFields.length;B++){var A=this.level.visibleFields[B];if(valueExistsNotEmpty(A.legendKey)&&A.legendKey==="true"){return A}}return null},getLegendKeyValues:function(F){var E=[];var A=null;var B=this.treeControl._legendFields;if(B.length>0&&B[this.level.levelIndex].length!=0){for(var D=0;D<B[this.level.levelIndex].length;D++){var G=B[this.level.levelIndex][D];A=F[G];if(A){E.push(A)}}}if(E.length===0){for(var D=0;D<this.level.dataSourceFieldDefs.items.length;D++){var C=this.level.dataSourceFieldDefs.items[D];if(valueExistsNotEmpty(C.legendKey)&&C.legendKey==="true"){A=F[C.fullName];if(A){E.push(A)}}}}if(E.length===0){for(var D=0;D<this.level.visibleFields.length;D++){var C=this.level.visibleFields[D];if(C.legendKey){A=F[C.name];if(A){E.push(A)}}}}if(E.length===0){for(var D=0;D<this.level.pkFields.length;D++){A=F[this.level.pkFields[D]];if(A){E.push(A)}}}return E},getStyle:function(){if(this.isLoading){return"ygtvloading"}else{var B=(this.nextSibling)?"t":"l";var A="n";if(!this.isLeafNode&&(this.hasChildren(true)||(this.isDynamic()&&!this.getIconMode()))){A=(this.expanded)?"m":"p"}return"ygtv"+B+A}},getHoverStyle:function(){var A=this.getStyle();if(!this.isLeafNode&&(this.hasChildren(true)&&!this.isLoading)){A+="h"}return A},onLabelClick:function(A){Ext.get(A.labelElId).parent().addClass("selectedTreeNode");if(this.treeControl.lastNodeClicked!=null){var B=Ext.get(this.treeControl.lastNodeClicked.labelElId);if(B){B.parent().removeClass("selectedTreeNode")}}this.treeControl.lastNodeClicked=A},getPrimaryKeyValues:function(){var B={};if(this.restriction.clauses){for(var A=0;A<this.restriction.clauses.length;A++){B[this.restriction.clauses[A].name]=this.restriction.clauses[A].value}}return B},getPrimaryKeyValue:function(B){if(this.restriction.clauses){for(var A=0;A<this.restriction.clauses.length;A++){if(this.restriction.clauses[A].name==B){return this.restriction.clauses[A].value}}}return""},getText:function(){var A="";for(var B=0;B<this.level.pkFields.length;B++){if(B>0){A+="|"}A+=this.data[this.level.pkFields[B]+".key"]}return A},isSelected:function(){return this.selected},setCheckState:function(A){this.selected=A;if(YAHOO.util.Dom.get(this.checkElId)){YAHOO.util.Dom.get(this.checkElId).checked=A}},setSelected:function(B){if(this.level.multipleSelectionEnabled){this.setCheckState(B);for(var A=0;A<this.children.length;A++){var C=this.children[A];if(C.setSelected){C.setSelected(B)}}this.updateParent()}},updateParent:function(){var C=this.parent;if(!C||!C.updateParent||!C.level.multipleSelectionEnabled){return }var A=false;var D=false;for(var B=0;B<C.children.length;B++){var E=C.children[B];if("selected" in E){if(E.selected){A=true}else{D=true}}}if(A&&!D){C.setCheckState(true)}else{if(D){C.setCheckState(false)}}C.updateParent()},getNodeHtml:function(){var B=[];B[B.length]='<table id="ygtvtableel'+this.index+'" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth'+this.depth;if(this.enableHighlight){B[B.length]=" ygtv-highlight"+this.highlightState}if(this.className){B[B.length]=" "+this.className}B[B.length]='"><tr class="ygtvrow">';for(var A=0;A<this.depth;++A){B[B.length]='<td class="ygtvcell '+this.getDepthStyle(A)+'"><div class="ygtvspacer"></div></td>'}if(this.hasIcon){B[B.length]='<td id="'+this.getToggleElId();B[B.length]='" class="ygtvcell ';B[B.length]=this.getStyle();B[B.length]='"><a href="#" class="ygtvspacer">&#160;</a></td>'}if(this.level.multipleSelectionEnabled){B[B.length]='<td class="ygtvcell ';B[B.length]=this.contentStyle+' ygtvcontent" ';B[B.length]=">";B[B.length]='<input type="checkbox"';B[B.length]=' id="'+this.checkElId+'"';if(!this.parent.isRoot()&&this.parent.isSelected()){this.setCheckState(this.parent.isSelected());B[B.length]=" CHECKED "}B[B.length]="/> ";B[B.length]="</td>"}B[B.length]='<td id="'+this.contentElId;B[B.length]='" class="ygtvcell ';B[B.length]=this.contentStyle+' ygtvcontent" ';B[B.length]=(this.nowrap)?' nowrap="nowrap" ':"";B[B.length]=" >";B[B.length]=this.getContentHtml();B[B.length]="</td></tr></table>";return B.join("")},getContentHtml:function(){var A=[];A[A.length]="<a";A[A.length]=' id="'+this.labelElId+'"';A[A.length]=' class="'+this.labelStyle+'"';if(this.href){A[A.length]=' href="'+this.href+'"';A[A.length]=' target="'+this.target+'"'}if(this.title){A[A.length]=' title="'+this.title+'"'}A[A.length]=" >";A[A.length]=this.label;A[A.length]="</a>";return A.join("")}});Ab.tree.TreeLevel=Base.extend({levelIndex:0,visibleFields:null,dataSourceFieldDefs:null,pkFields:null,dataSourceId:null,panelId:null,cssClassName:"ygtvlabel",cssPkClassName:"ygtvlabel_pk",events:null,restriction:null,multipleSelectionEnabled:false,treeNodeConfig:null,constructor:function(G,J,E){this.levelIndex=G;this.visibleFields=[];var A=null;var F=null;if(valueExists(E)){var P=false;for(var L=0;(L<View.panels.length&&!P);L++){var M=View.panels.items[L];if(M.type=="tree"&&M._panelsData!=null&&M._panelsData.length>0){for(var D=0;D<M._panelsData.length;D++){if(M._panelsData[D].panelId==E.panelId){P=true;A=M._panelsData[D];break}}}}F=View.dataSources.get(E.dataSourceId)}if(valueExists(F)&&valueExists(F.fieldDefs)){this.dataSourceFieldDefs=F.fieldDefs}for(var I=0;I<J.columns.length;I++){var O=J.columns[I].id;var K=true;var B="";var N="";if(K&&valueExists(A)&&valueExists(A.fieldDefs)){for(var H=0;H<A.fieldDefs.length;H++){if(O==A.fieldDefs[H].id&&A.fieldDefs[H].hidden=="true"){K=false;break}if((O==A.fieldDefs[H].id)&&(A.fieldDefs[H].controlType=="color")){B="color";break}if(O==A.fieldDefs[H].id){N=A.fieldDefs[H].legendKey;break}}}if(K&&valueExists(F)&&valueExists(F.fieldDefs)){if(F.fieldDefs.get(O)&&F.fieldDefs.get(O).hidden=="true"){K=false}}if(!K){continue}var C=false;for(var H=0;H<J.primaryKeyIds.length;H++){if(O===J.primaryKeyIds[H]){C=true;break}}this.visibleFields.push({name:O,isPk:C,controlType:B,legendKey:N})}this.pkFields=[];for(var I=0;I<J.primaryKeyIds.length;I++){this.pkFields.push(J.primaryKeyIds[I])}if(valueExists(E)){this.dataSourceId=E.dataSourceId;this.panelId=E.panelId;if(valueExistsNotEmpty(E.cssClassName)){this.cssClassName=E.cssClassName}if(valueExistsNotEmpty(E.cssPkClassName)){this.cssPkClassName=E.cssPkClassName}if(valueExists(E.multipleSelectionEnabled)){this.multipleSelectionEnabled=E.multipleSelectionEnabled}if(valueExists(E.treeNodeConfig)){this.treeNodeConfig=E.treeNodeConfig}this.events=E.events}},addRestriction:function(A){if(this.restriction==null){this.restriction=new Ab.view.Restriction()}this.restriction.addClauses(A,true,false,{addForNullValue:true,addForEmptyValue:true})}});Ab.namespace("tree");Ab.tree.TreeTable=Ab.tree.TreeControl.extend({maxVisibleFields:-1,constructor:function(B,A){this.inherit(B,A);this.maxVisibleFields=this._findMaxVisibleFields()},_findMaxVisibleFields:function(D){var B=-1;for(var D=0;D<this._panelsData.length;D++){var E=this._panelsData[D].fieldDefs;var A=0;for(var C=0;C<E.length;C++){if(E[C].hidden!="true"){A+=1}}if(A>B){B=A}}return B},_createTreeNode:function(B,D,C,A){return new Ab.tree.TreeTableNode(this,B,D,C,A)},_initTree:function(B,I,A,G){if(typeof (B)=="undefined"){return }try{var J=Workflow.call("AbCommonResources-getDataRecords",this._getParameters(B,I,A),120);if(J.code=="executed"){var C=this.getEventListener("afterGetData");if(C){C(this,J.data,A)}var D=document.getElementById(B.panelId+"_msg_no_record");if(D!=null){D.parentNode.removeChild(D)}if(J.data.records.length>0){var E=new Ab.tree.TreeTableLevel(A,J.data,B);E=this.applySidecarToLevel(E);this._addTreeLevel(E);this._addTreeNodes(J,I,E,G);if(this.type=="hierTree"&&this.maxLevel<A){this.maxLevel=A}}else{if(A>0){I.isLeafNode=true}else{var D=document.getElementById(B.panelId);if(D!=null){var H=document.createElement("div");H.id=B.panelId+"_msg_no_record";H.className="instruction";H.innerHTML="<br>"+this.getLocalizedString(this.z_EMPTY_TREE_MESSAGE);D.parentNode.appendChild(H)}}}}else{this.handleError(J)}}catch(F){this.handleError(F)}},_registerNodesEvents:function(A){for(var B=0;B<A.length;B++){this._registerEvents(A[B]);this.addTooltip(A[B])}},addLink:function(D,A){for(var G=0;G<=D.position;G++){var I=D.labelElId+"_"+G;var H=$(I);if(!H||H.className.match(/buttonContainer/)){continue}var F=null;if(valueExists(A)){var B=D.level.events[A]["commands"];var E=D.restriction;F=new Ab.command.commandChain(this.id,E);if(B[0].type=="onClickNode"){F.handle=B[0].handle}F.addCommands(B);H.command=F}var C=function(){D.onLabelClick(D);if(F){if(valueExists(B)&&B[0].type=="onClickNode"){F.handle(B[0].panel,D)}else{F.handle()}}};YAHOO.util.Event.addListener(H,"click",C)}},addTooltip:function(B){for(var A=0;A<B.level.visibleFields.length;A++){var D=B.level.visibleFields[A];if(D.controlType=="image"||D.controlType=="button"){var C=Ext.get(D.controlType+A);if(C&&valueExistsNotEmpty(D.tooltip)){Ext.QuickTips.register({target:C,text:D.tooltip})}}}}});Ab.tree.TreeTableNode=function(B,C,F,E,A){this.treeControl=B;this.level=C;this.tree=B.treeView;this.children=[];this.parent=E;this.restriction=new Ab.view.Restriction();this.init(F,E,A);if((this.treeControl.type=="tree"||this.treeControl.type=="selectValueTree")&&this.level.levelIndex==this.treeControl.maxLevel){this.isLeafNode=true}this.checkElId="ygtvcheck"+this.index;if(this.treeControl.type=="tree"||this.treeControl.type=="hierTree"){var D=0;while(C.events[D]&&!this.hasLabelClickEvent){if(C.events[D]["type"]=="onClickNode"){this.hasLabelClickEvent=true}D++}}};YAHOO.extend(Ab.tree.TreeTableNode,Ab.tree.TreeNode,{getElId:function(){return this.id},refresh:function(){this.loadComplete(true);if(this.hasIcon){var A=this.getToggleEl();if(A){A.className=A.className.replace(/\bygtv[lt][nmp]h*\b/gi,this.getStyle())}}},getEl:function(){return document.getElementById(this.getElId())},getTableElId:function(){return this.treeControl.id+"_ygtvtableel0"},getTableEl:function(){return document.getElementById(this.getTableElId()).tBodies[0]},getDivElId:function(){return this.treeControl.id},getDivEl:function(){return document.getElementById(this.getDivElId())},getToggleElId:function(){return"ygtvt"+this.index},getToggleEl:function(){return document.getElementById(this.getToggleElId())},getHtml:function(){this.childrenRendered=false;var A=[];if(this.parent.isRoot()&&!this.previousSibling){if(!this.isLeafNode||(this.isLeafNode&&!this.previousSibling)){A[A.length]='<table id="'+this.getTableElId()+'" border="0" cellpadding="0" cellspacing="0" class="ygtvtable ygtvdepth'+this.depth;if(this.enableHighlight){A[A.length]=" ygtv-highlight"+this.highlightState}if(this.className){A[A.length]=" "+this.className}A[A.length]=" treeTable";A[A.length]='">'}A[A.length]=this.generateFieldTitles(this.parent)}if(this.isLeafNode){A[A.length]=this.getNodeHtml()}else{A[A.length]=this.getNodeHtml()}if(!this.nextSibling&&!this.isLeafNode){A[A.length]="</table>"}return A.join("")},getChildrenHtml:function(){var A=[];if((this.hasChildren(true)&&this.expanded)||(this.renderHidden&&!this.isDynamic())){A[A.length]=this.renderChildren()}return A.join("")},completeRender:function(){var B=[];B[B.length]=this.generateFieldTitles(this);for(var A=0;A<this.children.length;++A){this.children[A].id=(this.id!=undefined)?this.id+"_"+A:"_"+A;B[B.length]=this.children[A].getHtml()}this.childrenRendered=true;return B.join("")},generateFieldTitles:function(C){var E="";var B=this.treeControl.createEvaluationContext();if(C.children.length>0){var D=C.children[0].level;if(D.showLabels){E+='<tr class="headerRow">';if(D){for(var A=0;A<D.visibleFields.length;A++){E+='<td class="headerCell"';E+=(A==D.visibleFields.length-1)?' colspan="'+(this.treeControl.maxVisibleFields-D.visibleFields.length+1):"";E+='" >';if(A==0){E+=this.createDepthIconsForTitle(C,C.depth+1)}if(D.visibleFields[A].controlType!="button"&&D.visibleFields[A].controlType!="image"){var F=Ab.view.View.evaluateString(D.visibleFields[A].title,B,false);E+='<div class="headerTitleText';E+=(A==0)?" firstTitle":"";E+=(D.visibleFields[A].type=="java.lang.Double"||D.visibleFields[A].type=="java.lang.Integer")?"number":"";E+='">'+F+"</div>"}E+="</td>"}E+="</tr>"}}}return E},createDepthIconsForTitle:function(D,G,E){var F="";var A='<div class="ygtvdepthcell headerDepth floatLeft"></div>';var B='<div class="ygtvblankdepthcell headerBlank floatLeft"></div>';for(var C=0;C<G-1;C++){if(D.children.length>1||C<this.depth){if(D.parent.nextSibling||(C==0)){F+=A}else{F+=B}}}if(!D.isRoot()){if((this.nextSibling)){F+=A}else{F+=B}}F+='<div class="ygtvblankdepthcell headerLastBlank floatLeft"></div>';return F},_removeChildren:function(B){var C;for(var A=B.rows.length-1;A>0;A--){C=B.rows[A];if(this.id+""===C.getAttribute("parent_id")+""){B.deleteRow(C.rowIndex)}}},loadComplete:function(A){var I=YAHOO.util.Dom.get(this.getTableElId());var H=this.completeRender();H=H.replace("<\table>","");H=H.split("</tr>");if(!this.isLeafNode&&(typeof (A)!=="undefined"&&A)){this._removeChildren(I)}for(var E=H.length-2;E>=0;E--){var F=I.rows.namedItem(this.id).rowIndex+1;var J=I.insertRow(F);this.setPropertiesForTag(J,H[E],"tr");var B=new RegExp("<td.*?>(.*?[\\S\\s]*?)</td>","gi");var G=H[E].match(B);if(G){for(var C=0;C<G.length;C++){var D=J.insertCell(C);D.innerHTML=G[C].replace(B,"$1");this.setPropertiesForTag(D,G[C],"td");this.attachListenerToElementByType(D,J,"button");this.attachListenerToElementByType(D,J,"image")}}J.setAttribute("parent_id",this.id)}if(this.propagateHighlightDown){if(this.highlightState===1&&!this.tree.singleNodeHighlight){for(var E=0;E<this.children.length;E++){this.children[E].highlight(true)}}else{if(this.highlightState===0||this.tree.singleNodeHighlight){for(E=0;E<this.children.length;E++){this.children[E].unhighlight(true)}}}}this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=false},attachListenerToElementByType:function(K,M,I){var A=Ext.query("."+I,K);for(var E=0;E<A.length;E++){var F=A[E];if(valueExists(F)&&F.nodeType!=3&&this.children){var D=this.level.levelIndex+1;var B=this.treeControl._panelsData[D];var J=F.id.replace(I,"");var L=M.id.split("_");var G=L[L.length-1];var C=this.tree._nodes[G];var H=B.panelId+"_on"+capitalizeFirst(this.children[0].level.visibleFields[J].name);this.tree.attachListenerToElement(H,F,M,B,C)}}},setPropertiesForTag:function(A,F,B){var E=(B=="tr")?new RegExp('(<tr id=["]?.*?["]?.*?[^>]*>)',"gmi"):new RegExp("(<td.*?>)","gmi");var I=F.match(E);var H=/ (.*?)\=\"(.*?)\"/gi;var G=(I)?I[0].match(H):[];for(var D=0;D<G.length;D++){var C=G[D].split("=");A.setAttribute(trim(C[0].replace(/"/g,"")),C[1].replace(/"/g,""))}},getNodeHtml:function(){var B=[];this.id=this.index;B[B.length]='<tr id="'+this.id+'" class="ygtvrow">';this._createLabel();B[B.length]=this.getContentHtml();B[B.length]="</tr>";var A=B.join("");return A},getContentHtml:function(){var A=[];A[A.length]=this.label;return A.join("")},wrapWithAnchorTag:function(A){var B="<a";this.labelElId="ygtvlabelel"+this.index+"_"+this.position;B+=' id="'+this.labelElId+'"';B+=' class="'+this.labelStyle+' "';if(this.href){B+=' href="'+this.href+'"';B+=' target="'+this.target+'"'}if(this.title){B+=' title="'+this.title+'"'}B+=" >";B+=A;B+="</a>";return B},wrapWithAnchorTagForButton:function(A){var B="<div";this.labelElId="ygtvlabelel"+this.index+"_"+this.position;B+=' id="'+this.labelElId+'"';B+=' class="'+this.labelStyle+' buttonContainer"';if(this.href){B+=' href="'+this.href+'"';B+=' target="'+this.target+'"'}if(this.title){B+=' title="'+this.title+'"'}B+=" >";B+=A;B+="</div>";return B},_createLabel:function(){if(this.hasLabelClickEvent){this.href="javascript:void(0);"}var F="";if(this.level.treeNodeConfig){F=this.getLabelForNodeConfig(this.level)}else{var C=false;for(var B=0;B<this.level.visibleFields.length;B++){var G=(this.level.visibleFields[B].value)?this.level.visibleFields[B].value:this.data[this.level.visibleFields[B].name];var D=this.treeControl._nullValueTextMap[this.level.visibleFields[B].name];if((!valueExists(G)||G=="")&&D!=undefined){G="["+D+"]";C=true}F=this.buildLabelText(F,this.level.visibleFields,B,G,C)}}this.setUpLabel(F);var A=this.level.afterGeneratingTreeNode;var E=this;if(typeof A=="function"){A(this)}for(var B=0;B<this.level.pkFields.length;B++){this.setNodeRestrictions(this.level.pkFields[B])}},getLabelForNodeConfig:function(){var D="";for(var B=0;B<this.level.treeNodeConfig.length;B++){var C=this.level.treeNodeConfig[B];var E=C.text;var A=this.level.cssPkClassName;if(!valueExistsNotEmpty(E)&&valueExistsNotEmpty(C.fieldName)){E=this.data[C.fieldName];if(valueExistsNotEmpty(C.length)){if(E.length>C.length){E=E.substr(0,C.length)+" ..."}}if(valueExistsNotEmpty(C.pkCssClass)){A=(C.pkCssClass=="true")?this.level.cssPkClassName:level.cssClassName}else{if(this.level.pkFields.indexOf(C.fieldName)<0){A=this.level.cssClassName}}}D=this.buildLabelText(D,this.level.treeNodeConfig,B,E,false)}return D},buildLabelText:function(P,D,F,M,N){var K=' id="'+this.contentElId+"_"+F+'" ';this.position=F;var A="<td";var I=(F==0)?"</td>":"</td>";var B=(F==0)?this.createDepthIcons("",this.depth):"";var C=(F==0&&this.hasIcon)?this.createToggleIcon(""):"";var O=(F==0&&this.level.multipleSelectionEnabled)?this.createMultipleSelectionEnabled(""):"";var H=(F==0)?" firstContent":"";var Q=this.getFirstCellStyle(F);var G=(D[F].type=="java.lang.Double"||D[F].type=="java.lang.Integer")?" number":"";if(M!=undefined){if(F>0){P=P+" "}var J=(D[F].controlType=="color");var E=(!this.nextSibling&&F==D.length-1)?this._calculateColSpan():0;var L=(E==0||E==1)?"":' colSpan="'+E+'"';if(J){P=P+A+K+'class="'+this.level.cssClassName+' contentCell colorContent"'+L+">"+B+C+O+this.wrapWithAnchorTag(this.getColorContentHtml(M,D[F],this.data))+I}else{if(D[F].isPk){P=P+A+K+'class="'+this.level.cssPkClassName+H+G+' contentCell"'+L+Q+">"+B+C+O+this.wrapWithAnchorTag(M)+I}else{P=P+A+K+'class="'+this.level.cssClassName+H+G+' contentCell"'+L+Q+">"+B+C+O+this.wrapWithAnchorTag(M)+I}}}else{if(D[F].controlType==="button"){P+=A+K+'class="'+this.level.cssClassName+' contentCell "'+L+">";if(D[F].enabled&&!N){P+=B+C+O;P+=this.wrapWithAnchorTagForButton('<input id="button'+F+'" type="button" class="button mediumAction" value="'+D[F].title+'" name="'+this.level.panelId+"_"+D[F].name+'"/>')}P+=I}else{if(D[F].controlType==="image"){P+=A+K+'class="'+this.level.cssClassName+' contentCell "'+L+">";if(D[F].enabled&&!N){P+=B+C+O;P+=this.wrapWithAnchorTagForButton('<img id="image'+F+'" type="image" class="image" value="'+D[F].title+'" name="'+this.level.panelId+"_"+D[F].name+'" src="'+D[F].imageName+'"/>')}P+=I}}}return P},getFirstCellStyle:function(A){return(A==0)?' style="padding-right: '+16*(this.treeControl.maxLevel+1)+'px"':""},createToggleIcon:function(B){var A="";A+='<div id="'+this.getToggleElId();A+='" class="';A+=this.getStyle();A+=" toggleIcon ";A+=' floatLeft">';A+=B;A+="</div>";return A},createDepthIcons:function(D,C){var B="";for(var A=0;A<C;A++){B+='<div class="'+this.getDepthStyle(A)+'  floatLeft">';B+=D;B+="</div>"}return B},createMultipleSelectionEnabled:function(B){var A="";A+='<div class="';A+=this.contentStyle+' ygtvcontent floatLeft" ';A+=">";A+='<input type="checkbox"';A+=' id="'+this.checkElId+'"';if(!this.parent.isRoot()&&this.parent.isSelected()){this.setCheckState(this.parent.isSelected());A+=" CHECKED "}A+="/>";A+=B;A+="</div>";return A},_calculateColSpan:function(){var B=this.treeControl.maxVisibleFields;var C=this.level.visibleFields.length-1;var A=0;if(B>C){A=B-C}return A},expand:function(C){if(this.isLoading||(this.expanded&&!C)){return }var A=true;if(!C){A=this.tree.onExpand(this);if(false===A){return }A=this.tree.fireEvent("expand",this)}if(false===A){return }if(!this.getEl()){this.expanded=true;return }if(!this.childrenRendered){this.renderChildren()}else{}this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return }if(!this.multiExpand){var D=this.getSiblings();for(var B=0;D&&B<D.length;++B){if(D[B]!=this&&D[B].expanded){D[B].collapse()}}}this.showChildren();A=this.tree.fireEvent("expandComplete",this)},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this)){if(this.hasChildren()){var G=this.getEl().rowIndex+1;var F=this._findStopIndex();var E=F;var J=new Array(this.treeControl.maxLevel+1);var I=this.depth;var B=I;var H=new RegExp(/ygtvtm|ygtvlm/).test(this.getEl().innerHTML);J[I]=H;for(var C=G;C<F;C++){I=this.depth;var A=this.getTableEl().rows[C].innerHTML;if(A.match(/ygtvdepthcell/g)){I=A.match(/ygtvdepthcell/g).length}if(A.match(/ygtvblankdepthcell/g)){I+=A.match(/ygtvblankdepthcell/g).length}if(A.match(/headerCell/g)){I-=1}if(I==B){H=J[I-1];this.getTableEl().rows[C].style.display=(H==false)?"none":""}else{if(I>B){var D=this.getTableEl().rows[C].innerHTML;if(J[I-1]==false){J[I]=false}else{J[I]=new RegExp(/ygtvtm|ygtvlm|ygtvtn|headerCell/).test(D)}H=J[I-1];this.getTableEl().rows[C].style.display=(H==false)?"none":""}else{if(I<B){B=I;H=J[I-1];this.getTableEl().rows[C].style.display=(H==false)?"none":""}}}}}}},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this)){var C=this.getEl().rowIndex+1;var A=this._findStopIndex();for(var B=C;B<A;B++){this.getTableEl().rows[B].style.display="none"}}},_findStopIndex:function(){var A=this.getTableEl().rows.length;if(this.nextSibling){A=this.getTableEl().rows.namedItem(this.nextSibling.id).rowIndex}else{if(this.parent&&this.parent.nextSibling){A=this.getTableEl().rows.namedItem(this.parent.nextSibling.id).rowIndex}else{if(this.parent&&this.parent.parent&&this.parent.parent.nextSibling){A=this._findParentSibling(this.parent)}}}return A},_findParentSibling:function(A){if(A.parent&&A.parent.nextSibling){return this.getTableEl().rows.namedItem(A.parent.nextSibling.id).rowIndex}else{this._findParentSibling(A.parent)}},onLabelClick:function(C){var B=Ext.get(C.labelElId+"_"+C.position);if(B){B.parent().parent().addClass("selectedTreeNode")}if(this.treeControl.lastNodeClicked!=null&&this.treeControl.lastNodeClicked!=C){var A=Ext.get(this.treeControl.lastNodeClicked.labelElId+"_"+this.treeControl.lastNodeClicked.position);if(A){A.parent().parent().removeClass("selectedTreeNode")}}this.treeControl.lastNodeClicked=C},highlightNode:function(A){var B=Ext.get(this.treeControl.lastNodeClicked.labelElId+"_"+this.treeControl.lastNodeClicked.position);if(B){var C=B.parent().parent();if(A==false){C.removeClass("selectedTreeNode")}else{C.addClass("selectedTreeNode")}}}});Ab.tree.TreeTableLevel=Ab.tree.TreeLevel.extend({showLabels:true,constructor:function(F,H,C){this.levelIndex=F;this.visibleFields=[];var A=null;var D=null;if(valueExists(C)){var K=false;for(var I=0;(I<View.panels.length&&!K);I++){var J=View.panels.items[I];if(J.type=="tree"&&J._panelsData!=null&&J._panelsData.length>0){for(var B=0;B<J._panelsData.length;B++){if(J._panelsData[B].panelId==C.panelId){K=true;A=J._panelsData[B];this.showLabels=A.showLabels;break}}}}D=View.dataSources.get(C.dataSourceId)}if(valueExists(D)&&valueExists(D.fieldDefs)){this.dataSourceFieldDefs=D.fieldDefs}if(C.fieldDefs.length>0){this._findVisibleFieldsFromPanel(A,D,H)}else{this._findVisibleFieldsFromDs(D,A,H)}this.pkFields=[];for(var E=0;E<H.primaryKeyIds.length;E++){this.pkFields.push(H.primaryKeyIds[E])}if(valueExists(C)){this.dataSourceId=C.dataSourceId;this.panelId=C.panelId;if(valueExistsNotEmpty(C.cssClassName)){this.cssClassName=C.cssClassName}if(valueExistsNotEmpty(C.cssPkClassName)){this.cssPkClassName=C.cssPkClassName}if(valueExists(C.multipleSelectionEnabled)){this.multipleSelectionEnabled=C.multipleSelectionEnabled}if(valueExists(C.treeNodeConfig)){this.treeNodeConfig=C.treeNodeConfig}this.events=C.events;var G=this._getControllerFunction(A.panelId+"_onClickNode");if(G){this.events.push({type:"onClickNode",commands:[{type:"onClickNode",handle:G,panel:C}]})}this.afterGeneratingTreeNode=this._getControllerFunction(A.panelId+"_afterGeneratingTreeNode")}},createEvaluationContext:function(){var A={view:Ab.view.View,panel:this};for(name in Ab.view.View.evaluationContext){A[name]=Ab.view.View.evaluationContext[name]}return A},_getControllerFunction:function(B){var A=null;View.controllers.each(function(C){A=C[B];if(A){if(!A.call){A=window[A]}}});return A},afterGeneratingTreeNode:function(A){},_findVisibleFieldsFromPanel:function(A,E,I){var N=this.createEvaluationContext();for(var G=0;G<A.fieldDefs.length;G++){var J=true;var C="";var M=A.fieldDefs[G].id;var L=A.fieldDefs[G].legendKey;var K=Ab.view.View.evaluateBoolean(A.fieldDefs[G].hidden,N,false);if(K){continue}if(J){if(A.fieldDefs[G].controlType=="button"||A.fieldDefs[G].controlType=="image"){C=A.fieldDefs[G].controlType}else{for(var H=0;H<I.columns.length;H++){if(M==I.columns[H].id&&A.fieldDefs[G].hidden=="true"){J=false;break}}if(A.fieldDefs[G].controlType=="color"){C=A.fieldDefs[G].controlType}}}if(J&&valueExists(E)&&valueExists(E.fieldDefs)){if(E.fieldDefs.get(M)&&E.fieldDefs.get(M).hidden=="true"){J=false}}if(!J){continue}var D=false;for(var F=0;F<I.primaryKeyIds.length;F++){if(M===I.primaryKeyIds[F]){D=true;break}}var B={name:M,isPk:D,controlType:C,legendKey:L};if(C=="image"){B.tooltip=A.fieldDefs[G].tooltip?A.fieldDefs[G].tooltip:A.fieldDefs[G].title}if(C=="button"&&A.fieldDefs[G].tooltip){B.tooltip=A.fieldDefs[G].tooltip}if(C=="image"&&!(A.fieldDefs[G].title)){B.title=""}else{B.title=(A.fieldDefs[G].title)?A.fieldDefs[G].title:E.fieldDefs.get(M).title}if(A.fieldDefs[G].imageName!=""){B.imageName=A.fieldDefs[G].imageName}if(A.fieldDefs[G].type!=""){B.type=A.fieldDefs[G].type}if(A.fieldDefs[G].value!=""){B.value=A.fieldDefs[G].value}B.enabled=Ab.view.View.evaluateBoolean(A.fieldDefs[G].enabled,N,true);this.visibleFields.push(B)}},_findVisibleFieldsFromDs:function(D,A,F){for(var G=0;G<F.columns.length;G++){var I=F.columns[G].id;var H=true;var B="";if(H&&valueExists(A)&&valueExists(A.fieldDefs)){for(var E=0;E<A.fieldDefs.length;E++){if(I==A.fieldDefs[E].id&&A.fieldDefs[E].hidden=="true"){H=false;break}if((I==A.fieldDefs[E].id)&&(A.fieldDefs[E].controlType=="color")){B=A.fieldDefs[E].controlType;break}}}if(H&&valueExists(D)&&valueExists(D.fieldDefs)){if(D.fieldDefs.get(I)&&D.fieldDefs.get(I).hidden=="true"){H=false}}if(!H){continue}var C=false;for(var E=0;E<F.primaryKeyIds.length;E++){if(I===F.primaryKeyIds[E]){C=true;break}}title=D.fieldDefs.get(I).title;this.visibleFields.push({name:I,isPk:C,controlType:B,title:title})}}});YAHOO.widget.TreeView.prototype._getEventTargetTdEl=function(B){var C=YAHOO.util.Event.getTarget(B);if(C&&(C.tagName.toUpperCase()=="DIV"&&YAHOO.util.Dom.hasClass(C,"floatLeft"))){}else{while(C&&!(C.tagName.toUpperCase()=="TD"&&YAHOO.util.Dom.hasClass(C.parentNode,"ygtvrow"))){C=YAHOO.util.Dom.getAncestorByTagName(C,"td")}}if(YAHOO.lang.isNull(C)){return null}if(/\bygtv(blank)?depthcell/.test(C.className)){return null}if(C.id){var A=C.id.match(/\bygtv([^\d]*)(.*)/);if(A&&A[2]&&this._nodes[A[2]]){return C}}return null};YAHOO.widget.TreeView.prototype.attachListenerToElement=function(C,D,E,A,B){View.controllers.each(function(F){var H=F;var G=F[C];if(G){if(!G.call){G=window[G];H=window}var I=function(){B.onLabelClick(B);G.call(H,D,A,B)};Ext.get(D).addListener("click",I)}})};YAHOO.widget.TreeView.prototype.focus=function(){var D=false,A=this;if(this.tree.currentFocus){this.tree.currentFocus._removeFocus()}var B=function(E){if(E.parent){B(E.parent);E.parent.expand()}};B(this);var C=null;if(A.getEl()!=null){C=A.getEl().firstChild}YAHOO.util.Dom.getElementsBy(function(E){return(/ygtv(([tl][pmn]h?)|(content))/).test(E.className)},"td",C,function(F){YAHOO.util.Dom.addClass(F,YAHOO.widget.TreeView.FOCUS_CLASS_NAME);if(!D){var E=F.getElementsByTagName("a");if(E.length){E=E[0];E.focus();A._focusedItem=E;Event.on(E,"blur",function(){A.tree.fireEvent("focusChanged",{oldNode:A.tree.currentFocus,newNode:null});A.tree.currentFocus=null;A._removeFocus()});D=true}}A._focusHighlightedItems.push(F)});if(D){this.tree.fireEvent("focusChanged",{oldNode:this.tree.currentFocus,newNode:this});this.tree.currentFocus=this}else{this.tree.fireEvent("focusChanged",{oldNode:A.tree.currentFocus,newNode:null});this.tree.currentFocus=null;this._removeFocus()}return D};YAHOO.widget.RootNode.prototype.refresh=function(){if(this.hasIcon){var A=this.getToggleEl();if(A){A.className=A.className.replace(/\bygtv[lt][nmp]h*\b/gi,this.getStyle())}}};Ab.grid.SelectValue=Ab.grid.MiniConsole.extend({selectValueListener:null,fieldNames:null,selectFieldNames:null,visibleFieldNames:null,visibleFields:null,actionListener:null,selectValueType:null,form:null,addNewDialog:null,showNullFilters:false,showAddNewButton:null,constructor:function(H){this.window=H;var L=Ab.view.View.selectValueParameters;this.form=View.getControl("",L.formId);this.fieldNames=L.fieldNames;if(valueExists(L.visibleFields)){this.visibleFields=L.visibleFields;this.visibleFieldNames=new Array();for(var F=0,C;C=L.visibleFields[F];F++){this.visibleFieldNames.push(C.fieldName)}L.visibleFieldNames=this.visibleFieldNames}else{this.visibleFieldNames=L.visibleFieldNames}this.selectFieldNames=L.selectFieldNames;this.selectValueType=L.selectValueType;this.actionListener=L.actionListener;this.showNullFilters=L.showNullFilters;if(valueExists(L.addNewDialog)){this.addNewDialog=L.addNewDialog}var M=this.createEvaluationContext();this.showAddNewButton=Ab.view.View.evaluateBoolean(L.showAddNewButton,M,(this.addNewDialog!=null));var I=this.getLocalizedString(Ab.grid.SelectValue.z_TITLE_DEFAULT_TITLE);var J=I+" - "+L.title;H.setTitle(J);var K=this.getConvertedFilterValues(L);var D=L.visibleFieldNames.concat(L.selectFieldNames);L.restriction=this.evaluateRestrictionBindings(L.restriction);var G=new Ab.view.ConfigObject();G.setConfigParameter("buttonsPosition","footer");G.setConfigParameter("viewDef",new Ab.view.ViewDef(null,0,L.selectTableName,toJSON(D)));G.setConfigParameter("sortColumnID",L.visibleFieldNames[0]);G.setConfigParameter("indexColumnID",L.showIndex?L.visibleFieldNames[0]:"");G.setConfigParameter("restriction",L.restriction);G.setConfigParameter("refreshWorkflowRuleId",L.workflowRuleId);G.setConfigParameter("groupIndex",0);G.setConfigParameter("cssClassName",null);G.setConfigParameter("showOnLoad",true);G.setConfigParameter("selectionEnabled",true);G.setConfigParameter("useParentRestriction",false);G.setConfigParameter("recordLimit",L.recordLimit);G.setConfigParameter("applyVpaRestrictions",L.applyVpaRestrictions);if(valueExists(L.sortValues)){G.setConfigParameter("sortValues",L.sortValues)}else{if(valueExists(L.sortFields)){G.setConfigParameter("sortFields",L.sortFields)}}if(this.selectValueType==="multiple"){G.setConfigParameter("multipleSelectionEnabled",true);G.setConfigParameter("filterValues",K)}else{G.setConfigParameter("multipleSelectionEnabled",false);G.setConfigParameter("filterValues",K)}this.selectValueListener=this.afterSelectValue.createDelegate(this);this.isDistinct=true;this.inherit(H.body.id,G);this.isCollapsed=false;if(valueExists(L.sortValues)){var B=[];var E=Ext.util.JSON.decode(L.sortValues);for(var F=0;F<E.length;F++){B.push({fieldName:E[F].fieldName,ascending:true})}this.sortColumns=B;this.sortColumnOrder=true}else{if(valueExists(L.sortFields)){var B=[];for(var F=0;F<L.sortFields.length;F++){B.push({fieldName:L.sortFields[F].fieldName,ascending:L.sortFields[F].sortAscending})}this.sortColumns=B;this.sortColumnOrder=true}}if(this.addNewDialog!=null){this.addAction({id:"addNew",text:this.getLocalizedString(Ab.grid.SelectValue.z_TITLE_ADD_NEW),tooltip:this.getLocalizedString(Ab.grid.SelectValue.z_TOOLTIP_ADD_NEW),enabled:this.showAddNewButton.toString(),listener:this.onAddNew.createDelegate(this)})}if(this.selectValueType==="multiple"){this.selectionAcrossPagesEnabled=true;if(!this.actionbar){new Ab.view.Actionbar(H.body.id,this)}this.addAction({id:"saveSelected",text:this.getLocalizedString(Ab.grid.SelectValue.z_TITLE_SAVE_SELECTED),tooltip:this.getLocalizedString(Ab.grid.SelectValue.z_TOOLTIP_SAVE_SELECTED),enabled:"${this.getSelectedGridRows().length > 0}",listener:this.onSaveSelected.createDelegate(this)});this.addAction({id:"clear",text:this.getLocalizedString(Ab.grid.SelectValue.z_TITLE_CLEAR),tooltip:this.getLocalizedString(Ab.grid.SelectValue.z_TOOLTIP_CLEAR),enabled:"${this.getSelectedGridRows().length > 0}",listener:this.onClear.createDelegate(this)});this.addEventListener("onMultipleSelectionChange",this.onMultipleSelectionChange.createDelegate(this))}this.displaySelectValueRecords(K);if(this.selectValueType==="multiple"){this.displayInitialSelection()}this.actions.each(function(N){N.forceDisable(false)});this.showIndexAndFilter();this.setDivBodyHeight(this.determineDivBodyHeight());this.resizeColumnWidths();if(this.useScroller()){this.updateScroller()}var A=this;this.window.on("resize",function(P,O,N){A.updateHeight()})},addColumnsFromData:function(C){for(var A=0;A<this.visibleFieldNames.length;A++){var D=this.visibleFieldNames[A];for(var B=0;B<C.columns.length;B++){if(C.columns[B].id===D){this.addColumn(C.columns[B]);break}}}},getConvertedFilterValues:function(E){var D={};if(E.applyFilter&&valueExists(E.filterValues)){var F=[];var A=[];for(var B=0;B<E.selectFieldNames.length&&B<E.fieldNames.length;B++){if(E.fieldNames[B].indexOf("_lookupFor_")<0){F.push(E.fieldNames[B]);A.push(E.selectFieldNames[B])}}for(var B=0;B<A.length&&B<F.length;B++){var H=F[B];var C=A[B];var G=E.filterValues[H];if(B<=F.length-1&&valueExistsNotEmpty(G)&&(F.length>1||G.indexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR)>0)){G='"'+G+'"'}if(valueExistsNotEmpty(G)&&G.indexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR)>0){if(G.indexOf('"')>=0){G=G.replace(/, \u200C/gi,'","');G="{"+G+"}"}else{G=G.replace(/, \u200C/gi,",");G="{"+G+"}"}}D[C]=G}}return D},useScroller:function(){return true},calculateDivBodyHeight:function(){var A=this.inherit();if(!this.hasNoRecords&&!View.useScroller()){A-=this.scrollbarFactor}return A},evaluateRestrictionBindings:function(A){if(valueExistsNotEmpty(A)&&typeof (A)=="string"&&A.indexOf("{")!=-1){var B=this.createEvaluationContext();if(!valueExistsNotEmpty(B.record)&&this.form){B.record=this.form.getRecord().values}var C="~1R~";var E="";var D="{sql";if(A.indexOf(D)!=-1){E=A.substring(A.indexOf(D)-1,A.indexOf(D));A=A.split(E+D).join(C)}A=Ab.view.View.evaluateString(A,B);if(A.indexOf(C)!=-1){A=A.split(C).join(E+D)}}return A},displaySelectValueRecords:function(G){this.initialDataFetch();var D=false;if(this.rows.length==1||(this.showNullFilters==true&&this.rows.length<=3)){if(this.form&&this.selectValueType==="multiple"){if(valueExistsNotEmpty(this.form.getFieldValue(trim(this.fieldNames[this.fieldNames.length-1])))){for(var A=0,J;J=this.rows[A];A++){this.selectionModel.add(J)}}}D=true;if(this.selectValueType!="multiple"){for(var B in G){var F=G[B];var E=this.rows[0][B];if(F!==E&&(this.showNullFilters==false||(F!=="NULL"&&F!=="NOT NULL"))){D=false;break}}}else{for(var C=0,I;I=this.selectFieldNames[C];C++){var F=G[I];if(F==null){D=false;break}}}}if(D){if(this.primaryKeyIds.length>0){var H=this.primaryKeyIds[this.primaryKeyIds.length-1];this.setFilterValue(H,"")}else{this.clearAllFilterValues()}this.refresh()}this.showIndexAndFilter();this.updateHeight()},onInitialDataFetch:function(I){var B=I.data.columns;var G=[];for(var F=0;F<B.length;F++){var A=B[F];var D=false;for(var E=0;E<this.visibleFieldNames.length;E++){if(A.id==trim(this.visibleFieldNames[E])){D=true;break}}if(D){G.push(A);for(var H=0,C;valueExists(this.visibleFields)&&(C=this.visibleFields[H]);H++){if(A.id==trim(C.fieldName)&&valueExists(C.title)){A.name=C.title;break}}}}I.data.columns=G;this.inherit(I)},addNullFilterRows:function(){var C={};C[this.visibleFieldNames[0]]="NULL";C[this.visibleFieldNames[0].key]="NULL";var A={};A[this.visibleFieldNames[0]]="NOT NULL";A[this.visibleFieldNames[0].key]="NOT NULL";var D=0;this.rows.splice(D++,0,C);this.rows.splice(D++,0,A);for(var B=D;B<this.rows.length;B++){this.rows[B].index=this.rows[B].index+1}this.updateHeader();this.reloadGrid()},beforeBuild:function(){this.inherit();if(this.selectValueListener!=null){for(var B=0;B<this.columns.length;B++){var A=this.columns[B];if(A.type=="text"||A.type=="number"){A.type="link";A.defaultActionHandler=this.selectValueListener}}}},displayInitialSelection:function(){if(this.form){var H=trim(this.fieldNames[this.fieldNames.length-1]);var F=trim(this.selectFieldNames[this.fieldNames.length-1]);var C=true;var A=[];for(var E=0;E<this.fieldNames.length-1;E++){var G=this.fieldNames[E];if(C){C=this.form.hasFieldMultipleValues(G)}if(this.form.hasFieldMultipleValues(G)){var B=this.form.getFieldMultipleValues(G);A.push(B)}else{var B=[];B.push(this.form.getFieldValue(G));A.push(B)}}var D=[];if(this.form.hasFieldMultipleValues(H)){D=this.form.getFieldMultipleValues(H);A.push(D)}else{if(this.selectValueType==="multiple"&&this.form.getFieldValue(H)){var D=[];D.push(this.form.getFieldValue(H));A.push(D)}}this.selectMatchingRows(A,D,C)}this.onMultipleSelectionChange()},selectMatchingRows:function(K,E,B){var F=0;var P=this.selectFieldNames.slice(0,-1);var D=this.selectFieldNames[this.fieldNames.length-1];for(var A=0,O;O=this.rows[A];A++){var M=true;for(var G=0;G<P.length;G++){var J=false;var I=K[G];if(I){var N=O.row.getFieldValue(P[G]);for(var L=0;L<I.length;L++){if(I[L]===N){J=true;break}}if(!J){M=false}}}var H=false;var C=K[K.length-1];if(C){var N=O.row.getFieldValue(D);for(var L=0;L<C.length;L++){if(C[L]===N){H=true;break}}}if(M&&H){this.updateSelectionModel(O,true,true);F++}}if(this.actionbar){if(this.rows.length===0){this.actionbar.updateSelected(0)}else{if(F!==0){this.actionbar.updateSelected(F)}else{if(B){this.actionbar.updateSelected(E.length)}else{this.actionbar.updateSelected(0)}}}}},onMultipleSelectionChange:function(){var A=this.getAllSelectedRows();this.enableAction("saveSelected",A.length>0);this.enableAction("clear",A.length>0)},onAddNew:function(){var A=Ab.view.View.selectValueParameters;var B=A.title;View.openDialog(this.addNewDialog,null,false,{x:100,y:100,width:550,height:400,title:this.getLocalizedString(Ab.grid.SelectValue.z_TITLE_ADD_NEW)+" "+B,useAddNewSelectVDialog:true,closeButton:false})},onSaveSelected:function(){var A=this.getAllSelectedRows();this.saveSelected(A)},onClear:function(){var A=[];this.saveSelected(A)},afterSelectValue:function(B){var A=[];A.push(B);this.saveSelected(A)},afterRefresh:function(){this.inherit();if(this.showNullFilters){this.addNullFilterRows()}},saveSelected:function(O){for(var F=0;F<this.selectFieldNames.length&&F<this.fieldNames.length;F++){var K=trim(this.fieldNames[F]);var P=trim(this.selectFieldNames[F]);var H="";var E="";var C=[];var B=false;var G={};for(var A=0;A<O.length;A++){var J=(valueExists(O[A][P+".key"]))?O[A][P+".key"]:O[A][P];var D=(valueExists(O[A][P+".raw"]))?O[A][P+".raw"]:"";var N=O[A];if(E.length+J.length>Ab.grid.SelectValue.MAX_VALUE_LENGTH){B=true;break}if(!valueExists(G[J])){G[J]=J;H+=J;E+=D;H+=Ab.form.Form.MULTIPLE_VALUES_SEPARATOR;E+=Ab.form.Form.MULTIPLE_VALUES_SEPARATOR;C.push(N)}}var I=Ab.form.Form.MULTIPLE_VALUES_SEPARATOR.length;if(H.lastIndexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR)==H.length-I){H=H.slice(0,H.length-I)}if(E.lastIndexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR)==E.length-I){E=E.slice(0,E.length-I)}var L=this.saveSelectedValue.createDelegate(this,[K,H,E,C]);if(B){var M=this.getLocalizedString(Ab.grid.SelectValue.z_MESSAGE_MAX_VALUE_LENGTH_1)+" "+A+" "+this.getLocalizedString(Ab.grid.SelectValue.z_MESSAGE_MAX_VALUE_LENGTH_2);View.alert(M,function(){L()})}else{L()}}View.closeDialog()},determineHeight:function(D){var A=0;var E=this.getParentElementId();if(!valueExists(D)){D=this.parentEl}var B=Ext.get(D).parent().getHeight();var C=this.getTitlebarHeight();A=B-C-2;return A},saveSelectedValue:function(G,D,C,A){var F=null;var B=null;if(this.form){F=this.form.getFieldElement(G);if(F){B=F.value}}var H=true;var E=this.actionListener;if(E!=null&&E!=""&&typeof (E)!="undefined"){if(!E.call){E=window[E]}if(E.call){var I=E.call(window,G,D,B,C,A);if(typeof (I)=="boolean"){H=I}}}if(H&&F&&valueExists(D)){this.form.setFieldValue(G,D,null,false);this.form.setFieldTooltip(G,D);afm_form_values_changed=true}}},{MAX_VALUE_LENGTH:124,z_TITLE_DEFAULT_TITLE:"Select Value",z_TITLE_SAVE_SELECTED:"Save Selected",z_TITLE_CLEAR:"Clear",z_TOOLTIP_SAVE_SELECTED:"Save selected values into the field",z_TOOLTIP_CLEAR:"Clear all values from the field",z_MESSAGE_MAX_VALUE_LENGTH_1:"You have selected too many values. Only the first",z_MESSAGE_MAX_VALUE_LENGTH_2:"values will be used. <br/>To include all records in the search do not select any values for this field.",z_MESSAGE_DATE_FORMAT_ERROR:"Date format error",z_MESSAGE_DATE_FORMAT_ERROR_DETAILS:"Selected date is not in expected format:",z_MESSAGE_DIFFERENT_PARENT_VALUES:"Can not save.  Parent values must be the same for all selected records.",z_TITLE_ADD_NEW:"Add New",z_TOOLTIP_ADD_NEW:"Add new select values"});Ab.tree.SelectValueTree=Ab.tree.TreeControl.extend({selectValueListener:null,selectTableName:null,visibleFieldNames:null,filterValues:null,_getParameters:function(C,J,A){var L={tableName:this.selectTableName,fieldNames:toJSON(this.visibleFieldNames),treeType:this.type,treeLevel:A};if(this.filterValues!=null){var G=new Array();for(var K in this.filterValues){var F=this.filterValues[K];if(valueExists(F)){var B=Ab.view.View.preferences.hierarchy_delim;if(!valueExistsNotEmpty(B)){B="|"}F=F.split(B)[0]}G.push({fieldName:K,filterValue:F})}L.filterValues=toJSON(G)}var D=new Ab.view.Restriction();if(this.restriction&&this.restriction.clauses!=undefined&&this.restriction.clauses.length>0){if(this.type=="selectValueTree"){for(var E=0;E<this.visibleFieldNames.length;E++){var H=this.restriction.findClause(this.visibleFieldNames[E]);if(H){D.clauses.push(H)}}}else{D.addClauses(this.restriction,true)}}if(this.type!="selectValueTree"){var I=this.getRestrictionForLevel(A);if(I&&I.clauses!=undefined&&I.clauses.length>0){D.addClauses(I,true)}}if(!J.isRoot()){D.addClauses(J.restriction,true)}if(D.clauses!=undefined&&D.clauses.length>0){L.restriction=toJSON(D)}else{if(this.restriction&&(this.restriction.clauses==undefined||this.restriction.clauses.length<=0)){if(toJSON(this.restriction)!="{}"){L.restriction=this.restriction}}}if(this.recordLimit!=-1){L.recordLimit=this.recordLimit}return L},_initTree:function(B,D,H){if(typeof (B)=="undefined"){return }var A=null;try{A=Workflow.call("AbCommonResources-getDataRecords",this._getParameters(B,D,H),120)}catch(G){this.handleError(G)}if(A.code=="executed"){var F=this.getEventListener("afterGetData");if(F){F(this,A.data,H)}if(H==0&&this.type=="selectValueTree"){this.maxLevel=A.data.primaryKeyIds.length-1}if(B!=null&&B.panelId!=null){var E=document.getElementById(B.panelId+"_msg_no_record");if(E!=null){E.parentNode.removeChild(E)}}if(A.data.records.length>0){var C=new Ab.tree.TreeLevel(H,A.data,B);this._addTreeLevel(C);this._addTreeNodes(A,D,C);if(this.type=="selectValueHierTree"&&this.maxLevel<H){this.maxLevel=H}}else{if(H==0&&B!=null&&B.panelId!=null){var E=document.getElementById(B.panelId);if(E!=null){divNode=document.createElement("div");divNode.id=B.panelId+"_msg_no_record";divNode.className="instruction";divNode.innerHTML="<br>"+this.getLocalizedString(this.z_EMPTY_TREE_MESSAGE);E.parentNode.appendChild(divNode)}}}}else{this.handleError(A)}},_registerEvents:function(A){if(this.selectValueListener!=""&&((this.type=="selectValueTree"&&A.isLeafNode)||this.type=="selectValueHierTree")){YAHOO.util.Event.addListener(A.getLabelEl(),"click",this.selectValueListener,A)}},_loadNodeData:function(B,A){var D=B.level.levelIndex+1;if(B.treeControl.type=="selectValueTree"&&D>B.treeControl.maxLevel){B.isLeafNode=true}if(!B.isLeafNode){B.treeControl._initTree(null,B,D)}A();for(var C=0;C<B.children.length;C++){B.treeControl._registerEvents(B.children[C])}},constructor:function(dialog){var parameters=Ab.view.View.selectValueParameters;var defaultTitle=this.getLocalizedString(Ab.tree.SelectValueTree.z_TITLE_SELECT_VALUE);dialog.setTitle(defaultTitle+" - "+parameters.title);var configObject=new Ab.view.ConfigObject();this.inherit(dialog.body.id,configObject);this.type=(parameters.selectValueType==="tree")?"selectValueTree":"selectValueHierTree";this.visibleFieldNames=parameters.visibleFieldNames;this.selectTableName=parameters.selectTableName;this.selectValueListener=afterSelectValueTree;this.isDistinct=true;this.isCollapsed=false;if(parameters.restriction){this.restriction=new Ab.view.Restriction();try{this.restriction.addClauses(eval("("+parameters.restriction+")"),true)}catch(e){this.restriction=parameters.restriction}}if(valueExists(parameters.applyFilter)&&parameters.applyFilter==="true"){var convertedFilterValues={};for(var i=0;i<parameters.selectFieldNames.length&&i<parameters.fieldNames.length;i++){var fieldName=parameters.fieldNames[i];var selectedFieldName=parameters.selectFieldNames[i];var filterValue=parameters.filterValues[fieldName];if(valueExists(filterValue)){convertedFilterValues[selectedFieldName]=filterValue}}this.filterValues=convertedFilterValues}if(valueExists(parameters.recordLimit)){this.recordLimit=parameters.recordLimit}this.addEventListenerFromConfig("afterGetData",configObject);if(!this.getEventListener("afterGetData")){this.addEventListener("afterGetData",this.afterGetData)}this.initialDataFetch();var tree=this;dialog.on("resize",function(window,width,height){tree.updateHeight()})}},{z_TITLE_SELECT_VALUE:"Select Value"});function afterSelectValueTree(J,B){var N=Ab.view.View.selectValueParameters;var A=Ab.view.View.getControl("",N.formId);var I=Ab.view.View.getOpenerWindow();for(var F=0;F<N.selectFieldNames.length&&F<N.fieldNames.length;F++){var M=N.fieldNames[F];var E=N.selectFieldNames[F];var H=B.getPrimaryKeyValue(E);if(H===""){H=B.data[E]}var D=B;while(H==undefined&&D.parent!=null){D=D.parent;if(!D.isRoot()){H=D.getPrimaryKeyValue(E);if(H===""){H=D.data[E]}}}var C=null;if(A!=null){var L=A.getFieldElement(M);if(L!=null){C=L.value}}var O=true;var K=N.actionListener;var G=window;if(K!=null&&K!=""&&typeof (K)!="undefined"){if(!K.call){K=G[K]}if(!valueExists(K)||!K.call){G=I;K=G[K]}if(K.call){var P=K.call(G,M,H,C);if(typeof (P)=="boolean"){O=P}}}if(O&&L!=null&&valueExists(H)){A.setFieldValue(M,H,null,false);I.afm_form_values_changed=true}}Ab.view.View.closeDialog()}Ab.view.DataViewLevel=Base.extend({dataSourceId:"",bodyTemplate:"bodyTemplate",bodyXTemplate:null,getData:null,getNextLevelRestriction:null,nextLevel:null,dataView:null,constructor:function(A){Ext.apply(this,A);this.bodyXTemplate=Ab.view.DataView.getTemplate(this.bodyTemplate)},getDataSource:function(){return View.dataSources.get(this.dataSourceId)},refresh:function(A){var C=this.getDataSource();if(C){var B=C.getRecords(A);this.setRecords(B)}},setRecords:function(A){for(var C=0;C<A.length;C++){this.dataView.renderRecord(A[C],this.getDataSource(),this.getData,this.bodyXTemplate);if(this.nextLevel){var B=null;if(valueExists(this.getNextLevelRestriction)){B=this.getNextLevelRestriction(A[C])}else{B=A[C].toRestriction()}this.nextLevel.refresh(B)}}}});Ab.view.DataView=Base.extend({panel:null,body:null,id:"",dataSourceId:"",levels:null,buffer:null,parentPanel:null,evaluationContext:null,headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",headerXTemplate:null,footerXTemplate:null,getHeaderData:null,getFooterData:null,constructor:function(E,A){this.id=E;Ext.apply(this,A);this.levels=[];if(valueExists(A.levels)&&A.levels.length>0){for(var B=0;B<A.levels.length;B++){var D=new Ab.view.DataViewLevel(A.levels[B]);D.dataView=this;this.levels.push(D)}for(var B=0;B<this.levels.length-1;B++){var D=this.levels[B];var C=this.levels[B+1];D.nextLevel=C}}else{var D=new Ab.view.DataViewLevel(A);D.dataView=this;this.levels.push(D)}if(valueExistsNotEmpty(this.headerTemplate)){this.headerXTemplate=Ab.view.DataView.getTemplate(this.headerTemplate)}if(valueExistsNotEmpty(this.footerTemplate)){this.footerXTemplate=Ab.view.DataView.getTemplate(this.footerTemplate)}this.body=new Ext.Panel({border:false});this.panel=new Ext.Panel({border:false,renderTo:this.id,autoHeight:true,autoWidth:true,autoScroll:true,items:[this.body]});this.parentPanel=View.panels.get(this.id);if(this.parentPanel&&this.parentPanel.setContentPanel){this.parentPanel.setContentPanel(this.panel)}},getContentBuffer:function(){return this.buffer},refresh:function(A){this.renderBegin();this.levels[0].refresh(A);this.renderEnd()},setRecords:function(A){this.renderBegin();this.levels[0].setRecords(A);this.renderEnd()},renderBegin:function(){this.evaluationContext={};if(this.parentPanel){this.evaluationContext=this.parentPanel.createEvaluationContext()}this.buffer='<table cellspacing="0" class="dataView">';if(this.headerTemplate){var B={};if(this.getHeaderData){B=this.getHeaderData()}var A=this.headerXTemplate.apply(B);A=View.evaluateString(A,this.evaluationContext);this.buffer=this.buffer+A}},renderRecord:function(B,G,A,F){var D=B.values;if(G){D=G.formatValues(D,true)}this.evaluationContext.record=D;var E=B;if(A){E=A(E)}var C=F.apply(E);C=View.evaluateString(C,this.evaluationContext);this.buffer=this.buffer+C},renderEnd:function(){if(this.footerTemplate){var B={};if(this.getFooterData){B=this.getFooterData()}var A=this.footerXTemplate.apply(B);A=View.evaluateString(A,this.evaluationContext);this.buffer=this.buffer+A}this.buffer=this.buffer+"</table>";this.body.body.dom.innerHTML="";Ext.DomHelper.append(this.body.body,this.buffer)},renderClear:function(){this.body.body.dom.innerHTML=""}},{getTemplate:function(D){var B="";var C=Ext.get(D);if(C){var A=C.child("table");if(A){B=A.dom.innerHTML}else{B=C.dom.innerHTML}C.remove()}return new Ext.XTemplate(B)}});Ab.view.DataViewPanel=Ab.view.Component.extend({dataView:null,constructor:function(B,A){this.inherit(B,"dataView",A);this.showOnLoad=A.getConfigParameter("showOnLoad",false);this.dataView=new Ab.view.DataView(B,A)},initialDataFetch:function(){if(this.showOnLoad||this.restriction!=null){this.refresh();this.show(true)}},doRefresh:function(){this.dataView.refresh(this.restriction)},clear:function(){this.dataView.renderClear()}});Ab.view.CrossTable=Ab.view.Component.extend({viewDef:null,showOnLoad:false,refreshWorkflowRuleId:"",afterRefreshListener:null,groupByFields:null,calculatedFields:null,dataSet:null,dataType:"",clickable:true,rowDimensionDataSourceId:"",columnDimensionDataSourceId:"",rowDataSource:null,columnDataSource:null,rowMeasureFields:null,clickableId:null,scrollbarFactor:20,hasScroller:false,constructor:function(F,C){this.inherit(F,"crossTable",C);this.clickableId=this.id;this.viewDef=new Ab.view.ViewDef(C.getConfigParameter("viewDef"),C.getConfigParameter("groupIndex"),null,null,C.getConfigParameter("dataSourceId"));this.columns=C.getConfigParameter("columns",1);this.showOnLoad=C.getConfigParameter("showOnLoad",false);this.refreshWorkflowRuleId=C.getConfigParameterNotEmpty("refreshWorkflowRuleId",Ab.view.CrossTable.WORKFLOW_RULE_REFRESH);this.fieldDefs=C.getConfigParameter("fieldDefs",[]);this.addEventListenerFromConfig("afterGetData",C);var D=[];var B=[];this.getDataSource().fieldDefs.each(function(G){if(G.groupBy){D.push(G)}else{B.push(G)}});this.groupByFields=D;this.calculatedFields=B;this.rowDimensionDataSourceId=C.getConfigParameter("rowDimensionDataSourceId","");this.columnDimensionDataSourceId=C.getConfigParameter("columnDimensionDataSourceId","");var E=[];if(valueExistsNotEmpty(this.rowDimensionDataSourceId)){this.rowDataSource=View.dataSources.get(this.rowDimensionDataSourceId);var A=true;this.rowDataSource.fieldDefs.each(function(G){if(A){A=false}else{E.push(G)}})}if(valueExistsNotEmpty(this.columnDimensionDataSourceId)){this.columnDataSource=View.dataSources.get(this.columnDimensionDataSourceId)}this.rowMeasureFields=E;this.dataType=(this.groupByFields.length==2)?"2d":"1d";this.visible=true;this.parentEl.addClass("AbMdx_Table")},getEl:function(){var B=this.inherit();var A=Ext.get(this.getWrapperElementId());if(A){B=A.child(".crossTable")}return B},useScroller:function(){this.hasScroller},isScrollInLayout:function(){return !this.useScroller()},getScrollableEl:function(){return null},initialDataFetch:function(){this.clickable=(this.getEventListener("onClickItem"))?true:false;if(this.showOnLoad||this.restriction!=null){this.getDataSet(true)}this.show(this.showOnLoad)},refresh:function(A){if(typeof (A)!="undefined"&&A!=null&&A!=""){this.restriction=A}this.getDataSet(false)},afterGetData:function(A){var B=this.getEventListener("afterGetData");if(B){B(this,A)}},clear:function(){var B=this.parentElementId+"_table";var A=Ext.get(B);if(A!=null){A.remove()}},setDataSet:function(A){this.clear();this.dataSet=A;this.formatDataRecords();this.onModelUpdate()},formatDataRecords:function(A){var B=this.getDataSource();if(valueExists(B)){var C=function(D){if(valueExists(D)){for(var E=0;E<D.length;E++){var F=B.formatCurrencyValues(D[E].localizedValues,false);Ext.apply(D[E].localizedValues,F)}}};if(valueExists(this.dataSet.records)){C(this.dataSet.records)}if(valueExists(this.dataSet.columnSubtotals)){C(this.dataSet.columnSubtotals)}if(valueExists(this.dataSet.rowSubtotals)){C(this.dataSet.rowSubtotals)}if(valueExists(this.dataSet.totals)){C(this.dataSet.totals)}}},onModelUpdate:function(){this.clear();var F=this.parentElementId+"_table";var D='<table id="'+F+'" class="AbMdx_Table">';if(this.dataType=="1d"){D=D+this.render1D()}else{D=D+this.render2D()}D=D+"</table>";var E=Ext.DomHelper.insertHtml("afterBegin",this.parentElement,D);var A=this;var B=Ext.DomQuery.select("a",E);var G=this.getEventListener("onClickItem");for(var C=0;C<B.length;C++){if(G){Ext.get(B[C]).addListener("click",function(){A.onClickItem(this.id)})}}},showTotals:function(){showTotals=false;for(var A=0;A<this.calculatedFields.length;A++){if(this.calculatedFields[A].showTotals){showTotals=true;break}}if(this.dataSet.totals.length==0){showTotals=false}return showTotals},render1D:function(){var D="";var G=this.getLocalizedString(Ab.view.CrossTable.z_MESSAGE_TOTALS);D=D+'<tr class="first">';D=D+'<td class="AbMdx_DimensionNames first">'+convertFromXMLValue(this.groupByFields[0].title)+"</td>";for(var C=0;C<this.rowMeasureFields.length;C++){D=D+'<td class="AbMdx_DimensionNames">'+convertFromXMLValue(this.rowMeasureFields[C].title)+"</td>"}for(var C=0;C<this.calculatedFields.length;C++){D=D+'<td class="AbMdx_DimensionColumnHeader">'+convertFromXMLValue(this.calculatedFields[C].title)+"</td>"}D=D+"</tr>";if(this.showTotals()){D=D+"<tr>";D=D+'<td class="AbMdx_TotalCellHeader first">'+G+"</td>";for(var C=0;C<this.rowMeasureFields.length;C++){D=D+'<td class="AbMdx_SubTotalRowData"></td>'}for(var C=0;C<this.calculatedFields.length;C++){var B=this.dataSet.totals[0].getLocalizedValue(this.calculatedFields[C].id);if(!this.calculatedFields[C].showTotals){B=""}this.clickableId=this.calculatedFields[C].id+";"+this.id;D=D+'<td class="AbMdx_SubTotalRowData">'+this.getTotalsHtml(B)+"</td>"}D=D+"</tr>"}for(var A=0;A<this.dataSet.records.length;A++){var E=this.dataSet.records[A];var J=this.dataSet.rowValues[A].l;var H=this.dataSet.rowRecords[A];D=D+'<tr class="'+((A%2==0)?"dataRow":"dataRow odd")+'">';D=D+'<td class="AbMdx_DimensionRowHeader first">'+this.getRowHtml(A,J)+"</td>";for(var F=0;F<this.rowMeasureFields.length;F++){this.clickableId=this.rowMeasureFields[F].id+";"+this.id;var I=H.getLocalizedValue(this.rowMeasureFields[F].id);D=D+'<td class="AbMdx_MeasureCellData">'+this.getCellHtml(A,0,F,I)+"</td>"}for(var F=0;F<this.calculatedFields.length;F++){this.clickableId=this.calculatedFields[F].id+";"+this.id;var I=E.getLocalizedValue(this.calculatedFields[F].id);D=D+'<td class="AbMdx_MeasureCellData">'+this.getCellHtml(A,0,F,I)+"</td>"}D=D+"</tr>"}return D},render2D:function(){var I="";var F=this.getLocalizedString(Ab.view.CrossTable.z_MESSAGE_TOTALS);var W=this.getNumberOfRowDimensionFields();var A=this.rowMeasureFields.length;var H=this.calculatedFields.length;I=I+'<tr class="first">';I=I+'<td class="AbMdx_DimensionNames first" colspan="'+(W+A+1)+'"><br/></td>';I=I+'<td class="AbMdx_DimensionNames" colspan="'+(this.dataSet.columnValues.length+1)+'">'+convertFromXMLValue(this.groupByFields[1].title)+"</td>";I=I+"</tr>";I=I+"<tr>";I=I+'<td class="AbMdx_DimensionNames first">'+convertFromXMLValue(this.groupByFields[0].title)+"</td>";if(W>1){I=I+'<td  class="AbMdx_DimensionNames"></td>'}for(var R=0;R<A;R++){I=I+'<td class="AbMdx_DimensionNames">'+convertFromXMLValue(this.rowMeasureFields[R].title)+"</td>"}I=I+'<td class="AbMdx_DimensionNames"><br/></td>';if(this.showTotals()){I=I+'<td class="AbMdx_TotalCellHeader">'+F+"</td>"}for(var V=0;V<this.dataSet.columnValues.length;V++){var L=this.dataSet.columnValues[V].l;I=I+'<td class="AbMdx_DimensionColumnHeader">'+this.getColumnHtml(V,L)+"</td>"}I=I+"</tr>";if(this.showTotals()){var E=this.dataSet.totals[0].getLocalizedValue(this.calculatedFields[0].id);if(!this.calculatedFields[0].showTotals){E=""}I=I+"<tr>";I=I+'<td class="AbMdx_TotalCellHeader first" rowspan="'+this.calculatedFields.length+'">'+F+"</td>";for(var R=0;R<A;R++){I=I+'<td class="AbMdx_TotalCellData"></td>'}this.clickableId=this.calculatedFields[0].id+";"+this.id;I=I+'<td class="AbMdx_MeasureName">'+convertFromXMLValue(this.calculatedFields[0].title)+"</td>";I=I+'<td class="AbMdx_TotalCellData">'+this.getTotalsHtml(E)+"</td>";for(var V=0;V<this.dataSet.columnValues.length;V++){var N=this.dataSet.columnSubtotals[V];var J="";if(valueExists(N)&&this.calculatedFields[0].showTotals){J=this.dataSet.columnSubtotals[V].getLocalizedValue(this.calculatedFields[0].id)}I=I+'<td class="AbMdx_SubTotalColumnData">'+this.getColumnTotalsHtml(V,J)+"</td>"}I=I+"</tr>";for(var T=1;T<this.calculatedFields.length;T++){E=this.dataSet.totals[0].getLocalizedValue(this.calculatedFields[T].id);if(!this.calculatedFields[T].showTotals){E=""}I=I+"<tr>";for(var R=0;R<A;R++){I=I+'<td class="AbMdx_TotalCellData"></td>'}this.clickableId=this.calculatedFields[T].id+";"+this.id;I=I+'<td class="AbMdx_MeasureName">'+convertFromXMLValue(this.calculatedFields[T].title)+"</td>";I=I+'<td class="AbMdx_TotalCellData">'+this.getTotalsHtml(E)+"</td>";for(var V=0;V<this.dataSet.columnValues.length;V++){var J="";if(this.calculatedFields[T].showTotals&&this.dataSet.columnSubtotals[V]){J=this.dataSet.columnSubtotals[V].getLocalizedValue(this.calculatedFields[T].id)}I=I+'<td class="AbMdx_SubTotalColumnData">'+this.getColumnTotalsHtml(V,J)+"</td>"}I=I+"</tr>"}}var D=0;for(var K=0;K<this.dataSet.rowValues.length;K++){var B=this.dataSet.rowValues[K].l;var S=this.dataSet.rowValues[K].n;var M=this.dataSet.rowRecords[K];var U=this.calculatedFields[0];this.clickableId=U.id+";"+this.id;I=I+'<tr class="'+((D++%2==0)?"dataRow":"dataRow odd")+'">';var C=B.indexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR);if(C>=0&&W>1){var Q=B.slice(0,C);var O=B.slice(C+1);I=I+'<td class="AbMdx_DimensionRowHeader first" rowspan="'+this.calculatedFields.length+'">'+this.getRowHtml(K,Q)+"</td>";I=I+'<td class="AbMdx_DimensionRowHeader" rowspan="'+this.calculatedFields.length+'">'+this.getRowHtml(K,O)+"</td>"}else{I=I+'<td class="AbMdx_DimensionRowHeader first" rowspan="'+this.calculatedFields.length+'">'+this.getRowHtml(K,B)+"</td>"}for(var T=0;T<A;T++){var P=M.getLocalizedValue(this.rowMeasureFields[T].id);I=I+'<td class="AbMdx_DimensionRowHeader" style="font-weight:normal;" rowSpan="'+this.calculatedFields.length+'">'+this.getCellHtml(K,0,T,P,false)+"</td>"}I=I+'<td class="AbMdx_MeasureColumn">'+convertFromXMLValue(U.title)+"</td>";if(this.showTotals()){var J=this.dataSet.rowSubtotals[K].getLocalizedValue(U.id);if(!U.showTotals){J=""}I=I+'<td class="AbMdx_SubTotalRowData">'+this.getRowTotalsHtml(K,J)+"</td>"}for(var V=0;V<this.dataSet.columnValues.length;V++){var G=this.dataSet.columnValues[V].n;var P=this.getCellValue(S,G,U);I=I+'<td class="AbMdx_MeasureCellData">'+this.getCellHtml(K,V,0,P)+"</td>"}I=I+"</tr>";for(var T=1;T<this.calculatedFields.length;T++){U=this.calculatedFields[T];this.clickableId=U.id+";"+this.id;I=I+'<tr class="'+((D++%2==0)?"dataRow":"dataRow odd")+'">';I=I+'<td class="AbMdx_MeasureColumn">'+convertFromXMLValue(U.title)+"</td>";if(this.showTotals()){var J=this.dataSet.rowSubtotals[K].getLocalizedValue(U.id);if(!U.showTotals){J=""}I=I+'<td class="AbMdx_SubTotalRowData">'+this.getRowTotalsHtml(K,J)+"</td>"}for(var V=0;V<this.dataSet.columnValues.length;V++){var G=this.dataSet.columnValues[V].n;var P=this.getCellValue(S,G,U);I=I+'<td class="AbMdx_MeasureCellData">'+this.getCellHtml(K,V,T,P)+"</td>"}I=I+"</tr>"}}return I},getNumberOfRowDimensionFields:function(){var A=1;if(this.dataSet.rowValues.length>0){var C=this.dataSet.rowValues[0].l;var B=C.indexOf(Ab.form.Form.MULTIPLE_VALUES_SEPARATOR);if(B>=0){A=2}}return A},getCellValue:function(C,E,B){var D=this.getLocalizedString(Ab.view.CrossTable.z_MESSAGE_NODATA);var A=this.dataSet.getRecordForRowAndColumn(C,E);if(valueExists(A)){D=A.getLocalizedValue(B.id)}return D},getTotalsHtml:function(A){return this.getItemHtml(this.clickableId+"_totals",A)},getRowHtml:function(A,B){return this.getItemHtml(this.clickableId+"_row_r"+A,B)},getRowTotalsHtml:function(A,B){return this.getItemHtml(this.clickableId+"_rowTotals_r"+A,B)},getColumnHtml:function(B,A){return this.getItemHtml(this.clickableId+"_column_c"+B,A)},getColumnTotalsHtml:function(B,A){return this.getItemHtml(this.clickableId+"_columnTotals_c"+B,A)},getCellHtml:function(B,E,D,C,A){if(!valueExists(A)){A=this.clickable}return this.getItemHtml(this.clickableId+"_cell_r"+B+"_c"+E+"_f"+D,C,A)},getItemHtml:function(C,B,A){if(!valueExists(A)){A=this.clickable}if(A){return('<a id="'+C+'" href="javascript: //">'+B+"</a>")}else{return('<span id="'+C+'">'+B+"</span>")}},onClickItem:function(id){var listener=this.getEventListener("onClickItem");if(listener){var restriction=this.getRestrictionFromId(id);var parameters=this.getParameters();var parameterRestriction=eval("("+parameters.restriction+")");if(typeof (parameterRestriction)!="undefined"&&parameterRestriction!=null&&parameterRestriction!=""){for(name in parameterRestriction){if(name!="clauses"&&name.indexOf(".")>0&&parameterRestriction[name]){restriction.addClause(name,parameterRestriction[name],"=")}}}if(this.restriction!=null&&this.restriction.constructor!=String){restriction.addClauses(this.restriction,false,true)}if(listener.call){listener(this,restriction)}else{listener.restriction=restriction;listener.handle()}}},getRestrictionFromId:function(A){var C=new Ab.view.Restriction();A=this.parsedClickableId(A);if(A.indexOf("_rowTotals")==0){var F=A.slice(12);var I=(this.dataSet.nullValueTitle==this.dataSet.rowValues[F].n)?"":this.dataSet.rowValues[F].n;var H=this.groupByFields[0].id;this.addRestrictionClause(C,H,I)}else{if(A.indexOf("_row")==0){var F=A.slice(6);var I=this.dataSet.rowValues[F].n;var H=this.groupByFields[0].id;this.addRestrictionClause(C,H,I)}else{if(A.indexOf("_columnTotals")==0){var E=A.slice(15);var G=this.dataSet.columnValues[E].n;var B=this.groupByFields[1].id;this.addRestrictionClause(C,B,G)}else{if(A.indexOf("_column")==0){var E=A.slice(9);var G=this.dataSet.columnValues[E].n;var B=this.groupByFields[1].id;this.addRestrictionClause(C,B,G)}else{if(A.indexOf("_cell")==0){var D=A.slice(6).split("_");var F=D[0].slice(1);var I=(this.dataSet.nullValueTitle==this.dataSet.rowValues[F].n)?"":this.dataSet.rowValues[F].n;var H=this.groupByFields[0].id;this.addRestrictionClause(C,H,I);if(valueExists(this.dataSet.columnValues)){var E=D[1].slice(1);var G=this.dataSet.columnValues[E].n;var B=this.groupByFields[1].id;this.addRestrictionClause(C,B,G)}}}}}}return C},parsedClickableId:function(A){var C=A;var B=C.split(";");if(B.length===1){C=B[0]}else{C=B[1]}C=C.replace(this.id,"");return C},getClickedFieldName:function(A){var B=A.split(";");if(B.length>1){return B[0]}return null},getCellElement:function(E,C,A){var D=this.calculatedFields[A].id+";"+this.id+"_cell_r"+E+"_c"+C+"_f"+A;var B=Ext.get(D);if(B!=null){return B.dom}return null},addRestrictionClause:function(A,B,C){if(C.indexOf("no value")!=-1){A.addClause(B,"","IS NULL")}else{A.addClause(B,C,"=")}},getDataSet:function(B){if(this.refreshWorkflowRuleId!==Ab.view.CrossTable.WORKFLOW_RULE_REFRESH){this.getData();return }this.beforeRefresh();try{var D="";if(this.restriction!=null){D=toJSON(this.restriction)}var A=Workflow.startJob("AbCommonResources-DataSourceService-getGroupingDataSet",this.viewDef.viewName,this.viewDef.dataSourceId,this.rowDimensionDataSourceId,this.columnDimensionDataSourceId,this.dataType,this.getGroupByFieldNames(),this.getDataSource().sortFieldDefs,D,this.parameters);var E=this.getLocalizedString(Ab.view.CrossTable.z_MESSAGE_WORKING);var C=this;View.openJobProgressBar(E,A,null,function(G){C.afterGetData(G.dataSet);C.setDataSet(G.dataSet);C.show(true);if(!B){C.afterRefresh()}},function(G){C.handleError(G)})}catch(F){C.handleError(F)}},getData:function(B){this.beforeRefresh();try{var A=Ab.workflow.Workflow.call(this.refreshWorkflowRuleId,this.getParameters());if(valueExists(A.dataSet)){this.afterGetData(A.dataSet);this.setDataSet(A.dataSet);this.show(true);if(!B){this.afterRefresh()}}}catch(C){this.handleError(C)}},getParameters:function(){var A={viewName:this.viewDef.viewName,dataSourceId:this.viewDef.dataSourceId,rowDimensionDataSourceId:this.rowDimensionDataSourceId,columnDimensionDataSourceId:this.columnDimensionDataSourceId,dataType:this.dataType,groupByFieldNames:toJSON(this.getGroupByFieldNames()),sortFieldDefs:toJSON(this.getDataSource().sortFieldDefs),recordLimit:-1};if(this.restriction!=null){A.restriction=toJSON(this.restriction)}Ext.apply(A,this.parameters);return A},getGroupByFieldNames:function(){var A=[];for(var B=0;B<this.groupByFields.length;B++){A.push(this.groupByFields[B].id)}return A},callReportJob:function(B){var C=B.outputType;if(C==="xls"){var A=this.title;if(A==""){A=Ab.view.View.title}return this.callXLSReportJob(A,this.restriction)}else{if(C==="docx"){View.showMessage("error","DOCX action is NOT supported for a Cross-table panel.")}}return null},callXLSReportJob:function(C,B){var E=this.viewDef.viewName+".axvw";var D=this.getParameters();var A=Workflow.startJob(Ab.view.CrossTable.WORKFLOW_RULE_XLS_REPORT,E,this.dataSourceId,this.dataType,C,this.groupByFields,this.calculatedFields,this.getDataSource().sortFieldDefs,this.rowDimensionDataSourceId,this.columnDimensionDataSourceId,this.rowMeasureFields,toJSON(B),D);return A}},{z_MESSAGE_TOTALS:"Total",z_MESSAGE_WORKING:"Retrieving the data",z_MESSAGE_NODATA:"",WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecords",WORKFLOW_RULE_XLS_REPORT:"AbSystemAdministration-generatePaginatedReport-generateCrossTabXLSReport",MIN_SCROLLING_HEIGHT:30});Ab.namespace("flash");Ab.flash.FlashComponent=Ab.view.Component.extend({isIE:(navigator.appVersion.indexOf("MSIE")!=-1)?true:false,isWin:(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false,isOpera:(navigator.userAgent.indexOf("Opera")!=-1)?true:false,swfPath:"ArchibusSwf",bgColor:"#dddddd",constructor:function(C,B,A){this.inherit(C,B,A);this.swfPath=A.getConfigParameter("swf","abDrawing");this.bgColor=A.getConfigParameter("bgcolor","#dddddd")},flashAppLoaded:function(){},flashDocLoaded:function(){},runContent:function(){var B=this.AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");var A=this.generateEmbedObjectTag(B.objAttrs,B.params,B.embedAttrs);this.injectFlashTag(A)},returnContent:function(){var A=this.AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return this.generateEmbedObjectTag(A.objAttrs,A.params,A.embedAttrs)},generateEmbedObjectTag:function(F,E,B,G,A){var D="";if(this.isIE&&this.isWin&&!this.isOpera){D+="<object ";for(var C in F){D+=C+'="'+F[C]+'" '}D+=">";for(var C in E){D+='<param name="'+C+'" value="'+E[C]+'" /> '}D+='<param name="wmode" value="transparent"/>';D+="</object>"}else{D+="<embed ";for(var C in B){D+=C+'="'+B[C]+'" '}D+=' wmode="opaque"> </embed>'}return D},injectFlashTag:function(A){if(valueExists(this.parentEl)){var C=this.parentEl.last();if(C&&(C.dom.tagName.toLowerCase()==="embed"||C.dom.tagName.toLowerCase()==="object")){this.parentEl.dom.innerHTML=A}else{try{if(this.parentEl.last()){Ext.DomHelper.insertHtml("afterBegin",C.dom,A)}else{Ext.DomHelper.insertHtml("afterBegin",this.parentEl.dom,A)}}catch(B){this.parentEl.dom.innerHTML=A}}View.log("Flash control ["+this.id+"]: loading SWF content","debug")}},afterInitialDataFetch:function(){this.syncHeight.defer(100,this,[this.parentEl])},ControlVersion:function(){var A;var B;var C;try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");A=B.GetVariable("$version")}catch(C){}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");A="WIN 6,0,21,0";B.AllowScriptAccess="always";A=B.GetVariable("$version")}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A=B.GetVariable("$version")}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A="WIN 3,0,18,0"}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");A="WIN 2,0,0,11"}catch(C){A=-1}}return A},GetSwfVer:function(){var G=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var F=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var A=navigator.plugins["Shockwave Flash"+F].description;var E=A.split(" ");var C=E[2].split(".");var H=C[0];var B=C[1];var D=E[3];if(D==""){D=E[4]}if(D[0]=="d"){D=D.substring(1)}else{if(D[0]=="r"){D=D.substring(1);if(D.indexOf("d")>0){D=D.substring(0,D.indexOf("d"))}}}var G=H+"."+B+"."+D}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){G=4}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){G=3}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){G=2}else{if(this.isIE&&this.isWin&&!this.isOpera){G=this.ControlVersion()}}}}}return G},DetectFlashVer:function(F,D,C){versionStr=this.GetSwfVer();if(versionStr==-1){return false}else{if(versionStr!=0){if(this.isIE&&this.isWin&&!this.isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",")}else{versionArray=versionStr.split(".")}var E=versionArray[0];var A=versionArray[1];var B=versionArray[2];if(E>parseFloat(F)){return true}else{if(E==parseFloat(F)){if(A>parseFloat(D)){return true}else{if(A==parseFloat(D)){if(B>=parseFloat(C)){return true}}}}}return false}}},AC_AddExtension:function(B,A){if(B.indexOf("?")!=-1){return B.replace(/\?/,A+"?")}else{return B+A}},AC_GetArgs:function(B,E,G,D,H){var A=new Object();A.embedAttrs=new Object();A.params=new Object();A.objAttrs=new Object();for(var C=0;C<B.length;C=C+2){var F=B[C].toLowerCase();switch(F){case"classid":break;case"pluginspage":A.embedAttrs[B[C]]=B[C+1];break;case"src":case"movie":B[C+1]=this.AC_AddExtension(B[C+1],E);A.embedAttrs.src=B[C+1];A.params[G]=B[C+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":A.objAttrs[B[C]]=B[C+1];break;case"id":case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":A.embedAttrs[B[C]]=A.objAttrs[B[C]]=B[C+1];break;default:A.embedAttrs[B[C]]=A.params[B[C]]=B[C+1]}}A.objAttrs.classid=D;if(H){A.embedAttrs.type=H}return A}});Ab.namespace("drawing");var jsAccessFromFlex=null;var dwgControlId="";Ab.drawing.DrawingControl=Ab.flash.FlashComponent.extend({z_MESSAGE_BORDER_HIGHLIGHTS:"Border Highlights",z_MESSAGE_ROOM_HIGHLIGHTS:"Room Highlights",z_MESSAGE_HIGHLIGHTS:"Highlights",z_MESSAGE_LABELS:"Labels",z_MESSAGE_TB_SELECT:"Select",z_MESSAGE_TB_PAN:"Pan",z_MESSAGE_TB_ZOOMWINDOW:"Zoom Window",z_MESSAGE_TB_ZOOMIN:"Zoom In",z_MESSAGE_TB_ZOOMOUT:"Zoom out",z_MESSAGE_TB_ZOOMEXTENTS:"Zoom Extents",z_MESSAGE_TB_AUTOCENTER:"Center",z_MESSAGE_TB_ISO:"Isometric",z_MESSAGE_TB_RESETASSETS:"Reset Assets",z_MESSAGE_TB_CLEARASSETS:"Clear Assets",z_MESSAGE_TB_ZOOMWINDOW:"Zoom Window",z_MESSAGE_TB_MULTISELECT:"Multiple Rooms Selection",z_MESSAGE_TB_DRAWLINE:"Draw Line",z_MESSAGE_TB_DRAWRECT:"Draw Rectangle",z_MESSAGE_TB_DRAWARROW:"Draw Arrow",z_MESSAGE_TB_DRAWPOSITIONMARKER:"Draw Position Marker",z_MESSAGE_TB_DRAWTEXT:"Draw Text",z_MESSAGE_TB_UNDOREDLINE:"Undo Last Redline",z_MESSAGE_TB_CLEARREDMARKS:"Clear Redmarks",z_MESSAGE_PROMPT_ERROR:"Error",z_MESSAGE_PROMPT_NODOC:"No document specified to load",z_MESSAGE_PROMPT_UNABLETOLOAD:"Unable to load",z_MESSAGE_PROMPT_SELECTEDROOM:"Selected room",z_MESSAGE_PROMPT_ALREADYASSIGNEDTO:"already assigned to",z_MESSAGE_PROMPT_NONE:"None",z_DRAWING_PRINTING:"It will take a moment to export the drawing, do you want to continue?",z_MESSAGE_PROMPT_LEAVEREDMARKSINVISIBLE:"Some of the redlines you created are currently not visible on the drawing view and will not be printed. Do you still want to continue?",z_MESSAGE_FILTER:"Filter:",z_MESSAGE_BORDERS:"Borders:",z_MESSAGE_TOOLTIP_LEGEND:"Legend",z_MESSAGE_TOOLTIP_MINIMIZE:"Minimize",Z_MESSAGE_TOOLTIP_MAXIMIZE:"Maximize",z_MESSAGE_TOOLTIP_FILTER_COLUMN:"Filters the first column.",z_MESSAGE_TOOLTIP_FILTER:"Filter",z_MESSAGE_PLEASE_WAIT:"Please wait...",ver:"18.10.00.06",swf:"abDrawing",application:"abDrawing",bgColor:"#dddddd",onLoadDcl:null,onLoadOpts:null,roomToHighlight:null,highlightDataSource:"",labelsDataSource:"",highlightDataSourcePanel:"",labelsDataSourcePanel:"",highlightType:"",thematicHighlightStyle:"",projectionType:"tiled",columnsGroupedBy:"",borderHighlightLegendPanel:"",legendPanel:"",legendPanelDs:"",legendPanelSelectable:false,initialData:"",multiple:"",assetTypes:"",selectionMode:"2",assignMode:"0",multipleSelectionEnabled:true,nofillField:"",nofillValues:null,toolbarSettings:"",dwgConfig:null,labelSelector:true,highlightSelector:true,showLegendOverlay:false,bordersHighlightSelector:false,highlightFilterSelector:false,currentHighlightDS:"",currentBordersHighlightDS:null,currentHighlightFilterDS:null,currentHighlightRestriction:null,currentLabelsDS:"",initialized:false,legendCtrlInit:false,dwgLoaded:false,noneTxt:"None",ruleSets:null,instructs:null,_delim:";",_draggableAssets:[],_displayDiagonalSelectionPattern:false,optionalPKFields:null,redmarksEnabled:false,zoomToRoom:false,liteDisplay:true,constructor:function(B,A){jsAccessFromFlex=this;this.inherit(B,"drawing",A);this.swf=A.getConfigParameter("swf","abDrawing");this.application=A.getConfigParameter("application","abDrawing");this.bgColor=A.getConfigParameter("bgColor","#dddddd");this.highlightDataSource=A.getConfigParameter("highlightDataSource","");this.labelsDataSource=A.getConfigParameter("labelsDataSource","");this.highlightType=A.getConfigParameter("highlightType","");this.thematicHighlightStyle=A.getConfigParameter("thematicHighlightStyle","");this.projectionType=A.getConfigParameter("projectionType","tiled");this.columnsGroupedBy=A.getConfigParameter("columnsGroupedBy","");this.assetTypes=A.getConfigParameter("assetTypes","");this.legendPanel=A.getConfigParameter("legendPanel","");this.borderHighlightLegendPanel=A.getConfigParameter("borderHighlightLegendPanel","");this.initialData=A.getConfigParameter("initialData","");this.multiple=A.getConfigParameter("multiple","");this.selectionMode=A.getConfigParameter("selectionMode","2");this.multipleSelectionEnabled=A.getConfigParameter("multipleSelectionEnabled","true");this.assignMode=A.getConfigParameter("assignMode","0");this.toolbarSettings=A.getConfigParameter("toolbarSettings","");this.bordersHighlightSelector=A.getConfigParameter("bordersHighlightSelector","false");this.highlightFilterSelector=A.getConfigParameter("highlightFilterSelector","false");this.showLegendOverlay=A.getConfigParameter("showLegendOverlay",false);this.highlightSelector=A.getConfigParameter("highlightSelector","true");this.labelSelector=A.getConfigParameter("labelSelector","true");if(!valueExistsNotEmpty(this.selectionMode)){this.selectionMode="2"}this.initConfig();this.localize();this.currentHighlightDS=this.highlightDataSource;this.currentLabelsDS=this.labelsDataSource;this.addEventListenerFromConfig("afterResize",A)},initConfig:function(){AdminService.getDrawingControlConfig({callback:function(B){var A=jsAccessFromFlex;A.dwgConfig=B;gAcadColorMgr.setAssignedInitConfig(B.highlights);gAcadColorMgr.setUnassignedInitConfig(B.highlights);gAcadColorMgr.setSelectedInitConfig(B.highlights);gAcadColorMgr.setNoFillInitConfig(B.highlights);var E=new Array();E[0]="0x"+gAcadColorMgr.getRGB(B.highlights.assigned.fill.color,true,true);var C=1;for(var D=0;D<B.autoAssignColors.length;D++){if(B.autoAssignColors[D].toLowerCase()!=E[0].toLowerCase()){E[C]=B.autoAssignColors[D];C++}}gAcadColorMgr.setAutoAssignColors(E);gAcadColorMgr.setIdealLabelTextSize(B.idealLabelTextSize);gAcadColorMgr.setMinimumLabelTextSize(B.minimumLabelTextSize);gAcadColorMgr.setShrinkLabelTextToFit(B.shrinkLabelTextToFit)},errorHandler:function(A,B){Ab.view.View.showException(B)}})},beforeUnload:function(){this.clear()},getDrawingControl:function(){if(FABridge.abDrawing&&FABridge.abDrawing.root()){return FABridge.abDrawing.root()}else{this.getDrawingControl.defer(100)}},localize:function(){this.noneTxt=this.getLocalizedString(this.z_MESSAGE_PROMPT_NONE)},localizeFlash:function(){var A=new Object();A.TB_SELECT=this.getLocalizedString(this.z_MESSAGE_TB_SELECT);A.TB_PAN=this.getLocalizedString(this.z_MESSAGE_TB_PAN);A.TB_ZOOMWINDOW=this.getLocalizedString(this.z_MESSAGE_TB_ZOOMWINDOW);A.TB_ZOOMIN=this.getLocalizedString(this.z_MESSAGE_TB_ZOOMIN);A.TB_ZOOMOUT=this.getLocalizedString(this.z_MESSAGE_TB_ZOOMOUT);A.TB_ZOOMEXTENTS=this.getLocalizedString(this.z_MESSAGE_TB_ZOOMEXTENTS);A.TB_AUTOCENTER=this.getLocalizedString(this.z_MESSAGE_TB_AUTOCENTER);A.TB_ISO=this.getLocalizedString(this.z_MESSAGE_TB_ISO);A.TB_RESETASSETS=this.getLocalizedString(this.z_MESSAGE_TB_RESETASSETS);A.TB_CLEARASSETS=this.getLocalizedString(this.z_MESSAGE_TB_CLEARASSETS);A.TB_ZOOMWINDOW=this.getLocalizedString(this.z_MESSAGE_TB_ZOOMWINDOW);A.TB_MULTISELECT=this.getLocalizedString(this.z_MESSAGE_TB_MULTISELECT);A.TB_DRAWLINE=this.getLocalizedString(this.z_MESSAGE_TB_DRAWLINE);A.TB_DRAWRECT=this.getLocalizedString(this.z_MESSAGE_TB_DRAWRECT);A.TB_DRAWARROW=this.getLocalizedString(this.z_MESSAGE_TB_DRAWARROW);A.TB_DRAWPOSITIONMARKER=this.getLocalizedString(this.z_MESSAGE_TB_DRAWPOSITIONMARKER);A.TB_DRAWTEXT=this.getLocalizedString(this.z_MESSAGE_TB_DRAWTEXT);A.TB_UNDOREDLINE=this.getLocalizedString(this.z_MESSAGE_TB_UNDOREDLINE);A.TB_CLEARREDMARKS=this.getLocalizedString(this.z_MESSAGE_TB_CLEARREDMARKS);A.PROMPT_ERROR=this.getLocalizedString(this.z_MESSAGE_PROMPT_ERROR);A.PROMPT_NODOC=this.getLocalizedString(this.z_MESSAGE_PROMPT_NODOC);A.PROMPT_UNABLETOLOAD=this.getLocalizedString(this.z_MESSAGE_PROMPT_UNABLETOLOAD);A.PROMPT_SELECTEDROOM=this.getLocalizedString(this.z_MESSAGE_PROMPT_SELECTEDROOM);A.PROMPT_ALREADYASSIGNEDTO=this.getLocalizedString(this.z_MESSAGE_PROMPT_ALREADYASSIGNEDTO);A.TOOLTIP_MINIMIZE=this.getLocalizedString(this.z_MESSAGE_TOOLTIP_MINIMIZE);A.TOOLTIP_MAXIMIZE=this.getLocalizedString(this.Z_MESSAGE_TOOLTIP_MAXIMIZE);A.TOOLTIP_FILTER_COLUMN=this.getLocalizedString(this.z_MESSAGE_TOOLTIP_FILTER_COLUMN);A.TOOLTIP_FILTER=this.getLocalizedString(this.Z_MESSAGE_TOOLTIP_FILTER);A.MESSAGE_PLEASE_WAIT=this.getLocalizedString(this.z_MESSAGE_PLEASE_WAIT);return A},getContainerElementId:function(){return this.parentElementId+"_container"},initialDataFetch:function(){this.appendDatasourceSelectors();FABridge.addInitializationCallback(this.application,this.initAfterLoad);if(window.addEventListener){var B=(navigator.userAgent.indexOf("Firefox")!=-1)?"DOMMouseScroll":"mousewheel";window.addEventListener(B,handleWheel,false);dwgControlId=this.application}var C='<div id="'+this.getContainerElementId()+'"></div>';if(this.parentEl.first()){Ext.DomHelper.insertHtml("afterEnd",this.parentEl.first().dom,C)}else{Ext.DomHelper.insertHtml("afterBegin",this.parentEl.dom,C)}var A=View.contextPath+"/schema/ab-core/controls/drawing/"+this.swf;this.runContent("src",A,"width","100%","height","100%","align","middle","id",this.application,"quality","high","bgcolor",this.bgColor,"name",this.application,"flashvars","bridgeName="+this.application,"allowScriptAccess","sameDomain","type","application/x-shockwave-flash","wmode","transparent","pluginspage","http://www.adobe.com/go/getflashplayer");this.visible=true;if(this.getInstructionsEl()){this.showElement(this.getInstructionsEl(),true)}},afterResize:function(){this.syncHeight()},syncHeight:function(){if(Ext.get(this.getContainerElementId())){var A=this.determineHeight()-this.getActionbarHeight()-this.getInstructionsHeight()-2;Ext.get(this.getContainerElementId()).setHeight(A)}},refresh:function(A){if(valueExists(A)){var B=new Ab.drawing.DwgCtrlLoc(A);if(B.containsFloor()){this.clear();this.addDrawing(B)}}this.applyDS("labels");this.applyDS("highlight")},callReportJob:function(G){var H=G.outputType,D=G.printRestriction,C=G.orientation,B=G.pageSize;if(H==="docx"||H==="pdf"){var A=confirm(View.getLocalizedString(this.z_DRAWING_PRINTING));if(!A){return }var F={};if(valueExists(D)&&valueExists(this.restriction)){F.printRestriction=D;F.restriction=toJSON(this.restriction)}if(valueExistsNotEmpty(C)){F.orientation=C}if(valueExistsNotEmpty(B)){F.pageSize=B}F.outputType=H;var E=this.title;if(E==""){E=Ab.view.View.title}return this.callDOCXReportJob(E,null,F)}else{if(H==="xls"){View.showMessage("error","XLS action is NOT supported for a Drawing panel.")}}return null},callDOCXReportJob:function(D,A,B){var C=this.config.viewDef+".axvw";if(valueExists(B)&&valueExists(B.printRestriction)){B.dataSourceId=this.highlightDataSource}B.fullPage=true;return Workflow.startJob("AbSystemAdministration-generatePaginatedReport-buildDocxFromChart",C,this.getImageBytes(),D,B)},getImageBytes:function(){var G=100;var I=[];var B=null;var E=FABridge.abDrawing.root().createImage("PNG",G,true);var H=E[0];var F=E[1];for(var D=0;D<H;D+=F){var B=FABridge.abDrawing.root().getImageBytes(D);if(B!=null){for(var C=0,A=0;C<B.length&&A<H;C++,A++){I[D+C]=B[C]}}else{D=H}}return I},clear:function(){try{FABridge.abDrawing.root().removeAllDrawings("")}catch(A){}},getSelectedAssetIds:function(){return FABridge.abDrawing.root().getSelectedAssetIds()},initAfterLoad:function(){var a=jsAccessFromFlex;a.onLoadHandler();a.initialized=true;a.isometric((a.projectionType=="isometric"),false);if(a.onLoadDcl!=null){var opts=new DwgOpts(a.onLoadOpts);if(a.zoomToRoom){FABridge.abDrawing.root().findAsset(a.onLoadDcl,opts)}else{a.addDrawing(a.onLoadDcl,opts)}}else{if(a.initialData.length){var dcl=new Ab.drawing.DwgCtrlLoc();dcl.setFromArray(eval(a.initialData));a.initialData="";a.addDrawing(dcl)}else{if(a.roomToHighlight){a.highlightAssets(a.roomToHighlight)}}}if(a.redmarksEnabled){a.enableRedmarks()}else{a.disableRedmarks()}},addDrawing:function(E,F){if(!valueExists(E)){return }if(!this.initialized){E=new Ab.drawing.DwgCtrlLoc(E);this.onLoadDcl=E;this.onLoadOpts=F;return }var C=true;if(valueExists(E.row)){C=E.row.isSelected()}if(!valueExists(E.pks)){E=new Ab.drawing.DwgCtrlLoc(E)}try{if(C){var B=E.getPkValueString();var A=new DwgOpts(F);if(valueExistsNotEmpty(B)){A.highlightId=B}if(!this.assetTypes==""){A.assetTypes=this.assetTypes}if(this.multiple=="false"){A.multiple=false}FABridge.abDrawing.root().addDrawing(E,A)}else{this.removeDrawing(E)}}catch(D){return false}return true},removeDrawing:function(A){FABridge.abDrawing.root().removeDrawing(A)},clearHighlights:function(){FABridge.abDrawing.root().clearRooms()},isometric:function(B,A){FABridge.abDrawing.root().setIsometric(B,A)},setSelectColor:function(A){FABridge.abDrawing.root().setSelectColor(A)},setToAssign:function(B,C,A){FABridge.abDrawing.root().setToAssign(B,C,A)},unassign:function(A,B){FABridge.abDrawing.root().unassign(A,B)},findAsset:function(B,D,G,A,C){var D=new DwgOpts(D);var F=new Ab.drawing.DwgCtrlLoc(B);if(valueExists(B.row)){D.mode="selected";if(valueExists(C)&&!C){D.mode="unselected"}}if(this.assetTypes){D.assetTypes=this.assetTypes}var E=F.getPkValueString();if(valueExists(E)){D.appendRec(E);D.highlightId=E}D.dwgName=F.toArray(true);if(valueExists(G)){D.zoomToId=G}if(valueExists(A)){D.forceload=A}D.exclusive=true;if(!this.initialized){this.zoomToRoom=true;this.onLoadDcl=F;this.onLoadOpts=D}else{FABridge.abDrawing.root().findAsset(F,D)}return true},highlightAssets:function(F,E){if(valueExists(E)&&Object.prototype.toString.call(E)!="[object Array]"){E=[E]}if(valueExists(E)&&E.length>0){var C=this.getDrawingNamesFromRows(E);for(var B=0;B<C.length;B++){var A=C[B];this.highlightAssetsForDrawing.defer(30*A.count,this.highlightAssetsForDrawing,[F,E,A.name,this.assetTypes,this.multiple])}}else{var D=new DwgOpts(F);D.zoomToId=false;FABridge.abDrawing.root().highlightAssets(D);return true}},highlightAssetsForDrawing:function(L,M,G,I,N){var A=new DwgOpts(L);if(I){A.assetTypes=I}if(N=="false"){A.multiple=false}A.zoomToId=false;var D=0;var F=0;for(var H=0;H<M.length;H++){var J=new Ab.drawing.DwgCtrlLoc();J.setFromCtrlOb(M[H],true);var E=J.getPkValueString();if(E&&E.length>0&&valueExists(J.dwgname)&&G==J.dwgname.toLowerCase()){var K="";var C="";for(var B in M[H].row.record){if(B.indexOf(".bl_id")>=0){C=M[H].row.record[B]}else{if(B.indexOf(".fl_id")>=0){K=M[H].row.record[B]}}}if(F==0){D=H}A.appendRecNonRm(C,K,E);F++}}if(!valueExists(A.mode)){A.mode="selected"}if(valueExists(G)){A.rawDwgName=G}FABridge.abDrawing.root().highlightAssets(A);return F},getDrawingNamesFromRows:function(G){var F=new Array();var D=new Array();for(var C=0;C<G.length;C++){var H=new Ab.drawing.DwgCtrlLoc();H.setFromCtrlOb(G[C],true);if(valueExists(H.dwgname)){if(F.indexOf(H.dwgname)==-1){F.push(H.dwgname.toLowerCase());D.push(0)}var B=F.indexOf(H.dwgname);D[B]=D[B]+1}}var E=new Array();for(C=0;C<F.length;C++){var A=new Object();A.name=F[C];A.count=D[C];E.push(A)}return E},highlightAssetsFromDcl:function(D,C){var B=new DwgOpts(D);var A=C.getPkValueString();if(!A.length){return false}B.appendRec(A);if(valueExists(C.dwgname)){B.rawDwgName=C.dwgname}B.zoomToId=false;if(!this.initialized){this.roomToHighlight=B}else{FABridge.abDrawing.root().highlightAssets(B)}return true},clearPersistFills:function(){FABridge.abDrawing.root().clearPersistFills()},setSelectability:function(B,A){FABridge.abDrawing.root().makeAssetsSelectable(B,A)},labelData:null,setLabels:function(C,A,B){this.labelData=new Array();this.labelData[0]=C;this.labelData[1]=A;this.labelData[2]=B;FABridge.abDrawing.root().applyLabels()},getLabelData:function(){return this.labelData},appendNofillValue:function(C,B){if(!valueExists(this.nofillValues)){this.nofillValues=new Array()}var A=new Object();A.value=C;A.fill=B;this.nofillValues[this.nofillValues.length]=A},appendInstruction:function(C,B,E,D){var A=new DwgInstruction(C,B,E,D);if(!valueExists(this.instructs)){this.instructs=new Object()}this.instructs[C+B]=A},clearAssignCache:function(A){try{if(A){gAcadColorMgr.reset()}FABridge.abDrawing.root().clearAssignCache()}catch(B){}},toolbarCmd:function(A){FABridge.abDrawing.root().toolbarCmd(A)},getDataSource:function(D,F){if(valueExistsNotEmpty(F)&&F!="None"){return View.dataSources.get(F)}if(D==1&&valueExistsNotEmpty(this.labelsDataSourcePanel)){var C=View.panels.get(this.labelsDataSourcePanel).getContentFrame();var E=C.View;var B=E.dataSources.get(this.getDSName(D));return new Ab.data.DataSource(this.getDSName(D),B.config)}else{if(D==2&&valueExistsNotEmpty(this.highlightDataSourcePanel)){var C=View.panels.get(this.highlightDataSourcePanel).getContentFrame();var E=C.View;var A=E.dataSources.get(this.getDSName(D));return new Ab.data.DataSource(this.getDSName(D),A.config)}}return View.dataSources.get(this.getDSName(D))},currentRecSet:null,getDataSourceRecords:function(N,D,K,B){var C=this.getDSName(N);if(valueExistsNotEmpty(K)){C=K}var E=View.dataSources.get(C);var G=null;var L=this.getPkFieldNames(E);if(valueExistsNotEmpty(D)){G=new Ab.view.Restriction();var H=1;for(var I=0;H<D.length;I++){G.addClause(L.pks[I],D[H],"=",true);H+=2}}try{if(valueExistsNotEmpty(this.currentHighlightRestriction)){if(valueExistsNotEmpty(G)){G.addClauses(this.currentHighlightRestriction,true,false)}else{G=this.currentHighlightRestriction}}if(E!=null){if(valueExistsNotEmpty(this.currentHighlightFilterDS)&&this.currentHighlightFilterDS!="None"){var A=View.dataSources.get(this.currentHighlightFilterDS);if(A!==null){var F=A.getRecords(G,{recordLimit:0});var O=this.getFilterRestriction(A,F);if(O.length>0){if(valueExistsNotEmpty(G)){for(var I=0;I<O.length;I++){O[I].addClauses(G,false,false)}}G=O}}}if(G!=null&&valueExistsNotEmpty(B)){G.addClauses(B,true,false)}else{if(G==null&&valueExistsNotEmpty(B)){G=B}}var P=[];var F=E.getRecords(G,{recordLimit:0});for(var I=0;I<F.length;I++){var J=F[I];J.values=E.formatValues(J.values,true);P.push(J)}this.currentRecSet=P}return this.currentRecSet}catch(M){this.handleError(M)}},query:function(D,C,A,B){this.getDataSourceRecords(D,C,A,B);return(this.currentRecSet!=null)?this.currentRecSet.length:0},getRecValues:function(A){if(this.currentRecSet==null||A>=this.currentRecSet.length){return null}return this.currentRecSet[A].values},getDSName:function(A){var B="";if(A==1){B=this.currentLabelsDS}else{if(A==2){B=this.currentHighlightDS}}return B},getColumnsGroupedBy:function(){return this.columnsGroupedBy},getDwgConfig:function(){return toJSON(this.dwgConfig)},getAcadColor:function(A){return gAcadColorMgr.getRGB(A)},getColorFromValue:function(B,F,E,C){var A="";if(this.ruleSets!=null&&valueExists(C)){var D=this.ruleSets[this.currentHighlightDS];if(valueExists(D)){A=D.getColorFromValue(B,C);if(valueExists(A)){A=""+parseInt("0x"+A,16)}}}if(!valueExistsNotEmpty(A)){A=gAcadColorMgr.getColorFromValue(B,F,E)}return A},decodePattern:function(patternString){var parameters={patternString:patternString};try{var result=Workflow.call("AbCommonResources-HighlightPatternService-decodePattern",parameters)}catch(e){Workflow.handleError(e)}var res=eval("("+result.jsonExpression+")");res.color=parseInt(res.rgbColor,16);return res},getColorFromPattern:function(A,B){return gAcadColorMgr.getRGBFromPattern(A,B)},getUnassignedColor:function(A){return gAcadColorMgr.getUnassignedColor(A)},getNofillField:function(){return this.nofillField},getNofillValues:function(){return this.nofillValues},getHighlightRuleValueField:function(){var A="";if(this.ruleSets!=null){var B=this.ruleSets[this.currentHighlightDS];if(valueExists(B)){A=B.getField()}}return A},getDelim:function(){return this._delim},getDraggableAssets:function(){return this._draggableAssets},setDraggableAssets:function(A){this._draggableAssets=A},setDiagonalSelectionPattern:function(A){this._displayDiagonalSelectionPattern=A},getDiagonalSelectionPattern:function(){return this._displayDiagonalSelectionPattern},getHighlightSettings:function(){var A=new Object();A.highlightType=this.highlightType;A.thematicHighlightStyle=this.thematicHighlightStyle;return A},getToolbarSettings:function(){return this.toolbarSettings},getOptionalPkFields:function(){return this.optionalPKFields},onClickHandler:function(C,D,B,A){this.processInstruction(this.id,"onclick");var E=this.getEventListener("onclick");if(E!=null){E(C,D,B,A)}},onMultipleSelectHandler:function(){if(!this.multipleSelectionEnabled){return }this.processInstruction(this.id,"onMultipleSelectionChange");var A=this.getEventListener("onMultipleSelectionChange");if(A!=null){A()}},isMultipleSelectHandlerDefined:function(){var A=false;if(this.multipleSelectionEnabled&&this.getEventListener("onMultipleSelectionChange")!=null){A=true}return A},getMultipleSelectedAssets:function(){return FABridge.abDrawing.root().getMultipleSelectedAssets()},getAssignedValue:function(){return FABridge.abDrawing.root().getAssignedValue()},getAssignOneToManyAssets:function(){return FABridge.abDrawing.root().getAssignOneToManyAssets()},onResetAssetsHandler:function(){var A=this.getEventListener("onresetassets");if(A!=null){A()}},onLoadHandler:function(){var A=this.getEventListener("onload");if(A!=null){A()}this.processInstruction("default","")},onDatasourceChanged:function(A){this.onDsChange("ondatasourcechanged",A)},onSelectedDatasourceChanged:function(A){this.onDsChange("onselecteddatasourcechanged",A)},onDsChange:function(A,B){this.listenerHandler(A,B,this.getDSName(((B=="highlight")?2:1)))},listenerHandler:function(C,B,A){var D=this.getEventListener(C);if(D!=null){D(B,A)}},onHighlightsChanged:function(){var A=this.getEventListener("onhighlightschanged");if(A!=null){A(this.getDSName(2))}},enableLiteDisplay:function(A){this.liteDisplay=A},setLiteDisplay:function(A){if(this.instructs!=null||!this.liteDisplay){return }var C="";for(var B=0;B<A.length;B++){C+=" : "+A[B]}this.setTitleMsg("["+C.substr(3)+"]")},setTitleMsg:function(B){var A=document.getElementById(this.id+"_title");if(A==null){return }this.setTitle(B)},setDrawingTitle:function(C,A,B){FABridge.abDrawing.root().setTitleText(C,A,B)},flashAppLoaded:function(){},flashDocLoaded:function(){},flashDocLoadFailed:function(A){},flashAssetsLoaded:function(){this.dwgLoaded=true;this.processInstruction("ondwgload","");this.refreshLegendPanel();var A=this.getEventListener("ondwgload");if(A!=null){A()}},appendRuleSet:function(B,A){this.ruleSets=[];A.ds=B;this.ruleSets[B]=A},removeRuleSet:function(A){if(this.ruleSets==null){return }if(A!=undefined){delete this.ruleSets[A]}},clearRuleSets:function(){this.ruleSets=new Array()},appendDatasourceSelectors:function(){if(this.toolbar){this.toolbar.addSeparator()}if(this.highlightSelector){this.appendSelector("hilite","DrawingControlHighlight",this.getLocalizedString(this.z_MESSAGE_HIGHLIGHTS)+":",this.highlightDataSource);if(this.showLegendOverlay){this.appendLegendButton(this.legendPanel,false)}}if(this.bordersHighlightSelector){this.appendSelector("IBorders","DrawingControlHighlight",this.getLocalizedString(this.z_MESSAGE_BORDERS),"");if(this.showLegendOverlay){this.appendLegendButton(this.borderHighlightLegendPanel,true)}}if(this.labelSelector){this.appendSelector("labels","DrawingControlLabels",this.getLocalizedString(this.z_MESSAGE_LABELS)+":",this.labelsDataSource)}if(this.highlightFilterSelector){this.appendSelector("IFilter","DrawingControlHighlight",this.getLocalizedString(this.z_MESSAGE_FILTER),"")}},appendLegendButton:function(B,A){var D=document.getElementById(this.id+"_title");if(D===null){return }var C=this;this.addAction({id:"legendButton_"+B,icon:"/schema/ab-core/graphics/icons/legend.png",tooltip:C.getLocalizedString(C.z_MESSAGE_TOOLTIP_LEGEND),listener:function(){var E=View.panels.get(B);if(E){E.showInWindow({anchor:this.el.dom,width:300,title:A?C.getLocalizedString(C.z_MESSAGE_BORDER_HIGHLIGHTS):C.getLocalizedString(C.z_MESSAGE_ROOM_HIGHLIGHTS)});if(A){C.refreshBorderHighlightLegendPanel()}else{C.refreshLegendPanel()}}},separator:false})},appendSelector:function(A,J,B,I){var F=document.getElementById(this.id+"_title");if(F===null){return }var G=this.getSelectorDatasources(J);if(A.lastIndexOf("IBorders")>=0){var D=this.getSelectorDatasources(J,"IBorder");if(D.names.length>0){G=D}}else{if(A.lastIndexOf("IFilter")>=0){var D=this.getSelectorDatasources(J,"IFilter");if(D.names.length>0){G=D}}}var K=G.names;var N=G.IDs;if(K.length<2){return }var E=F.parentNode.parentNode;var M=Ext.DomHelper.append(E,{tag:"td"});var L=Ext.DomHelper.append(M,"<p>"+B+"</p>",true);Ext.DomHelper.applyStyles(L,"x-btn-text");M=Ext.DomHelper.append(E,{tag:"td"});var C=Ext.DomHelper.append(M,{tag:"select",id:"selector_"+A},true);K[K.length]=this.noneTxt;N[this.noneTxt]=this.noneTxt;for(var H=0;H<K.length;H++){C.dom.options[H]=new Option(K[H],N[K[H]])}C.on("change",this.changeDS,this,{delay:100,single:false});if(I===""){I=this.noneTxt}C.dom.value=I},getSelectorDatasources:function(D,F){var C={};C.names=[];C.IDs={};var G=View.dataSources;for(var B=0;B<G.length;B++){var E=G.items[B];if(E.type!=D){continue}var A=(E.title==undefined)?E.id:E.title;if(valueExistsNotEmpty(F)){if((F==="IFilter"&&E.id.indexOf("iFilter")>=0)||(F==="IBorder"&&E.id.indexOf("iBorder")>=0)){C.names[C.names.length]=A;C.IDs[A]=E.id}}else{if(E.id.indexOf("iFilter")>=0||E.id.indexOf("iBorder")>=0){continue}C.names[C.names.length]=A;C.IDs[A]=E.id}}return C},changeDS:function(E,D){var A=D.value;var B="";if(D.id.lastIndexOf("hilite")>=0){if(A===this.currentHighlightDS){return }this.currentHighlightDS=A;B="highlight"}else{if(D.id.lastIndexOf("IBorders")>=0){if(A===this.currentBordersHighlightDS){return }this.currentBordersHighlightDS=A;B="bordersHighlight"}else{if(D.id.lastIndexOf("labels")>=0){if(A===this.currentLabelsDS){return }this.currentLabelsDS=A;B="labels"}else{if(D.id.lastIndexOf("IFilter")>=0){if(A===this.currentHighlightFilterDS){return }this.currentHighlightFilterDS=A;this.doFilterRestriction()}else{return }}}}this.onSelectedDatasourceChanged(B);this.applyDS(B);var C=this.getEventListener("afterSelectedDataSourceChange");if(C){C(this,B)}},setDataSource:function(B,A){if(B==="highlight"){this.currentHighlightDS=A;this.applyDS("highlight");document.getElementById("selector_hilite").value=A}else{if(B==="labels"){this.currentLabelsDS=A;this.applyDS("labels");document.getElementById("selector_labels").value=A}}},changeDataSourceSelector:function(B,A){if(B==="highlight"){document.getElementById("selector_hilite").value=A}else{if(B==="labels"){document.getElementById("selector_labels").value=A}}},applyDS:function(B,A,D){try{if(valueExists(A)){this.currentHighlightDS=A}if(valueExists(D)){this.bodersHighlightDS=D}if(B==="highlight"){this.clearLegendPanel();this.doHighlight(this.currentHighlightDS,this.currentBordersHighlightDS);this.refreshLegendPanel()}else{if(B==="bordersHighlight"){this.clearBorderHighlightLegendPanel();this.doHighlight(this.currentHighlightDS,this.currentBordersHighlightDS);this.refreshBorderHighlightLegendPanel()}else{FABridge.abDrawing.root().applyDS(B)}}}catch(C){}this.onDatasourceChanged(B)},doHighlight:function(A,B){FABridge.abDrawing.root().applyDS("highlight",A,B)},doFilterRestriction:function(){this.clearLegendPanel();this.clearBorderHighlightLegendPanel();this.doHighlight(this.currentHighlightDS,this.currentBordersHighlightDS);this.refreshLegendPanel();this.refreshBorderHighlightLegendPanel()},getFilterRestriction:function(A,E){var I=[];if(A!==null){if(E.length>0){var D=[];A.fieldDefs.each(function(J){if(J.primaryKey){D.push(J)}});var F=new Ab.view.Restriction();for(var H=0;H<E.length;H++){for(var G=0,B;B=D[G];G++){var C=E[H].getValue(B.fullName);if(G===0){F.addClause(B.fullName,C,"=",")OR(")}else{F.addClause(B.fullName,C,"=","AND")}}}I.push(F)}}return I},setHighlightRestriction:function(A){this.currentHighlightRestriction=A},applyHighlightRestriction:function(A){this.setHighlightRestriction(A);this.doHighlight(this.currentHighlightDS,this.currentBordersHighlightDS)},enableAssetPanel:function(G,H,F,I){var B=[];if(valueExists(I)){if(valueExists(I.actions)){for(var D=0;D<I.actions.length;D++){var A=I.actions[D];var C=(G+A.title).replace(/\s/g,"");this.addEventListener(C,A.handler);var E={title:A.title,actionID:C};if(A.icon){E.icon=A.icon}B.push(E)}I.actions=B}}FABridge.abDrawing.root().enableAssetPanel(G,H,F,I)},onAssetPaneltitleBarAction:function(C,B){this.processInstruction(this.id,C);var A=this.getEventListener(C);if(A!=null){A(B)}},addAssetPanelRowAction:function(B){var A=(B.type+B.title).replace(/\s/g,"");this.addEventListener(A,B.handler);B.actionID=A;FABridge.abDrawing.root().addAssetPanelRowAction(B)},addAssetPanelRowActions:function(A){for(var B=0;B<A.length;B++){this.addAssetPanelRowAction(A[B])}},onAssetPanelRowAction:function(D,A,C){this.processInstruction(this.id,D);var B=this.getEventListener(D);if(B!=null){B(A,C)}},refreshAssetPanel:function(A,B){FABridge.abDrawing.root().refreshAssetPanel(A,B)},closeAssetPanel:function(A){FABridge.abDrawing.root().closeAssetPanel(A)},showAssetPanel:function(A){FABridge.abDrawing.root().showAssetPanel(A)},onAssetLocationChangeHanlder:function(A,C,B){this.processInstruction(this.id,"onAssetLocationChange");var D=this.getEventListener("onAssetLocationChange");if(D!=null){return D(A,C,B)}},unselectAssets:function(A){FABridge.abDrawing.root().unselectAssets(A)},selectAssets:function(A){FABridge.abDrawing.root().selectAssets(A)},addContextMenuAction:function(C,A){var B=C.replace(/\s/g,"");this.addEventListener(B,A);FABridge.abDrawing.root().addContextMenuAction(C,B)},onContextMenuAction:function(C,A){this.processInstruction(this.id,C);var B=this.getEventListener(C);if(B!=null){B(A)}},_refreshLegendPanel:function(I,E){if(this.showLegendOverlay&&!I.isShownInWindow()){return }I.show(true);I.clear();var F=0;var G=null;var A=new Object();var H=null;if(this.ruleSets!=null){H=this.ruleSets[E];if(!valueExists(H)){H=null}}if(H==null){G=FABridge.abDrawing.root().getAppliedValueColorList(E);if(!valueExists(G)){return }}if(this.legendCtrlInit==false){I.sortEnabled=false;this.legendCtrlInit=true}for(F=0;F<I.gridRows.length;F++){I.removeGridRow(0)}I.update();var B=null;var D=null;var J=null;var C=new Array();if(H==null){for(F=0;F<G.length;F++){B=G[F].value;C[C.length]=B;A[B]=F}C.sort();for(F=0;F<C.length;F++){B=C[F];J=G[A[B]];this.appendGridRow(I,J.color,B)}}else{if(H.isRange){for(F=0;F<H.rules.length;F++){J=H.rules[F];this.appendGridRow(I,"0x"+J.color,J.getLabelOper()+" "+J.getLabel())}}else{G=H.getNonRangeItems();for(F=0;F<G.length;F++){J=G[F];this.appendGridRow(I,"0x"+J.color,J.val)}}J=H.defaultRule;if(valueExists(J)){B=(H.isRange)?(J.getLabelOper()+" "):"";this.appendGridRow(I,"0x"+J.color,B+J.getLabel())}}I.update()},refreshBorderHighlightLegendPanel:function(){if(!valueExistsNotEmpty(this.borderHighlightLegendPanel)){return }var A=View.getControl("",this.borderHighlightLegendPanel);if(!valueExists(A)){return }if(!valueExistsNotEmpty(this.currentBordersHighlightDS)){this.currentBordersHighlightDS="None"}this._refreshLegendPanel(A,this.currentBordersHighlightDS)},clearBorderHighlightLegendPanel:function(){if(!valueExistsNotEmpty(this.borderHighlightLegendPanel)){return }var A=View.getControl("",this.borderHighlightLegendPanel);if(!valueExists(A)){return }A.clear()},clearLegendPanel:function(){if(!valueExistsNotEmpty(this.legendPanel)){return }var A=View.getControl("",this.legendPanel);if(!valueExists(A)){return }A.clear()},refreshLegendPanel:function(){if(!valueExistsNotEmpty(this.legendPanel)){return }var A=View.getControl("",this.legendPanel);if(!valueExists(A)){return }this._refreshLegendPanel(A,this.currentHighlightDS);if(this.showLegendOverlay&&A.isShownInWindow()){A.updateWindowHeight()}},addLabels:function(A){FABridge.abDrawing.root().addLabels(A)},removeLabels:function(A){FABridge.abDrawing.root().removeLabels(A)},setToolbar:function(C,A,B){if(!valueExistsNotEmpty(C)||!valueExists(A)){return }if(!valueExistsNotEmpty(B)){B="all"}FABridge.abDrawing.root().toolbar(C,A,B)},appendGridRow:function(B,A,D){var C=new Ab.data.Record({"legend.color":"0x"+gAcadColorMgr.formatColor(A,true),"legend.value":D});B.addGridRow(C)},getPkFieldNames:function(B){var C=new Ab.drawing.DwgCtrlLoc();if(!valueExists(B)){return C}for(var A=0;A<B.fieldDefs.length;A++){var D=B.fieldDefs.items[A].id;if(D.indexOf(".bl_id")>0){C.pks[0]=D}else{if(D.indexOf(".fl_id")>0){C.pks[1]=D}else{if(D.indexOf(".rm_id")>0){C.pks[2]=D}}}}return C},processInstruction:function(B,A,D){if(!valueExists(this.instructs)){return }var C=this.instructs[B+A];if(!valueExists(C)){C=this.instructs["default"];if(!valueExists(C)){return }}else{if(C.dwgLoaded&&!this.dwgLoaded){return }}var E=C.msg;if(valueExistsNotEmpty(E)){if(valueExistsNotEmpty(D)){E=E.replace(/%s/,D)}this.setTitleMsg(E)}},getFillOpacity:function(){if(this.dwgConfig){return this.dwgConfig.highlights.assigned.fill.opacity*0.8}else{return 0.5}},setMinimumLabelTextSize:function(A){FABridge.abDrawing.root().setMinimumLabelTextSize(A)},setIdealLabelTextSize:function(A){FABridge.abDrawing.root().setIdealLabelTextSize(A)},setShrinkLabelTextToFit:function(A){FABridge.abDrawing.root().setShrinkLabelTextToFit(A)},setRightClickMenu:function(A){FABridge.abDrawing.root().setRightClickMenu(A)},getHatchPatterns:function(){try{var A=Workflow.call("AbCommonResources-HighlightPatternService-getHatchPatterns");if(A&&A.jsonExpression){return A.jsonExpression}else{return""}}catch(B){Workflow.handleError(B)}},getDrawingZoomInfo:function(){return FABridge.abDrawing.root().getDrawingZoomInfo()},enableRedmarks:function(){if(this.initialized){FABridge.abDrawing.root().enableRedmarks();this.redmarksEnabled=true}},disableRedmarks:function(){if(this.initialized){FABridge.abDrawing.root().disableRedmarks();this.redmarksEnabled=false}},getRedMarks:function(){return FABridge.abDrawing.root().getRedmarks()},saveRedmarksForServiceRequest:function(H){var C=FABridge.abDrawing.root().checkAllRedmarksVisible();if(C||(!C&&confirm(View.getLocalizedString(this.z_MESSAGE_PROMPT_LEAVEREDMARKSINVISIBLE)))){var D=FABridge.abDrawing.root().getRedmarks();if(valueExistsNotEmpty(this.currentHighlightDS)){D.highlightds=this.currentHighlightDS;var F=View.dataSources.get(this.currentHighlightDS);if(valueExistsNotEmpty(F)){var B=F.viewName+".axvw";D.highlightds_view_name=B}}if(valueExistsNotEmpty(this.currentLabelsDS)){D.labelds=this.currentLabelsDS;var E=View.dataSources.get(this.currentLabelsDS);if(valueExistsNotEmpty(E)){var A=E.viewName+".axvw";D.labelds_view_name=A}}try{var I=Workflow.callMethod("AbCommonResources-DrawingService-saveRedMarksForServiceRequest",D,parseInt(H),this.getImageBytes(),"");return true}catch(G){Workflow.handleError(G)}}return false},saveRedmarksAsServiceRequest:function(H){var C=FABridge.abDrawing.root().checkAllRedmarksVisible();if(C||(!C&&confirm(View.getLocalizedString(this.z_MESSAGE_PROMPT_LEAVEREDMARKSINVISIBLE)))){var D=FABridge.abDrawing.root().getRedmarks();if(valueExistsNotEmpty(this.currentHighlightDS)){D.highlightds=this.currentHighlightDS;var F=View.dataSources.get(this.currentHighlightDS);if(valueExistsNotEmpty(F)){var B=F.viewName+".axvw";D.highlightds_view_name=B}}if(valueExistsNotEmpty(this.currentLabelsDS)){D.labelds=this.currentLabelsDS;var E=View.dataSources.get(this.currentLabelsDS);if(valueExistsNotEmpty(E)){var A=E.viewName+".axvw";D.labelds_view_name=A}}try{var I=Workflow.callMethod("AbCommonResources-DrawingService-prepareRedmarksForServiceRequest",D,this.getImageBytes(),H);if(I.code=="executed"){return I.data}else{Workflow.handleError(I)}}catch(G){Workflow.handleError(G)}}return 0},saveRedmarks:function(){var H=FABridge.abDrawing.root().checkAllRedmarksVisible();if(H||(!H&&confirm(View.getLocalizedString(this.z_MESSAGE_PROMPT_LEAVEREDMARKSINVISIBLE)))){var D=FABridge.abDrawing.root().getRedmarks();if(valueExistsNotEmpty(this.currentHighlightDS)){D.highlightds=this.currentHighlightDS;var C=View.dataSources.get(this.currentHighlightDS);var F=C.viewName+".axvw";D.highlightds_view_name=F}if(valueExistsNotEmpty(this.currentLabelsDS)){D.labelds=this.currentLabelsDS;var E=View.dataSources.get(this.currentLabelsDS);var B=E.viewName+".axvw";D.labelds_view_name=B}try{var A=Workflow.callMethod("AbCommonResources-DrawingService-saveRedMarks",D)}catch(G){Workflow.handleError(G)}}},drawRedmarks:function(A){FABridge.abDrawing.root().drawRedmarks(A);this.processInstruction("onredlinesload","")},clearRedmarks:function(){FABridge.abDrawing.root().clearRedmarks()}});DwgFill=Base.extend({key:null,fc:undefined,fo:undefined,bc:undefined,bo:undefined,bt:undefined,constructor:function(C,D,B,F,E,A){if(C!=undefined){this.key=C}if(D!=undefined){this.fc=D}},set:function(A){}});DwgLabel=Base.extend({font:"Arial",color:0,textHeight:12,justification:"center",bold:false,italic:false,underline:false,field:"",value:"",constructor:function(H,B,I,D,G,C,F,E,A){if(!valueExistsNotEmpty(H)||!valueExistsNotEmpty(B)){return }this.field=H;this.value=B;if(valueExists(I)){this.textHeight=I}if(valueExists(D)){this.color=D}if(valueExistsNotEmpty(G)){this.justification=G}if(valueExists(F)){this.bold=F}if(valueExists(E)){this.italic=E}if(valueExists(A)){this.underline=A}}});DwgRec=Base.extend({id:null,f:null,l:null,v:null,constructor:function(C,A,B){if(C==undefined){return }this.id=C;if(valueExists(A)){this.f=A}if(valueExists(B)){this.l=B}}});function handleWheel(A){var C=document.getElementById(dwgControlId);if(A.rangeParent&&A.target.id==dwgControlId){var D=(navigator.userAgent.indexOf("Firefox")!=-1)?-A.detail:A.wheelDelta/40;var B={x:A.screenX,y:A.screenY,delta:D,ctrlKey:A.ctrlKey,altKey:A.altKey,shiftKey:A.shiftKey};C.handleWheel(B)}}DwgOpts=Base.extend({ver:1,folder:"",dwgName:null,rawDwgName:"",assetTypes:"",zoomToId:false,multiple:true,exclusive:false,highlightId:undefined,forceload:true,fill:undefined,mode:undefined,selectionMode:"2",assignMode:"0",multipleSelectionEnabled:true,recs:undefined,persistRecFills:true,backgroundSuffix:"",assetSuffix:"",primaryKeyFieldsHighlights:null,primaryKeyFieldsLabels:null,constructor:function(B){var A=jsAccessFromFlex;this.selectionMode=A.selectionMode;this.assignMode=A.assignMode;this.multipleSelectionEnabled=A.multipleSelectionEnabled;if(B!=null&&B!=undefined){this.copy(B)}this.folder=View.project.enterpriseGraphicsFolder},copy:function(A){if(A==null||A==undefined){return }if(valueExists(A.folder)){this.folder=A.folder}if(valueExists(A.dwgName)){this.dwgName=A.dwgName}if(valueExists(A.rawDwgName)){this.rawDwgName=A.rawDwgName}if(valueExists(A.highlightId)){this.highlightId=A.highlightId}if(valueExists(A.assetTypes)){this.assetTypes=A.assetTypes}if(valueExists(A.zoomToId)){this.zoomToId=A.zoomToId}if(valueExists(A.forceload)){this.forceload=A.forceload}if(valueExists(A.exclusive)){this.exclusive=A.exclusive}if(valueExists(A.multiple)){this.multiple=A.multiple}if(valueExists(A.fill)){this.fill=A.fill}if(valueExists(A.mode)){this.mode=A.mode}if(valueExists(A.selectionMode),true){this.selectionMode=A.selectionMode}if(valueExists(A.assignMode),true){this.assignMode=A.assignMode}if(valueExists(A.multipleSelectionEnabled)){this.multipleSelectionEnabled=A.multipleSelectionEnabled}if(valueExists(A.recs)){this.recs=A.recs}if(valueExists(A.persistRecFills)){this.persistRecFills=A.persistRecFills}if(valueExists(A.backgroundSuffix)){this.backgroundSuffix=A.backgroundSuffix}if(valueExists(A.assetSuffix)){this.assetSuffix=A.assetSuffix}if(valueExists(A.primaryKeyFieldsHighlights)){this.primaryKeyFieldsHighlights=A.primaryKeyFieldsHighlights}if(valueExists(A.primaryKeyFieldsLabels)){this.primaryKeyFieldsLabels=A.primaryKeyFieldsLabels}},appendRec:function(G,E,F,A){var B=G.split(jsAccessFromFlex.getDelim());if(!valueExistsNotEmpty(this.assetTypes)){var C=(B!=null&&B.length>0?B[0]:null);var D=(B!=null&&B.length>1?B[1]:null)}this.appendRecNonRm(C,D,G,E,F,A)},appendRecFromRow:function(D,E){var C="";var B="";for(var A in D.row.record){if(A.indexOf(".bl_id")>=0){B=D.row.record[A]}else{if(A.indexOf(".fl_id")>=0){C=D.row.record[A]}}}this.appendRecNonRm(B,C,E)},appendRecNonRm:function(B,C,F,D,E,A){if(F==undefined){return }if(this.recs==undefined){this.recs=new Array()}if(A==true){this.highlightId=F}this.recs[this.recs.length]=new DwgRec(F,D,E);if(this.dwgName==null){this.dwgName=new Array();if(B!=null&&C!=null){this.dwgName[0]="fl.bl_id";this.dwgName[1]=B;this.dwgName[2]="fl.fl_id";this.dwgName[3]=C}}},setFillColor:function(A){if(this.fill==undefined){this.fill=new DwgFill()}this.fill.fc=A}});DwgInstruction=Base.extend({ctrlId:"",eventName:"onclick",msg:"",dwgLoaded:false,constructor:function(B,A,D,C){this.ctrlId=B;this.eventName=A;this.msg=D;this.dwgLoaded=C}});DwgHighlightRule=Base.extend({ver:1,fullfield:"",val:"",color:"",oper:"==",label:"",selectable:true,constructor:function(){},getLabel:function(){return this.label.length?this.label:this.val},getLabelOper:function(){return this.label.length?"":this.oper}});DwgHighlightRuleSet=Base.extend({ver:1,ds:"",isRange:false,fullfield:"",valColorMap:[],nonRangeVals:[],rules:[],defaultRule:null,constructor:function(A){this.ds=A;this.isRange=false;this.fullfield="";this.valColorMap=[];this.nonRangeVals=[];this.rules=[]},appendRule:function(G,B,F,D,I,H,E){var C=new DwgHighlightRule();C.fullfield=G;if(D=="=="||E==true){C.val=B}else{C.val=parseInt(B,10)}C.color=F;if(valueExists(D)){C.oper=D}if(valueExists(I)){C.label=I}this.fullfield=G;if(E==true){this.defaultRule=C}else{if(D!="=="){this.isRange=true;if(valueExists(H)){C.selectable=H}if(E==true){this.defaultRule=C}else{this.rules[this.rules.length]=C}}else{var A=G+"."+B;this.valColorMap[A]=F;this.nonRangeVals[this.nonRangeVals.length]=A}}},getColorFromValue:function(D,F){var B="";var A=false;var E=null;if(this.isRange){F=parseInt(F,10);for(var C=0;C<this.rules.length&&!A;C++){E=this.rules[C];if(E.oper=="=="){A=(F==E.val)}else{if(E.oper=="<"){A=(F<E.val)}else{if(E.oper=="<="){A=(F<=E.val)}else{if(E.oper==">"){A=(F>E.val)}else{if(E.oper==">="){A=(F=E.val)}}}}}if(A){B=E.color}}}else{B=this.valColorMap[D+"."+F];if(valueExists(B)){A=true}}if(!A&&valueExists(this.defaultRule)){B=this.defaultRule.color}return B},getNonRangeItems:function(){var C=new Array();for(var D=0;D<this.nonRangeVals.length;D++){var A=this.nonRangeVals[D];var B=A.split(".");var E=B[B.length-1];C[D]={val:E,color:this.valColorMap[A]}}return C},getField:function(){return this.fullfield}});Ab.drawing.DwgCtrlLoc=Base.extend({pks:["rm.bl_id","rm.fl_id","rm.rm_id"],map:new Object(),dwgname:"",constructor:function(A,C,D,B){this.set(A,C,D,B)},set:function(A,C,D,B){this.map=new Object();if(!valueExists(A)){return }if(valueExists(A.pks)){this.pks=A.pks;this.map=A.map;this.dwgname=A.dwgname}else{if(valueExists(A.row)){this.setFromCtrlOb(A)}else{if(A.constructor==Ab.view.Restriction){this.setFromRestriction(A)}else{this.map[this.pks[0]]=A;if(valueExists(C)){this.map[this.pks[1]]=C}if(valueExists(D)){this.map[this.pks[2]]=D}if(valueExists(B)){this.dwgname=B}}}}},setFromArray:function(A){if(!valueExistsNotEmpty(A)){return }for(var B=0;B<this.pks.length;B++){if(valueExistsNotEmpty(A[B*2])){this.pks[B]=A[B*2];this.map[this.pks[B]]=A[B*2+1]}}},setFromCtrlOb:function(B,E){if(!valueExists(B)||!valueExists(B.grid)||!valueExists(B.row)){return null}this.pks=new Array();var A=0;for(var C=0;C<B.grid.fieldDefs.length;C++){var F=B.grid.fieldDefs[C].id;if(B.grid.fieldDefs[C].primaryKey){if(F.indexOf(".bl_id")>=0){this.pks[0]=F}else{if(F.indexOf(".fl_id")>=0){this.pks[1]=F}else{if(F.indexOf(".rm_id")>=0){this.pks[2]=F}else{this.pks[A]=F}}}A++}else{if(F.indexOf(".dwgname")>0){this.dwgname=B[F]}}}if(this.pks.length<1){this.pks=["rm.bl_id","rm.fl_id","rm.rm_id"]}for(C=0;C<this.pks.length;C++){var D=this.pks[C];this.map[D]=B[D];if(E==true&&!valueExistsNotEmpty(this.map[D])){View.alert(View.getLocalizedString(this.z_MESSAGE_NO_PKEY_FOR_RECORD));return }}},setFromRestriction:function(C){var B=C.clauses;for(var A=0;A<B.length;A++){var D=B[A];this.pks[A]=D.name;this.map[D.name]=D.value}},setFromTreeClick:function(C,F){this.setFromRestriction(C.restriction);var A=View.panels.get(F);if(valueExists(A)&&valueExists(A._levels)){var G=A._levels.length;var D=View.dataSources.get(A._levels[A._levels.length-1].dataSourceId);if(valueExists(D)){var H=null;var J=D.fieldDefs.keys;for(G=0;G<J.length;G++){var B=J[G];if(B.indexOf(".dwgname")>0){H=B}}if(H!=null){var E=A.lastNodeClicked;var I=E.data[H];if(valueExists(I)){this.dwgname=I}}}}},getBuilding:function(){var A=this.pks[0];if(A!=null&&A.indexOf(".bl_id")>=0){return this.map[A]}return null},getFloor:function(){var A=this.pks[1];if(A!=null&&A.indexOf(".fl_id")>=0){return this.map[A]}return null},getRoom:function(){var A=this.pks[2];if(A!=null&&A.indexOf(".rm_id")>=0){return this.map[this.pks[i]]}return null},getPkValueString:function(){var B="";var C=jsAccessFromFlex.getDelim();for(var A=0;A<this.pks.length;A++){if(B.length>0){B+=C}if(valueExistsNotEmpty(this.map[this.pks[A]])){B+=this.map[this.pks[A]]}}return B},getDwgname:function(){return this.dwgname},containsFloor:function(){return(valueExistsNotEmpty(this.getBuilding())&&valueExistsNotEmpty(this.getFloor()))},toArray:function(A){var B=[];if(!valueExists(this.pks)){return B}var D=this.pks.length;if(A==true){D=D-1}for(var C=0;C<D;C++){B[C*2]=this.pks[C];B[C*2+1]=this.map[this.pks[C]]}return B},z_MESSAGE_NO_PKEY_FOR_RECORD:"No asset associated with the selected record can be found."});var ImageCapture=Base.extend({captureImage:function(A,D,H){var F=this.getSvgAsString(A);var G=d3.select("#"+A).node();var C=this.createCanvas({width:G.offsetWidth,height:G.offsetHeight});var B="";try{canvg(C,F,{renderCallback:function(){B=C.toDataURL("image/png");if(D){if(Ext.isIE){var I=window.open();I.document.body.innerHTML="<img src='"+B+"'></img>";I.document.close()}else{window.open(B)}}if(H){H(B)}}})}catch(E){alert("Error: "+E.message+"\nFile: "+E.fileName+"\nLine: "+E.lineNumber)}},getSvgAsString:function(H){var A=d3.select("#"+H).node();var G=d3.select(A).select("#"+H+"-svg");if(G.empty()){G=d3.select(A).select("svg")}var F=d3.select(G.node().cloneNode(true));var C=this.copyStyles(F);C.select("view").remove();C.select("#redlines").selectAll(".redline").selectAll(".edit").each(function(){d3.select(this).style("display","none")});var D=C.select("#asset-labels");if(D&&!D.empty()){var I=D.attr("font-size");if(I){I=(parseFloat(I)*1/2)+"em"}else{I="0.75em"}D.selectAll("text").each(function(){if(!d3.select(this.parentNode).attr("font-size")){d3.select(this.parentNode).attr("font-size",I)}})}var B=C.node();var E="";if(B){E=(new XMLSerializer()).serializeToString(B);E=E.replace(/ xlink=\"http:\/\/www.w3.org\/1999\/xlink\"/g,' xmlns:xlink="http://www.w3.org/1999/xlink"');E=E.replace(/<use href=/g,"<use xlink:href=")}return E},createCanvas:function(C){var B=document.getElementById("canvas");if(!B){B=document.createElement("canvas");B.id="canvas";document.body.appendChild(B);B.style.display="none"}B.getContext("2d");B.innerHTML="";d3.select(B).attr("height",C.height+"px").attr("width",C.width+"px");var A=B.getContext("2d");A.clearRect(0,0,C.width,C.height);return B},copyStyles:function(E){var K="";var F=E.node();var D=document.styleSheets;if(D==null){return E}for(var B=0;B<D.length;B++){var I=D[B].cssRules;if(I!=null){for(var C=0;C<I.length;C++){var G=I[C];if(G&&(G.selectorText)&&(G.style)&&typeof (G.selectorText)!=="undefined"&&typeof (G.style)!=="undefined"){var H=G.selectorText.split(",");H.forEach(function(O,M){var L=H[M].trim();try{if(!E.selectAll(L).empty()){K+=G.selectorText+" { "+G.style.cssText+" }\n"}}catch(N){}})}}}}var A=d3.select(F).select("style");if(A.empty()){A=E.append("style")}var J=A.node();if(typeof J==="object"&&J.innerHTML){J.innerHTML=J.innerHTML+"\n"+K}else{J.textContent=J.textContent+K}return E}});function getChartType_JS(A){var B=Ab.view.View.getControl("",A);return B.type}function getChartConfigObj_JS(A){var B=Ab.view.View.getControl("",A);return toJSON(B.configObj)}function getChartData_JS(A){var B=Ab.view.View.getControl("",A);return B.data}function loadComplete_JS(A){var B=Ab.view.View.getControl("",A);B.afterLoadComplete()}function afterCreateControl_JS(A){var B=View.getControl("",A);B.afterCreateControl()}function onClickChart_JS(A){var B=Ab.view.View.getControl("",A);B.addLink(B.getEventCommands("onClickChart"))}function onClickItem_JS(panelId,selectedChartData,dataSeriesDisplayName){selectedChartData=eval("("+selectedChartData+")");var chart=Ab.view.View.getControl("",panelId);if(chart.secondaryGroupingAxis!=null&&chart.secondaryGroupingAxis.length>0){var secondaryGroupingAxisID=chart.secondaryGroupingAxis[0].table+"."+chart.secondaryGroupingAxis[0].field;selectedChartData[secondaryGroupingAxisID]=dataSeriesDisplayName}var pkFieldFullName="";if(chart.groupingAxis!=null){pkFieldFullName=chart.groupingAxis[0].table+"."+chart.groupingAxis[0].field}var pkFieldValue=selectedChartData[pkFieldFullName];if(valueExistsNotEmpty(pkFieldFullName)&&valueExistsNotEmpty(pkFieldValue)){for(var key in selectedChartData){var fieldDef=chart.getFieldDef(key);var fieldValue=selectedChartData[key];if(valueExists(fieldDef)&&fieldDef.isEnum){var enumValues=fieldDef.enumValues;for(var enumKey in enumValues){if(enumValues[enumKey]===fieldValue){selectedChartData[key]=enumKey;break}}if(key===pkFieldFullName){pkFieldValue=selectedChartData[key]}}}}var restriction=new Ab.view.Restriction();if(pkFieldFullName!=""){if((pkFieldValue.indexOf(selectedChartData.nullValueTitle)!=-1)){restriction.addClause(pkFieldFullName,"","IS NULL")}else{restriction.addClause(pkFieldFullName,pkFieldValue,"=")}}if(chart.restriction!=null&&chart.restriction.constructor!=String){if(chart.restriction.clauses){restriction.addClauses(chart.restriction,false,true)}else{for(var name in chart.restriction){if(chart.restriction.hasOwnProperty(name)&&name.indexOf(".")>0){restriction.addClause(name,chart.restriction[name],"=")}}}}chart.addLink(chart.getEventCommands("onClickItem"),restriction,selectedChartData)}function onClickSeries_JS(A,B){alert("onClickSeries - "+B)}function getLocalizedString_JS(B,A){var C=Ab.view.View.getControl("",B);return C.getLocalizedString(A)}function getDecimalSeparator_JS(){return strDecimalSeparator}function getGroupingSeparator_JS(){return strGroupingSeparator}Ab.namespace("chart");Ab.chart.ChartControl=Ab.flash.FlashComponent.extend({configObj:null,chartType:this.CHARTTYPE_PIE,supportedTypes:[],width:"100%",height:"100%",showLegendOnLoad:true,showLegendAsPopUp:false,legendLocation:null,showDataTips:true,refreshWorkflowRuleId:"",backgroundColor:"",FILLCOLOR_SATURATED:["0x1F497D","0x4BACC6","0x8064A2","0x9BBB59","0xC0504D","0x4F81BD","0xF79646","0x938953","0x000000","0x7F7F7F","0x0F243E","0x205867","0x3F3151","0x4F6128","0x5E1C1B","0x244061","0x974806","0x1D1B10","0x0C0C0C","0x7F7F7F"],FILLCOLOR_DESATURATED:["0xC6D9F0","0xDBEEF3","0xE5E0EC","0xEBF1DD","0xF2DCDB","0xDBE5F1","0xFDEADA","0xDDD9C3","0x7F7F7F","0xD8D8D8","0x548DD4","0xB7DDE8","0xCCC1D9","0xD7E3BC","0xE5B9B7","0x95B3D7","0xFBD5B5","0x938953","0x3F3F3F","0xBFBFBF"],fillColor:[],fillColorDesaturated:[],fillType:this.FILLTYPE_SOLID,supportedFillTypes:[],percentGradientChange:1,percentTransparency:1,events:null,groupingAxis:null,secondaryGroupingAxis:null,dataAxis:null,data:null,fieldDefs:null,showOnLoad:true,isLoadComplete:false,afterRefreshListener:null,afterCreateControlListener:null,afterLoadCompleteListener:null,requiredMajorVersion:"9",requiredMinorVersion:"0",requiredRevision:"115",constructor:function(M,A){this.inherit(M,"chart",A);this.configObj=A;this.supportedTypes.push(this.CHARTTYPE_PIE,this.CHARTTYPE_PIE_3D,this.CHARTTYPE_LINE,this.CHARTTYPE_LINE_3D,this.CHARTTYPE_BAR,this.CHARTTYPE_STACKEDBAR,this.CHARTTYPE_COLUMN,this.CHARTTYPE_COLUMN_3D,this.CHARTTYPE_AREA,this.CHARTTYPE_AREA_3D,this.CHARTTYPE_STACKEDAREA,this.CHARTTYPE_PLOT,this.CHARTTYPE_COLUMNLINE,this.CHARTTYPE_COLUMNLINE_3D);var G=A.getConfigParameterIfExists("controlType");if(valueExists(G)&&G!=""){for(var X=0;X<this.supportedTypes.length;X++){if(this.supportedTypes[X]==G){this.chartType=G;break}}}var T=A.getConfigParameterIfExists("width");if(valueExists(T)&&T!=""){this.width=T}var P=A.getConfigParameterIfExists("height");if(valueExists(P)&&P!=""){this.height=P}var L=A.getConfigParameterIfExists("showLegendOnLoad");if(valueExists(L)){this.showLegendOnLoad=L}var U=A.getConfigParameterIfExists("showLegendAsPopUp");if(valueExists(U)){this.showLegendAsPopUp=U}var b=A.getConfigParameterIfExists("legendLocation");if(valueExists(b)&&b!=""){this.legendLocation=b}var c=A.getConfigParameterIfExists("showDataTips");if(valueExists(c)){this.showDataTips=c}else{this.configObj.setConfigParameter("showDataTips",this.showDataTips)}var Q=A.getConfigParameterIfExists("showAllDataTips");if(valueExists(Q)){this.setDataTipFunction(Q)}else{this.configObj.setConfigParameter("showAllDataTips",this.showAllDataTips)}this.refreshWorkflowRuleId=this.WORKFLOW_RULE_REFRESH;var H=A.getConfigParameterIfExists("refreshWorkflowRuleId");if(valueExists(H)&&H!=""){this.refreshWorkflowRuleId=H}var D=A.getConfigParameterIfExists("backgroundColor");if(valueExists(D)&&D!=""){this.backgroundColor=D}var E=A.getConfigParameterIfExists("fillColor");if(valueExists(E)&&E.length>0){this.fillColor=E}else{this.fillColor=this.FILLCOLOR_SATURATED;this.configObj.setConfigParameter("fillColor",this.fillColor)}var R=A.getConfigParameterIfExists("fillColorDesaturated");if(valueExists(R)&&R.length>0){this.fillColorDesaturated=R}else{this.fillColorDesaturated=this.FILLCOLOR_DESATURATED;this.configObj.setConfigParameter("fillColorDesaturated",this.fillColorDesaturated)}this.supportedFillTypes.push(this.FILLTYPE_SOLID,this.FILLTYPE_LINEARGRADIENT,this.FILLTYPE_RADIALGRADIENT);var K=A.getConfigParameterIfExists("fillType");if(valueExists(K)&&K!=""){for(var X=0;X<this.supportedFillTypes.length;X++){if(this.supportedFillTypes[X]==K){this.fillType=K;break}}}var J=A.getConfigParameterIfExists("percentGradientChange");if(valueExists(J)&&J>=0&&J<=1){this.percentGradientChange=J}else{this.configObj.setConfigParameter("percentGradientChange",this.percentGradientChange)}var F=A.getConfigParameterIfExists("percentTransparency");if(valueExists(F)&&F>=0&&F<=1){this.percentTransparency=F}else{this.configObj.setConfigParameter("percentTransparency",this.percentTransparency)}var Y=A.getConfigParameter("groupingAxis");this.groupingAxis=new Array();if(valueExists(Y)&&Y.length>0){this.groupingAxis[0]=new Ab.chart.ChartAxis(this.dataSourceId,Y[0]);this.configObj.setConfigParameter("groupingAxis",this.groupingAxis)}var W=A.getConfigParameter("secondaryGroupingAxis");this.secondaryGroupingAxis=new Array();if(valueExists(W)&&W.length>0){this.secondaryGroupingAxis[0]=new Ab.chart.ChartAxis(this.dataSourceId,W[0]);this.configObj.setConfigParameter("secondaryGroupingAxis",this.secondaryGroupingAxis)}var S=A.getConfigParameter("dataAxis");this.dataAxis=new Array();if(valueExists(S)&&S.length>0){for(var X=0;X<S.length;X++){var Z=new Ab.chart.ChartDataAxis(this.dataSourceId,S[X]);this.dataAxis[X]=Z}this.configObj.setConfigParameter("dataAxis",this.dataAxis)}this.configObj.addParameterIfNotExists("dataAxisTitle","");var B=A.getConfigParameter("events");if(valueExists(B)&&B!=null){this.events=B}var C=A.getConfigParameter("fieldDefs");if(valueExists(C)&&C!=null){var O=View.dataSources.get(this.dataSourceId);if(O!=null){var I=(valueExists(O.fieldDefs)&&O.fieldDefs!=null);this.fieldDefs=new Array();for(var X=0;X<C.length;X++){this.fieldDefs[X]=C[X];if(I){for(var V=0;V<O.fieldDefs.length;V++){if(C[X].id==O.fieldDefs.items[V].id){this.fieldDefs[X]=O.fieldDefs.items[V]}}}if(valueExists(this.fieldDefs[X].currency)){this.fieldDefs[X].currencySymbol=View.currencySymbolFor(this.fieldDefs[X].currency)}}this.configObj.setConfigParameter("fieldDefs",this.fieldDefs)}}this.showOnLoad=A.getConfigParameter("showOnLoad",true);this.setSwfPath();var e=A.getConfigParameterIfExists("requiredMajorVersion");if(valueExists(e)){this.requiredMajorVersion=e}var N=A.getConfigParameterIfExists("requiredMinorVersion");if(valueExists(N)){this.requiredMinorVersion=N}var a=A.getConfigParameterIfExists("requiredRevision");if(valueExists(a)){this.requiredRevision=a}this.isLoadComplete=false;this.addEventListenerFromConfig("afterCreateControl",A);this.addEventListenerFromConfig("afterLoadComplete",A);this.addEventListenerFromConfig("afterResize",A);this.evaluateExpressionsAfterLoad()},isScrollInLayout:function(){return false},afterResize:function(){this.syncHeight()},syncHeight:function(){var B=Ext.get(this.id);if(B){var A=this.determineHeight()-this.getActionbarHeight()-this.getInstructionsHeight();if(valueExists(this.parentTab)){A-=(this.getTitlebarHeight()+4)}B.setHeight(A)}},evaluateExpressionsAfterLoad:function(A){var A=this.createEvaluationContext();var E=this.configObj.getConfigParameter("dataAxisTitle");if(valueExistsNotEmpty(E)){E=View.evaluateString(E,A);this.configObj.setConfigParameter("dataAxisTitle",E)}this.actions.each(function(G){var F=Ab.view.View.evaluateBoolean(G.enabled,A);G.forceDisable(!G.show||!G.enabled)});if(valueExists(this.fieldDefs)){for(var C=0;C<this.fieldDefs.length;C++){var B=this.fieldDefs[C];B.title=View.evaluateString(B.title,A)}}if(valueExists(this.groupingAxis)){for(var C=0;C<this.groupingAxis.length;C++){var D=this.groupingAxis[C];D.title=View.evaluateString(D.title,A)}}if(valueExists(this.secondaryGroupingAxis)){for(var C=0;C<this.secondaryGroupingAxis.length;C++){var D=this.secondaryGroupingAxis[C];D.title=View.evaluateString(D.title,A)}}if(valueExists(this.dataAxis)){for(var C=0;C<this.dataAxis.length;C++){var D=this.dataAxis[C];D.title=View.evaluateString(D.title,A)}}},getFieldDef:function(A){if(valueExists(this.fieldDefs)){for(var C=0;C<this.fieldDefs.length;C++){var B=this.fieldDefs[C];if(B.fullName===A){return B}}}return null},showDataAxisTitle:function(C,D){if(valueExists(this.dataAxis)&&this.dataAxis.length>0){for(var B=0;B<this.dataAxis.length;B++){if(this.dataAxis[B].id=C){var A=new Ab.chart.ChartDataAxis(this.dataSourceId,this.dataAxis[B]);A.showTitle=D;this.dataAxis[B]=A}}this.configObj.setConfigParameter("dataAxis",this.dataAxis)}},showDataAxisTick:function(C,D){if(valueExists(this.dataAxis)&&this.dataAxis.length>0){for(var B=0;B<this.dataAxis.length;B++){if(this.dataAxis[B].id=C){var A=new Ab.chart.ChartDataAxis(this.dataSourceId,this.dataAxis[B]);A.showTick=D;this.dataAxis[B]=A}}this.configObj.setConfigParameter("dataAxis",this.dataAxis)}},showDataAxisMinorTick:function(D,A){if(valueExists(this.dataAxis)&&this.dataAxis.length>0){for(var C=0;C<this.dataAxis.length;C++){if(this.dataAxis[C].id=D){var B=new Ab.chart.ChartDataAxis(this.dataSourceId,this.dataAxis[C]);B.showMinorTick=A;this.dataAxis[C]=B}}this.configObj.setConfigParameter("dataAxis",this.dataAxis)}},setDataAxisUnit:function(D,A,E){if(valueExists(this.dataAxis)&&this.dataAxis.length>0){for(var C=0;C<this.dataAxis.length;C++){if(this.dataAxis[C].id=D){var B=new Ab.chart.ChartDataAxis(this.dataSourceId,this.dataAxis[C]);B.setUnit(A,E);this.dataAxis[C]=B}}this.configObj.setConfigParameter("dataAxis",this.dataAxis)}},showGroupingAxisTitle:function(A){if(valueExists(this.groupingAxis)&&this.groupingAxis.length>0){var B=new Ab.chart.ChartAxis(this.dataSourceId,this.groupingAxis[0]);B.showTitle=A;this.groupingAxis[0]=B;this.configObj.setConfigParameter("groupingAxis",this.groupingAxis)}},showGroupingAxisTick:function(B){if(valueExists(this.groupingAxis)&&this.groupingAxis.length>0){var A=new Ab.chart.ChartAxis(this.dataSourceId,this.groupingAxis[0]);A.showTick=B;this.groupingAxis[0]=A;this.configObj.setConfigParameter("groupingAxis",this.groupingAxis)}},showGroupingAxisMinorTick:function(A){if(valueExists(this.groupingAxis)&&this.groupingAxis.length>0){var B=new Ab.chart.ChartAxis(this.dataSourceId,this.groupingAxis[0]);B.showMinorTick=A;this.groupingAxis[0]=B;this.configObj.setConfigParameter("groupingAxis",this.groupingAxis)}},setDataAxisTitle:function(A){this.configObj.addParameterIfNotExists("dataAxisTitle","");this.configObj.setConfigParameter("dataAxisTitle",A)},setCalloutGap:function(C){if(C<0){C=10}var A=this.getSWFControl();if(A!=null){try{A.setSeriesStyleProperty("calloutGap",C);A.refreshData(this.data)}catch(B){}}},setInsideLabelSizeLimit:function(B){if(B<0){B=9}var A=this.getSWFControl();if(A!=null){try{A.setSeriesStyleProperty("insideLabelSizeLimit",B);A.refreshData(this.data)}catch(C){}}},setSolidFillColors:function(A){if(valueExists(A)&&A.length>0){this.fillColor=A}else{this.fillColor=this.FILLCOLOR_SATURATED}this.fillType=this.FILLTYPE_SOLID;var B=this.getSWFControl();if(B!=null){try{B.setFillColors(this.fillType,this.fillColor,this.FILLCOLOR_DESATURATED,this.percentGradientChange,this.percentTransparency)}catch(C){}}},setGradientFillColors:function(G,C,A,E,F){if(G==this.FILLTYPE_RADIALGRADIENT){this.fillType=this.FILLTYPE_RADIALGRADIENT}else{this.fillType=this.FILLTYPE_LINEARGRADIENT}if(valueExists(C)&&C.length>0){this.fillColor=C}else{this.fillColor=this.FILLCOLOR_SATURATED}if(valueExists(A)&&A.length>0){this.fillColorDesaturated=A}else{this.fillColorDesaturated=this.FILLCOLOR_DESATURATED}if(valueExists(E)&&E>=0&&E<=1){this.percentGradientChange=E}else{this.percentGradientChange=1}if(valueExists(F)&&F>=0&&F<=1){this.percentTransparency=F}else{this.percentTransparency=1}var B=this.getSWFControl();if(B!=null){try{B.setFillColors(this.fillType,this.fillColor,this.FILLCOLOR_DESATURATED,this.percentGradientChange,this.percentTransparency)}catch(D){}}},setDataTipFunction:function(B){var A=this.getSWFControl();if(A!=null){try{A.setDataTipFunction(B);A.refreshData(this.data)}catch(C){}}},afterCreateControl:function(){var A=this.getEventListener("afterCreateControl");if(A){A(this)}},afterLoadComplete:function(){this.isLoadComplete=true;this.syncHeight();var A=this.getEventListener("afterLoadComplete");if(A){A(this)}},setControlProperty:function(B,A){var C=this.getSWFControl();if(C){C.setControlProperty(B,A)}},setStyleProperty:function(B,A){var C=this.getSWFControl();if(C){C.setStyleProperty(B,A)}},initialDataFetch:function(){if(this.showOnLoad){this.data=this.getDataFromDataSources(this.restriction)}this.loadChartSWFIntoFlash();if(this.getInstructionsEl()){this.showElement(this.getInstructionsEl(),true)}},refresh:function(A){if(valueExists(A)){this.restriction=A}this.data=this.getDataFromDataSources(A);this.refreshControl()},refreshControl:function(){var A=this.getSWFControl();if(A!=null){try{A.refreshData(this.data)}catch(B){}}this.afterRefresh()},getSWFControl:function(){var B=$(this.id+"_OE");if(B!=null){try{B.isReady()}catch(A){return null}}return B},getImageBytes:function(){var A=this.getSWFControl();if(A&&A.getImageBytes){return A.getImageBytes()}return[]},loadChartSWFIntoFlash:function(){var B=this.DetectFlashVer(6,0,65);var C=this.DetectFlashVer(this.requiredMajorVersion,this.requiredMinorVersion,this.requiredRevision);if(B&&!C){var F=(this.isIE==true)?"ActiveX":"PlugIn";var G=window.location;document.title=document.title.slice(0,47)+" - Flash Player Installation";var A=document.title;var E=this.returnContent("src",this.getPlayerProductInstallName(),"FlashVars","MMredirectURL="+G+"&MMplayerType="+F+"&MMdoctitle="+A+"","width",this.width,"height",this.height,"id",this.id,"quality","high","bgcolor","#FFFFFF","name",this.id,"allowScriptAccess","sameDomain","type","application/x-shockwave-flash","pluginspage","http://www.adobe.com/go/getflashplayer","codebase","http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab");this.injectFlashTag(E,this.id)}else{if(C){var E=this.returnContent("id",this.id+"_OE","src",this.getSwfPath(),"width",this.width,"height",this.height,"quality","high","bgcolor","#FFFFFF","name",this.id+"OE","allowScriptAccess","sameDomain","type","application/x-shockwave-flash","pluginspage","http://www.adobe.com/go/getflashplayer","codebase","http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab");this.injectFlashTag(E,this.id)}else{var D="To display the chart, you need the Adobe Flash Player version 9.0.115 or higher.<a href=http://www.adobe.com/go/getflash/>Get Flash</a>";this.injectFlashTag(D,this.id)}}this.visible=true},getDataFromDataSources:function(B){try{var C=this.getParameters(B);var A=Workflow.call(this.refreshWorkflowRuleId,C,120);return toJSON(A.data)}catch(D){this.handleError(D)}},getParameters:function(B){var F=this.configObj.getConfigParameter("viewDef");var E=this.configObj.getConfigParameter("groupingAxis");var C=this.configObj.getConfigParameter("dataAxis");var D={version:"2",viewName:F,groupingAxis:toJSON(E),dataAxis:toJSON(C),type:"chart"};var A=this.configObj.getConfigParameter("secondaryGroupingAxis");if(valueExists(A)&&A.length>0){D.secondaryGroupingAxis=toJSON(A)}if(valueExists(B)){D.restriction=toJSON(B)}Ext.apply(D,this.parameters);return D},setSwfPath:function(){switch(this.chartType){case this.CHARTTYPE_PIE:this.swfPath="AbPieChart";break;case this.CHARTTYPE_PIE_3D:this.swfPath="AbPieChart3D";break;case this.CHARTTYPE_LINE:this.swfPath="AbLineChart";break;case this.CHARTTYPE_LINE_3D:this.swfPath="AbLineChart3D";break;case this.CHARTTYPE_BAR:this.swfPath="AbBarChart";break;case this.CHARTTYPE_COLUMN:this.swfPath="AbColumnChart";break;case this.CHARTTYPE_COLUMN_3D:this.swfPath="AbColumnChart3D";break;case this.CHARTTYPE_AREA:this.swfPath="AbAreaChart";break;case this.CHARTTYPE_AREA_3D:this.swfPath="AbAreaChart3D";break;case this.CHARTTYPE_STACKEDBAR:this.swfPath="AbBarChart";break;case this.CHARTTYPE_STACKEDAREA:this.swfPath="AbAreaChart";break;case this.CHARTTYPE_PLOT:this.swfPath="AbPlotChart";break;case this.CHARTTYPE_COLUMNLINE:this.swfPath="AbColumnChart";break;case this.CHARTTYPE_COLUMNLINE_3D:this.swfPath="AbColumnChart3D";break;default:this.swfPath="AbPieChart";break}if(this.id!=null){this.swfPath+="?panelId="+this.id}},getSwfPath:function(){return View.contextPath+"/schema/ab-core/controls/chart/"+this.swfPath},getPlayerProductInstallName:function(){return View.contextPath+"/schema/ab-core/libraries/flex/playerProductInstall"},addLink:function(A,B,C){var F=new Ab.command.commandChain(this.id,B);F.addCommands(A);var E=$(this.id);E.command=F;if(typeof C=="undefined"){C=null}var D={restriction:B,selectedChartData:C,chart:this};F.handle(D)},getEventCommands:function(B){for(var A=0;A<this.events.length;A++){if(this.events[A]["type"]==B){return this.events[A]["commands"]}}return null},getLocalizedString:function(A){return Ab.view.View.getLocalizedString(A)},addLine:function(C,F,B,D,A,G){var E=this.getSWFControl();if(E&&E.addLine){E.addLine(C,F,B,D,A,G)}},addTargetLine:function(D,A,C){var B=this.getSWFControl();if(B&&B.addTargetLine){B.addTargetLine(D,A,C)}},callReportJob:function(F){var G=F.outputType,C=F.printRestriction,B=F.orientation,A=F.pageSize;if(G==="docx"||G==="pdf"){var E={};if(valueExists(C)){E.printRestriction=C;E.restriction=toJSON(this.restriction)}if(valueExistsNotEmpty(B)){E.orientation=B}if(valueExistsNotEmpty(A)){E.pageSize=A}E.outputType=G;var D=this.title;if(D==""){D=Ab.view.View.title}return this.callDOCXReportJob(D,null,E)}else{View.showMessage("error",G.toUpperCase()+" action is NOT supported for a Chart panel. Please choose DOCX or PDF format.")}return null},callDOCXReportJob:function(D,A,B){var C=this.config.viewDef+".axvw";if(valueExists(B)&&valueExists(B.printRestriction)){B.dataSourceId=this.dataSourceId}return Workflow.startJob(this.WORKFLOW_RULE_DOCX_REPORT,C,this.getImageBytes(),D,B)},CHART_LEGEND_ASPOPUP:"Display Legend As Popup",CHART_LEGEND_ATBOTTOM:"Display Legend At Bottom",CHART_LEGEND_HIDE:"Hide Legend",CHART_TOTAL:"Total",WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecords",WORKFLOW_RULE_DOCX_REPORT:"AbSystemAdministration-generatePaginatedReport-buildDocxFromChart",CHARTTYPE_PIE:"pieChart",CHARTTYPE_PIE_3D:"pieChart3D",CHARTTYPE_LINE:"lineChart",CHARTTYPE_LINE_3D:"lineChart3D",CHARTTYPE_BAR:"barChart",CHARTTYPE_COLUMN:"columnChart",CHARTTYPE_COLUMN_3D:"columnChart3D",CHARTTYPE_AREA:"areaChart",CHARTTYPE_AREA_3D:"areaChart3D",CHARTTYPE_STACKEDBAR:"stackedBarChart",CHARTTYPE_STACKEDAREA:"stackedAreaChart",CHARTTYPE_PLOT:"plotChart",CHARTTYPE_COLUMNLINE:"columnLineChart",CHARTTYPE_COLUMNLINE_3D:"columnLineChart3D",LEGENDLOC_RIGHT:"right",LEGENDLOC_LEFT:"left",LEGENDLOC_TOP:"top",LEGENDLOC_BOTTOM:"bottom",FILLTYPE_SOLID:"solid",FILLTYPE_LINEARGRADIENT:"linearGradient",FILLTYPE_RADIALGRADIENT:"radialGradient",DATA_LABEL_POSITION_CALLOUT:"callout",DATA_LABEL_POSITION_INSIDE:"inside",DATA_LABEL_POSITION_OUTSIDE:"outside",DATA_LABEL_POSITION_NONE:"none",DATA_LABEL_POSITION__INSIDEWITHOUTCALLOUT:"insideWithCallout"});Ab.chart.ChartAxis=Base.extend({id:"",title:"",table:"",field:"",dataSourceId:"",labelFunction:"",showLabel:true,showTitle:true,labelRotation:0,unitKey:"1",supportedUnitKeys:["1","K","M","B"],unitSuffix:"",showTick:true,showMinorTick:true,parameterType:"text",supportedParameterTypes:["text","date","time","number"],displayAxis:false,constructor:function(A,B){this.id=B.id;this.table=B.table;this.field=B.field;this.labelFunction=B.labelFunction;this.showLabel=B.showLabel;this.labelRotation=B.labelRotation;this.title=B.title;this.showTick=B.showTick;this.showMinorTick=B.showMinorTick;if(B.dataSourceId==null||B.dataSourceId==""){this.dataSourceId=A}else{this.dataSourceId=B.dataSourceId}if(B.showTitle!=null){this.showTitle=B.showTitle}if(B.showTick!=null){this.showTick=B.showTick}if(B.showMinorTick!=null){this.showMinorTick=B.showMinorTick}this.setUnit(B.unitKey,B.unitSuffix);if(B.displayAxis!=null){this.displayAxis=B.displayAxis}},setUnit:function(A,C){if(A!=null&&A!=""){for(var B=0;B<this.supportedUnitKeys.length;B++){if(this.supportedUnitKeys[B]==A){this.unitKey=A;break}}}if(C!=null&&C!=""){this.unitSuffix=C}}});Ab.chart.ChartDataAxis=Ab.chart.ChartAxis.extend({type:this.DATAAXIS_TYPE_DEFAULT,supportedTypes:[],labelPosition:this.PIELABEL_TYPE_NONE,calloutGap:10,insideLabelSizeLimit:9,supportedlabelPosition:[],autoCalculateTickSizeInterval:true,tickSizeInterval:1000,constructor:function(E,D){this.inherit(E,D);this.supportedTypes.push(this.DATAAXIS_TYPE_DEFAULT,this.DATAAXIS_TYPE_COLUMN,this.DATAAXIS_TYPE_LINE);for(var C=0;C<this.supportedTypes.length;C++){if(this.supportedTypes[C]==D.type){this.type=D.type;break}}this.supportedlabelPosition.push(this.PIELABEL_TYPE_CALLOUT,this.PIELABEL_TYPE_INSIDE,this.PIELABEL_TYPE_OUTSIDE,this.PIELABEL_TYPE_NONE,this.PIELABEL_TYPE_INSIDEWITHOUTCALLOUT);if(D.labelPosition!=""){for(var C=0;C<this.supportedlabelPosition.length;C++){if(this.supportedlabelPosition[C]==D.labelPosition){this.labelPosition=D.labelPosition}}}this.autoCalculateTickSizeInterval=D.autoCalculateTickSizeInterval;if(!this.autoCalculateTickSizeInterval){this.tickSizeInterval=D.tickSizeInterval}var B=D.calloutGap;if(B!=null){this.calloutGap=B}var A=D.insideLabelSizeLimit;if(A!=null){this.insideLabelSizeLimit=A}},DATAAXIS_TYPE_DEFAULT:"default",DATAAXIS_TYPE_COLUMN:"column",DATAAXIS_TYPE_LINE:"line",PIELABEL_TYPE_CALLOUT:"callout",PIELABEL_TYPE_INSIDE:"inside",PIELABEL_TYPE_OUTSIDE:"outside",PIELABEL_TYPE_NONE:"none",PIELABEL_TYPE_INSIDEWITHOUTCALLOUT:"insideWithCallout"});Ab.namespace("paginate");Ab.paginate.BaseReport=Base.extend({panel:null,result:null,constructor:function(B,A){this.panel=B;this.result=A},removeHeader:function(){var A=this.panel.getTableHeadElement();A.parentNode.removeChild(A)},removeFooter:function(){var A=this.panel.tableFootElement;if(A==null){return }while(A.firstChild){A.removeChild(A.firstChild)}},addFooter:function(D,C){var A=this.panel.tableFootElement;var B=this.insertChild(A,"tr",{height:"25px"});var E=this.insertChild(B,"td",null,"");if(E!=null){E.colSpan=D}B=this.insertChild(A,"tr",{"class":"instruction"});E=this.insertChild(B,"td",null,"<i>"+C+"</i>");if(E!=null){E.colSpan=D}},getValidDataResult:function(A,B){if(typeof (B.jobId)=="undefined"){return B[A]}else{return B}return B},insertChild:function(D,B,E,F,A){if(D==null){return null}var C=document.createElement(B);if(typeof (E)!=="undefined"&&E!=null){for(key in E){C.setAttribute(key,E[key])}}if(typeof (F)!=="undefined"&&F!=null){C.innerHTML=F}if(typeof (A)!=="undefined"){D.insertBefore(C,A)}else{D.appendChild(C)}return C},REPORT_GENERATING:"Still Generating...",REPORT_USELINK_PREVIEW_MESSAGE:"Use these links to preview portions of the report as it generates."});Ab.namespace("paginate");Ab.paginate.ResultsReport=Ab.paginate.BaseReport.extend({panel:null,result:null,constructor:function(B,A){this.inherit(B,A);this.addDataRows();this.removeFooter();this.addFooter("2",Ab.view.View.getLocalizedString(this.REPORT_USELINK_PREVIEW_MESSAGE))},refresh:function(A){this.result=A;this.removeDataRows();this.addDataRows()},addDataRows:function(){if(typeof this.result!="undefined"){this.result=Workflow.getJobStatus(this.result.jobId);if(this.result.jobPartialResults!=null){var B=this.result.jobPartialResults.length;for(var A=0;A<B;A++){this.addDataRow(A,this.result.jobPartialResults[A])}}}},removeDataRows:function(){var A=this.panel.tableBodyElement;if(A==null){return }while(A.firstChild){A.removeChild(A.firstChild)}},addDataRow:function(B,A){var C=this.insertChild(this.panel.tableBodyElement,"tr");if(this.result.jobPartialResults!=null){this.insertChild(C,"td",null,"<i>"+this.result.jobPartialResults[B].title+"</i>");if(B==this.result.jobPartialResults.length-1&&parseInt(A.jobPercentComplete)<100){this.insertChild(C,"td",null,"<i>"+Ab.view.View.getLocalizedString(this.REPORT_GENERATING)+"</i>")}else{this.insertChild(C,"td",null,"<i><a href='"+this.result.jobPartialResults[B].url+"' target='_blank'>"+this.result.jobPartialResults[B].name+"</a></i>")}}},REPORT_GENERATING:"Still Generating...",REPORT_USELINK_PREVIEW_MESSAGE:"Use these links to preview portions of the report as it generates."});Ab.namespace("paginate");Ab.paginate.ProgressReport=Ab.paginate.BaseReport.extend({pBars:null,progressColSpan:"5",footerMsg:"",constructor:function(B,A,C){this.inherit(B,A);this.progressColSpan=C;this.footerMsg=this.PROCESS_LEAVEWINDOW_MESSAGE;this.pBars=new Array();this.processHeader();if(this.result!=null&&typeof (this.result.jobId)=="undefined"){this.addHeaderInstruction()}if(A!=null){this.addDataRows()}Ext.EventManager.onWindowResize(this.onWindowResize,this)},setFooterMsgForSingleJob:function(){this.footerMsg=this.PROCESS_LEAVEJOB_MESSAGE;this.removeFooter();this.addFooter(this.progressColSpan+1,Ab.view.View.getLocalizedString(this.footerMsg))},refresh:function(A){this.result=A;this.removeDataRows();this.addDataRows()},setResultViewLink:function(){var B=Ext.query(".dataRow",this.panel.tableBodyElement);var D=B[0];for(var A=0;A<this.panel.columns.length;A++){if(this.panel.columns[A].id=="afm_tbls.result_view"){var C=D.childNodes[A].innerHTML;if(this.result.jobFile.url.lastIndexOf(".pdf")>0){D.childNodes[A].innerHTML='<a class="prominent" onclick="window.open(\''+this.result.jobFile.url+"')\" />"+C+"</a>"}else{D.childNodes[A].innerHTML='<a class="prominent" href="'+this.result.jobFile.url+'" />'+C+"</a>"}}}},processHeader:function(){var A=this.panel.headerRows;if(A.length>0){A[0].vAlign="top";for(var B=0;B<A[0].childNodes.length;B++){var D=A[0].childNodes[B].innerHTML;A[0].childNodes[B].innerHTML="";var C=document.createElement("span");A[0].childNodes[B].appendChild(C);this.replaceSpecialChars(C,D,true)}}},removeDataRows:function(){var A=this.panel.rows;if(A==null){return }if(A.length>0){this.panel.removeRows(0);this.panel.clear()}},addDataRows:function(){var E=this.panel.tableBodyElement;if(E==null){return }var A=0;if(typeof (this.result.jobId)=="undefined"){for(var D in this.result){A++}for(var C=0;C<A;C++){this.addDataRow(this.result[C])}}else{this.addDataRow(this.result);A++}var B=null;for(var C=A-1;C>=0;C--){B=this.getValidDataResult(C,this.result);if(C<A-1){this.insertProgressBar(C,B.jobId,E.childNodes[C+1])}else{this.insertProgressBar(C,B.jobId)}this.updateButtonValue(C,this.result)}if(A>0){this.removeFooter();this.addFooter(this.progressColSpan+1,Ab.view.View.getLocalizedString(this.footerMsg))}},addDataRow:function(B){var A=new Ab.data.Record({"afm_tbls.job_name":B.jobFile.title,"afm_tbls.result_view":B.jobFile.name,"afm_tbls.pct_complete":B.jobPercentComplete,"afm_tbls.eclapsed_time":B.jobElapsedTime,"afm_tbls.est_time_remain":B.jobEstimatedTimeRemaining},true);this.panel.addGridRow(A);this.panel.update()},addHeaderInstruction:function(){var D=this.panel.parentElement;var A=this.panel.divHeadElement;var E=this.insertChild(D,"table",{"class":"panelReport"},null,A);var B=this.insertChild(E,"tr");var C=this.insertChild(B,"td",{"class":"instruction"},"<i>"+Ab.view.View.getLocalizedString(this.PROGRESS_LEAVE_RETURN)+"</i>");if(C!=null){C.colSpan=this.progressColSpan}B=this.insertChild(E,"tr");C=this.insertChild(B,"td",{"class":"instruction"},"<i>"+Ab.view.View.getLocalizedString(this.PROGRESS_ALLRESULT_REMAIN)+"</i>");if(C!=null){C.colSpan=this.progressColSpan}},replaceSpecialChars:function(B,C,A){if(A){C=C.replace(/&lt;/g,"<");C=C.replace(/&gt;/g,">")}B.innerHTML=C},insertProgressBar:function(F,B,D){var G=this.panel.tableBodyElement;var H=null;if(F%2==0){H=this.insertChild(G,"tr",{"class":"dataRow"},null,D)}else{H=this.insertChild(G,"tr",{"class":"dataRow odd"},null,D)}var E=this.insertChild(H,"td",{id:"pb_"+B,"class":"text",align:"center"});if(E!=null){E.colSpan=this.progressColSpan}var A=this.insertChild(E,"div",{id:B+"_div"});var I=document.getElementById(B);var C=new Ext.ProgressBar({text:this.PROGRESSBAR_READY,id:B+"_bar_div",cls:"x-progress-wrap",width:"70%",renderTo:B+"_div"});this.pBars[F]=C},updateButtonValue:function(D,A){var C=this.getValidDataResult(D,A);var E=parseInt(C.jobPercentComplete);var H=C.jobStatusMessage;if(valueExistsNotEmpty(C.jobMessage)){H=H+" - "+C.jobMessage}var G=this.pBars[D];G.updateProgress(E/100,H);if(E==100){var B=Math.floor(1*G.el.parent().dom.offsetWidth);G.progressBar.setWidth(B)}var F=document.getElementById(this.panel.id+"_row"+D+"_progressButton");if(F){F.value=Ab.view.View.getLocalizedString(this.PROGRESS_STOP_JOB);if(C.jobStatusCode==2){F.disabled=false}else{F.disabled=true}}},onWindowResize:function(){this.refresh(this.result);if(this.result.jobFinished){this.setResultViewLink()}},PROGRESSBAR_READY:"Ready",PROCESS_LEAVEWINDOW_MESSAGE:"If you leave this window, your report will continue generating. You can access it later from Web Central's <b>My Jobs</b> view.",PROCESS_LEAVEJOB_MESSAGE:"If you leave this window, your job will continue running. You can access it later from Web Central's <b>My Jobs</b> view.",PROGRESS_STOP_JOB:"Stop Job",PROGRESS_LEAVE_RETURN:"You can leave this view and return using the <b>My Jobs</b> selection in the main menu bar",PROGRESS_ALLRESULT_REMAIN:"All jobs will continue and all job results will remain until you remove them or until you end your Web Central session."});Ab.paginate.ProgressPanel=Base.extend({panel:"",jobId:"",status:null,progressTask:null,progressTaskRunner:null,progressRefreshInterval:5,progressReport:null,onJobStatusUpdated:null,afterJobFinished:null,jobButton:null,constructor:function(A,B,C){this.panel=A;this.panel.sortEnabled=false;if(valueExists(B)){this.afterJobFinished=B}if(valueExists(C)){this.onJobStatusUpdated=C}this.jobButton=$(this.panel.getParentElementId()+"_row0_progressButton")},onJobStarted:function(A){this.jobId=A;this.status=Workflow.getJobStatus(this.jobId);if(this.progressReport==null){this.progressReport=new Ab.paginate.ProgressReport(this.panel,this.status,"6")}this.startProgressTask();if(this.jobButton){this.jobButton.value=this.progressReport.PROGRESS_STOP_JOB}},startProgressTask:function(){var A=this;this.progressTask={run:function(){A.status=Workflow.getJobStatus(A.jobId);A.progressReport.refresh(A.status);if(A.onJobStatusUpdated){A.onJobStatusUpdated(A.status)}if(A.status.jobFinished){A.progressTaskRunner.stop(A.progressTask);if(A.afterJobFinished){A.afterJobFinished(A.status)}}},interval:1000*A.progressRefreshInterval};this.progressTaskRunner=new Ext.util.TaskRunner();this.progressTaskRunner.start(this.progressTask)},stopJob:function(){Workflow.stopJob(this.jobId);this.progressTaskRunner.stop(this.progressTask);var A=Workflow.getJobStatus(this.jobId);this.progressReport.refresh(A);if(this.jobButton){this.jobButton.disabled=true}},isJobStarted:function(){return valueExists(this.status)},isJobFinished:function(){return valueExists(this.status)&&this.status.jobFinished},clear:function(){this.jobId=null;this.status=null;if(this.jobButton){this.jobButton.value=this.PROGRESS_START_JOB;this.jobButton.disabled=false}},getJobButton:function(){return $(this.panel.getParentElementId()+"_row0_progressButton")},PROGRESS_START_JOB:"Start Job"});var key="0@1Z2y3X4^5w6*7=8-9+";function permutationGenerator(B){this.nNumElements=B;this.antranspositions=new Array;var A=0;for(i=0;i<B-1;i++){for(j=i+1;j<B;j++){this.antranspositions[A++]=(i<<8)|j}}this.nNumtranspositions=A;this.fromCycle=permutationGenerator_fromCycle}function permutationGenerator_fromCycle(A){var F=new Array(this.nNumElements);for(var D=0;D<this.nNumElements;D++){F[D]=D}for(var D=0;D<A.length;D++){var B=this.antranspositions[A[D]];var E=B&255;var C=(B>>8)&255;B=F[E];F[E]=F[C];F[C]=B}return F}function password(A){this.strpasswd=A;this.getHashValue=password_getHashValue;this.getpermutation=password_getpermutation}function password_getHashValue(){var A=907633409;var B=65599;var D=0;for(var C=0;C<this.strpasswd.length;C++){D=(D%A)*B+this.strpasswd.charCodeAt(C)}return D}function password_getpermutation(){var E=4;var D=9;pg=new permutationGenerator(E);var A=new Array(D);var B=this.getHashValue();for(var C=0;C<D;C++){B=11*B+11;A[C]=B%pg.nNumtranspositions}return pg.fromCycle(A)}function SecureContext(A,C,B){this.strSIGNATURE=C||"";this.bESCApE=B||false;this.strText=A;this.escape=SecureContext_escape;this.unescape=SecureContext_unescape;this.transliterate=SecureContext_transliterate;this.encypher=SecureContext_encypher;this.decypher=SecureContext_decypher;this.sign=SecureContext_sign;this.unsign=SecureContext_unsign;this.secure=SecureContext_secure;this.unsecure=SecureContext_unsecure}function SecureContext_escape(C){var D="";for(var B=0;B<C.length;B++){var A=C.charAt(B);switch(A){case"\r":D+="\\r";break;case"\n":D+="\\n";break;case"\\":D+="\\\\";break;default:D+=A}}return D}function SecureContext_unescape(D){var B="";var C=0;while(C<D.length){var A=D.charAt(C++);if("\\"==A){A=D.charAt(C++);switch(A){case"r":B+="\r";break;case"n":B+="\n";break;case"\\":B+="\\";break;default:}}else{B+=A}}return B}function SecureContext_transliterate(D){var F="";var G=0;var A=0;while(G<this.strText.length){var C="";var H=0;while(H<7&&G<this.strText.length){var B=this.strText.charAt(G++);if(-1==C.indexOf(B)){C+=B;H=0}else{H++}}while(A<G){var E=C.indexOf(this.strText.charAt(A++));if(D){E++;if(E==C.length){E=0}}else{E--;if(E==-1){E+=C.length}}F+=C.charAt(E)}}this.strText=F}function SecureContext_encypher(G){var F="";var E=G.length;var D=this.strText.length/E;for(var C=0;C<E;C++){var A=G[C];for(var B=0;B<D;B++){F+=this.strText.charAt(A);A+=E}}this.strText=F}function SecureContext_decypher(G){var E=G.length;var F=this.strText.length/E;var B=new Array;for(var D=0;D<E;D++){B[G[D]]=D*F}var A="";for(var D=0;D<F;D++){for(var C=0;C<E;C++){A+=this.strText.charAt(B[C]+D)}}this.strText=A}function SecureContext_sign(F){if(this.bESCApE){this.strText=this.escape(this.strText);this.strSIGNATURE=this.escape(this.strSIGNATURE)}var D=this.strText.length+this.strSIGNATURE.length;var C=F-(D%F);var B="";if(C<F){for(var E=0;E<C;E++){B+=" "}}var A=this.strText.length;this.strText+=B+this.strSIGNATURE}function SecureContext_unsign(B){if(this.bESCApE){this.strText=this.unescape(this.strText);this.strSIGNATURE=this.unescape(this.strSIGNATURE)}if(""==this.strSIGNATURE){return true}var A=this.strText.lastIndexOf(this.strSIGNATURE);if(-1==A){return false}this.strText=this.strText.substr(0,A);return true}function SecureContext_secure(B){var A=new password(B);var C=A.getpermutation();this.sign(C.length);this.transliterate(true);this.encypher(C)}function SecureContext_unsecure(B){var A=new password(B);var C=A.getpermutation();this.decypher(C);this.transliterate(false);return this.unsign(C.length)}function doSecure(B){var A=new SecureContext(B,key,false);A.secure(key);return A.strText}function doUnsecure(B){var A=new SecureContext(B,key,false);A.unsecure(key);return A.strText}if(!AmCharts){var AmCharts={themes:{},maps:{},inheriting:{},charts:[],onReadyArray:[],useUTC:!1,updateRate:40,uid:0,lang:{},translations:{},mapTranslations:{},windows:{},initHandlers:[]}}AmCharts.Class=function(B){var A=function(){arguments[0]!==AmCharts.inheriting&&(this.events={},this.construct.apply(this,arguments))};B.inherits?(A.prototype=new B.inherits(AmCharts.inheriting),A.base=B.inherits.prototype,delete B.inherits):(A.prototype.createEvents=function(){for(var E=0,D=arguments.length;E<D;E++){this.events[arguments[E]]=[]}},A.prototype.listenTo=function(E,D,F){this.removeListener(E,D,F);E.events[D].push({handler:F,scope:this})},A.prototype.addListener=function(E,D,F){this.removeListener(this,E,D);this.events[E].push({handler:D,scope:F})},A.prototype.removeListener=function(E,D,F){if(E&&E.events){for(E=E.events[D],D=E.length-1;0<=D;D--){E[D].handler===F&&E.splice(D,1)}}},A.prototype.fire=function(E,D){for(var I=this.events[E],H=0,G=I.length;H<G;H++){var F=I[H];F.handler.call(F.scope,D)}});for(var C in B){A.prototype[C]=B[C]}return A};AmCharts.addChart=function(A){AmCharts.charts.push(A)};AmCharts.removeChart=function(B){for(var A=AmCharts.charts,C=A.length-1;0<=C;C--){A[C]==B&&A.splice(C,1)}};AmCharts.isModern=!0;AmCharts.getIEVersion=function(){var B=0;if("Microsoft Internet Explorer"==navigator.appName){var A=navigator.userAgent,C=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=C.exec(A)&&(B=parseFloat(RegExp.$1))}else{"Netscape"==navigator.appName&&(A=navigator.userAgent,C=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=C.exec(A)&&(B=parseFloat(RegExp.$1)))}return B};AmCharts.applyLang=function(B,A){var C=AmCharts.translations;A.dayNames=AmCharts.dayNames;A.shortDayNames=AmCharts.shortDayNames;A.monthNames=AmCharts.monthNames;A.shortMonthNames=AmCharts.shortMonthNames;C&&(C=C[B])&&(AmCharts.lang=C,C.monthNames&&(A.dayNames=C.dayNames,A.shortDayNames=C.shortDayNames,A.monthNames=C.monthNames,A.shortMonthNames=C.shortMonthNames))};AmCharts.IEversion=AmCharts.getIEVersion();9>AmCharts.IEversion&&0<AmCharts.IEversion&&(AmCharts.isModern=!1,AmCharts.isIE=!0);AmCharts.dx=0;AmCharts.dy=0;if(document.addEventListener||window.opera){AmCharts.isNN=!0,AmCharts.isIE=!1,AmCharts.dx=0.5,AmCharts.dy=0.5}document.attachEvent&&(AmCharts.isNN=!1,AmCharts.isIE=!0,AmCharts.isModern||(AmCharts.dx=0,AmCharts.dy=0));window.chrome&&(AmCharts.chrome=!0);AmCharts.handleResize=function(){for(var B=AmCharts.charts,A=0;A<B.length;A++){var C=B[A];C&&C.div&&C.handleResize()}};AmCharts.handleMouseUp=function(B){for(var A=AmCharts.charts,D=0;D<A.length;D++){var C=A[D];C&&C.handleReleaseOutside(B)}};AmCharts.handleMouseMove=function(B){for(var A=AmCharts.charts,D=0;D<A.length;D++){var C=A[D];C&&C.handleMouseMove(B)}};AmCharts.handleWheel=function(B){for(var A=AmCharts.charts,D=0;D<A.length;D++){var C=A[D];if(C&&C.mouseIsOver){C.mouseWheelScrollEnabled||C.mouseWheelZoomEnabled?C.handleWheel(B):B.stopPropagation&&B.stopPropagation();break}}};AmCharts.resetMouseOver=function(){for(var B=AmCharts.charts,A=0;A<B.length;A++){var C=B[A];C&&(C.mouseIsOver=!1)}};AmCharts.ready=function(A){AmCharts.onReadyArray.push(A)};AmCharts.handleLoad=function(){AmCharts.isReady=!0;for(var B=AmCharts.onReadyArray,A=0;A<B.length;A++){var C=B[A];isNaN(AmCharts.processDelay)?C():setTimeout(C,AmCharts.processDelay*A)}};AmCharts.addInitHandler=function(B,A){AmCharts.initHandlers.push({method:B,types:A})};AmCharts.callInitHandler=function(B){var A=AmCharts.initHandlers;if(AmCharts.initHandlers){for(var D=0;D<A.length;D++){var C=A[D];C.types?-1!=C.types.indexOf(B.type)&&C.method(B):C.method(B)}}};AmCharts.getUniqueId=function(){AmCharts.uid++;return"AmChartsEl-"+AmCharts.uid};AmCharts.isNN&&(document.addEventListener("mousemove",AmCharts.handleMouseMove,!0),window.addEventListener("resize",AmCharts.handleResize,!0),document.addEventListener("mouseup",AmCharts.handleMouseUp,!0),window.addEventListener("load",AmCharts.handleLoad,!0),window.addEventListener("DOMMouseScroll",AmCharts.handleWheel,!0),document.addEventListener("mousewheel",AmCharts.handleWheel,!0));AmCharts.isIE&&(document.attachEvent("onmousemove",AmCharts.handleMouseMove),window.attachEvent("onresize",AmCharts.handleResize),document.attachEvent("onmouseup",AmCharts.handleMouseUp),window.attachEvent("onload",AmCharts.handleLoad));AmCharts.clear=function(){var B=AmCharts.charts;if(B){for(var A=0;A<B.length;A++){B[A].clear()}}AmCharts.charts=null;AmCharts.isNN&&(document.removeEventListener("mousemove",AmCharts.handleMouseMove,!0),window.removeEventListener("resize",AmCharts.handleResize,!0),document.removeEventListener("mouseup",AmCharts.handleMouseUp,!0),window.removeEventListener("load",AmCharts.handleLoad,!0),window.removeEventListener("DOMMouseScroll",AmCharts.handleWheel,!0),document.removeEventListener("mousewheel",AmCharts.handleWheel,!0));AmCharts.isIE&&(document.detachEvent("onmousemove",AmCharts.handleMouseMove),window.detachEvent("onresize",AmCharts.handleResize),document.detachEvent("onmouseup",AmCharts.handleMouseUp),window.detachEvent("onload",AmCharts.handleLoad))};AmCharts.makeChart=function(B,A,F){var E=A.type,D=A.theme;AmCharts.isString(D)&&(D=AmCharts.themes[D],A.theme=D);var C;switch(E){case"serial":C=new AmCharts.AmSerialChart(D);break;case"xy":C=new AmCharts.AmXYChart(D);break;case"pie":C=new AmCharts.AmPieChart(D);break;case"radar":C=new AmCharts.AmRadarChart(D);break;case"gauge":C=new AmCharts.AmAngularGauge(D);break;case"funnel":C=new AmCharts.AmFunnelChart(D);break;case"map":C=new AmCharts.AmMap(D);break;case"stock":C=new AmCharts.AmStockChart(D)}AmCharts.extend(C,A);AmCharts.isReady?isNaN(F)?C.write(B):setTimeout(function(){AmCharts.realWrite(C,B)},F):AmCharts.ready(function(){isNaN(F)?C.write(B):setTimeout(function(){AmCharts.realWrite(C,B)},F)});return C};AmCharts.realWrite=function(B,A){B.write(A)};AmCharts.toBoolean=function(B,A){if(void 0===B){return A}switch(String(B).toLowerCase()){case"true":case"yes":case"1":return !0;case"false":case"no":case"0":case null:return !1;default:return Boolean(B)}};AmCharts.removeFromArray=function(B,A){var C;if(void 0!=A&&void 0!=B){for(C=B.length-1;0<=C;C--){B[C]==A&&B.splice(C,1)}}};AmCharts.getDecimals=function(B){var A=0;isNaN(B)||(B=String(B),-1!=B.indexOf("e-")?A=Number(B.split("-")[1]):-1!=B.indexOf(".")&&(A=B.split(".")[1].length));return A};AmCharts.wrappedText=function(N,M,L,K,J,I,H,G,F){var E=AmCharts.text(N,M,L,K,J,I,H),D="\n";AmCharts.isModern||(D="<br>");if(10<F){return E}if(E){var C=E.getBBox();if(C.width>G){C=Math.ceil(C.width/G);E.remove();for(var E=[],B=0;-1<(index=M.indexOf(" ",B));){E.push(index),B=index+1}Math.round(M.length/2);for(var A,B=0;B<E.length;B+=Math.ceil(E.length/C)){A=E[B],M=M.substr(0,A)+D+M.substr(A+1)}if(isNaN(A)){if(0==F){for(B=1;B<C;B++){A=Math.round(M.length/C*B),M=M.substr(0,A)+D+M.substr(A)}}return AmCharts.text(N,M,L,K,J,I,H)}return AmCharts.wrappedText(N,M,L,K,J,I,H,G,F+1)}return E}};AmCharts.getStyle=function(B,A){var C="";document.defaultView&&document.defaultView.getComputedStyle?C=document.defaultView.getComputedStyle(B,"").getPropertyValue(A):B.currentStyle&&(A=A.replace(/\-(\w)/g,function(E,D){return D.toUpperCase()}),C=B.currentStyle[A]);return C};AmCharts.removePx=function(A){if(void 0!=A){return Number(A.substring(0,A.length-2))}};AmCharts.getURL=function(B,A){if(B){if("_self"!=A&&A){if("_top"==A&&window.top){window.top.location.href=B}else{if("_parent"==A&&window.parent){window.parent.location.href=B}else{if("_blank"==A){window.open(B)}else{var C=document.getElementsByName(A)[0];C?C.src=B:(C=AmCharts.windows[A])?C.opener&&!C.opener.closed?C.location.href=B:AmCharts.windows[A]=window.open(B):AmCharts.windows[A]=window.open(B)}}}}else{window.location.href=B}}};AmCharts.ifArray=function(A){return A&&0<A.length?!0:!1};AmCharts.callMethod=function(B,A){var G;for(G=0;G<A.length;G++){var F=A[G];if(F){if(F[B]){F[B]()}var E=F.length;if(0<E){var D;for(D=0;D<E;D++){var C=F[D];if(C&&C[B]){C[B]()}}}}}};AmCharts.toNumber=function(A){return"number"==typeof A?A:Number(String(A).replace(/[^0-9\-.]+/g,""))};AmCharts.toColor=function(B){if(""!==B&&void 0!==B){if(-1!=B.indexOf(",")){B=B.split(",");var A;for(A=0;A<B.length;A++){var C=B[A].substring(B[A].length-6,B[A].length);B[A]="#"+C}}else{B=B.substring(B.length-6,B.length),B="#"+B}}return B};AmCharts.toCoordinate=function(B,A,D){var C;void 0!==B&&(B=String(B),D&&D<A&&(A=D),C=Number(B),-1!=B.indexOf("!")&&(C=A-Number(B.substr(1))),-1!=B.indexOf("%")&&(C=A*Number(B.substr(0,B.length-1))/100));return C};AmCharts.fitToBounds=function(B,A,C){B<A&&(B=A);B>C&&(B=C);return B};AmCharts.isDefined=function(A){return void 0===A?!1:!0};AmCharts.stripNumbers=function(A){return A.replace(/[0-9]+/g,"")};AmCharts.roundTo=function(B,A){if(0>A){return B}var C=Math.pow(10,A);return Math.round(B*C)/C};AmCharts.toFixed=function(B,A){var E=String(Math.round(B*Math.pow(10,A)));if(0<A){var D=E.length;if(D<A){var C;for(C=0;C<A-D;C++){E="0"+E}}D=E.substring(0,E.length-A);""===D&&(D=0);return D+"."+E.substring(E.length-A,E.length)}return String(E)};AmCharts.formatDuration=function(I,H,G,F,E,D){var C=AmCharts.intervals,B=D.decimalSeparator;if(I>=C[H].contains){var A=I-Math.floor(I/C[H].contains)*C[H].contains;"ss"==H&&(A=AmCharts.formatNumber(A,D),1==A.split(B)[0].length&&(A="0"+A));("mm"==H||"hh"==H)&&10>A&&(A="0"+A);G=A+""+F[H]+""+G;I=Math.floor(I/C[H].contains);H=C[H].nextInterval;return AmCharts.formatDuration(I,H,G,F,E,D)}"ss"==H&&(I=AmCharts.formatNumber(I,D),1==I.split(B)[0].length&&(I="0"+I));("mm"==H||"hh"==H)&&10>I&&(I="0"+I);G=I+""+F[H]+""+G;if(C[E].count>C[H].count){for(I=C[H].count;I<C[E].count;I++){H=C[H].nextInterval,"ss"==H||"mm"==H||"hh"==H?G="00"+F[H]+""+G:"DD"==H&&(G="0"+F[H]+""+G)}}":"==G.charAt(G.length-1)&&(G=G.substring(0,G.length-1));return G};AmCharts.formatNumber=function(K,J,I,H,G){K=AmCharts.roundTo(K,J.precision);isNaN(I)&&(I=J.precision);var F=J.decimalSeparator;J=J.thousandsSeparator;var E;E=0>K?"-":"";K=Math.abs(K);var D=String(K),C=!1;-1!=D.indexOf("e")&&(C=!0);0<=I&&!C&&(D=AmCharts.toFixed(K,I));var B="";if(C){B=D}else{var D=D.split("."),C=String(D[0]),A;for(A=C.length;0<=A;A-=3){B=A!=C.length?0!==A?C.substring(A-3,A)+J+B:C.substring(A-3,A)+B:C.substring(A-3,A)}void 0!==D[1]&&(B=B+F+D[1]);void 0!==I&&0<I&&"0"!=B&&(B=AmCharts.addZeroes(B,F,I))}B=E+B;""===E&&!0===H&&0!==K&&(B="+"+B);!0===G&&(B+="%");return B};AmCharts.addZeroes=function(B,A,C){B=B.split(A);void 0===B[1]&&0<C&&(B[1]="0");return B[1].length<C?(B[1]+="0",AmCharts.addZeroes(B[0]+A+B[1],A,C)):void 0!==B[1]?B[0]+A+B[1]:B[0]};AmCharts.scientificToNormal=function(B){var A;B=String(B).split("e");var D;if("-"==B[1].substr(0,1)){A="0.";for(D=0;D<Math.abs(Number(B[1]))-1;D++){A+="0"}A+=B[0].split(".").join("")}else{var C=0;A=B[0].split(".");A[1]&&(C=A[1].length);A=B[0].split(".").join("");for(D=0;D<Math.abs(Number(B[1]))-C;D++){A+="0"}}return A};AmCharts.toScientific=function(B,A){if(0===B){return"0"}var C=Math.floor(Math.log(Math.abs(B))*Math.LOG10E);Math.pow(10,C);mantissa=String(mantissa).split(".").join(A);return String(mantissa)+"e"+C};AmCharts.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)};AmCharts.hitTest=function(I,H,G){var F=!1,E=I.x,D=I.x+I.width,C=I.y,B=I.y+I.height,A=AmCharts.isInRectangle;F||(F=A(E,C,H));F||(F=A(E,B,H));F||(F=A(D,C,H));F||(F=A(D,B,H));F||!0===G||(F=AmCharts.hitTest(H,I,!0));return F};AmCharts.isInRectangle=function(B,A,C){return B>=C.x-5&&B<=C.x+C.width+5&&A>=C.y-5&&A<=C.y+C.height+5?!0:!1};AmCharts.isPercents=function(A){if(-1!=String(A).indexOf("%")){return !0}};AmCharts.findPosX=function(B){var A=B,C=B.offsetLeft;if(B.offsetParent){for(;B=B.offsetParent;){C+=B.offsetLeft}for(;(A=A.parentNode)&&A!=document.body;){C-=A.scrollLeft||0}}return C};AmCharts.findPosY=function(B){var A=B,C=B.offsetTop;if(B.offsetParent){for(;B=B.offsetParent;){C+=B.offsetTop}for(;(A=A.parentNode)&&A!=document.body;){C-=A.scrollTop||0}}return C};AmCharts.findIfFixed=function(A){if(A.offsetParent){for(;A=A.offsetParent;){if("fixed"==AmCharts.getStyle(A,"position")){return !0}}}return !1};AmCharts.findIfAuto=function(A){return A.style&&"auto"==AmCharts.getStyle(A,"overflow")?!0:A.parentNode?AmCharts.findIfAuto(A.parentNode):!1};AmCharts.findScrollLeft=function(B,A){B.scrollLeft&&(A+=B.scrollLeft);return B.parentNode?AmCharts.findScrollLeft(B.parentNode,A):A};AmCharts.findScrollTop=function(B,A){B.scrollTop&&(A+=B.scrollTop);return B.parentNode?AmCharts.findScrollTop(B.parentNode,A):A};AmCharts.formatValue=function(K,J,I,H,G,F,E,D){if(J){void 0===G&&(G="");var C;for(C=0;C<I.length;C++){var B=I[C],A=J[B];void 0!==A&&(A=F?AmCharts.addPrefix(A,D,E,H):AmCharts.formatNumber(A,H),K=K.replace(new RegExp("\\[\\["+G+""+B+"\\]\\]","g"),A))}}return K};AmCharts.formatDataContextValue=function(B,A){if(B){var E=B.match(/\[\[.*?\]\]/g),D;for(D=0;D<E.length;D++){var C=E[D],C=C.substr(2,C.length-4);void 0!==A[C]&&(B=B.replace(new RegExp("\\[\\["+C+"\\]\\]","g"),A[C]))}}return B};AmCharts.massReplace=function(B,A){for(var D in A){if(A.hasOwnProperty(D)){var C=A[D];void 0===C&&(C="");B=B.replace(D,C)}}return B};AmCharts.cleanFromEmpty=function(A){return A.replace(/\[\[[^\]]*\]\]/g,"")};AmCharts.addPrefix=function(J,I,H,G,F){var E=AmCharts.formatNumber(J,G),D="",C,B,A;if(0===J){return"0"}0>J&&(D="-");J=Math.abs(J);if(1<J){for(C=I.length-1;-1<C;C--){if(J>=I[C].number&&(B=J/I[C].number,A=Number(G.precision),1>A&&(A=1),H=AmCharts.roundTo(B,A),A=AmCharts.formatNumber(H,{precision:-1,decimalSeparator:G.decimalSeparator,thousandsSeparator:G.thousandsSeparator}),!F||B==H)){E=D+""+A+""+I[C].prefix;break}}}else{for(C=0;C<H.length;C++){if(J<=H[C].number){B=J/H[C].number;A=Math.abs(Math.round(Math.log(B)*Math.LOG10E));B=AmCharts.roundTo(B,A);E=D+""+B+""+H[C].prefix;break}}}return E};AmCharts.remove=function(A){A&&A.remove()};AmCharts.recommended=function(){var A="js";document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||swfobject&&swfobject.hasFlashPlayerVersion("8")&&(A="flash");return A};AmCharts.getEffect=function(A){">"==A&&(A="easeOutSine");"<"==A&&(A="easeInSine");"elastic"==A&&(A="easeOutElastic");return A};AmCharts.getObjById=function(B,A){var E,D;for(D=0;D<B.length;D++){var C=B[D];C.id==A&&(E=C)}return E};AmCharts.applyTheme=function(B,A,C){A||(A=AmCharts.theme);A&&A[C]&&AmCharts.extend(B,A[C])};AmCharts.isString=function(A){return"string"==typeof A?!0:!1};AmCharts.extend=function(B,A,D){for(var C in A){D?B.hasOwnProperty(C)||(B[C]=A[C]):B[C]=A[C]}return B};AmCharts.copyProperties=function(B,A){for(var C in B){B.hasOwnProperty(C)&&"events"!=C&&void 0!==B[C]&&"function"!=typeof B[C]&&"cname"!=C&&(A[C]=B[C])}};AmCharts.processObject=function(B,A,C){!1===B instanceof A&&(B=AmCharts.extend(new A(C),B));return B};AmCharts.fixNewLines=function(B){var A=RegExp("\\n","g");B&&(B=B.replace(A,"<br />"));return B};AmCharts.fixBrakes=function(B){if(AmCharts.isModern){var A=RegExp("<br>","g");B&&(B=B.replace(A,"\n"))}else{B=AmCharts.fixNewLines(B)}return B};AmCharts.deleteObject=function(B,A){if(B){if(void 0===A||null===A){A=20}if(0!==A){if("[object Array]"===Object.prototype.toString.call(B)){for(var D=0;D<B.length;D++){AmCharts.deleteObject(B[D],A-1),B[D]=null}}else{if(B&&!B.tagName){try{for(D in B){B[D]&&("object"==typeof B[D]&&AmCharts.deleteObject(B[D],A-1),"function"!=typeof B[D]&&(B[D]=null))}}catch(C){}}}}}};AmCharts.bounce=function(B,A,E,D,C){return(A/=C)<1/2.75?7.5625*D*A*A+E:A<2/2.75?D*(7.5625*(A-=1.5/2.75)*A+0.75)+E:A<2.5/2.75?D*(7.5625*(A-=2.25/2.75)*A+0.9375)+E:D*(7.5625*(A-=2.625/2.75)*A+0.984375)+E};AmCharts.easeInSine=function(B,A,E,D,C){return -D*Math.cos(A/C*(Math.PI/2))+D+E};AmCharts.easeOutSine=function(B,A,E,D,C){return D*Math.sin(A/C*(Math.PI/2))+E};AmCharts.easeOutElastic=function(B,A,G,F,E){B=1.70158;var D=0,C=F;if(0===A){return G}if(1==(A/=E)){return G+F}D||(D=0.3*E);C<Math.abs(F)?(C=F,B=D/4):B=D/(2*Math.PI)*Math.asin(F/C);return C*Math.pow(2,-10*A)*Math.sin(2*(A*E-B)*Math.PI/D)+F+G};AmCharts.fixStepE=function(B){B=B.toExponential(0).split("e");var A=Number(B[1]);9==Number(B[0])&&A++;return AmCharts.generateNumber(1,A)};AmCharts.generateNumber=function(B,A){var E="",D;D=0>A?Math.abs(A)-1:Math.abs(A);var C;for(C=0;C<D;C++){E+="0"}return 0>A?Number("0."+E+String(B)):Number(String(B)+E)};AmCharts.setCN=function(B,A,E,D){if(B.addClassNames&&A&&(A=A.node)&&E){var C=A.getAttribute("class");B=B.classNamePrefix+"-";D&&(B="");C?A.setAttribute("class",C+" "+B+E):A.setAttribute("class",B+E)}};AmCharts.AxisBase=AmCharts.Class({construct:function(A){this.createEvents("clickItem","rollOverItem","rollOutItem");this.viY=this.viX=this.y=this.x=this.dy=this.dx=0;this.axisThickness=1;this.axisColor="#000000";this.axisAlpha=1;this.gridCount=this.tickLength=5;this.gridAlpha=0.15;this.gridThickness=1;this.gridColor="#000000";this.dashLength=0;this.labelFrequency=1;this.showLastLabel=this.showFirstLabel=!0;this.fillColor="#FFFFFF";this.fillAlpha=0;this.labelsEnabled=!0;this.labelRotation=0;this.autoGridCount=!0;this.offset=0;this.guides=[];this.visible=!0;this.counter=0;this.guides=[];this.ignoreAxisWidth=this.inside=!1;this.minHorizontalGap=75;this.minVerticalGap=35;this.titleBold=!0;this.minorGridEnabled=!1;this.minorGridAlpha=0.07;this.autoWrap=!1;this.titleAlign="middle";this.labelOffset=0;this.bcn="axis-";AmCharts.applyTheme(this,A,"AxisBase")},zoom:function(B,A){this.start=B;this.end=A;this.dataChanged=!0;this.draw()},fixAxisPosition:function(){var A=this.position;"H"==this.orientation?("left"==A&&(A="bottom"),"right"==A&&(A="top")):("bottom"==A&&(A="left"),"top"==A&&(A="right"));this.position=A},draw:function(){var B=this.chart;this.allLabels=[];this.counter=0;this.destroy();this.fixAxisPosition();this.labels=[];var A=B.container,C=A.set();B.gridSet.push(C);this.set=C;A=A.set();B.axesLabelsSet.push(A);this.labelsSet=A;this.axisLine=new this.axisRenderer(this);this.autoGridCount?("V"==this.orientation?(B=this.height/this.minVerticalGap,3>B&&(B=3)):B=this.width/this.minHorizontalGap,this.gridCountR=Math.max(B,1)):this.gridCountR=this.gridCount;this.axisWidth=this.axisLine.axisWidth;this.addTitle()},setOrientation:function(A){this.orientation=A?"H":"V"},addTitle:function(){var B=this.title;if(B){var A=this.chart,D=this.titleColor;void 0===D&&(D=A.color);var C=this.titleFontSize;isNaN(C)&&(C=A.fontSize+1);B=AmCharts.text(A.container,B,D,A.fontFamily,C,this.titleAlign,this.titleBold);AmCharts.setCN(A,B,this.bcn+"title");this.titleLabel=B}},positionTitle:function(){var M=this.titleLabel;if(M){var L,K,J=this.labelsSet,I={};0<J.length()?I=J.getBBox():(I.x=0,I.y=0,I.width=this.viW,I.height=this.viH);J.push(M);var J=I.x,H=I.y;AmCharts.VML&&(this.rotate?J-=this.x:H-=this.y);var G=I.width,I=I.height,F=this.viW,E=this.viH,D=0,C=M.getBBox().height/2,B=this.inside,A=this.titleAlign;switch(this.position){case"top":L="left"==A?-1:"right"==A?F:F/2;K=H-10-C;break;case"bottom":L="left"==A?-1:"right"==A?F:F/2;K=H+I+10+C;break;case"left":L=J-10-C;B&&(L-=5);K="left"==A?E+1:"right"==A?-1:E/2;D=-90;break;case"right":L=J+G+10+C-3,B&&(L+=7),K="left"==A?E+2:"right"==A?-2:E/2,D=-90}this.marginsChanged?(M.translate(L,K),this.tx=L,this.ty=K):M.translate(this.tx,this.ty);this.marginsChanged=!1;0!==D&&M.rotate(D)}},pushAxisItem:function(B,A){var D=this,C=B.graphics();0<C.length()&&(A?D.labelsSet.push(C):D.set.push(C));if(C=B.getLabel()){this.labelsSet.push(C),C.click(function(E){D.handleMouse(E,B,"clickItem")}).mouseover(function(E){D.handleMouse(E,B,"rollOverItem")}).mouseout(function(E){D.handleMouse(E,B,"rollOutItem")})}},handleMouse:function(B,A,C){this.fire(C,{type:C,value:A.value,serialDataItem:A.serialDataItem,axis:this,target:A.label,chart:this.chart,event:B})},addGuide:function(B){for(var A=this.guides,E=!1,D=A.length,C=0;C<A.length;C++){A[C]==B&&(E=!0,D=C)}B.id||(B.id="guideAuto"+D+"_"+(new Date).getTime());E||A.push(B)},removeGuide:function(B){var A=this.guides,C;for(C=0;C<A.length;C++){A[C]==B&&A.splice(C,1)}},handleGuideOver:function(B){clearTimeout(this.chart.hoverInt);var A=B.graphics.getBBox(),D=A.x+A.width/2,A=A.y+A.height/2,C=B.fillColor;void 0===C&&(C=B.lineColor);this.chart.showBalloon(B.balloonText,C,!0,D,A)},handleGuideOut:function(A){this.chart.hideBalloon()},addEventListeners:function(B,A){var C=this;B.mouseover(function(){C.handleGuideOver(A)});B.mouseout(function(){C.handleGuideOut(A)})},getBBox:function(){var A=this.labelsSet.getBBox();AmCharts.VML||(A={x:A.x+this.x,y:A.y+this.y,width:A.width,height:A.height});return A},destroy:function(){AmCharts.remove(this.set);AmCharts.remove(this.labelsSet);var A=this.axisLine;A&&AmCharts.remove(A.set);AmCharts.remove(this.grid0)}});AmCharts.ValueAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(A){this.cname="ValueAxis";this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed");AmCharts.ValueAxis.base.construct.call(this,A);this.dataChanged=!0;this.stackType="none";this.position="left";this.unitPosition="right";this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1;this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""};this.scrollbar=!1;this.baseValue=0;this.radarCategoriesEnabled=!0;this.gridType="polygons";this.useScientificNotation=!1;this.axisTitleOffset=10;this.minMaxMultiplier=1;this.logGridLimit=2;this.totalTextOffset=this.treatZeroAs=0;AmCharts.applyTheme(this,A,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1);this.totals=[];this.data=this.chart.chartData;var A=this.chart;"xy"!=A.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step"));this.recalculateToPercents&&this.recalculate();this.synchronizationMultiplier&&this.synchronizeWith?(AmCharts.isString(this.synchronizeWith)&&(this.synchronizeWith=A.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){AmCharts.ValueAxis.base.draw.call(this);var AD=this.chart,AC=this.set;AmCharts.setCN(AD,this.set,"value-axis value-axis-"+this.id);AmCharts.setCN(AD,this.labelsSet,"value-axis value-axis-"+this.id);AmCharts.setCN(AD,this.axisLine.axisSet,"value-axis value-axis-"+this.id);"duration"==this.type&&(this.duration="ss");!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1);if(this.logarithmic){var AB=this.treatZeroAs,AA=this.getMin(0,this.data.length-1);0<AB&&0==AA&&(this.minReal=AA=AB);if(0>=AA||0>=this.minimum){this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:AD});return }}this.grid0=null;var v,s,o=AD.dx,Z=AD.dy,AB=!1,AA=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||Infinity==this.min||-Infinity==this.max){AB=!0}else{var Y=this.labelFrequency,X=this.showFirstLabel,W=this.showLastLabel,V=1,U=0,Q=Math.round((this.max-this.min)/this.step)+1,S;!0===AA?(S=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/S,S>this.logGridLimit&&(Q=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,U=Math.round(Math.log(this.minReal)*Math.LOG10E),Q>this.gridCountR&&(V=Math.ceil(Q/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var M=0;1>this.step&&-1<this.step&&(M=AmCharts.getDecimals(this.step));this.integersOnly&&(M=0);M>this.maxDecCount&&(M=this.maxDecCount);var E=this.precision;isNaN(E)||(M=E);this.max=AmCharts.roundTo(this.max,this.maxDecCount);this.min=AmCharts.roundTo(this.min,this.maxDecCount);s={};s.precision=M;s.decimalSeparator=AD.nf.decimalSeparator;s.thousandsSeparator=AD.nf.thousandsSeparator;this.numberFormatter=s;var J,N=this.guides;v=N.length;if(0<v){var L=this.fillAlpha;for(s=this.fillAlpha=0;s<v;s++){var F=N[s],T=NaN,P=F.above;isNaN(F.toValue)||(T=this.getCoordinate(F.toValue),J=new this.axisItemRenderer(this,T,"",!0,NaN,NaN,F),this.pushAxisItem(J,P));var R=NaN;isNaN(F.value)||(R=this.getCoordinate(F.value),J=new this.axisItemRenderer(this,R,F.label,!0,NaN,(T-R)/2,F),this.pushAxisItem(J,P));isNaN(T-R)||(J=new this.guideFillRenderer(this,R,T,F),this.pushAxisItem(J,P),J=J.graphics(),F.graphics=J,F.balloonText&&this.addEventListeners(J,F))}this.fillAlpha=L}this.exponential=!1;for(s=U;s<Q;s+=V){N=AmCharts.roundTo(this.step*s+this.min,M),-1!=String(N).indexOf("e")&&(this.exponential=!0,String(N).split("e"))}this.duration&&(this.maxInterval=AmCharts.getMaxInterval(this.max,this.duration));var M=this.step,K,N=this.minorGridAlpha;this.minorGridEnabled&&(K=this.getMinorGridStep(M,this.stepWidth*M));for(s=U;s<Q;s+=V){if(U=M*s+this.min,AA&&this.max-this.min>5*this.min&&(U-=this.min),U=AmCharts.roundTo(U,this.maxDecCount+1),!this.integersOnly||Math.round(U)==U){if(isNaN(E)||Number(AmCharts.toFixed(U,E))==U){!0===AA&&(0===U&&(U=this.minReal),S>this.logGridLimit&&(U=Math.pow(10,s)));J=this.formatValue(U,!1,s);Math.round(s/Y)!=s/Y&&(J=void 0);if(0===s&&!X||s==Q-1&&!W){J=" "}v=this.getCoordinate(U);J=new this.axisItemRenderer(this,v,J,void 0,void 0,void 0,void 0,this.boldLabels);this.pushAxisItem(J);if(U==this.baseValue&&"radar"!=AD.type){var O,G,F=this.viW,P=this.viH;J=this.viX;L=this.viY;"H"==this.orientation?0<=v&&v<=F+1&&(O=[v,v,v+o],G=[P,0,Z]):0<=v&&v<=P+1&&(O=[0,F,F+o],G=[v,v,v+Z]);O&&(v=AmCharts.fitToBounds(2*this.gridAlpha,0,1),v=AmCharts.line(AD.container,O,G,this.gridColor,v,1,this.dashLength),v.translate(J,L),this.grid0=v,AD.axesSet.push(v),v.toBack(),AmCharts.setCN(AD,v,this.bcn+"zero-grid-"+this.id),AmCharts.setCN(AD,v,this.bcn+"zero-grid"))}if(!isNaN(K)&&0<N&&s<Q-1){J=this.gridAlpha;this.gridAlpha=this.minorGridAlpha;for(v=1;v<M/K;v++){L=this.getCoordinate(U+K*v),L=new this.axisItemRenderer(this,L,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(L)}this.gridAlpha=J}}}}S=this.baseValue;this.min>this.baseValue&&this.max>this.baseValue&&(S=this.min);this.min<this.baseValue&&this.max<this.baseValue&&(S=this.max);AA&&S<this.minReal&&(S=this.minReal);this.baseCoord=this.getCoordinate(S);S={type:"axisChanged",target:this,chart:AD};S.min=AA?this.minReal:this.min;S.max=this.max;this.fire("axisChanged",S);this.axisCreated=!0}AA=this.axisLine.set;S=this.labelsSet;this.positionTitle();"radar"!=AD.type?(AD=this.viX,K=this.viY,AC.translate(AD,K),S.translate(AD,K)):AA.toFront();!this.visible||AB?(AC.hide(),AA.hide(),S.hide()):(AC.show(),AA.show(),S.show());this.axisY=this.y-this.viY;this.axisX=this.x-this.viX},formatValue:function(B,A,G){var F=this.exponential,E=this.logarithmic,D=this.numberFormatter,C=this.chart;!0===this.logarithmic&&(F=-1!=String(B).indexOf("e")?!0:!1);this.useScientificNotation&&(F=!0);this.usePrefixes&&(F=!1);F?(A=-1==String(B).indexOf("e")?B.toExponential(15):String(B),G=A.split("e"),A=Number(G[0]),G=Number(G[1]),A=AmCharts.roundTo(A,14),10==A&&(A=1,G+=1),A=A+"e"+G,0===B&&(A="0"),1==B&&(A="1")):(E&&(F=String(B).split("."),F[1]?(D.precision=F[1].length,0>G&&(D.precision=Math.abs(G))):D.precision=-1),A=this.usePrefixes?AmCharts.addPrefix(B,C.prefixesOfBigNumbers,C.prefixesOfSmallNumbers,D,!A):AmCharts.formatNumber(B,D,D.precision));this.duration&&(A=AmCharts.formatDuration(B,this.duration,"",this.durationUnits,this.maxInterval,D));this.recalculateToPercents?A+="%":(D=this.unit)&&(A="left"==this.unitPosition?D+A:A+D);this.labelFunction&&(A=this.labelFunction(B,A,this).toString());return A},getMinorGridStep:function(B,A){var G=[5,4,2];60>A&&G.shift();for(var F=Math.floor(Math.log(Math.abs(B))*Math.LOG10E),E=0;E<G.length;E++){var D=B/G[E],C=Math.floor(Math.log(Math.abs(D))*Math.LOG10E);if(!(0<Math.abs(F-C))){if(1>B){if(C=Math.pow(10,-C)*D,C==Math.round(C)){return D}}else{if(D==Math.round(D)){return D}}}}},stackGraphs:function(O){var N=this.stackType;"stacked"==N&&(N="regular");"line"==N&&(N="none");"100% stacked"==N&&(N="100%");this.stackType=N;var M=[],L=[],K=[],J=[],I,H=this.chart.graphs,G,F,E,D,C=this.baseValue,A=!1;if("line"==O||"step"==O||"smoothedLine"==O){A=!0}if(A&&("regular"==N||"100%"==N)){for(D=0;D<H.length;D++){E=H[D],E.hidden||(F=E.type,E.chart==this.chart&&E.valueAxis==this&&O==F&&E.stackable&&(G&&(E.stackGraph=G),G=E))}}for(G=this.start;G<=this.end;G++){var B=0;for(D=0;D<H.length;D++){if(E=H[D],E.hidden){E.newStack&&(K[G]=NaN,L[G]=NaN)}else{if(F=E.type,E.chart==this.chart&&E.valueAxis==this&&O==F&&E.stackable){if(F=this.data[G].axes[this.id].graphs[E.id],I=F.values.value,isNaN(I)){E.newStack&&(K[G]=NaN,L[G]=NaN)}else{var P=AmCharts.getDecimals(I);B<P&&(B=P);isNaN(J[G])?J[G]=Math.abs(I):J[G]+=Math.abs(I);J[G]=AmCharts.roundTo(J[G],B);P=E.fillToGraph;A&&P&&(P=this.data[G].axes[this.id].graphs[P.id])&&(F.values.open=P.values.value);"regular"==N&&(A&&(isNaN(M[G])?(M[G]=I,F.values.close=I,F.values.open=this.baseValue):(isNaN(I)?F.values.close=M[G]:F.values.close=I+M[G],F.values.open=M[G],M[G]=F.values.close)),"column"==O&&(E.newStack&&(K[G]=NaN,L[G]=NaN),F.values.close=I,0>I?(F.values.close=I,isNaN(L[G])?F.values.open=C:(F.values.close+=L[G],F.values.open=L[G]),L[G]=F.values.close):(F.values.close=I,isNaN(K[G])?F.values.open=C:(F.values.close+=K[G],F.values.open=K[G]),K[G]=F.values.close)))}}}}}for(G=this.start;G<=this.end;G++){for(D=0;D<H.length;D++){(E=H[D],E.hidden)?E.newStack&&(K[G]=NaN,L[G]=NaN):(F=E.type,E.chart==this.chart&&E.valueAxis==this&&O==F&&E.stackable&&(F=this.data[G].axes[this.id].graphs[E.id],I=F.values.value,isNaN(I)||(M=I/J[G]*100,F.values.percents=M,F.values.total=J[G],E.newStack&&(K[G]=NaN,L[G]=NaN),"100%"==N&&(isNaN(L[G])&&(L[G]=0),isNaN(K[G])&&(K[G]=0),0>M?(F.values.close=AmCharts.fitToBounds(M+L[G],-100,100),F.values.open=L[G],L[G]=F.values.close):(F.values.close=AmCharts.fitToBounds(M+K[G],-100,100),F.values.open=K[G],K[G]=F.values.close)))))}}},recalculate:function(){var M=this.chart,L=M.graphs,K;for(K=0;K<L.length;K++){var J=L[K];if(J.valueAxis==this){var I="value";if("candlestick"==J.type||"ohlc"==J.type){I="open"}var H,G,F=this.end+2,F=AmCharts.fitToBounds(this.end+1,0,this.data.length-1),E=this.start;0<E&&E--;var D;G=this.start;J.compareFromStart&&(G=0);if(!isNaN(M.startTime)&&(D=M.categoryAxis)){var C=D.minDuration(),C=new Date(M.startTime+C/2),B=AmCharts.resetDateToMin(new Date(M.startTime),D.minPeriod).getTime();AmCharts.resetDateToMin(new Date(C),D.minPeriod).getTime()>B&&G++}if(D=M.recalculateFromDate){M.dataDateFormat&&(D=AmCharts.stringToDate(D,M.dataDateFormat)),G=M.getClosestIndex(M.chartData,"time",D.getTime(),!0,0,M.chartData.length),F=M.chartData.length-1}for(D=G;D<=F&&(G=this.data[D].axes[this.id].graphs[J.id],H=G.values[I],isNaN(H));D++){}this.recBaseValue=H;for(I=E;I<=F;I++){G=this.data[I].axes[this.id].graphs[J.id];G.percents={};var E=G.values,A;for(A in E){G.percents[A]="percents"!=A?E[A]/H*100-100:E[A]}}}}},getMinMax:function(){var B=!1,A=this.chart,E=A.graphs,D;for(D=0;D<E.length;D++){var C=E[D].type;("line"==C||"step"==C||"smoothedLine"==C)&&this.expandMinMax&&(B=!0)}B&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++);"serial"==A.type&&(!0!==A.categoryAxis.parseDates||B||this.end<this.data.length-1&&this.end++);B=this.minMaxMultiplier;this.min=this.getMin(this.start,this.end);this.max=this.getMax();B=(this.max-this.min)*(B-1);this.min-=B;this.max+=B;B=this.guides.length;if(this.includeGuidesInMinMax&&0<B){for(A=0;A<B;A++){E=this.guides[A],E.toValue<this.min&&(this.min=E.toValue),E.value<this.min&&(this.min=E.value),E.toValue>this.max&&(this.max=E.toValue),E.value>this.max&&(this.max=E.value)}}isNaN(this.minimum)||(this.min=this.minimum);isNaN(this.maximum)||(this.max=this.maximum);this.min>this.max&&(B=this.max,this.max=this.min,this.min=B);isNaN(this.minTemp)||(this.min=this.minTemp);isNaN(this.maxTemp)||(this.max=this.maxTemp);this.minReal=this.min;this.maxReal=this.max;0===this.min&&0===this.max&&(this.max=9);this.min>this.max&&(this.min=this.max-1);B=this.min;A=this.max;E=this.max-this.min;D=0===E?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(E))*Math.LOG10E))/10;isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/D)*D+D);isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/D)*D-D);0>this.min&&0<=B&&(this.min=0);0<this.max&&0>=A&&(this.max=0);"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100);E=this.max-this.min;D=Math.pow(10,Math.floor(Math.log(Math.abs(E))*Math.LOG10E))/10;this.step=Math.ceil(E/this.gridCountR/D)*D;E=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E));E=AmCharts.fixStepE(E);D=Math.ceil(this.step/E);5<D&&(D=10);5>=D&&2<D&&(D=5);this.step=Math.ceil(this.step/(E*D))*E*D;1>E?(this.maxDecCount=Math.abs(Math.log(Math.abs(E))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=AmCharts.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0;this.min=this.step*Math.floor(this.min/this.step);this.max=this.step*Math.ceil(this.max/this.step);0>this.min&&0<=B&&(this.min=0);0<this.max&&0>=A&&(this.max=0);1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal));E=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E));0===this.min&&(this.minReal=E);0===this.min&&1<this.minReal&&(this.minReal=1);0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min);E=Math.log(A)*Math.LOG10E-Math.log(B)*Math.LOG10E;this.logarithmic&&(2<E?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(B))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(A))*Math.LOG10E))):(A=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,B=Math.pow(10,Math.floor(Math.log(Math.abs(B))*Math.LOG10E))/10,A<B&&(this.minReal=this.min=10*B)))},getMin:function(I,H){var G,F;for(F=I;F<=H;F++){var E=this.data[F].axes[this.id].graphs,D;for(D in E){if(E.hasOwnProperty(D)){var C=this.chart.getGraphById(D);if(C.includeInMinMax&&(!C.hidden||this.includeHidden)){isNaN(G)&&(G=Infinity);this.foundGraphs=!0;C=E[D].values;this.recalculateToPercents&&(C=E[D].percents);var B;if(this.minMaxField){B=C[this.minMaxField],B<G&&(G=B)}else{for(var A in C){C.hasOwnProperty(A)&&"percents"!=A&&"total"!=A&&(B=C[A],B<G&&(G=B))}}}}}}return G},getMax:function(){var B,A;for(A=this.start;A<=this.end;A++){var G=this.data[A].axes[this.id].graphs,F;for(F in G){if(G.hasOwnProperty(F)){var E=this.chart.getGraphById(F);if(E.includeInMinMax&&(!E.hidden||this.includeHidden)){isNaN(B)&&(B=-Infinity);this.foundGraphs=!0;E=G[F].values;this.recalculateToPercents&&(E=G[F].percents);var D;if(this.minMaxField){D=E[this.minMaxField],D>B&&(B=D)}else{for(var C in E){E.hasOwnProperty(C)&&"percents"!=C&&"total"!=C&&(D=E[C],D>B&&(B=D))}}}}}}return B},dispatchZoomEvent:function(B,A){var C={type:"axisZoomed",startValue:B,endValue:A,target:this,chart:this.chart};this.fire(C.type,C)},zoomToValues:function(B,A){if(A<B){var C=A;A=B;B=C}B<this.min&&(B=this.min);A>this.max&&(A=this.max);C={type:"axisSelfZoomed"};C.chart=this.chart;C.valueAxis=this;C.multiplier=this.axisWidth/Math.abs(this.getCoordinate(A)-this.getCoordinate(B));C.position="V"==this.orientation?this.reversed?this.getCoordinate(B):this.getCoordinate(A):this.reversed?this.getCoordinate(A):this.getCoordinate(B);this.fire(C.type,C)},coordinateToValue:function(B){if(isNaN(B)){return NaN}var A=this.axisWidth,G=this.stepWidth,F=this.reversed,E=this.rotate,D=this.min,C=this.minReal;return !0===this.logarithmic?Math.pow(10,(E?!0===F?(A-B)/G:B/G:!0===F?B/G:(A-B)/G)+Math.log(C)*Math.LOG10E):!0===F?E?D-(B-A)/G:B/G+D:E?B/G+D:D-(B-A)/G},getCoordinate:function(B){if(isNaN(B)){return NaN}var A=this.rotate,G=this.reversed,F=this.axisWidth,E=this.stepWidth,D=this.min,C=this.minReal;!0===this.logarithmic?(0==B&&(B=this.treatZeroAs),B=Math.log(B)*Math.LOG10E-Math.log(C)*Math.LOG10E,A=A?!0===G?F-E*B:E*B:!0===G?E*B:F-E*B):A=!0===G?A?F-E*(B-D):E*(B-D):A?E*(B-D):F-E*(B-D);A=this.rotate?A+(this.x-this.viX):A+(this.y-this.viY);10000000<Math.abs(A)&&(A=10000000*(A/Math.abs(A)));return Math.round(A)},synchronizeWithAxis:function(A){this.synchronizeWith=A;this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(B){var A=this.synchronizeWith;B=A.min;var D=A.max,A=A.step,C=this.synchronizationMultiplier;C&&(this.min=B*C,this.max=D*C,this.step=A*C,B=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),B=Math.abs(Math.log(Math.abs(B))*Math.LOG10E),this.maxDecCount=B=Math.round(B),this.draw())}});AmCharts.RecAxis=AmCharts.Class({construct:function(M){var L=M.chart,K=M.axisThickness,J=M.axisColor,I=M.axisAlpha,H=M.offset,G=M.dx,F=M.dy,E=M.viX,D=M.viY,C=M.viH,B=M.viW,A=L.container;"H"==M.orientation?(J=AmCharts.line(A,[0,B],[0,0],J,I,K),this.axisWidth=M.width,"bottom"==M.position?(F=K/2+H+C+D-1,K=E):(F=-K/2-H+D+F,K=G+E)):(this.axisWidth=M.height,"right"==M.position?(J=AmCharts.line(A,[0,0,-G],[0,C,C-F],J,I,K),F=D+F,K=K/2+H+G+B+E-1):(J=AmCharts.line(A,[0,0],[0,C],J,I,K),F=D,K=-K/2-H+E));J.translate(K,F);K=L.container.set();K.push(J);L.axesSet.push(K);AmCharts.setCN(L,J,M.bcn+"line");this.axisSet=K;this.set=J}});AmCharts.RecItem=AmCharts.Class({construct:function(Am,Al,Ak,Aj,Ai,Ah,Ag,Af,Ae,Ac,Aa,AZ){Al=Math.round(Al);var AY=Am.chart;this.value=Ak;void 0==Ak&&(Ak="");Ae||(Ae=0);void 0==Aj&&(Aj=!0);var AW=AY.fontFamily,AX=Am.fontSize;void 0==AX&&(AX=AY.fontSize);var AT=Am.color;void 0==AT&&(AT=AY.color);void 0!==Aa&&(AT=Aa);var AN=Am.chart.container,AP=AN.set();this.set=AP;var AV=Am.axisThickness,AQ=Am.axisColor,AO=Am.axisAlpha,AD=Am.tickLength,AB=Am.gridAlpha,AC=Am.gridThickness,o=Am.gridColor,AA=Am.dashLength,V=Am.fillColor,K=Am.fillAlpha,AL=Am.labelsEnabled;Aa=Am.labelRotation;var AS=Am.counter,P=Am.inside,AH=Am.labelOffset,AI=Am.dx,AM=Am.dy,R=Am.orientation,F=Am.position,J=Am.previousCoord,N=Am.viH,AU=Am.viW,AE=Am.offset,An,AJ;Ag?(void 0!=Ag.id&&(AZ=AY.classNamePrefix+"-guide-"+Ag.id),AL=!0,isNaN(Ag.tickLength)||(AD=Ag.tickLength),void 0!=Ag.lineColor&&(o=Ag.lineColor),void 0!=Ag.color&&(AT=Ag.color),isNaN(Ag.lineAlpha)||(AB=Ag.lineAlpha),isNaN(Ag.dashLength)||(AA=Ag.dashLength),isNaN(Ag.lineThickness)||(AC=Ag.lineThickness),!0===Ag.inside&&(P=!0),isNaN(Ag.labelRotation)||(Aa=Ag.labelRotation),isNaN(Ag.fontSize)||(AX=Ag.fontSize),Ag.position&&(F=Ag.position),void 0!==Ag.boldLabel&&(Af=Ag.boldLabel),isNaN(Ag.labelOffset)||(AH=Ag.labelOffset)):""===Ak&&(AD=0);var E="start";Ai&&(E="middle");var Q=Aa*Math.PI/180,M,AK,s=0,AR=0,AG=0,AF=M=0,Ad=0;"V"==R&&(Aa=0);var L;AL&&(L=Am.autoWrap&&0===Aa?AmCharts.wrappedText(AN,Ak,AT,AW,AX,E,Af,Ai,0):AmCharts.text(AN,Ak,AT,AW,AX,E,Af),E=L.getBBox(),AF=E.width,Ad=E.height);if("H"==R){if(0<=Al&&Al<=AU+1&&(0<AD&&0<AO&&Al+Ae<=AU+1&&(An=AmCharts.line(AN,[Al+Ae,Al+Ae],[0,AD],AQ,AO,AC),AP.push(An)),0<AB&&(AJ=AmCharts.line(AN,[Al,Al+AI,Al+AI],[N,N+AM,AM],o,AB,AC,AA),AP.push(AJ))),AR=0,s=Al,Ag&&90==Aa&&P&&(s-=AX),!1===Aj?(E="start",AR="bottom"==F?P?AR+AD:AR-AD:P?AR-AD:AR+AD,s+=3,Ai&&(s+=Ai/2-3,E="middle"),0<Aa&&(E="middle")):E="middle",1==AS&&0<K&&!Ag&&!Ac&&J<AU&&(Aj=AmCharts.fitToBounds(Al,0,AU),J=AmCharts.fitToBounds(J,0,AU),M=Aj-J,0<M&&(AK=AmCharts.rect(AN,M,Am.height,V,K),AK.translate(Aj-M+AI,AM),AP.push(AK))),"bottom"==F?(AR+=N+AX/2+AE,P?(0<Aa?(AR=N-AF/2*Math.sin(Q)-AD-3,s+=AF/2*Math.cos(Q)-4+2):0>Aa?(AR=N+AF*Math.sin(Q)-AD-3+2,s+=-AF*Math.cos(Q)-Ad*Math.sin(Q)-4):AR-=AD+AX+3+3,AR-=AH):(0<Aa?(AR=N+AF/2*Math.sin(Q)+AD+3,s-=AF/2*Math.cos(Q)):0>Aa?(AR=N+AD+3-AF/2*Math.sin(Q)+2,s+=AF/2*Math.cos(Q)):AR+=AD+AV+3+3,AR+=AH)):(AR+=AM+AX/2-AE,s+=AI,P?(0<Aa?(AR=AF/2*Math.sin(Q)+AD+3,s-=AF/2*Math.cos(Q)):AR+=AD+3,AR+=AH):(0<Aa?(AR=-(AF/2)*Math.sin(Q)-AD-6,s+=AF/2*Math.cos(Q)):AR-=AD+AX+3+AV+3,AR-=AH)),"bottom"==F?M=(P?N-AD-1:N+AV-1)+AE:(AG=AI,M=(P?AM:AM-AD-AV+1)-AE),Ah&&(s+=Ah),Ah=s,0<Aa&&(Ah+=AF/2*Math.cos(Q)),L&&(AX=0,P&&(AX=AF/2*Math.cos(Q)),Ah+AX>AU+2||0>Ah)){L.remove(),L=null}}else{0<=Al&&Al<=N+1&&(0<AD&&0<AO&&Al+Ae<=N+1&&(An=AmCharts.line(AN,[0,AD],[Al+Ae,Al+Ae],AQ,AO,AC),AP.push(An)),0<AB&&(AJ=AmCharts.line(AN,[0,AI,AU+AI],[Al,Al+AM,Al+AM],o,AB,AC,AA),AP.push(AJ)));E="end";if(!0===P&&"left"==F||!1===P&&"right"==F){E="start"}AR=Al-AX/2;1==AS&&0<K&&!Ag&&!Ac&&(Aj=AmCharts.fitToBounds(Al,0,N),J=AmCharts.fitToBounds(J,0,N),Q=Aj-J,AK=AmCharts.polygon(AN,[0,Am.width,Am.width,0],[0,0,Q,Q],V,K),AK.translate(AI,Aj-Q+AM),AP.push(AK));AR+=AX/2;"right"==F?(s+=AI+AU+AE,AR+=AM,P?(Ah||(AR-=AX/2+3),s=s-(AD+4)-AH):(s+=AD+4+AV,AR-=2,s+=AH)):P?(s+=AD+4-AE,Ah||(AR-=AX/2+3),Ag&&(s+=AI,AR+=AM),s+=AH):(s+=-AD-AV-4-2-AE,AR-=2,s-=AH);An&&("right"==F?(AG+=AI+AE+AU,M+=AM,AG=P?AG-AV:AG+AV):(AG-=AE,P||(AG-=AD+AV)));Ah&&(AR+=Ah);P=-3;"right"==F&&(P+=AM);L&&(AR>N+1||AR<P)&&(L.remove(),L=null)}An&&(An.translate(AG,M),AmCharts.setCN(AY,An,Am.bcn+"tick"),AmCharts.setCN(AY,An,AZ,!0),Ag&&AmCharts.setCN(AY,An,"guide"));!1===Am.visible&&(An&&An.remove(),L&&(L.remove(),L=null));L&&(L.attr({"text-anchor":E}),L.translate(s,AR),0!==Aa&&L.rotate(-Aa,Am.chart.backgroundColor),Am.allLabels.push(L),this.label=L,AmCharts.setCN(AY,L,Am.bcn+"label"),AmCharts.setCN(AY,L,AZ,!0),Ag&&AmCharts.setCN(AY,L,"guide"));AJ&&(AmCharts.setCN(AY,AJ,Am.bcn+"grid"),AmCharts.setCN(AY,AJ,AZ,!0),Ag&&AmCharts.setCN(AY,AJ,"guide"));AK&&(AmCharts.setCN(AY,AK,Am.bcn+"fill"),AmCharts.setCN(AY,AK,AZ,!0));Ac?AJ&&AmCharts.setCN(AY,AJ,Am.bcn+"grid-minor"):(Am.counter=0===AS?1:0,Am.previousCoord=Al);0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}});AmCharts.RecFill=AmCharts.Class({construct:function(K,J,I,H){var G=K.dx,F=K.dy,E=K.orientation,D=0;if(I<J){var C=J;J=I;I=C}var B=H.fillAlpha;isNaN(B)&&(B=0);var C=K.chart.container,A=H.fillColor;"V"==E?(J=AmCharts.fitToBounds(J,0,K.viH),I=AmCharts.fitToBounds(I,0,K.viH)):(J=AmCharts.fitToBounds(J,0,K.viW),I=AmCharts.fitToBounds(I,0,K.viW));I-=J;isNaN(I)&&(I=4,D=2,B=0);0>I&&"object"==typeof A&&(A=A.join(",").split(",").reverse());"V"==E?(E=AmCharts.rect(C,K.width,I,A,B),E.translate(G,J-D+F)):(E=AmCharts.rect(C,I,K.height,A,B),E.translate(J-D+G,F));AmCharts.setCN(K.chart,E,"guide-fill");H.id&&AmCharts.setCN(K.chart,E,"guide-fill-"+H.id);this.set=C.set([E])},graphics:function(){return this.set},getLabel:function(){}});AmCharts.AmChart=AmCharts.Class({construct:function(B){this.theme=B;this.classNamePrefix="amcharts";this.addClassNames=!1;this.version="3.12.0";AmCharts.addChart(this);this.createEvents("dataUpdated","init","rendered","drawn","failed");this.height=this.width="100%";this.dataChanged=!0;this.chartCreated=!1;this.previousWidth=this.previousHeight=0;this.backgroundColor="#FFFFFF";this.borderAlpha=this.backgroundAlpha=0;this.color=this.borderColor="#000000";this.fontFamily="Verdana";this.fontSize=11;this.usePrefixes=!1;this.precision=-1;this.percentPrecision=2;this.decimalSeparator=".";this.thousandsSeparator=",";this.labels=[];this.allLabels=[];this.titles=[];this.marginRight=this.marginLeft=this.autoMarginOffset=0;this.timeOuts=[];this.creditsPosition="top-left";var A=document.createElement("div"),C=A.style;C.overflow="hidden";C.position="relative";C.textAlign="left";this.chartDiv=A;A=document.createElement("div");C=A.style;C.overflow="hidden";C.position="relative";C.textAlign="left";this.legendDiv=A;this.titleHeight=0;this.hideBalloonTime=150;this.handDrawScatter=2;this.handDrawThickness=1;this.prefixesOfBigNumbers=[{number:1000,prefix:"k"},{number:1000000,prefix:"M"},{number:1000000000,prefix:"G"},{number:1000000000000,prefix:"T"},{number:1000000000000000,prefix:"P"},{number:1000000000000000000,prefix:"E"},{number:1e+21,prefix:"Z"},{number:1e+24,prefix:"Y"}];this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:0.000001,prefix:"\u03bc"},{number:0.001,prefix:"m"}];this.panEventsEnabled=!0;AmCharts.bezierX=3;AmCharts.bezierY=6;this.product="amcharts";this.animations=[];this.balloon=new AmCharts.AmBalloon(this.theme);this.balloon.chart=this;AmCharts.applyTheme(this,B,"AmChart")},drawChart:function(){this.drawBackground();this.redrawLabels();this.drawTitles();this.brr()},drawBackground:function(){AmCharts.remove(this.background);var B=this.container,A=this.backgroundColor,F=this.backgroundAlpha,E=this.set;AmCharts.isModern||0!==F||(F=0.001);var D=this.updateWidth();this.realWidth=D;var C=this.updateHeight();this.realHeight=C;A=AmCharts.polygon(B,[0,D-1,D-1,0],[0,0,C-1,C-1],A,F,1,this.borderColor,this.borderAlpha);AmCharts.setCN(this,A,"bg");this.background=A;E.push(A);if(A=this.backgroundImage){this.path&&(A=this.path+A),B=B.image(A,0,0,D,C),AmCharts.setCN(this,A,"bg-image"),this.bgImg=B,E.push(B)}},drawTitles:function(){var B=this.titles;if(AmCharts.ifArray(B)){var A=20,G;for(G=0;G<B.length;G++){var F=B[G],E=F.color;void 0===E&&(E=this.color);var D=F.size;isNaN(D)&&(D=this.fontSize+2);isNaN(F.alpha);var C=this.marginLeft,E=AmCharts.text(this.container,F.text,E,this.fontFamily,D);E.translate(C+(this.realWidth-this.marginRight-C)/2,A);E.node.style.pointerEvents="none";AmCharts.setCN(this,E,"title");F.id&&AmCharts.setCN(this,E,"title-"+F.id);C=!0;void 0!==F.bold&&(C=F.bold);C&&E.attr({"font-weight":"bold"});E.attr({opacity:F.alpha});A+=D+6;this.freeLabelsSet.push(E)}}},write:function(I){if(I="object"!=typeof I?document.getElementById(I):I){I.innerHTML="";this.div=I;I.style.overflow="hidden";I.style.textAlign="left";var H=this.chartDiv,G=this.legendDiv,F=this.legend,E=G.style,D=H.style;this.measure();var C,B=document.createElement("div");C=B.style;C.position="relative";this.containerDiv=B;B.className=this.classNamePrefix+"-main-div";H.className=this.classNamePrefix+"-chart-div";I.appendChild(B);var A=this.exportConfig;A&&AmCharts.AmExport&&!this.AmExport&&(this.AmExport=new AmCharts.AmExport(this,A));this.amExport&&AmCharts.AmExport&&(this.AmExport=AmCharts.extend(this.amExport,new AmCharts.AmExport(this),!0));this.AmExport&&this.AmExport.init&&this.AmExport.init();if(F){switch(F=this.addLegend(F,F.divId),F.position){case"bottom":B.appendChild(H);B.appendChild(G);break;case"top":B.appendChild(G);B.appendChild(H);break;case"absolute":C.width=I.style.width;C.height=I.style.height;E.position="absolute";D.position="absolute";void 0!==F.left&&(E.left=F.left+"px");void 0!==F.right&&(E.right=F.right+"px");void 0!==F.top&&(E.top=F.top+"px");void 0!==F.bottom&&(E.bottom=F.bottom+"px");F.marginLeft=0;F.marginRight=0;B.appendChild(H);B.appendChild(G);break;case"right":C.width=I.style.width;C.height=I.style.height;E.position="relative";D.position="absolute";B.appendChild(H);B.appendChild(G);break;case"left":C.width=I.style.width;C.height=I.style.height;E.position="absolute";D.position="relative";B.appendChild(H);B.appendChild(G);break;case"outside":B.appendChild(H)}}else{B.appendChild(H)}this.listenersAdded||(this.addListeners(),this.listenersAdded=!0);this.initChart()}},createLabelsSet:function(){AmCharts.remove(this.labelsSet);this.labelsSet=this.container.set();this.freeLabelsSet.push(this.labelsSet)},initChart:function(){this.initHC||(AmCharts.callInitHandler(this),this.initHC=!0);AmCharts.applyLang(this.language,this);var B=this.numberFormatter;B&&(isNaN(B.precision)||(this.precision=B.precision),void 0!==B.thousandsSeparator&&(this.thousandsSeparator=B.thousandsSeparator),void 0!==B.decimalSeparator&&(this.decimalSeparator=B.decimalSeparator));(B=this.percentFormatter)&&!isNaN(B.precision)&&(this.percentPrecision=B.precision);this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.divIsFixed=AmCharts.findIfFixed(this.chartDiv);this.previousHeight=this.divRealHeight;this.previousWidth=this.divRealWidth;this.destroy();this.startInterval();B=0;document.attachEvent&&!window.opera&&(B=1);this.dmouseX=this.dmouseY=0;var A=document.getElementsByTagName("html")[0];A&&window.getComputedStyle&&(A=window.getComputedStyle(A,null))&&(this.dmouseY=AmCharts.removePx(A.getPropertyValue("margin-top")),this.dmouseX=AmCharts.removePx(A.getPropertyValue("margin-left")));this.mouseMode=B;(B=this.container)?(B.container.innerHTML="",this.chartDiv.appendChild(B.container),B.setSize(this.realWidth,this.realHeight)):B=new AmCharts.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this);B.chart=this;AmCharts.VML||AmCharts.SVG?(B.handDrawn=this.handDrawn,B.handDrawScatter=this.handDrawScatter,B.handDrawThickness=this.handDrawThickness,this.container=B,this.set&&this.set.remove(),this.set=B.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=B.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=B.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=B.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=B.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=B.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=B.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=B.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=B.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=B.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=B.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=B.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=B.set(),this.freeLabelsSet=B.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=B.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zoomButtonSet=B.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=B.set(),this.renderFix()):this.fire("failed",{type:"failed",chart:this})},measure:function(){var I=this.div;if(I){var H=this.chartDiv,G=I.offsetWidth,F=I.offsetHeight,E=this.container;I.clientHeight&&(G=I.clientWidth,F=I.clientHeight);var D=AmCharts.removePx(AmCharts.getStyle(I,"padding-left")),C=AmCharts.removePx(AmCharts.getStyle(I,"padding-right")),B=AmCharts.removePx(AmCharts.getStyle(I,"padding-top")),A=AmCharts.removePx(AmCharts.getStyle(I,"padding-bottom"));isNaN(D)||(G-=D);isNaN(C)||(G-=C);isNaN(B)||(F-=B);isNaN(A)||(F-=A);D=I.style;I=D.width;D=D.height;-1!=I.indexOf("px")&&(G=AmCharts.removePx(I));-1!=D.indexOf("px")&&(F=AmCharts.removePx(D));I=AmCharts.toCoordinate(this.width,G);D=AmCharts.toCoordinate(this.height,F);this.balloon=AmCharts.processObject(this.balloon,AmCharts.AmBalloon,this.theme);this.balloon.chart=this;(I!=this.previousWidth||D!=this.previousHeight)&&0<I&&0<D&&(H.style.width=I+"px",H.style.height=D+"px",E&&E.setSize(I,D));this.balloon.setBounds(2,2,I-2,D);this.realWidth=I;this.realHeight=D;this.divRealWidth=G;this.divRealHeight=F}},destroy:function(){this.chartDiv.innerHTML="";this.clearTimeOuts();this.interval&&clearInterval(this.interval);this.interval=NaN},clearTimeOuts:function(){var B=this.timeOuts;if(B){var A;for(A=0;A<B.length;A++){clearTimeout(B[A])}}this.timeOuts=[]},clear:function(A){AmCharts.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]);this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null;this.clearTimeOuts();this.interval&&clearInterval(this.interval);this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv));A||AmCharts.removeChart(this)},setMouseCursor:function(A){"auto"==A&&AmCharts.isNN&&(A="default");this.chartDiv.style.cursor=A;this.legendDiv.style.cursor=A},redrawLabels:function(){this.labels=[];var B=this.allLabels;this.createLabelsSet();var A;for(A=0;A<B.length;A++){this.drawLabel(B[A])}},drawLabel:function(J){if(this.container){var I=J.y,H=J.text,G=J.align,F=J.size,E=J.color,D=J.rotation,C=J.alpha,B=J.bold,A=AmCharts.toCoordinate(J.x,this.realWidth),I=AmCharts.toCoordinate(I,this.realHeight);A||(A=0);I||(I=0);void 0===E&&(E=this.color);isNaN(F)&&(F=this.fontSize);G||(G="start");"left"==G&&(G="start");"right"==G&&(G="end");"center"==G&&(G="middle",D?I=this.realHeight-I+I/2:A=this.realWidth/2-A);void 0===C&&(C=1);void 0===D&&(D=0);I+=F/2;H=AmCharts.text(this.container,H,E,this.fontFamily,F,G,B,C);H.translate(A,I);AmCharts.setCN(this,H,"label");J.id&&AmCharts.setCN(this,H,"label-"+J.id);0!==D&&H.rotate(D);J.url?(H.setAttr("cursor","pointer"),H.click(function(){AmCharts.getURL(J.url)})):H.node.style.pointerEvents="none";this.labelsSet.push(H);this.labels.push(H)}},addLabel:function(J,I,H,G,F,E,D,C,B,A){J={x:J,y:I,text:H,align:G,size:F,color:E,alpha:C,rotation:D,bold:B,url:A};this.container&&this.drawLabel(J);this.allLabels.push(J)},clearLabels:function(){var B=this.labels,A;for(A=B.length-1;0<=A;A--){B[A].remove()}this.labels=[];this.allLabels=[]},updateHeight:function(){var B=this.divRealHeight,A=this.legend;if(A){var C=this.legendDiv.offsetHeight,A=A.position;if("top"==A||"bottom"==A){B-=C;if(0>B||isNaN(B)){B=0}this.chartDiv.style.height=B+"px"}}return B},updateWidth:function(){var B=this.divRealWidth,A=this.divRealHeight,G=this.legend;if(G){var F=this.legendDiv,E=F.offsetWidth;isNaN(G.width)||(E=G.width);var D=F.offsetHeight,F=F.style,C=this.chartDiv.style,G=G.position;if("right"==G||"left"==G){B-=E;if(0>B||isNaN(B)){B=0}C.width=B+"px";"left"==G?C.left=E+"px":F.left=B+"px";A>D&&(F.top=(A-D)/2+"px")}}return B},getTitleHeight:function(){var B=0,A=this.titles;if(0<A.length){var B=15,D;for(D=0;D<A.length;D++){var C=A[D].size;isNaN(C)&&(C=this.fontSize+2);B+=C+6}}return B},addTitle:function(B,A,E,D,C){isNaN(A)&&(A=this.fontSize+2);B={text:B,size:A,color:E,alpha:D,bold:C};this.titles.push(B);return B},handleWheel:function(B){var A=0;B||(B=window.event);B.wheelDelta?A=B.wheelDelta/120:B.detail&&(A=-B.detail/3);A&&this.handleWheelReal(A,B.shiftKey);B.preventDefault&&B.preventDefault()},handleWheelReal:function(A){},addListeners:function(){var B=this,A=B.chartDiv;document.addEventListener?(B.panEventsEnabled&&(A.style.msTouchAction="none"),"ontouchstart" in document.documentElement&&(A.addEventListener("touchstart",function(C){B.handleTouchMove.call(B,C);B.handleTouchStart.call(B,C)},!0),A.addEventListener("touchmove",function(C){B.handleTouchMove.call(B,C)},!0),A.addEventListener("touchend",function(C){B.handleTouchEnd.call(B,C)},!0)),A.addEventListener("mousedown",function(C){B.mouseIsOver=!0;B.handleMouseMove.call(B,C);B.handleMouseDown.call(B,C)},!0),A.addEventListener("mouseover",function(C){B.handleMouseOver.call(B,C)},!0),A.addEventListener("mouseout",function(C){B.handleMouseOut.call(B,C)},!0)):(A.attachEvent("onmousedown",function(C){B.handleMouseDown.call(B,C)}),A.attachEvent("onmouseover",function(C){B.handleMouseOver.call(B,C)}),A.attachEvent("onmouseout",function(C){B.handleMouseOut.call(B,C)}))},dispDUpd:function(){var A;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,A="dataUpdated",this.fire(A,{type:A,chart:this}));this.chartCreated||(A="init",this.fire(A,{type:A,chart:this}));this.chartRendered||(A="rendered",this.fire(A,{type:A,chart:this}),this.chartRendered=!0);A="drawn";this.fire(A,{type:A,chart:this})},validateSize:function(){var B=this;B.measure();var A=B.legend;if((B.realWidth!=B.previousWidth||B.realHeight!=B.previousHeight)&&0<B.realWidth&&0<B.realHeight){B.sizeChanged=!0;if(A){clearTimeout(B.legendInitTO);var C=setTimeout(function(){A.invalidateSize()},100);B.timeOuts.push(C);B.legendInitTO=C}B.marginsUpdated="xy"!=B.type?!1:!0;clearTimeout(B.initTO);C=setTimeout(function(){B.initChart()},150);B.timeOuts.push(C);B.initTO=C}B.renderFix();A&&A.renderFix()},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN;this.invalidateSizeReal()},invalidateSizeReal:function(){var B=this;B.marginsUpdated=!1;clearTimeout(B.validateTO);var A=setTimeout(function(){B.validateSize()},5);B.timeOuts.push(A);B.validateTO=A},validateData:function(A){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated="xy"!=this.type?!1:!0,this.initChart(A))},validateNow:function(){this.chartRendered=!1;this.write(this.div)},showItem:function(A){A.hidden=!1;this.initChart()},hideItem:function(A){A.hidden=!0;this.initChart()},hideBalloon:function(){var A=this;clearInterval(A.hoverInt);clearTimeout(A.balloonTO);A.hoverInt=setTimeout(function(){A.hideBalloonReal.call(A)},A.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var A=this.balloon;A&&A.hide()},showBalloon:function(B,A,F,E,D){var C=this;clearTimeout(C.balloonTO);clearInterval(C.hoverInt);C.balloonTO=setTimeout(function(){C.showBalloonReal.call(C,B,A,F,E,D)},1)},showBalloonReal:function(B,A,F,E,D){this.handleMouseMove();var C=this.balloon;C.enabled&&(C.followCursor(!1),C.changeColor(A),!F||C.fixedPosition?(C.setPosition(E,D),C.followCursor(!1)):C.followCursor(!0),B&&C.showBalloon(B))},handleTouchMove:function(B){this.hideBalloon();var A=this.chartDiv;B.touches&&(B=B.touches.item(0),this.mouseX=B.pageX-AmCharts.findPosX(A),this.mouseY=B.pageY-AmCharts.findPosY(A))},handleMouseOver:function(A){AmCharts.resetMouseOver();this.mouseIsOver=!0},handleMouseOut:function(A){AmCharts.resetMouseOver();this.mouseIsOver=!1},handleMouseMove:function(B){if(this.mouseIsOver){var A=this.chartDiv;B||(B=window.event);var F,E;if(B){this.posX=AmCharts.findPosX(A);this.posY=AmCharts.findPosY(A);switch(this.mouseMode){case 1:F=B.clientX-this.posX;E=B.clientY-this.posY;if(!this.divIsFixed){var A=document.body,D,C;A&&(D=A.scrollLeft,y1=A.scrollTop);if(A=document.documentElement){C=A.scrollLeft,y2=A.scrollTop}D=Math.max(D,C);C=Math.max(y1,y2);F+=D;E+=C}break;case 0:this.divIsFixed?(F=B.clientX-this.posX,E=B.clientY-this.posY):(F=B.pageX-this.posX,E=B.pageY-this.posY)}B.touches&&(B=B.touches.item(0),F=B.pageX-this.posX,E=B.pageY-this.posY);this.mouseX=F-this.dmouseX;this.mouseY=E-this.dmouseY}}},handleTouchStart:function(A){this.handleMouseDown(A)},handleTouchEnd:function(A){AmCharts.resetMouseOver();this.handleReleaseOutside(A)},handleReleaseOutside:function(A){},handleMouseDown:function(A){AmCharts.resetMouseOver();this.mouseIsOver=!0;A&&A.preventDefault&&(this.panEventsEnabled?A.preventDefault():A.touches||A.preventDefault())},addLegend:function(B,A){B=AmCharts.processObject(B,AmCharts.AmLegend,this.theme);B.divId=A;var C;C="object"!=typeof A&&A?document.getElementById(A):A;this.legend=B;B.chart=this;C?(B.div=C,B.position="outside",B.autoMargins=!1):B.div=this.legendDiv;C=this.handleLegendEvent;this.listenTo(B,"showItem",C);this.listenTo(B,"hideItem",C);this.listenTo(B,"clickMarker",C);this.listenTo(B,"rollOverItem",C);this.listenTo(B,"rollOutItem",C);this.listenTo(B,"rollOverMarker",C);this.listenTo(B,"rollOutMarker",C);this.listenTo(B,"clickLabel",C);return B},removeLegend:function(){this.legend=void 0;this.legendDiv.innerHTML=""},handleResize:function(){(AmCharts.isPercents(this.width)||AmCharts.isPercents(this.height))&&this.invalidateSizeReal();this.renderFix()},renderFix:function(){if(!AmCharts.VML){var A=this.container;A&&A.renderFix()}},getSVG:function(){if(AmCharts.hasSVG){return this.container}},animate:function(B,A,G,F,E,D,C){B["an_"+A]&&AmCharts.removeFromArray(this.animations,B["an_"+A]);G={obj:B,frame:0,attribute:A,from:G,to:F,time:E,effect:D,suffix:C};B["an_"+A]=G;this.animations.push(G);return G},setLegendData:function(B){var A=this.legend;A&&A.setData(B)},startInterval:function(){var A=this;clearInterval(A.interval);A.interval=setInterval(function(){A.updateAnimations.call(A)},AmCharts.updateRate)},stopAnim:function(A){AmCharts.removeFromArray(this.animations,A)},updateAnimations:function(){var B;this.container&&this.container.update();for(B=this.animations.length-1;0<=B;B--){var A=this.animations[B],H=1000*A.time/AmCharts.updateRate,G=A.frame+1,F=A.obj,E=A.attribute;if(G<=H){A.frame++;var D=Number(A.from),C=Number(A.to)-D,H=AmCharts[A.effect](0,G,D,C,H);0===C?(this.animations.splice(B,1),F.node.style[E]=Number(A.to)+A.suffix):F.node.style[E]=H+A.suffix}else{F.node.style[E]=Number(A.to)+A.suffix,this.animations.splice(B,1)}}},inIframe:function(){try{return window.self!==window.top}catch(A){return !0}},brr:function(){}});AmCharts.Slice=AmCharts.Class({construct:function(){}});AmCharts.SerialDataItem=AmCharts.Class({construct:function(){}});AmCharts.GraphDataItem=AmCharts.Class({construct:function(){}});AmCharts.Guide=AmCharts.Class({construct:function(A){this.cname="Guide";AmCharts.applyTheme(this,A,this.cname)}});AmCharts.AmGraph=AmCharts.Class({construct:function(A){this.cname="AmGraph";this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.type="line";this.stackable=!0;this.columnCount=1;this.columnIndex=0;this.centerCustomBullets=this.showBalloon=!0;this.maxBulletSize=50;this.minBulletSize=4;this.balloonText="[[value]]";this.hidden=this.scrollbar=this.animationPlayed=!1;this.pointPosition="middle";this.depthCount=1;this.includeInMinMax=!0;this.negativeBase=0;this.visibleInLegend=!0;this.showAllValueLabels=!1;this.showBulletsAt=this.showBalloonAt="close";this.lineThickness=1;this.dashLength=0;this.connect=!0;this.lineAlpha=1;this.bullet="none";this.bulletBorderThickness=2;this.bulletBorderAlpha=0;this.bulletAlpha=1;this.bulletSize=8;this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0;this.cursorBulletAlpha=1;this.gradientOrientation="vertical";this.dy=this.dx=0;this.periodValue="";this.clustered=!0;this.periodSpan=1;this.y=this.x=0;this.switchable=!0;this.tcc=this.minDistance=1;this.labelRotation=0;this.labelAnchor="auto";this.labelOffset=3;AmCharts.applyTheme(this,A,this.cname)},draw:function(){var B=this.chart,A=B.type;this.bcn="graph-";this.scrollbar&&(this.bcn="scrollbar-"+this.bcn);isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:B.decimalSeparator,thousandsSeparator:B.thousandsSeparator});var G=B.container;this.container=G;this.destroy();var F=G.set(),E=G.set();this.behindColumns?(B.graphsBehindSet.push(F),B.bulletBehindSet.push(E)):(B.graphsSet.push(F),B.bulletSet.push(E));var D=this.bulletAxis;AmCharts.isString(D)&&(this.bulletAxis=B.getValueAxisById(D));this.bulletSet=E;if(!this.scrollbar){var D=B.marginLeftReal,C=B.marginTopReal;F.translate(D,C);E.translate(D,C)}G=G.set();AmCharts.remove(this.columnsSet);F.push(G);this.set=F;AmCharts.setCN(B,F,"graph-"+this.type);AmCharts.setCN(B,F,"graph-"+this.id);AmCharts.setCN(B,E,"graph-"+this.type);AmCharts.setCN(B,E,"graph-"+this.id);this.columnsSet=G;this.columnsArray=[];this.ownColumns=[];this.allBullets=[];this.animationArray=[];F=this.labelPosition;F||(E=this.valueAxis.stackType,F="top","column"==this.type&&(B.rotate&&(F="right"),"100%"==E||"regular"==E)&&(F="middle"),this.labelPosition=F);AmCharts.ifArray(this.data)&&(B=!1,"xy"==A?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(B=!0):this.valueAxis.axisCreated&&(B=!0),!this.hidden&&B&&this.createGraph())},createGraph:function(){var B=this,A=B.chart;B.startAlpha=A.startAlpha;B.seqAn=A.sequencedAnimation;B.baseCoord=B.valueAxis.baseCoord;void 0===B.fillAlphas&&(B.fillAlphas=0);B.bulletColorR=B.bulletColor;void 0===B.bulletColorR&&(B.bulletColorR=B.lineColorR,B.bulletColorNegative=B.negativeLineColor);void 0===B.bulletAlpha&&(B.bulletAlpha=B.lineAlpha);clearTimeout(B.playedTO);if(!isNaN(B.valueAxis.min)&&!isNaN(B.valueAxis.max)){switch(A.type){case"serial":B.categoryAxis&&(B.createSerialGraph(),"candlestick"==B.type&&1>B.valueAxis.minMaxMultiplier&&B.positiveClip(B.set));break;case"radar":B.createRadarGraph();break;case"xy":B.createXYGraph(),B.positiveClip(B.set)}B.playedTO=setTimeout(function(){B.setAnimationPlayed.call(B)},500*B.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var J=[],I=[],H=this.xAxis,G=this.yAxis;this.pmh=G.viH+1;this.pmw=H.viW+1;this.pmy=this.pmx=0;var F;for(F=this.start;F<=this.end;F++){var E=this.data[F].axes[H.id].graphs[this.id],D=E.values,C=D.x,B=D.y,D=H.getCoordinate(C),A=G.getCoordinate(B);!isNaN(C)&&!isNaN(B)&&(J.push(D),I.push(A),C=this.createBullet(E,D,A,F),B=this.labelText)&&(E=this.createLabel(E,D,A,B),this.positionLabel(D,A,E,C),this.allBullets.push(E))}this.drawLineGraph(J,I);this.launchAnimation()},createRadarGraph:function(){var K=this.valueAxis.stackType,J=[],I=[],H,G,F;for(F=this.start;F<=this.end;F++){var E=this.data[F].axes[this.valueAxis.id].graphs[this.id],D;D="none"==K||"3d"==K?E.values.value:E.values.close;if(isNaN(D)){this.drawLineGraph(J,I),J=[],I=[]}else{var C=this.y-(this.valueAxis.getCoordinate(D)-this.height),B=180-360/(this.end-this.start+1)*F;D=C*Math.sin(B/180*Math.PI);C*=Math.cos(B/180*Math.PI);J.push(D);I.push(C);var B=this.createBullet(E,D,C,F),A=this.labelText;A&&(E=this.createLabel(E,D,C,A),this.positionLabel(D,C,E,B),this.allBullets.push(E));isNaN(H)&&(H=D);isNaN(G)&&(G=C)}}J.push(H);I.push(G);this.drawLineGraph(J,I);this.launchAnimation()},positionLabel:function(O,N,M,L,K,J){K="middle";J=!1;var I=this.labelPosition,H=M.getBBox(),G=L.graphDataItem,F=this.chart.rotate,E=G.isNegative;N-=H.height/4/2;switch(I){case"top":I=F?"top":E?"bottom":"top";break;case"right":I=F?E?"left":"right":"right";break;case"bottom":I=F?"bottom":E?"top":"bottom";break;case"left":I=F?E?"right":"left":"left"}var D=G.columnGraphics,C=0,A=0;D&&(C=D.x,A=D.y);var B=this.labelOffset;switch(I){case"top":N-=L.size/2+H.height/2+B;break;case"right":K="start";O+=L.size/2+B;break;case"bottom":N+=L.size/2+H.height/2+B;break;case"left":K="end";O-=L.size/2+B;break;case"inside":"column"==this.type&&(J=!0,F?E?(K="end",O=C-3-B):(K="start",O=C+3+B):N=E?A+7+B:A-10-B);break;case"middle":"column"==this.type&&(J=!0,F?O-=(O-C)/2+B-3:N-=(N-A)/2+B-3)}"auto"!=this.labelAnchor&&(K=this.labelAnchor);M.attr({"text-anchor":K});this.labelRotation&&M.rotate(this.labelRotation);M.translate(O,N);H=M.getBBox();D&&J&&(H.height>G.columnHeight||H.width>G.columnWidth)&&(M.remove(),M=!1);if(M&&"serial"==this.chart.type){if(F){if(0>N||N>this.height){M.remove(),M=!1}}else{if(0>O||O>this.width){M.remove(),M=!1}}}return M},getGradRotation:function(){var A=270;"horizontal"==this.gradientOrientation&&(A=0);return this.gradientRotation=A},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var Bl=this.chart,Bk=this.id,Bj=this.index,Bi=this.data,Bh=this.chart.container,Bf=this.valueAxis,Be=this.type,Bc=this.columnWidthReal,BZ=this.showBulletsAt;isNaN(this.columnWidth)||(Bc=this.columnWidth);isNaN(Bc)&&(Bc=0.8);var BY=this.useNegativeColorIfDown,BX=this.width,BW=this.height,BV=this.y,BR=this.rotate,BT=this.columnCount,BP=AmCharts.toCoordinate(this.cornerRadiusTop,Bc/2),BJ=this.connect,BM=[],BQ=[],BN,BL,CJ,CH,CI=this.chart.graphs.length,CB,CG=this.dx/this.tcc,B9=this.dy/this.tcc,Bs=Bf.stackType,Bg=this.start,Bp=this.end,By=this.scrollbar,CZ="graph-column-";By&&(CZ="scrollbar-graph-column-");var BK=this.categoryAxis,AX=this.baseCoord,Aj=this.negativeBase,Bq=this.columnIndex,Br=this.lineThickness,Bw=this.lineAlpha,A3=this.lineColorR,CV=this.dashLength,CD=this.set,At,Ah=this.getGradRotation(),B3=this.chart.columnSpacing,Bv=BK.cellWidth,AT=(Bv*Bc-BT)/BT;B3>AT&&(B3=AT);var CC,BO,AP,BF=BW+1,AZ=BX+1,Bt=0,BI=0,BA,A2,BE,A6,As=this.fillColorsR,CN=this.negativeFillColors,An=this.negativeLineColor,B0=this.fillAlphas,BU=this.negativeFillAlphas;"object"==typeof B0&&(B0=B0[0]);"object"==typeof BU&&(BU=BU[0]);var Ay=Bf.getCoordinate(Bf.min);Bf.logarithmic&&(Ay=Bf.getCoordinate(Bf.minReal));this.minCoord=Ay;this.resetBullet&&(this.bullet="none");if(!(By||"line"!=Be&&"smoothedLine"!=Be&&"step"!=Be||(1==Bi.length&&"step"!=Be&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!CN&&void 0==An||BY))){var AR=Aj;AR>Bf.max&&(AR=Bf.max);AR<Bf.min&&(AR=Bf.min);Bf.logarithmic&&(AR=Bf.minReal);var AF=Bf.getCoordinate(AR),CW=Bf.getCoordinate(Bf.max);BR?(BF=BW,AZ=Math.abs(CW-AF)+1,BA=BW,A2=Math.abs(Ay-AF)+1,A6=BI=0,Bf.reversed?(Bt=0,BE=AF):(Bt=AF,BE=0)):(AZ=BX,BF=Math.abs(CW-AF)+1,A2=BX,BA=Math.abs(Ay-AF)+1,BE=Bt=0,Bf.reversed?(A6=BV,BI=AF):A6=AF+1)}var Ch=Math.round;this.pmx=Ch(Bt);this.pmy=Ch(BI);this.pmh=Ch(BF);this.pmw=Ch(AZ);this.nmx=Ch(BE);this.nmy=Ch(A6);this.nmh=Ch(BA);this.nmw=Ch(A2);AmCharts.isModern||(this.nmy=this.nmx=0,this.nmh=this.height);this.clustered||(BT=1);Bc="column"==Be?(Bv*Bc-B3*(BT-1))/BT:Bv*Bc;1>Bc&&(Bc=1);var CM=this.fixedColumnWidth;isNaN(CM)||(Bc=CM);var B8;if("line"==Be||"step"==Be||"smoothedLine"==Be){if(0<Bg){for(B8=Bg-1;-1<B8;B8--){if(CC=Bi[B8],BO=CC.axes[Bf.id].graphs[Bk],AP=BO.values.value,!isNaN(AP)){Bg=B8;break}}if(this.lineColorField){for(B8=Bg;-1<B8;B8--){if(CC=Bi[B8],BO=CC.axes[Bf.id].graphs[Bk],BO.lineColor){this.bulletColorSwitched=this.lineColorSwitched=BO.lineColor;break}}}if(this.fillColorsField){for(B8=Bg;-1<B8;B8--){if(CC=Bi[B8],BO=CC.axes[Bf.id].graphs[Bk],BO.fillColors){this.fillColorsSwitched=BO.fillColors;break}}}if(this.dashLengthField){for(B8=Bg;-1<B8;B8--){if(CC=Bi[B8],BO=CC.axes[Bf.id].graphs[Bk],!isNaN(BO.dashLength)){this.dashLengthSwitched=BO.dashLength;break}}}}if(Bp<Bi.length-1){for(B8=Bp+1;B8<Bi.length;B8++){if(CC=Bi[B8],BO=CC.axes[Bf.id].graphs[Bk],AP=BO.values.value,!isNaN(AP)){Bp=B8;break}}}}Bp<Bi.length-1&&Bp++;var B2=[],B1=[],Bn=!1;if("line"==Be||"step"==Be||"smoothedLine"==Be){if(this.stackable&&"regular"==Bs||"100%"==Bs||this.fillToGraph){Bn=!0}}var Bm=this.noStepRisers,Ao=-1000,Ag=-1000,AW=this.minDistance,BH=!0,BD=!1;for(B8=Bg;B8<=Bp;B8++){CC=Bi[B8];BO=CC.axes[Bf.id].graphs[Bk];BO.index=B8;var A5,A9=NaN;if(BY&&void 0==this.openField){for(var Ak=B8+1;Ak<Bi.length&&(!Bi[Ak]||!(A5=Bi[B8+1].axes[Bf.id].graphs[Bk])||!A5.values||(A9=A5.values.value,isNaN(A9)));Ak++){}}var Bz,B4,B6,A7,AH=NaN,CE=NaN,CF=NaN,B5=NaN,B7=NaN,A1=NaN,Af=NaN,Ar=NaN,AV=NaN,AD=NaN,Cf=NaN,Az=NaN,Ap=NaN,Bu=NaN,Ac=NaN,AS=NaN,s=NaN,CP=void 0,CX=As,AJ=B0,CT=A3,Al,AL,AK=this.proCandlesticks,AO=this.topRadius,Av=this.pattern;void 0!=BO.pattern&&(Av=BO.pattern);void 0!=BO.color&&(CX=BO.color);BO.fillColors&&(CX=BO.fillColors);isNaN(BO.alpha)||(AJ=BO.alpha);isNaN(BO.dashLength)||(CV=BO.dashLength);var Ax=BO.values;Bf.recalculateToPercents&&(Ax=BO.percents);if(Ax){Bu=this.stackable&&"none"!=Bs&&"3d"!=Bs?Ax.close:Ax.value;if("candlestick"==Be||"ohlc"==Be){Bu=Ax.close,AS=Ax.low,Af=Bf.getCoordinate(AS),Ac=Ax.high,AV=Bf.getCoordinate(Ac)}s=Ax.open;CF=Bf.getCoordinate(Bu);isNaN(s)||(B7=Bf.getCoordinate(s),BY&&(A9=s,s=B7=NaN));BY&&(void 0==this.openField?A5&&(A5.isNegative=A9<Bu?!0:!1,isNaN(A9)&&(BO.isNegative=!BH)):BO.isNegative=A9>Bu?!0:!1);if(!By){switch(this.showBalloonAt){case"close":BO.y=CF;break;case"open":BO.y=B7;break;case"high":BO.y=AV;break;case"low":BO.y=Af}}var AH=CC.x[BK.id],AB=this.periodSpan-1,BB=Math.floor(Bv/2)+Math.floor(AB*Bv/2),AN=BB,AG=0;"left"==this.stepDirection&&(AG=(2*Bv+AB*Bv)/2,AH-=AG);"center"==this.stepDirection&&(AG=Bv/2,AH-=AG);"start"==this.pointPosition&&(AH-=Bv/2+Math.floor(AB*Bv/2),BB=0,AN=Math.floor(Bv)+Math.floor(AB*Bv));"end"==this.pointPosition&&(AH+=Bv/2+Math.floor(AB*Bv/2),BB=Math.floor(Bv)+Math.floor(AB*Bv),AN=0);if(Bm){var AC=this.columnWidth;isNaN(AC)||(BB*=AC,AN*=AC)}By||(BO.x=AH);-100000>AH&&(AH=-100000);AH>BX+100000&&(AH=BX+100000);BR?(CE=CF,B5=B7,B7=CF=AH,isNaN(s)&&!this.fillToGraph&&(B5=AX),A1=Af,Ar=AV):(B5=CE=AH,isNaN(s)&&!this.fillToGraph&&(B7=AX));if(!AK&&Bu<s||AK&&Bu<At){BO.isNegative=!0,CN&&(CX=CN),BU&&(AJ=BU),void 0!=An&&(CT=An)}BD=!1;isNaN(Bu)||(BY?Bu>A9?(BH&&(BD=!0),BH=!1):(BH||(BD=!0),BH=!0):BO.isNegative=Bu<Aj?!0:!1,At=Bu);switch(Be){case"line":if(isNaN(Bu)){BJ||(this.drawLineGraph(BM,BQ,B2,B1),BM=[],BQ=[],B2=[],B1=[])}else{if(Math.abs(CE-Ao)>=AW||Math.abs(CF-Ag)>=AW){BM.push(CE),BQ.push(CF),Ao=CE,Ag=CF}AD=CE;Cf=CF;Az=CE;Ap=CF;!Bn||isNaN(B7)||isNaN(B5)||(B2.push(B5),B1.push(B7));if(BD||void 0!=BO.lineColor||void 0!=BO.fillColors||!isNaN(BO.dashLength)){this.drawLineGraph(BM,BQ,B2,B1),BM=[CE],BQ=[CF],B2=[],B1=[],!Bn||isNaN(B7)||isNaN(B5)||(B2.push(B5),B1.push(B7)),BY?BH?(this.lineColorSwitched=A3,this.fillColorsSwitched=As):(this.lineColorSwitched=An,this.fillColorsSwitched=CN):(this.lineColorSwitched=BO.lineColor,this.fillColorsSwitched=BO.fillColors),this.dashLengthSwitched=BO.dashLength}BO.gap&&(this.drawLineGraph(BM,BQ,B2,B1),BM=[],BQ=[],B2=[],B1=[])}break;case"smoothedLine":if(isNaN(Bu)){BJ||(this.drawSmoothedGraph(BM,BQ,B2,B1),BM=[],BQ=[],B2=[],B1=[])}else{if(Math.abs(CE-Ao)>=AW||Math.abs(CF-Ag)>=AW){BM.push(CE),BQ.push(CF),Ao=CE,Ag=CF}AD=CE;Cf=CF;Az=CE;Ap=CF;!Bn||isNaN(B7)||isNaN(B5)||(B2.push(B5),B1.push(B7));void 0==BO.lineColor&&void 0==BO.fillColors&&isNaN(BO.dashLength)||(this.drawSmoothedGraph(BM,BQ,B2,B1),BM=[CE],BQ=[CF],B2=[],B1=[],!Bn||isNaN(B7)||isNaN(B5)||(B2.push(B5),B1.push(B7)),this.lineColorSwitched=BO.lineColor,this.fillColorsSwitched=BO.fillColors,this.dashLengthSwitched=BO.dashLength);BO.gap&&(this.drawSmoothedGraph(BM,BQ,B2,B1),BM=[],BQ=[],B2=[],B1=[])}break;case"step":if(!isNaN(Bu)){BR?(isNaN(BN)||(BM.push(BN),BQ.push(CF-BB)),BQ.push(CF-BB),BM.push(CE),BQ.push(CF+AN),BM.push(CE),!Bn||isNaN(B7)||isNaN(B5)||(isNaN(CJ)||(B2.push(CJ),B1.push(B7-BB)),B2.push(B5),B1.push(B7-BB),B2.push(B5),B1.push(B7+AN))):(isNaN(BL)||(BQ.push(BL),BM.push(BN),BQ.push(BL),BM.push(CE-BB)),BM.push(CE-BB),BQ.push(CF),BM.push(CE+AN),BQ.push(CF),!Bn||isNaN(B7)||isNaN(B5)||(isNaN(CH)||(B2.push(B5-BB),B1.push(CH)),B2.push(B5-BB),B1.push(B7),B2.push(B5+AN),B1.push(B7)));BN=CE;BL=CF;CJ=B5;CH=B7;AD=CE;Cf=CF;Az=CE;Ap=CF;if(BD||void 0!=BO.lineColor||void 0!=BO.fillColors||!isNaN(BO.dashLength)){var BS=BM[BM.length-2],BC=BQ[BQ.length-2];BM.pop();BQ.pop();this.drawLineGraph(BM,BQ,B2,B1);BM=[BS];BQ=[BC];B2=[];B1=[];this.lineColorSwitched=BO.lineColor;this.fillColorsSwitched=BO.fillColors;this.dashLengthSwitched=BO.dashLength;BY&&(BH?(this.lineColorSwitched=A3,this.fillColorsSwitched=As):(this.lineColorSwitched=An,this.fillColorsSwitched=CN))}if(Bm||BO.gap){BN=BL=NaN,this.drawLineGraph(BM,BQ,B2,B1),BM=[],BQ=[],B2=[],B1=[]}}else{if(!BJ){if(1>=this.periodSpan||1<this.periodSpan&&CE-BN>BB+AN){BN=BL=NaN}this.drawLineGraph(BM,BQ,B2,B1);BM=[];BQ=[];B2=[];B1=[]}}break;case"column":Al=CT;void 0!=BO.lineColor&&(Al=BO.lineColor);if(!isNaN(Bu)){BY||(BO.isNegative=Bu<Aj?!0:!1);BO.isNegative&&(CN&&(CX=CN),void 0!=An&&(Al=An));var BG=Bf.min,A8=Bf.max;if(!(Bu<BG&&s<BG||Bu>A8&&s>A8)){var Ad;if(BR){"3d"==Bs?(B4=CF-(BT/2-this.depthCount+1)*(Bc+B3)+B3/2+B9*Bq,Bz=B5+CG*Bq,Ad=Bq):(B4=Math.floor(CF-(BT/2-Bq)*(Bc+B3)+B3/2),Bz=B5,Ad=0);B6=Bc;AD=CE;Cf=B4+Bc/2;isNaN(B5)||B5>CE&&!BO.isNegative&&(AD=B5);Az=CE;Ap=B4+Bc/2;B4+B6>BW+Ad*B9&&(B6=BW-B4+Ad*B9);B4<Ad*B9&&(B6+=B4,B4=Ad*B9);A7=CE-B5;var A4=Bz;Bz=AmCharts.fitToBounds(Bz,0,BX);A7+=A4-Bz;A7=AmCharts.fitToBounds(A7,-Bz,BX-Bz+CG*Bq);B4<BW&&0<B6&&(CP=new AmCharts.Cuboid(Bh,A7,B6,CG-Bl.d3x,B9-Bl.d3y,CX,AJ,Br,Al,Bw,Ah,BP,BR,CV,Av,AO,CZ),BO.columnWidth=Math.abs(A7),BO.columnHeight=Math.abs(B6))}else{"3d"==Bs?(Bz=CE-(BT/2-this.depthCount+1)*(Bc+B3)+B3/2+CG*Bq,B4=B7+B9*Bq,Ad=Bq):(Bz=CE-(BT/2-Bq)*(Bc+B3)+B3/2,B4=B7,Ad=0);B6=Bc;AD=Bz+Bc/2;Cf=CF;isNaN(B7)||B7<CF&&!BO.isNegative&&(Cf=B7);Az=Bz+Bc/2;Ap=CF;Bz+B6>BX+Ad*CG&&(B6=BX-Bz+Ad*CG);Bz<Ad*CG&&(B6+=Bz-Ad*CG,Bz=Ad*CG);A7=CF-B7;var Au=B4;B4=AmCharts.fitToBounds(B4,this.dy,BW);A7+=Au-B4;A7=AmCharts.fitToBounds(A7,-B4+B9*Bq,BW-B4);Bz<BX+Bq*CG&&0<B6&&(this.showOnAxis&&(B4-=B9/2),CP=new AmCharts.Cuboid(Bh,B6,A7,CG-Bl.d3x,B9-Bl.d3y,CX,AJ,Br,Al,this.lineAlpha,Ah,BP,BR,CV,Av,AO,CZ),BO.columnHeight=Math.abs(A7),BO.columnWidth=Math.abs(B6))}}if(CP&&(AL=CP.set,AmCharts.setCN(Bl,CP.set,"graph-"+this.type),AmCharts.setCN(Bl,CP.set,"graph-"+this.id),BO.className&&AmCharts.setCN(Bl,CP.set,BO.className,!0),BO.columnGraphics=AL,AL.translate(Bz,B4),this.columnsSet.push(AL),(BO.url||this.showHandOnHover)&&AL.setAttr("cursor","pointer"),!By)){"none"==Bs&&(CB=BR?(this.end+1-B8)*CI-Bj:CI*B8+Bj);"3d"==Bs&&(BR?(CB=(this.end+1-B8)*CI-Bj-1000*this.depthCount,AD+=CG*this.columnIndex,Az+=CG*this.columnIndex,BO.y+=CG*this.columnIndex):(CB=(CI-Bj)*(B8+1)+1000*this.depthCount,Cf+=B9*this.columnIndex,Ap+=B9*this.columnIndex,BO.y+=B9*this.columnIndex));if("regular"==Bs||"100%"==Bs){CB=BR?0<Ax.value?(this.end+1-B8)*CI+Bj:(this.end+1-B8)*CI-Bj:0<Ax.value?CI*B8+Bj:CI*B8-Bj}this.columnsArray.push({column:CP,depth:CB});BO.x=BR?B4+B6/2:Bz+B6/2;this.ownColumns.push(CP);this.animateColumns(CP,B8,CE,B5,CF,B7);this.addListeners(AL,BO)}}break;case"candlestick":if(!isNaN(s)&&!isNaN(Bu)){var Cd,CL;Al=CT;void 0!=BO.lineColor&&(Al=BO.lineColor);if(BR){if(B4=CF-Bc/2,Bz=B5,B6=Bc,B4+B6>BW&&(B6=BW-B4),0>B4&&(B6+=B4,B4=0),B4<BW&&0<B6){var Ce,CS;Bu>s?(Ce=[CE,Ar],CS=[B5,A1]):(Ce=[B5,Ar],CS=[CE,A1]);!isNaN(Ar)&&!isNaN(A1)&&CF<BW&&0<CF&&(Cd=AmCharts.line(Bh,Ce,[CF,CF],Al,Bw,Br),CL=AmCharts.line(Bh,CS,[CF,CF],Al,Bw,Br));A7=CE-B5;CP=new AmCharts.Cuboid(Bh,A7,B6,CG,B9,CX,B0,Br,Al,Bw,Ah,BP,BR,CV,Av,AO,CZ)}}else{if(Bz=CE-Bc/2,B4=B7+Br/2,B6=Bc,Bz+B6>BX&&(B6=BX-Bz),0>Bz&&(B6+=Bz,Bz=0),A7=CF-B7,Bz<BX&&0<B6){AK&&Bu>=s&&(AJ=0);var CP=new AmCharts.Cuboid(Bh,B6,A7,CG,B9,CX,AJ,Br,Al,Bw,Ah,BP,BR,CV,Av,AO,CZ),Aw,Am;Bu>s?(Aw=[CF,AV],Am=[B7,Af]):(Aw=[B7,AV],Am=[CF,Af]);!isNaN(AV)&&!isNaN(Af)&&CE<BX&&0<CE&&(Cd=AmCharts.line(Bh,[CE,CE],Aw,Al,Bw,Br),CL=AmCharts.line(Bh,[CE,CE],Am,Al,Bw,Br),AmCharts.setCN(Bl,Cd,this.bcn+"line-high"),BO.className&&AmCharts.setCN(Bl,Cd,BO.className,!0),AmCharts.setCN(Bl,CL,this.bcn+"line-low"),BO.className&&AmCharts.setCN(Bl,CL,BO.className,!0))}}CP&&(AL=CP.set,BO.columnGraphics=AL,CD.push(AL),AL.translate(Bz,B4-Br/2),(BO.url||this.showHandOnHover)&&AL.setAttr("cursor","pointer"),Cd&&(CD.push(Cd),CD.push(CL)),AD=CE,Cf=CF,BR?(Ap=CF,Az=CE,"open"==BZ&&(Az=B5),"high"==BZ&&(Az=Ar),"low"==BZ&&(Az=A1)):(Ap=CF,"open"==BZ&&(Ap=B7),"high"==BZ&&(Ap=AV),"low"==BZ&&(Ap=Af),Az=CE),By||(BO.x=BR?B4+B6/2:Bz+B6/2,this.animateColumns(CP,B8,CE,B5,CF,B7),this.addListeners(AL,BO)))}break;case"ohlc":if(!(isNaN(s)||isNaN(Ac)||isNaN(AS)||isNaN(Bu))){var A0=Bh.set();CD.push(A0);Bu<s&&(BO.isNegative=!0,void 0!=An&&(CT=An));var o,CY,CO;if(BR){var Ae=CF-Bc/2,Ae=AmCharts.fitToBounds(Ae,0,BW),Aq=AmCharts.fitToBounds(CF,0,BW),AU=CF+Bc/2,AU=AmCharts.fitToBounds(AU,0,BW);CY=AmCharts.line(Bh,[B5,B5],[Ae,Aq],CT,Bw,Br,CV);0<CF&&CF<BW&&(o=AmCharts.line(Bh,[A1,Ar],[CF,CF],CT,Bw,Br,CV));CO=AmCharts.line(Bh,[CE,CE],[Aq,AU],CT,Bw,Br,CV);Ap=CF;Az=CE;"open"==BZ&&(Az=B5);"high"==BZ&&(Az=Ar);"low"==BZ&&(Az=A1)}else{var AM=CE-Bc/2,AM=AmCharts.fitToBounds(AM,0,BX),Ai=AmCharts.fitToBounds(CE,0,BX),AE=CE+Bc/2,AE=AmCharts.fitToBounds(AE,0,BX);CY=AmCharts.line(Bh,[AM,Ai],[B7,B7],CT,Bw,Br,CV);0<CE&&CE<BX&&(o=AmCharts.line(Bh,[CE,CE],[Af,AV],CT,Bw,Br,CV));CO=AmCharts.line(Bh,[Ai,AE],[CF,CF],CT,Bw,Br,CV);Ap=CF;"open"==BZ&&(Ap=B7);"high"==BZ&&(Ap=AV);"low"==BZ&&(Ap=Af);Az=CE}CD.push(CY);CD.push(o);CD.push(CO);AmCharts.setCN(Bl,CY,this.bcn+"stroke-open");AmCharts.setCN(Bl,CO,this.bcn+"stroke-close");AmCharts.setCN(Bl,o,this.bcn+"stroke");BO.className&&AmCharts.setCN(Bl,A0,BO.className,!0);AD=CE;Cf=CF}}if(!By&&!isNaN(Bu)){var AY=this.hideBulletsCount;if(this.end-this.start<=AY||0===AY){var CK=this.createBullet(BO,Az,Ap,B8),AQ=this.labelText;if(AQ){var Cg=this.createLabel(BO,Az,Ap,AQ);(Cg=this.positionLabel(AD,Cf,Cg,CK,B6,A7))&&this.allBullets.push(Cg)}if("regular"==Bs||"100%"==Bs){var AI=Bf.totalText;if(AI){var CR=this.createLabel(BO,0,0,AI,Bf.totalTextColor);this.allBullets.push(CR);var AA=CR.getBBox(),Cc=AA.width,CQ=AA.height,CU,CA,Bo=Bf.totalTextOffset,Bx=Bf.totals[B8];Bx&&Bx.remove();var Bd=0;"column"!=Be&&(Bd=this.bulletSize);BR?(CA=CF,CU=0>Bu?CE-Cc/2-2-Bd-Bo:CE+Cc/2+3+Bd+Bo):(CU=CE,CA=0>Bu?CF+CQ/2+Bd+Bo:CF-CQ/2-3-Bd-Bo);CR.translate(CU,CA);Bf.totals[B8]=CR;BR?(0>CA||CA>BW)&&CR.remove():(0>CU||CU>BX)&&CR.remove()}}}}}}if("line"==Be||"step"==Be||"smoothedLine"==Be){"smoothedLine"==Be?this.drawSmoothedGraph(BM,BQ,B2,B1):this.drawLineGraph(BM,BQ,B2,B1),By||this.launchAnimation()}this.bulletsHidden&&this.hideBullets();this.customBulletsHidden&&this.hideCustomBullets()},animateColumns:function(B,A,G,F,E,D){var C=this;G=C.chart.startDuration;0<G&&!C.animationPlayed&&(C.seqAn?(B.set.hide(),C.animationArray.push(B),B=setTimeout(function(){C.animate.call(C)},G/(C.end-C.start+1)*(A-C.start)*1000),C.timeOuts.push(B)):C.animate(B))},createLabel:function(B,A,H,G,F){var E=this.chart,D=B.labelColor;D||(D=this.color);D||(D=E.color);F&&(D=F);F=this.fontSize;void 0===F&&(this.fontSize=F=E.fontSize);var C=this.labelFunction;G=E.formatString(G,B);G=AmCharts.cleanFromEmpty(G);C&&(G=C(B,G));B=AmCharts.text(this.container,G,D,E.fontFamily,F);B.node.style.pointerEvents="none";B.translate(A,H);this.bulletSet.push(B);return B},positiveClip:function(A){A.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(A){A.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(T,S,R,Q){var P=this;if(1<T.length){var O=P.set,N=P.chart,M=P.container,L=M.set(),K=M.set();O.push(K);O.push(L);var J=P.lineAlpha,I=P.lineThickness,O=P.fillAlphas,H=P.lineColorR,F=P.negativeLineAlpha;isNaN(F)&&(F=J);var G=P.lineColorSwitched;G&&(H=G);var G=P.fillColorsR,D=P.fillColorsSwitched;D&&(G=D);var A=P.dashLength;(D=P.dashLengthSwitched)&&(A=D);var D=P.negativeLineColor,B=P.negativeFillColors,E=P.negativeFillAlphas,C=P.baseCoord;0!==P.negativeBase&&(C=P.valueAxis.getCoordinate(P.negativeBase));J=AmCharts.line(M,T,S,H,J,I,A,!1,!0);AmCharts.setCN(N,J,P.bcn+"stroke");L.push(J);L.click(function(U){P.handleGraphEvent(U,"clickGraph")}).mouseover(function(U){P.handleGraphEvent(U,"rollOverGraph")}).mouseout(function(U){P.handleGraphEvent(U,"rollOutGraph")});void 0===D||P.useNegativeColorIfDown||(I=AmCharts.line(M,T,S,D,F,I,A,!1,!0),AmCharts.setCN(N,I,P.bcn+"stroke"),AmCharts.setCN(N,I,P.bcn+"stroke-negative"),K.push(I));if(0<O||0<E){if(I=T.join(";").split(";"),F=S.join(";").split(";"),J=N.type,"serial"==J?0<R.length?(R.reverse(),Q.reverse(),I=T.concat(R),F=S.concat(Q)):P.rotate?(F.push(F[F.length-1]),I.push(C),F.push(F[0]),I.push(C),F.push(F[0]),I.push(I[0])):(I.push(I[I.length-1]),F.push(C),I.push(I[0]),F.push(C),I.push(T[0]),F.push(F[0])):"xy"==J&&(S=P.fillToAxis)&&(AmCharts.isString(S)&&(S=N.getValueAxisById(S)),"H"==S.orientation?(C="top"==S.position?0:S.viH,I.push(I[I.length-1]),F.push(C),I.push(I[0]),F.push(C),I.push(T[0]),F.push(F[0])):(C="left"==S.position?0:S.viW,F.push(F[F.length-1]),I.push(C),F.push(F[0]),I.push(C),F.push(F[0]),I.push(I[0]))),T=P.gradientRotation,0<O&&(S=AmCharts.polygon(M,I,F,G,O,1,"#000",0,T),S.pattern(P.pattern),AmCharts.setCN(N,S,P.bcn+"fill"),L.push(S)),B||void 0!==D){isNaN(E)&&(E=O),B||(B=D),M=AmCharts.polygon(M,I,F,B,E,1,"#000",0,T),AmCharts.setCN(N,M,P.bcn+"fill"),AmCharts.setCN(N,M,P.bcn+"fill-negative"),M.pattern(P.pattern),K.push(M),K.click(function(U){P.handleGraphEvent(U,"clickGraph")}).mouseover(function(U){P.handleGraphEvent(U,"rollOverGraph")}).mouseout(function(U){P.handleGraphEvent(U,"rollOutGraph")})}}P.applyMask(K,L)}},applyMask:function(B,A){var C=B.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(A),0<C&&this.negativeClip(B))},drawSmoothedGraph:function(S,R,Q,P){if(1<S.length){var O=this.set,N=this.chart,M=this.container,L=M.set(),K=M.set();O.push(K);O.push(L);var J=this.lineAlpha,I=this.lineThickness,O=this.dashLength,H=this.fillAlphas,G=this.lineColorR,E=this.fillColorsR,F=this.negativeLineColor,C=this.negativeFillColors,A=this.negativeFillAlphas,B=this.baseCoord,D=this.lineColorSwitched;D&&(G=D);(D=this.fillColorsSwitched)&&(E=D);D=this.negativeLineAlpha;isNaN(D)&&(D=J);J=new AmCharts.Bezier(M,S,R,G,J,I,E,0,O);AmCharts.setCN(N,J,this.bcn+"stroke");L.push(J.path);void 0!==F&&(I=new AmCharts.Bezier(M,S,R,F,D,I,E,0,O),AmCharts.setCN(N,I,this.bcn+"stroke"),AmCharts.setCN(N,I,this.bcn+"stroke-negative"),K.push(I.path));0<H&&(J=S.join(";").split(";"),G=R.join(";").split(";"),I="",0<Q.length?(Q.push("M"),P.push("M"),Q.reverse(),P.reverse(),J=S.concat(Q),G=R.concat(P)):(this.rotate?(I+=" L"+B+","+R[R.length-1],I+=" L"+B+","+R[0]):(I+=" L"+S[S.length-1]+","+B,I+=" L"+S[0]+","+B),I+=" L"+S[0]+","+R[0]),Q=new AmCharts.Bezier(M,J,G,NaN,0,0,E,H,O,I),AmCharts.setCN(N,Q,this.bcn+"fill"),Q.path.pattern(this.pattern),L.push(Q.path),C||void 0!==F)&&(A||(A=H),C||(C=F),S=new AmCharts.Bezier(M,S,R,NaN,0,0,C,A,O,I),S.path.pattern(this.pattern),AmCharts.setCN(N,S,this.bcn+"fill"),AmCharts.setCN(N,S,this.bcn+"fill-negative"),K.push(S.path));this.applyMask(K,L)}},launchAnimation:function(){var B=this,A=B.chart.startDuration;if(0<A&&!B.animationPlayed){var D=B.set,C=B.bulletSet;AmCharts.VML||(D.attr({opacity:B.startAlpha}),C.attr({opacity:B.startAlpha}));D.hide();C.hide();B.seqAn?(A=setTimeout(function(){B.animateGraphs.call(B)},B.index*A*1000),B.timeOuts.push(A)):B.animateGraphs()}},animateGraphs:function(){var B=this.chart,A=this.set,F=this.bulletSet,E=this.x,D=this.y;A.show();F.show();var C=B.startDuration,B=B.startEffect;A&&(this.rotate?(A.translate(-1000,D),F.translate(-1000,D)):(A.translate(E,-1000),F.translate(E,-1000)),A.animate({opacity:1,translate:E+","+D},C,B),F.animate({opacity:1,translate:E+","+D},C,B))},animate:function(B){var A=this.chart,C=this.animationArray;!B&&0<C.length&&(B=C[0],C.shift());C=AmCharts[AmCharts.getEffect(A.startEffect)];A=A.startDuration;B&&(this.rotate?B.animateWidth(A,C):B.animateHeight(A,C),B.set.show())},legendKeyColor:function(){var B=this.legendColor,A=this.lineAlpha;void 0===B&&(B=this.lineColorR,0===A&&(A=this.fillColorsR)&&(B="object"==typeof A?A[0]:A));return B},legendKeyAlpha:function(){var A=this.legendAlpha;void 0===A&&(A=this.lineAlpha,this.fillAlphas>A&&(A=this.fillAlphas),0===A&&(A=this.bulletAlpha),0===A&&(A=1));return A},createBullet:function(O,N,M,L){if(!isNaN(N)&&!isNaN(M)){L=this.chart;var K=this.container,J=this.bulletOffset,I=this.bulletSize;isNaN(O.bulletSize)||(I=O.bulletSize);var H=O.values.value,G=this.maxValue,F=this.minValue,E=this.maxBulletSize,D=this.minBulletSize;isNaN(G)||(isNaN(H)||(I=(H-F)/(G-F)*(E-D)+D),F==G&&(I=E));G=I;this.bulletAxis&&(I=O.values.error,isNaN(I)||(H=I),I=this.bulletAxis.stepWidth*H);I<this.minBulletSize&&(I=this.minBulletSize);this.rotate?N=O.isNegative?N-J:N+J:M=O.isNegative?M+J:M-J;var C,D=this.bulletColorR;O.lineColor&&(this.bulletColorSwitched=O.lineColor);this.bulletColorSwitched&&(D=this.bulletColorSwitched);O.isNegative&&void 0!==this.bulletColorNegative&&(D=this.bulletColorNegative);void 0!==O.color&&(D=O.color);var A;"xy"==L.type&&this.valueField&&(A=this.pattern,O.pattern&&(A=O.pattern));J=this.bullet;O.bullet&&(J=O.bullet);var H=this.bulletBorderThickness,F=this.bulletBorderColorR,E=this.bulletBorderAlpha,B=this.bulletAlpha;F||(F=D);this.useLineColorForBulletBorder&&(F=this.lineColorR);var P=O.alpha;isNaN(P)||(B=P);if("none"!=this.bullet||O.bullet){C=AmCharts.bullet(K,J,I,D,B,H,F,E,G,0,A)}if(this.customBullet||O.customBullet){A=this.customBullet,O.customBullet&&(A=O.customBullet),A&&(C&&C.remove(),"function"==typeof A?(C=new A,C.chart=L,O.bulletConfig&&(C.availableSpace=M,C.graph=this,C.graphDataItem=O,C.bulletY=M,O.bulletConfig.minCoord=this.minCoord-M,C.bulletConfig=O.bulletConfig),C.write(K),C=C.set):(L.path&&(A=L.path+A),C=K.set(),K=K.image(A,0,0,I,I),C.push(K),this.centerCustomBullets&&K.translate(-I/2,-I/2)))}C&&((O.url||this.showHandOnHover)&&C.setAttr("cursor","pointer"),"serial"==L.type&&(0>N-0||N-0>this.width||M<-I/2||M-0>this.height)&&(C.remove(),C=null),C&&(this.bulletSet.push(C),C.translate(N,M),this.addListeners(C,O),this.allBullets.push(C)),O.bx=N,O.by=M,AmCharts.setCN(L,C,this.bcn+"bullet"),O.className&&AmCharts.setCN(L,C,O.className,!0));C?(C.size=I||0,O.bulletGraphics=C):C={size:0};C.graphDataItem=O;return C}},showBullets:function(){var B=this.allBullets,A;this.bulletsHidden=!1;for(A=0;A<B.length;A++){B[A].show()}},hideBullets:function(){var B=this.allBullets,A;this.bulletsHidden=!0;for(A=0;A<B.length;A++){B[A].hide()}},showCustomBullets:function(){var B=this.allBullets,A;this.customBulletsHidden=!1;for(A=0;A<B.length;A++){B[A].graphDataItem.customBullet&&B[A].show()}},hideCustomBullets:function(){var B=this.allBullets,A;this.customBulletsHidden=!0;for(A=0;A<B.length;A++){B[A].graphDataItem.customBullet&&B[A].hide()}},addListeners:function(B,A){var C=this;B.mouseover(function(D){C.handleRollOver(A,D)}).mouseout(function(D){C.handleRollOut(A,D)}).touchend(function(D){C.handleRollOver(A,D);C.chart.panEventsEnabled&&C.handleClick(A,D)}).touchstart(function(D){C.handleRollOver(A,D)}).click(function(D){C.handleClick(A,D)}).dblclick(function(D){C.handleDoubleClick(A,D)}).contextmenu(function(D){C.handleRightClick(A,D)})},handleRollOver:function(B,A){if(B){var G=this.chart,F={type:"rollOverGraphItem",item:B,index:B.index,graph:this,target:this,chart:this.chart,event:A};this.fire("rollOverGraphItem",F);G.fire("rollOverGraphItem",F);clearTimeout(G.hoverInt);F=this.showBalloon;G.chartCursor&&"serial"==G.type&&(F=!1,!G.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(F=!0));if(F){var F=G.formatString(this.balloonText,B,!0),E=this.balloonFunction;E&&(F=E(B,B.graph));F=AmCharts.cleanFromEmpty(F);E=G.getBalloonColor(this,B);G.balloon.showBullet=!1;G.balloon.pointerOrientation="V";var D=B.x,C=B.y;G.rotate&&(D=B.y,C=B.x);G.showBalloon(F,E,!0,D+G.marginLeftReal,C+G.marginTopReal)}}this.handleGraphEvent(A,"rollOverGraph")},handleRollOut:function(B,A){this.chart.hideBalloon();if(B){var C={type:"rollOutGraphItem",item:B,index:B.index,graph:this,target:this,chart:this.chart,event:A};this.fire("rollOutGraphItem",C);this.chart.fire("rollOutGraphItem",C)}this.handleGraphEvent(A,"rollOutGraph")},handleClick:function(B,A){if(B){var C={type:"clickGraphItem",item:B,index:B.index,graph:this,target:this,chart:this.chart,event:A};this.fire("clickGraphItem",C);this.chart.fire("clickGraphItem",C);AmCharts.getURL(B.url,this.urlTarget)}this.handleGraphEvent(A,"clickGraph")},handleGraphEvent:function(B,A){var C={type:A,graph:this,target:this,chart:this.chart,event:B};this.fire(A,C);this.chart.fire(A,C)},handleRightClick:function(B,A){if(B){var C={type:"rightClickGraphItem",item:B,index:B.index,graph:this,target:this,chart:this.chart,event:A};this.fire("rightClickGraphItem",C);this.chart.fire("rightClickGraphItem",C)}},handleDoubleClick:function(B,A){if(B){var C={type:"doubleClickGraphItem",item:B,index:B.index,graph:this,target:this,chart:this.chart,event:A};this.fire("doubleClickGraphItem",C);this.chart.fire("doubleClickGraphItem",C)}},zoom:function(B,A){this.start=B;this.end=A;this.draw()},changeOpacity:function(B){var A=this.set;A&&A.setAttr("opacity",B);if(A=this.ownColumns){var D;for(D=0;D<A.length;D++){var C=A[D].set;C&&C.setAttr("opacity",B)}}(A=this.bulletSet)&&A.setAttr("opacity",B)},destroy:function(){AmCharts.remove(this.set);AmCharts.remove(this.bulletSet);var B=this.timeOuts;if(B){var A;for(A=0;A<B.length;A++){clearTimeout(B[A])}}this.timeOuts=[]}});AmCharts.ChartCursor=AmCharts.Class({construct:function(A){this.cname="ChartCursor";this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved");this.enabled=!0;this.cursorAlpha=1;this.selectionAlpha=0.2;this.cursorColor="#CC0000";this.categoryBalloonAlpha=1;this.color="#FFFFFF";this.type="cursor";this.zoomed=!1;this.zoomable=!0;this.pan=!1;this.categoryBalloonDateFormat="MMM DD, YYYY";this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0;this.rolledOver=!1;this.cursorPosition="middle";this.bulletsEnabled=this.skipZoomDispatch=!1;this.bulletSize=8;this.selectWithoutZooming=this.oneBalloonOnly=!1;this.graphBulletSize=1.7;this.animationDuration=0.3;this.zooming=!1;this.adjustment=0;this.avoidBalloonOverlapping=!0;AmCharts.applyTheme(this,A,this.cname)},draw:function(){var B=this;B.destroy();var A=B.chart,D=A.container;B.rotate=A.rotate;B.container=D;D=D.set();D.translate(B.x,B.y);B.set=D;A.cursorSet.push(D);D=new AmCharts.AmBalloon;D.className="category";D.chart=A;B.categoryBalloon=D;AmCharts.copyProperties(A.balloon,D);D.cornerRadius=0;D.shadowAlpha=0;D.borderThickness=1;D.borderAlpha=1;D.showBullet=!1;var C=B.categoryBalloonColor;void 0===C&&(C=B.cursorColor);D.fillColor=C;D.fillAlpha=B.categoryBalloonAlpha;D.borderColor=C;D.color=B.color;C=B.valueLineAxis;AmCharts.isString(C)&&(C=A.getValueAxisById(C));C||(C=A.valueAxes[0]);B.valueLineAxis=C;B.valueLineBalloonEnabled&&(C=new AmCharts.AmBalloon,B.vaBalloon=C,AmCharts.copyProperties(D,C),C.animationDuration=0,B.rotate||(C.pointerOrientation="H"));B.rotate&&(D.pointerOrientation="H");B.extraWidth=0;B.prevX=[];B.prevY=[];B.prevTX=[];B.prevTY=[];if(B.valueBalloonsEnabled){for(D=0;D<A.graphs.length;D++){C=new AmCharts.AmBalloon,C.className=A.graphs[D].id,C.chart=A,AmCharts.copyProperties(A.balloon,C),A.graphs[D].valueBalloon=C}}"cursor"==B.type?B.createCursor():B.createCrosshair();B.interval=setInterval(function(){B.detectMovement.call(B)},40)},updateData:function(){var A=this.chart;this.data=A.chartData;this.firstTime=A.firstTime;this.lastTime=A.lastTime},createCursor:function(){var K=this.chart,J=this.cursorAlpha,I=K.categoryAxis,H=this.categoryBalloon,G,F,E,D;E=K.dx;D=K.dy;var C=this.width,B=this.height,A=K.rotate;H.pointerWidth=I.tickLength;A?(G=[0,C,C+E],F=[0,0,D],E=[E,0,0],D=[D,0,B]):(G=[E,0,0],F=[D,0,B],E=[0,C,C+E],D=[0,0,D]);G=AmCharts.line(this.container,G,F,this.cursorColor,J,1);AmCharts.setCN(K,G,"cursor-line");this.line=G;(F=this.fullRectSet)?(F.push(G),F.translate(this.x,this.y)):this.set.push(G);this.valueLineEnabled&&(G=this.valueLineAlpha,isNaN(G)||(J=G),J=AmCharts.line(this.container,E,D,this.cursorColor,J,1),AmCharts.setCN(K,J,"cursor-value-line"),this.vLine=J,this.set.push(J));this.setBalloonBounds(H,I,A);(K=this.vaBalloon)&&this.setBalloonBounds(K,this.valueLineAxis,!A);this.hideCursor()},createCrosshair:function(){var B=this.cursorAlpha,A=this.container,C=AmCharts.line(A,[0,0],[0,this.height],this.cursorColor,B,1),B=AmCharts.line(A,[0,this.width],[0,0],this.cursorColor,B,1);AmCharts.setCN(this.chart,C,"cursor-line");AmCharts.setCN(this.chart,B,"cursor-line");this.set.push(C);this.set.push(B);this.vLine=C;this.hLine=B;this.hideCursor()},detectMovement:function(){var B=this.chart;if(B.mouseIsOver){var A=B.mouseX-this.x,C=B.mouseY-this.y;-0.5<A&&A<this.width+1&&0<C&&C<this.height?(this.drawing?this.rolledOver||B.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||B.setMouseCursor("move")),this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(A,C),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else{this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}},updateVLine:function(B,A){var H=this.vLine,G=this.vaBalloon;if((H||G)&&!this.panning&&!this.drawing){H&&H.show();var F=this.valueLineAxis,E,D=this.rotate;D?(H&&H.translate(B,0),F&&(E=F.coordinateToValue(B)),H=B):(H&&H.translate(0,A),F&&(E=F.coordinateToValue(A)),H=A-1);if(G&&!isNaN(E)&&this.prevLineValue!=E){var C=F.formatValue(E,!0);G&&(this.setBalloonPosition(G,F,H,!D),G.showBalloon(C))}this.prevLineValue=E}},getMousePosition:function(){var B,A=this.width,C=this.height;B=this.chart;this.rotate?(B=B.mouseY-this.y,0>B&&(B=0),B>C&&(B=C)):(B=B.mouseX-this.x-1,0>B&&(B=0),B>A&&(B=A));return B},updateCrosshair:function(){var B=this.chart,A=B.mouseX-this.x,E=B.mouseY-this.y,D=this.vLine,C=this.hLine,A=AmCharts.fitToBounds(A,0,this.width),E=AmCharts.fitToBounds(E,0,this.height);0<this.cursorAlpha&&(D.show(),C.show(),D.translate(A,0),C.translate(0,E));this.zooming&&(B.hideXScrollbar&&(A=NaN),B.hideYScrollbar&&(E=NaN),this.updateSelectionSize(A,E));this.fireMoved();B.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var B=this.chart,A={type:"moved",target:this};A.chart=B;A.zooming=this.zooming;A.x=B.mouseX-this.x;A.y=B.mouseY-this.y;this.fire("moved",A)},updateSelectionSize:function(B,A){AmCharts.remove(this.selection);var H=this.selectionPosX,G=this.selectionPosY,F=0,E=0,D=this.width,C=this.height;isNaN(B)||(H>B&&(F=B,D=H-B),H<B&&(F=H,D=B-H),H==B&&(F=B,D=0),D+=this.extraWidth,F-=this.extraWidth/2);isNaN(A)||(G>A&&(E=A,C=G-A),G<A&&(E=G,C=A-G),G==A&&(E=A,C=0),C+=this.extraWidth,E-=this.extraWidth/2);0<D&&0<C&&(H=AmCharts.rect(this.container,D,C,this.cursorColor,this.selectionAlpha),AmCharts.setCN(this.chart,H,"cursor-selection"),H.translate(F+this.x,E+this.y),this.selection=H)},arrangeBalloons:function(){var B=this.valueBalloons,A=this.x,F=this.y,E=this.height+F;B.sort(this.compareY);var D;for(D=0;D<B.length;D++){var C=B[D].balloon;C.setBounds(A,F,A+this.width,E);C.prevX=this.prevX[D];C.prevY=this.prevY[D];C.prevTX=this.prevTX[D];C.prevTY=this.prevTY[D];C.draw();E=C.yPos-3}this.arrangeBalloons2()},compareY:function(B,A){return B.yy<A.yy?1:-1},arrangeBalloons2:function(){var I=this.valueBalloons;I.reverse();var H,G=this.x,F,E,D=I.length;for(E=0;E<D;E++){var C=I[E].balloon;H=C.bottom;var B=C.bottom-C.yPos,A=D-E-1;0<E&&H-B<F+3&&(C.setBounds(G,F+3,G+this.width,F+B+3),C.prevX=this.prevX[A],C.prevY=this.prevY[A],C.prevTX=this.prevTX[A],C.prevTY=this.prevTY[A],C.draw());C.set&&C.set.show();this.prevX[A]=C.prevX;this.prevY[A]=C.prevY;this.prevTX[A]=C.prevTX;this.prevTY[A]=C.prevTY;F=C.bottom}},showBullets:function(){AmCharts.remove(this.allBullets);var B=this.container,A=B.set();this.set.push(A);this.set.show();this.allBullets=A;var A=this.chart.graphs,H;for(H=0;H<A.length;H++){var G=A[H];if(!G.hidden&&G.balloonText){var F=this.data[this.index].axes[G.valueAxis.id].graphs[G.id],E=F.y;if(!isNaN(E)){var D,C;D=F.x;this.rotate?(C=E,E=D):C=D;G=AmCharts.circle(B,this.bulletSize/2,this.chart.getBalloonColor(G,F,!0),G.cursorBulletAlpha);G.translate(C,E);this.allBullets.push(G)}}}},destroy:function(){this.clear();AmCharts.remove(this.selection);this.selection=null;var A=this.categoryBalloon;A&&A.destroy();(A=this.vaBalloon)&&A.destroy();this.destroyValueBalloons();AmCharts.remove(this.set)},clear:function(){clearInterval(this.interval)},destroyValueBalloons:function(){var B=this.valueBalloons;if(B){var A;for(A=0;A<B.length;A++){B[A].balloon.hide()}}},zoom:function(B,A,F,E){var D=this.chart;this.destroyValueBalloons();this.zooming=!1;var C;this.rotate?this.selectionPosY=C=D.mouseY:this.selectionPosX=C=D.mouseX;this.start=B;this.end=A;this.startTime=F;this.endTime=E;this.zoomed=!0;E=D.categoryAxis;D=this.rotate;A=this.width;F=this.height;B=E.stepWidth;this.fullWidth&&(C=1,E.parseDates&&!E.equalSpacing&&(C=E.minDuration()),D?this.extraWidth=F=B*C:(this.extraWidth=A=B*C,this.categoryBalloon.minWidth=A),this.line&&this.line.remove(),this.line=AmCharts.rect(this.container,A,F,this.cursorColor,this.cursorAlpha,0),this.fullRectSet&&this.fullRectSet.push(this.line));this.stepWidth=B;this.tempVal=this.valueBalloonsEnabled;this.valueBalloonsEnabled=!1;this.setPosition();this.valueBalloonsEnabled=this.tempVal;this.hideCursor()},hideObj:function(A){A&&A.hide()},hideCursor:function(A){void 0===A&&(A=!0);this.hideObj(this.set);this.hideObj(this.categoryBalloon);this.hideObj(this.line);this.hideObj(this.vLine);this.hideObj(this.hLine);this.hideObj(this.vaBalloon);this.hideObj(this.allBullets);this.destroyValueBalloons();this.selectWithoutZooming||AmCharts.remove(this.selection);this.previousIndex=NaN;A&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this});this.drawing||this.chart.setMouseCursor("auto");this.normalizeBulletSize()},setPosition:function(B,A,C){void 0===A&&(A=!0);if("cursor"==this.type){if(this.tempPosition=NaN,AmCharts.ifArray(this.data)){isNaN(B)&&(B=this.getMousePosition()),(B!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(B)&&("mouse"==this.cursorPosition&&(this.tempPosition=B),isNaN(C)&&(C=this.chart.categoryAxis.xToIndex(B)),C!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(C,A),this.zoomed=!1),this.previousMousePosition=B}}else{this.updateCrosshair()}},normalizeBulletSize:function(){var B=this.resizedBullets;if(B){for(var A=0;A<B.length;A++){var D=B[A],C=D.bulletGraphics;C&&(C.translate(D.bx,D.by,1),D=D.graph,isNaN(this.graphBulletAlpha)||(C.setAttr("fill-opacity",D.bulletAlpha),C.setAttr("stroke-opacity",D.bulletBorderAlpha)))}}},updateCursor:function(AB,AA){var v=this.chart,s=this.fullWidth,o=v.mouseX-this.x,Z=v.mouseY-this.y;this.drawingNow&&(AmCharts.remove(this.drawingLine),this.drawingLine=AmCharts.line(this.container,[this.x+this.drawStartX,this.x+o],[this.y+this.drawStartY,this.y+Z],this.cursorColor,1,1));if(this.enabled){void 0===AA&&(AA=!0);this.index=AB+=this.adjustment;var Y=v.categoryAxis,X=v.dx,W=v.dy,V=this.x+1,U=this.y+1,T=this.width,S=this.height,O=this.data[AB];this.fireMoved();if(O){var Q=O.x[Y.id],K=v.rotate,E=this.stepWidth,G=this.categoryBalloon,L=this.firstTime,J=this.lastTime,F=this.cursorPosition,R=this.zooming,N=this.panning,P=v.graphs;if(v.mouseIsOver||R||N||this.forceShow){if(this.forceShow=!1,N){var X=this.panClickPos,v=this.panClickEndTime,R=this.panClickStartTime,I=this.panClickEnd,V=this.panClickStart,o=(K?X-Z:X-o)/E;if(!Y.parseDates||Y.equalSpacing){o=Math.round(o)}0!==o&&(X={type:"zoomed",target:this},X.chart=this.chart,Y.parseDates&&!Y.equalSpacing?(v+o>J&&(o=J-v),R+o<L&&(o=L-R),X.start=Math.round(R+o),X.end=Math.round(v+o),this.fire(X.type,X)):I+o>=this.data.length||0>V+o||(X.start=V+o,X.end=I+o,this.fire(X.type,X)))}else{"start"==F?Q-=Y.cellWidth/2:"mouse"==F&&(v.mouseIsOver?Q=K?Z-2:o-2:isNaN(this.tempPosition)||(Q=this.tempPosition-2));if(K){if(0>Q){if(R){Q=0}else{this.hideCursor();return }}if(Q>S+1){if(R){Q=S+1}else{this.hideCursor();return }}}else{if(0>Q){if(R){Q=0}else{this.hideCursor();return }}if(Q>T){if(R){Q=T}else{this.hideCursor();return }}}if(0<this.cursorAlpha){var M=this.line;K?(L=0,J=Q+W,s&&(J-=Y.cellWidth/2)):(L=Q,J=0,s&&(L-=Y.cellWidth/2));E=this.animationDuration;0<E&&!this.zooming?isNaN(this.previousX)?M.translate(L,J):(M.translate(this.previousX,this.previousY),M.animate({translate:L+","+J},E,"easeOutSine")):M.translate(L,J);this.previousX=L;this.previousY=J;M.show()}this.linePos=K?Q+W:Q;R&&(s&&M.hide(),K?this.updateSelectionSize(NaN,Q):this.updateSelectionSize(Q,NaN));E=!0;R&&(E=!1);this.categoryBalloonEnabled&&E?(this.setBalloonPosition(G,Y,Q,K),(L=this.categoryBalloonFunction)?G.showBalloon(L(O.category)):Y.parseDates?(Y=AmCharts.formatDate(O.category,this.categoryBalloonDateFormat,v),-1!=Y.indexOf("fff")&&(Y=AmCharts.formatMilliseconds(Y,O.category)),G.showBalloon(Y)):G.showBalloon(AmCharts.fixNewLines(O.category))):G.hide();P&&this.bulletsEnabled&&this.showBullets();if(this.oneBalloonOnly){Q=Infinity;for(Y=0;Y<P.length;Y++){L=P[Y],L.showBalloon&&!L.hidden&&L.balloonText&&(J=O.axes[L.valueAxis.id].graphs[L.id],G=J.y,isNaN(G)||(K?Math.abs(o-G)<Q&&(Q=Math.abs(o-G),I=L):Math.abs(Z-G)<Q&&(Q=Math.abs(Z-G),I=L)))}this.mostCloseGraph&&(I=this.mostCloseGraph)}if(AB!=this.previousIndex||I!=this.previousMostCloseGraph){if(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],P&&this.valueBalloonsEnabled&&E&&v.balloon.enabled){this.valueBalloons=E=[];for(Y=0;Y<P.length;Y++){if(L=P[Y],G=NaN,(!this.oneBalloonOnly||L==I)&&L.showBalloon&&!L.hidden&&L.balloonText&&("step"==L.type&&"left"==L.stepDirection&&(O=this.data[AB+1]),O)){if(J=O.axes[L.valueAxis.id].graphs[L.id]){G=J.y}if(this.showNextAvailable&&isNaN(G)&&AB+1<this.data.length){for(Q=AB+1;Q<this.data.length;Q++){if(s=this.data[Q]){if(J=s.axes[L.valueAxis.id].graphs[L.id],G=J.y,!isNaN(G)){break}}}}if(!isNaN(G)){s=J.x;W=!0;if(K){if(Q=G,0>s||s>S){W=!1}}else{if(Q=s,s=G,0>Q||Q>T+X+1){W=!1}}W&&(W=this.graphBulletSize,M=this.graphBulletAlpha,1==W&&isNaN(M)||!AmCharts.isModern||!(F=J.bulletGraphics)||(F.getBBox(),F.translate(J.bx,J.by,W),this.resizedBullets.push(J),isNaN(M)||(F.setAttr("fill-opacity",M),F.setAttr("stroke-opacity",M))),W=L.valueBalloon,M=v.getBalloonColor(L,J),W.setBounds(V,U,V+T,U+S),W.pointerOrientation="H",F=this.balloonPointerOrientation,"vertical"==F&&(W.pointerOrientation="V"),"horizontal"==F&&(W.pointerOrientation="H"),W.changeColor(M),void 0!==L.balloonAlpha&&(W.fillAlpha=L.balloonAlpha),void 0!==L.balloonTextColor&&(W.color=L.balloonTextColor),W.setPosition(Q+V,s+U),Q=v.formatString(L.balloonText,J,!0),(s=L.balloonFunction)&&(Q=s(J,L).toString()),""!==Q&&(K?W.showBalloon(Q):(W.text=Q,W.show=!0),E.push({yy:G,balloon:W})),!K&&W.set&&(W.set.hide(),L=W.textDiv)&&(L.style.visibility="hidden"))}}}this.avoidBalloonOverlapping&&this.arrangeBalloons()}}AA?(X={type:"changed"},X.index=AB,X.chart=this.chart,X.zooming=R,X.mostCloseGraph=I,X.position=K?Z:o,X.target=this,v.fire("changed",X),this.fire("changed",X),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,v.updateLegendValues(AB));this.previousIndex=AB;this.previousMostCloseGraph=I}}}}else{this.hideCursor()}},setBalloonPosition:function(L,K,J,I){var H=K.position,G=K.inside;K=K.axisThickness;var F=this.chart,E=F.dx,F=F.dy,D=this.x,C=this.y,B=this.width,A=this.height;I?(G&&("right"==H?L.setBounds(D,C+F,D+B+E,C+J+F):L.setBounds(D,C+F,D+B+E,C+J)),"right"==H?G?L.setPosition(D+B+E,C+J+F):L.setPosition(D+B+E+K,C+J+F):G?L.setPosition(D,C+J):L.setPosition(D-K,C+J)):"top"==H?G?L.setPosition(D+J+E,C+F):L.setPosition(D+J+E,C+F-K+1):G?L.setPosition(D+J,C+A):L.setPosition(D+J,C+A+K-1)},setBalloonBounds:function(M,L,K){var J=L.position,I=L.inside,H=L.axisThickness,G=L.tickLength,F=this.chart,E=F.dx,F=F.dy,D=this.x,C=this.y,B=this.width,A=this.height;K?(I&&(M.pointerWidth=0),"right"==J?I?M.setBounds(D,C+F,D+B+E,C+A+F):M.setBounds(D+B+E+H,C+F,D+B+1000,C+A+F):I?M.setBounds(D,C,B+D,A+C):M.setBounds(-1000,-1000,D-G-H,C+A+15)):(M.maxWidth=B,L.parseDates&&(G=0,M.pointerWidth=0),"top"==J?I?M.setBounds(D+E,C+F,B+E+D,A+C):M.setBounds(D+E,-1000,B+E+D,C+F-G-H):I?M.setBounds(D,C,B+D,A+C-G):M.setBounds(D,C+A+G+H-1,D+B,C+A+G+H))},enableDrawing:function(A){this.enabled=!A;this.hideCursor();this.rolledOver=!1;this.drawing=A},isZooming:function(A){A&&A!=this.zooming&&this.handleMouseDown("fake");A||A==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled){if(this.zooming){this.setPosition()}else{this.index=void 0;var A={type:"changed",index:void 0,target:this};A.chart=this.chart;this.fire("changed",A);this.hideCursor()}}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var B=this.chart,A=this.data,H;if(B){var G=B.mouseX-this.x,F=B.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1;AmCharts.remove(this.drawingLine);H=this.drawStartX;var E=this.drawStartY;if(2<Math.abs(H-G)||2<Math.abs(E-F)){H={type:"draw",target:this,chart:B,initialX:H,initialY:E,finalX:G,finalY:F},this.fire(H.type,H)}}if(this.enabled&&0<A.length){if(this.pan){this.rolledOver=!1}else{if(this.zoomable&&this.zooming){H=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"};H.target=this;H.chart=B;if("cursor"==this.type){this.rotate?this.selectionPosY=F:this.selectionPosX=F=G,4>Math.abs(F-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(H.end=this.fromIndex,H.start=this.index):(H.end=this.index,H.start=this.fromIndex),F=B.categoryAxis,F.parseDates&&!F.equalSpacing&&(A[H.start]&&(H.start=A[H.start].time),A[H.end]&&(H.end=B.getEndTime(A[H.end].time))),this.skipZoomDispatch||this.fire(H.type,H))}else{var D=this.initialMouseX,C=this.initialMouseY;3>Math.abs(G-D)&&3>Math.abs(F-C)||(A=Math.min(D,G),E=Math.min(C,F),G=Math.abs(D-G),F=Math.abs(C-F),B.hideXScrollbar&&(A=0,G=this.width),B.hideYScrollbar&&(E=0,F=this.height),H.selectionHeight=F,H.selectionWidth=G,H.selectionY=E,H.selectionX=A,this.skipZoomDispatch||this.fire(H.type,H))}this.selectWithoutZooming||AmCharts.remove(this.selection)}}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(B){var A=this.chart.categoryAxis;B=A.parseDates?A.dateToCoordinate(B):A.categoryToCoordinate(B);this.previousMousePosition=NaN;this.forceShow=!0;this.setPosition(B,!1)},clearSelection:function(){AmCharts.remove(this.selection)},handleMouseDown:function(B){if(this.zoomable||this.pan||this.drawing){var A=this.rotate,E=this.chart,D=E.mouseX-this.x,C=E.mouseY-this.y;if(0<D&&D<this.width&&0<C&&C<this.height||"fake"==B){this.setPosition(),this.selectWithoutZooming&&AmCharts.remove(this.selection),this.drawing?(this.drawStartY=C,this.drawStartX=D,this.drawingNow=!0):this.pan?(this.zoomable=!1,E.setMouseCursor("move"),this.panning=!0,this.panClickPos=A?C:D,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,A?(this.initialMouse=C,this.selectionPosY=this.linePos):(this.initialMouse=D,this.selectionPosX=this.linePos)):(this.initialMouseX=D,this.initialMouseY=C,this.selectionPosX=D,this.selectionPosY=C),this.zooming=!0)}}}});AmCharts.SimpleChartScrollbar=AmCharts.Class({construct:function(A){this.createEvents("zoomed");this.backgroundColor="#D4D4D4";this.backgroundAlpha=1;this.selectedBackgroundColor="#EFEFEF";this.scrollDuration=this.selectedBackgroundAlpha=1;this.resizeEnabled=!0;this.hideResizeGrips=!1;this.scrollbarHeight=20;this.updateOnReleaseOnly=!1;9>document.documentMode&&(this.updateOnReleaseOnly=!0);this.dragIconWidth=18;this.dragIconHeight=25;AmCharts.applyTheme(this,A,"SimpleChartScrollbar")},draw:function(){var L=this;L.destroy();L.interval=setInterval(function(){L.updateScrollbar.call(L)},40);var K=L.chart.container,J=L.rotate,I=L.chart,H=K.set();L.set=H;I.scrollbarsSet.push(H);var G,F;J?(G=L.scrollbarHeight,F=I.plotAreaHeight):(F=L.scrollbarHeight,G=I.plotAreaWidth);L.width=G;if((L.height=F)&&G){var E=AmCharts.rect(K,G,F,L.backgroundColor,L.backgroundAlpha,1,L.backgroundColor,L.backgroundAlpha);AmCharts.setCN(I,E,"scrollbar-bg");L.bg=E;H.push(E);E=AmCharts.rect(K,G,F,"#000",0.005);H.push(E);L.invisibleBg=E;E.click(function(){L.handleBgClick()}).mouseover(function(){L.handleMouseOver()}).mouseout(function(){L.handleMouseOut()}).touchend(function(){L.handleBgClick()});E=AmCharts.rect(K,G,F,L.selectedBackgroundColor,L.selectedBackgroundAlpha);AmCharts.setCN(I,E,"scrollbar-bg-selected");L.selectedBG=E;H.push(E);G=AmCharts.rect(K,G,F,"#000",0.005);L.dragger=G;H.push(G);G.mousedown(function(M){L.handleDragStart(M)}).mouseup(function(){L.handleDragStop()}).mouseover(function(){L.handleDraggerOver()}).mouseout(function(){L.handleMouseOut()}).touchstart(function(M){L.handleDragStart(M)}).touchend(function(){L.handleDragStop()});G=I.pathToImages;J?(E=G+"dragIconH.gif",G=L.dragIconWidth,J=L.dragIconHeight):(E=G+"dragIcon.gif",J=L.dragIconWidth,G=L.dragIconHeight);F=K.image(E,0,0,J,G);AmCharts.setCN(I,F,"scrollbar-grip-left");E=K.image(E,0,0,J,G);AmCharts.setCN(I,E,"scrollbar-grip-right");var D=10,C=20;I.panEventsEnabled&&(D=25,C=L.scrollbarHeight);var B=AmCharts.rect(K,D,C,"#000",0.005),A=AmCharts.rect(K,D,C,"#000",0.005);A.translate(-(D-J)/2,-(C-G)/2);B.translate(-(D-J)/2,-(C-G)/2);J=K.set([F,A]);K=K.set([E,B]);L.iconLeft=J;H.push(L.iconLeft);L.iconRight=K;H.push(K);J.mousedown(function(){L.leftDragStart()}).mouseup(function(){L.leftDragStop()}).mouseover(function(){L.iconRollOver()}).mouseout(function(){L.iconRollOut()}).touchstart(function(M){L.leftDragStart()}).touchend(function(){L.leftDragStop()});K.mousedown(function(){L.rightDragStart()}).mouseup(function(){L.rightDragStop()}).mouseover(function(){L.iconRollOver()}).mouseout(function(){L.iconRollOut()}).touchstart(function(M){L.rightDragStart()}).touchend(function(){L.rightDragStop()});AmCharts.ifArray(I.chartData)?H.show():H.hide();L.hideDragIcons();L.clipDragger(!1)}H.translate(L.x,L.y);H.node.style.msTouchAction="none"},updateScrollbarSize:function(B,A){B=Math.round(B);A=Math.round(A);var G=this.dragger,F,E,D,C;this.rotate?(F=0,E=B,D=this.width+1,C=A-B,G.setAttr("height",A-B),G.setAttr("y",E)):(F=B,E=0,D=A-B,C=this.height+1,G.setAttr("width",A-B),G.setAttr("x",F));this.clipAndUpdate(F,E,D,C)},updateScrollbar:function(){var O,N=!1,M,L,K=this.x,J=this.y,I=this.dragger,H=this.getDBox();if(H){M=H.x+K;L=H.y+J;var G=H.width,H=H.height,F=this.rotate,E=this.chart,D=this.width,C=this.height,A=E.mouseX,B=E.mouseY;O=this.initialMouse;this.forceClip&&this.clipDragger(!0);E.mouseIsOver&&(this.dragging&&(E=this.initialCoord,F?(O=E+(B-O),0>O&&(O=0),E=C-H,O>E&&(O=E),I.setAttr("y",O)):(O=E+(A-O),0>O&&(O=0),E=D-G,O>E&&(O=E),I.setAttr("x",O)),this.clipDragger(!0)),this.resizingRight&&(F?(O=B-L,O+L>C+J&&(O=C-L+J),0>O?(this.resizingRight=!1,N=this.resizingLeft=!0):(0===O&&(O=0.1),I.setAttr("height",O))):(O=A-M,O+M>D+K&&(O=D-M+K),0>O?(this.resizingRight=!1,N=this.resizingLeft=!0):(0===O&&(O=0.1),I.setAttr("width",O))),this.clipDragger(!0)),this.resizingLeft&&(F?(M=L,L=B,L<J&&(L=J),L>C+J&&(L=C+J),O=!0===N?M-L:H+M-L,0>O?(this.resizingRight=!0,this.resizingLeft=!1,I.setAttr("y",M+H-J)):(0===O&&(O=0.1),I.setAttr("y",L-J),I.setAttr("height",O))):(L=A,L<K&&(L=K),L>D+K&&(L=D+K),O=!0===N?M-L:G+M-L,0>O?(this.resizingRight=!0,this.resizingLeft=!1,I.setAttr("x",M+G-K)):(0===O&&(O=0.1),I.setAttr("x",L-K),I.setAttr("width",O))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(B){var A=this.getDBox();if(A){var F=A.x,E=A.y,D=A.width,A=A.height,C=!1;if(this.rotate){if(F=0,D=this.width+1,this.clipY!=E||this.clipH!=A){C=!0}}else{if(E=0,A=this.height+1,this.clipX!=F||this.clipW!=D){C=!0}}C&&(this.clipAndUpdate(F,E,D,A),B&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(B,A,D,C){this.clipX=B;this.clipY=A;this.clipW=D;this.clipH=C;this.selectedBG.clipRect(B,A,D,C);this.updateDragIconPositions();this.maskGraphs(B,A,D,C)},dispatchScrollbarEvent:function(){if(this.skipEvent){this.skipEvent=!1}else{var B=this.chart;B.hideBalloon();var A=this.getDBox(),E=A.x,D=A.y,C=A.width,A=A.height;this.rotate?(E=D,C=this.height/A):C=this.width/C;B={type:"zoomed",position:E,chart:B,target:this,multiplier:C};this.fire(B.type,B)}},updateDragIconPositions:function(){var B=this.getDBox(),A=B.x,H=B.y,G=this.iconLeft,F=this.iconRight,E,D,C=this.scrollbarHeight;this.rotate?(E=this.dragIconWidth,D=this.dragIconHeight,G.translate((C-D)/2,H-E/2),F.translate((C-D)/2,H+B.height-E/2)):(E=this.dragIconHeight,D=this.dragIconWidth,G.translate(A-D/2,(C-E)/2),F.translate(A-D/2+B.width,(C-E)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){if(!this.resizingLeft&&!this.resizingRight&&!this.dragging){if(this.hideResizeGrips||!this.resizeEnabled){this.iconLeft.hide(),this.iconRight.hide()}this.removeCursors()}},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(B,A){this.dragger.stop();this.multiplier=B;this.position=A;this.updateScrollbarSize(A,this.rotate?A+this.height/B:A+this.width/B)},destroy:function(){this.clear();AmCharts.remove(this.set);AmCharts.remove(this.iconRight);AmCharts.remove(this.iconLeft)},clear:function(){clearInterval(this.interval)},handleDragStart:function(){var B=this.chart;this.dragger.stop();this.removeCursors();this.dragging=!0;var A=this.getDBox();this.rotate?(this.initialCoord=A.y,this.initialMouse=B.mouseY):(this.initialCoord=A.x,this.initialMouse=B.mouseX)},handleDragStop:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent());this.dragging=!1;this.mouseIsOver&&this.removeCursors();this.updateScrollbar()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop();this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},rightDragStart:function(){this.dragger.stop();this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize");this.handleMouseOver()},getDBox:function(){if(this.dragger){return this.dragger.getBBox()}},handleBgClick:function(){var J=this;if(!J.resizingRight&&!J.resizingLeft){J.zooming=!0;var I,H,G=J.scrollDuration,F=J.dragger;I=J.getDBox();var E=I.height,D=I.width;H=J.chart;var C=J.y,B=J.x,A=J.rotate;A?(I="y",H=H.mouseY-E/2-C,H=AmCharts.fitToBounds(H,0,J.height-E)):(I="x",H=H.mouseX-D/2-B,H=AmCharts.fitToBounds(H,0,J.width-D));J.updateOnReleaseOnly?(J.skipEvent=!1,F.setAttr(I,H),J.dispatchScrollbarEvent(),J.clipDragger()):(H=Math.round(H),A?F.animate({y:H},G,">"):F.animate({x:H},G,">"),J.forceClip=!0,clearTimeout(J.forceTO),J.forceTO=setTimeout(function(){J.stopForceClip.call(J)},5000*G))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){if(this.set){if(this.resizingLeft||this.resizingRight||this.dragging){this.updateOnRelease(),this.removeCursors()}this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1;this.hideDragIcons();this.updateScrollbar()}},handleMouseOver:function(){this.mouseIsOver=!0;this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1;this.hideDragIcons()}});AmCharts.ChartScrollbar=AmCharts.Class({inherits:AmCharts.SimpleChartScrollbar,construct:function(A){this.cname="ChartScrollbar";AmCharts.ChartScrollbar.base.construct.call(this,A);this.graphLineColor="#BBBBBB";this.graphLineAlpha=0;this.graphFillColor="#BBBBBB";this.graphFillAlpha=1;this.selectedGraphLineColor="#888888";this.selectedGraphLineAlpha=0;this.selectedGraphFillColor="#888888";this.selectedGraphFillAlpha=1;this.gridCount=0;this.gridColor="#FFFFFF";this.gridAlpha=0.7;this.skipEvent=this.autoGridCount=!1;this.color="#FFFFFF";this.scrollbarCreated=!1;this.offset=0;AmCharts.applyTheme(this,A,this.cname)},init:function(){var B=this.categoryAxis,A=this.chart;B||(this.categoryAxis=B=new AmCharts.CategoryAxis);B.chart=A;B.id="scrollbar";B.dateFormats=A.categoryAxis.dateFormats;B.markPeriodChange=A.categoryAxis.markPeriodChange;B.boldPeriodBeginning=A.categoryAxis.boldPeriodBeginning;B.axisItemRenderer=AmCharts.RecItem;B.axisRenderer=AmCharts.RecAxis;B.guideFillRenderer=AmCharts.RecFill;B.inside=!0;B.fontSize=this.fontSize;B.tickLength=0;B.axisAlpha=0;AmCharts.isString(this.graph)&&(this.graph=AmCharts.getObjById(A.graphs,this.graph));if(B=this.graph){var C=this.valueAxis;C||(this.valueAxis=C=new AmCharts.ValueAxis,C.visible=!1,C.scrollbar=!0,C.axisItemRenderer=AmCharts.RecItem,C.axisRenderer=AmCharts.RecAxis,C.guideFillRenderer=AmCharts.RecFill,C.labelsEnabled=!1,C.chart=A);A=this.unselectedGraph;A||(A=new AmCharts.AmGraph,A.scrollbar=!0,this.unselectedGraph=A,A.negativeBase=B.negativeBase,A.noStepRisers=B.noStepRisers);A=this.selectedGraph;A||(A=new AmCharts.AmGraph,A.scrollbar=!0,this.selectedGraph=A,A.negativeBase=B.negativeBase,A.noStepRisers=B.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var P=this;AmCharts.ChartScrollbar.base.draw.call(P);P.scrollbarCreated||P.init();var O=P.chart,N=O.chartData,L=P.categoryAxis,K=P.rotate,J=P.x,I=P.y,H=P.width,G=P.height,F=O.categoryAxis,E=P.set;L.setOrientation(!K);L.parseDates=F.parseDates;L.rotate=K;L.equalSpacing=F.equalSpacing;L.minPeriod=F.minPeriod;L.startOnAxis=F.startOnAxis;L.viW=H;L.viH=G;L.width=H;L.height=G;L.gridCount=P.gridCount;L.gridColor=P.gridColor;L.gridAlpha=P.gridAlpha;L.color=P.color;L.tickLength=0;L.axisAlpha=0;L.autoGridCount=P.autoGridCount;L.parseDates&&!L.equalSpacing&&L.timeZoom(O.firstTime,O.lastTime);L.zoom(0,N.length-1);if(F=P.graph){var D=P.valueAxis,C=F.valueAxis;D.id=C.id;D.rotate=K;D.setOrientation(K);D.width=H;D.height=G;D.viW=H;D.viH=G;D.dataProvider=N;D.reversed=C.reversed;D.logarithmic=C.logarithmic;D.gridAlpha=0;D.axisAlpha=0;E.push(D.set);K?(D.y=I,D.x=0):(D.x=J,D.y=0);var J=Infinity,I=-Infinity,A;for(A=0;A<N.length;A++){var B=N[A].axes[C.id].graphs[F.id].values,Q;for(Q in B){if(B.hasOwnProperty(Q)&&"percents"!=Q&&"total"!=Q){var M=B[Q];M<J&&(J=M);M>I&&(I=M)}}}Infinity!=J&&(D.minimum=J);-Infinity!=I&&(D.maximum=I+0.1*(I-J));J==I&&(--D.minimum,D.maximum+=1);void 0!==P.minimum&&(D.minimum=P.minimum);void 0!==P.maximum&&(D.maximum=P.maximum);D.zoom(0,N.length-1);Q=P.unselectedGraph;Q.id=F.id;Q.rotate=K;Q.chart=O;Q.data=N;Q.valueAxis=D;Q.chart=F.chart;Q.categoryAxis=P.categoryAxis;Q.periodSpan=F.periodSpan;Q.valueField=F.valueField;Q.openField=F.openField;Q.closeField=F.closeField;Q.highField=F.highField;Q.lowField=F.lowField;Q.lineAlpha=P.graphLineAlpha;Q.lineColorR=P.graphLineColor;Q.fillAlphas=P.graphFillAlpha;Q.fillColorsR=P.graphFillColor;Q.connect=F.connect;Q.hidden=F.hidden;Q.width=H;Q.height=G;Q.pointPosition=F.pointPosition;Q.stepDirection=F.stepDirection;Q.periodSpan=F.periodSpan;C=P.selectedGraph;C.id=F.id;C.rotate=K;C.chart=O;C.data=N;C.valueAxis=D;C.chart=F.chart;C.categoryAxis=L;C.periodSpan=F.periodSpan;C.valueField=F.valueField;C.openField=F.openField;C.closeField=F.closeField;C.highField=F.highField;C.lowField=F.lowField;C.lineAlpha=P.selectedGraphLineAlpha;C.lineColorR=P.selectedGraphLineColor;C.fillAlphas=P.selectedGraphFillAlpha;C.fillColorsR=P.selectedGraphFillColor;C.connect=F.connect;C.hidden=F.hidden;C.width=H;C.height=G;C.pointPosition=F.pointPosition;C.stepDirection=F.stepDirection;C.periodSpan=F.periodSpan;O=P.graphType;O||(O=F.type);Q.type=O;C.type=O;N=N.length-1;Q.zoom(0,N);C.zoom(0,N);C.set.click(function(){P.handleBackgroundClick()}).mouseover(function(){P.handleMouseOver()}).mouseout(function(){P.handleMouseOut()});Q.set.click(function(){P.handleBackgroundClick()}).mouseover(function(){P.handleMouseOver()}).mouseout(function(){P.handleMouseOut()});E.push(Q.set);E.push(C.set)}E.push(L.set);E.push(L.labelsSet);P.bg.toBack();P.invisibleBg.toFront();P.dragger.toFront();P.iconLeft.toFront();P.iconRight.toFront()},timeZoom:function(B,A,C){this.startTime=B;this.endTime=A;this.timeDifference=A-B;this.skipEvent=!AmCharts.toBoolean(C);this.zoomScrollbar();this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(B,A){this.start=B;this.end=A;this.skipEvent=!0;this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent){this.skipEvent=!1}else{var I=this.chart.chartData,H,G,F=this.dragger.getBBox();H=F.x;var E=F.y,D=F.width,F=F.height,C=this.chart;this.rotate?(H=E,G=F):G=D;D={type:"zoomed",target:this};D.chart=C;var B=this.categoryAxis,A=this.stepWidth,E=C.minSelectedTime,F=!1;if(B.parseDates&&!B.equalSpacing){if(I=C.lastTime,C=C.firstTime,B.minDuration(),B=Math.round(H/A)+C,H=this.dragging?B+this.timeDifference:Math.round((H+G)/A)+C,B>H&&(B=H),0<E&&H-B<E&&(H=Math.round(B+(H-B)/2),F=Math.round(E/2),B=H-F,H+=F,F=!0),H>I&&(H=I),H-E<B&&(B=H-E),B<C&&(B=C),B+E>H&&(H=B+E),B!=this.startTime||H!=this.endTime){this.startTime=B,this.endTime=H,D.start=B,D.end=H,D.startDate=new Date(B),D.endDate=new Date(H),this.fire(D.type,D)}}else{if(B.startOnAxis||(H+=A/2),G-=this.stepWidth/2,E=B.xToIndex(H),H=B.xToIndex(H+G),E!=this.start||this.end!=H){B.startOnAxis&&(this.resizingRight&&E==H&&H++,this.resizingLeft&&E==H&&(0<E?E--:H=1)),this.start=E,this.end=this.dragging?this.start+this.difference:H,D.start=this.start,D.end=this.end,B.parseDates&&(I[this.start]&&(D.startDate=new Date(I[this.start].time)),I[this.end]&&(D.endDate=new Date(I[this.end].time))),this.fire(D.type,D)}}F&&this.zoomScrollbar()}},zoomScrollbar:function(){var B,A;B=this.chart;var D=B.chartData,C=this.categoryAxis;C.parseDates&&!C.equalSpacing?(D=C.stepWidth,C=B.firstTime,B=D*(this.startTime-C),A=D*(this.endTime-C)):(B=D[this.start].x[C.id],A=D[this.end].x[C.id],D=C.stepWidth,C.startOnAxis||(C=D/2,B-=C,A+=C));this.stepWidth=D;this.updateScrollbarSize(B,A)},maskGraphs:function(B,A,E,D){var C=this.selectedGraph;C&&C.set.clipRect(B,A,E,D)},handleDragStart:function(){AmCharts.ChartScrollbar.base.handleDragStart.call(this);this.difference=this.end-this.start;this.timeDifference=this.endTime-this.startTime;0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){AmCharts.ChartScrollbar.base.handleBackgroundClick.call(this);this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}});AmCharts.AmBalloon=AmCharts.Class({construct:function(A){this.cname="AmBalloon";this.enabled=!0;this.fillColor="#FFFFFF";this.fillAlpha=0.8;this.borderThickness=2;this.borderColor="#FFFFFF";this.borderAlpha=1;this.cornerRadius=0;this.maxWidth=220;this.horizontalPadding=8;this.verticalPadding=4;this.pointerWidth=6;this.pointerOrientation="V";this.color="#000000";this.adjustBorderColor=!0;this.show=this.follow=this.showBullet=!1;this.bulletSize=3;this.shadowAlpha=0.4;this.shadowColor="#000000";this.fadeOutDuration=this.animationDuration=0.3;this.fixedPosition=!1;this.offsetY=6;this.offsetX=1;this.textAlign="center";AmCharts.isModern||(this.offsetY*=1.5);AmCharts.applyTheme(this,A,this.cname)},draw:function(){var AF=this.pointToX,AE=this.pointToY;this.deltaSignX=this.deltaSignY=1;var AD=this.chart;AmCharts.VML&&(this.fadeOutDuration=0);this.xAnim&&AD.stopAnim(this.xAnim);this.yAnim&&AD.stopAnim(this.yAnim);if(!isNaN(AF)){var AC=this.follow,AB=AD.container,AA=this.set;AmCharts.remove(AA);this.removeDiv();AA=AB.set();AA.node.style.pointerEvents="none";this.set=AA;AD.balloonsSet.push(AA);if(this.show){var v=this.l,s=this.t,o=this.r,Z=this.b,Y=this.balloonColor,W=this.fillColor,V=this.borderColor,R=W;void 0!=Y&&(this.adjustBorderColor?R=V=Y:W=Y);var T=this.horizontalPadding,N=this.verticalPadding,F=this.pointerWidth,K=this.pointerOrientation,O=this.cornerRadius,M=AD.fontFamily,G=this.fontSize;void 0==G&&(G=AD.fontSize);var Y=document.createElement("div"),U=AD.classNamePrefix;Y.className=U+"-balloon-div";this.className&&(Y.className=Y.className+" "+U+"-balloon-div-"+this.className);U=Y.style;U.pointerEvents="none";U.position="absolute";var Q=this.minWidth,S="";isNaN(Q)||(S="min-width:"+(Q-2*T)+"px; ");Y.innerHTML='<div style="text-align:'+this.textAlign+"; "+S+"max-width:"+this.maxWidth+"px; font-size:"+G+"px; color:"+this.color+"; font-family:"+M+'">'+this.text+"</div>";AD.chartDiv.appendChild(Y);this.textDiv=Y;G=Y.offsetWidth;M=Y.offsetHeight;Y.clientHeight&&(G=Y.clientWidth,M=Y.clientHeight);M+=2*N;S=G+2*T;!isNaN(Q)&&S<Q&&(S=Q);window.opera&&(M+=2);var L=!1,G=this.offsetY;AD.handDrawn&&(G+=AD.handDrawScatter+2);"H"!=K?(Q=AF-S/2,AE<s+M+10&&"down"!=K?(L=!0,AC&&(AE+=G),G=AE+F,this.deltaSignY=-1):(AC&&(AE-=G),G=AE-M-F,this.deltaSignY=1)):(2*F>M&&(F=M/2),G=AE-M/2,AF<v+(o-v)/2?(Q=AF+F,this.deltaSignX=-1):(Q=AF-S-F,this.deltaSignX=1));G+M>=Z&&(G=Z-M);G<s&&(G=s);Q<v&&(Q=v);Q+S>o&&(Q=o-S);var s=G+N,Z=Q+T,N=this.shadowAlpha,P=this.shadowColor,T=this.borderThickness,J=this.bulletSize,E;0<O||0===F?(0<N&&(AF=AmCharts.rect(AB,S,M,W,0,T+1,P,N,this.cornerRadius),AmCharts.isModern?AF.translate(1,1):AF.translate(4,4),AA.push(AF)),W=AmCharts.rect(AB,S,M,W,this.fillAlpha,T,V,this.borderAlpha,this.cornerRadius),this.showBullet&&(E=AmCharts.circle(AB,J,R,this.fillAlpha),AA.push(E))):(R=[],O=[],"H"!=K?(v=AF-Q,v>S-F&&(v=S-F),v<F&&(v=F),R=[0,v-F,AF-Q,v+F,S,S,0,0],O=L?[0,0,AE-G,0,0,M,M,0]:[M,M,AE-G,M,M,0,0,M]):(R=AE-G,R>M-F&&(R=M-F),R<F&&(R=F),O=[0,R-F,AE-G,R+F,M,M,0,0],R=AF<v+(o-v)/2?[0,0,Q<AF?0:AF-Q,0,0,S,S,0]:[S,S,Q+S>AF?S:AF-Q,S,S,0,0,S]),0<N&&(AF=AmCharts.polygon(AB,R,O,W,0,T,P,N),AF.translate(1,1),AA.push(AF)),W=AmCharts.polygon(AB,R,O,W,this.fillAlpha,T,V,this.borderAlpha));this.bg=W;AA.push(W);W.toFront();AmCharts.setCN(AD,W,"balloon-bg");this.className&&AmCharts.setCN(AD,W,"balloon-bg-"+this.className);AB=1*this.deltaSignX;U.left=Z+"px";U.top=s+"px";AA.translate(Q-AB,G);W=W.getBBox();this.bottom=G+M+1;this.yPos=W.y+G;E&&E.translate(this.pointToX-Q+AB,AE-G);AE=this.animationDuration;0<this.animationDuration&&!AC&&!isNaN(this.prevX)&&(AA.translate(this.prevX,this.prevY),AA.animate({translate:Q-AB+","+G},AE,"easeOutSine"),Y&&(U.left=this.prevTX+"px",U.top=this.prevTY+"px",this.xAnim=AD.animate({node:Y},"left",this.prevTX,Z,AE,"easeOutSine","px"),this.yAnim=AD.animate({node:Y},"top",this.prevTY,s,AE,"easeOutSine","px")));this.prevX=Q-AB;this.prevY=G;this.prevTX=Z;this.prevTY=s}}},followMouse:function(){if(this.follow&&this.show){var B=this.chart.mouseX-this.offsetX*this.deltaSignX,A=this.chart.mouseY;this.pointToX=B;this.pointToY=A;if(B!=this.previousX||A!=this.previousY){if(this.previousX=B,this.previousY=A,0===this.cornerRadius){this.draw()}else{var E=this.set;if(E){var D=E.getBBox(),B=B-D.width/2,C=A-D.height-10;B<this.l&&(B=this.l);B>this.r-D.width&&(B=this.r-D.width);C<this.t&&(C=A+10);E.translate(B,C);A=this.textDiv.style;A.left=B+this.horizontalPadding+"px";A.top=C+this.verticalPadding+"px"}}}}},changeColor:function(A){this.balloonColor=A},setBounds:function(B,A,D,C){this.l=B;this.t=A;this.r=D;this.b=C;this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(A){this.text=A;this.show=!0;this.destroyTO&&clearTimeout(this.destroyTO);A=this.chart;this.fadeAnim1&&A.stopAnim(this.fadeAnim1);this.fadeAnim2&&A.stopAnim(this.fadeAnim2);this.draw()},hide:function(){var B=this,A=B.fadeOutDuration,D=B.chart;if(0<A){B.destroyTO=setTimeout(function(){B.destroy.call(B)},1000*A);B.follow=!1;B.show=!1;var C=B.set;C&&(C.setAttr("opacity",B.fillAlpha),B.fadeAnim1=C.animate({opacity:0},A,"easeInSine"));B.textDiv&&(B.fadeAnim2=D.animate({node:B.textDiv},"opacity",1,0,A,"easeInSine",""))}else{B.show=!1,B.follow=!1,B.destroy()}},setPosition:function(B,A,C){this.pointToX=B;this.pointToY=A;C&&(B==this.previousX&&A==this.previousY||this.draw());this.previousX=B;this.previousY=A},followCursor:function(B){var A=this;(A.follow=B)?(A.pShowBullet=A.showBullet,A.showBullet=!1):void 0!==A.pShowBullet&&(A.showBullet=A.pShowBullet);clearInterval(A.interval);var D=A.chart.mouseX,C=A.chart.mouseY;!isNaN(D)&&B&&(A.pointToX=D-A.offsetX*A.deltaSignX,A.pointToY=C,A.followMouse(),A.interval=setInterval(function(){A.followMouse.call(A)},40))},removeDiv:function(){if(this.textDiv){var A=this.textDiv.parentNode;A&&A.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval);AmCharts.remove(this.set);this.removeDiv();this.set=null}});AmCharts.AmCoordinateChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(A){AmCharts.AmCoordinateChart.base.construct.call(this,A);this.theme=A;this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.startAlpha=1;this.startDuration=0;this.startEffect="elastic";this.sequencedAnimation=!0;this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" ");this.balloonDateFormat="MMM DD, YYYY";this.valueAxes=[];this.graphs=[];this.guides=[];this.gridAboveGraphs=!1;AmCharts.applyTheme(this,A,"AmCoordinateChart")},initChart:function(){AmCharts.AmCoordinateChart.base.initChart.call(this);var A=this.categoryAxis;A&&(this.categoryAxis=AmCharts.processObject(A,AmCharts.CategoryAxis,this.theme));this.processValueAxes();this.createValueAxes();this.processGraphs();this.processGuides();AmCharts.VML&&(this.startAlpha=1);this.setLegendData(this.graphs);this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var A=new AmCharts.ValueAxis;this.addValueAxis(A)}},parseData:function(){this.processValueAxes();this.processGraphs()},parseSerialData:function(){var AH=this.graphs,AG,AF={},AE=this.seriesIdField;AE||(AE=this.categoryField);this.chartData=[];var AD=this.dataProvider;if(AD){var AC=!1,AB,AA=this.categoryAxis,v,o,Z;AA&&(AC=AA.parseDates,v=AA.forceShowField,Z=AA.classNameField,o=AA.labelColorField,AB=AA.categoryFunction);var Y,V,R={},T;AC&&(AG=AmCharts.extractPeriod(AA.minPeriod),Y=AG.period,V=AG.count,T=AmCharts.getPeriodDuration(Y,V));var N={};this.lookupTable=N;var F,K=this.dataDateFormat,O={};for(F=0;F<AD.length;F++){var M={},G=AD[F];AG=G[this.categoryField];M.dataContext=G;M.category=AB?AB(AG,G,AA):String(AG);v&&(M.forceShow=G[v]);Z&&(M.className=G[Z]);o&&(M.labelColor=G[o]);N[G[AE]]=M;if(AC&&(AG=AA.categoryFunction?AA.categoryFunction(AG,G,AA):AG instanceof Date?AmCharts.newDate(AG,AA.minPeriod):K?AmCharts.stringToDate(AG,K):new Date(AG),AG=AmCharts.resetDateToMin(AG,Y,V,AA.firstDayOfWeek),M.category=AG,M.time=AG.getTime(),isNaN(M.time))){continue}var U=this.valueAxes;M.axes={};M.x={};var Q;for(Q=0;Q<U.length;Q++){var S=U[Q].id;M.axes[S]={};M.axes[S].graphs={};var L;for(L=0;L<AH.length;L++){AG=AH[L];var P=AG.id,J=1.1;isNaN(AG.gapPeriod)||(J=AG.gapPeriod);var E=AG.periodValue;if(AG.valueAxis.id==S){M.axes[S].graphs[P]={};var W={};W.index=F;var s=G;AG.dataProvider&&(s=AF);W.values=this.processValues(s,AG,E);!AG.connect&&O&&O[P]&&M.time-R[P]>=T*J&&(O[P].gap=!0);this.processFields(AG,W,s);W.category=M.category;W.serialDataItem=M;W.graph=AG;M.axes[S].graphs[P]=W;R[P]=M.time;O[P]=W}}}this.chartData[F]=M}}for(AF=0;AF<AH.length;AF++){AG=AH[AF],AG.dataProvider&&this.parseGraphData(AG)}},processValues:function(B,A,F){var E={},D,C=!1;"candlestick"!=A.type&&"ohlc"!=A.type||""===F||(C=!0);D=Number(B[A.valueField+F]);isNaN(D)||(E.value=D);D=Number(B[A.errorField+F]);isNaN(D)||(E.error=D);C&&(F="Open");D=Number(B[A.openField+F]);isNaN(D)||(E.open=D);C&&(F="Close");D=Number(B[A.closeField+F]);isNaN(D)||(E.close=D);C&&(F="Low");D=Number(B[A.lowField+F]);isNaN(D)||(E.low=D);C&&(F="High");D=Number(B[A.highField+F]);isNaN(D)||(E.high=D);return E},parseGraphData:function(B){var A=B.dataProvider,G=B.seriesIdField;G||(G=this.seriesIdField);G||(G=this.categoryField);var F;for(F=0;F<A.length;F++){var E=A[F],D=this.lookupTable[String(E[G])],C=B.valueAxis.id;D&&(C=D.axes[C].graphs[B.id],C.serialDataItem=D,C.values=this.processValues(E,B,B.periodValue),this.processFields(B,C,E))}},addValueAxis:function(A){A.chart=this;this.valueAxes.push(A);this.validateData()},removeValueAxesAndGraphs:function(){var B=this.valueAxes,A;for(A=B.length-1;-1<A;A--){this.removeValueAxis(B[A])}},removeValueAxis:function(B){var A=this.graphs,D;for(D=A.length-1;0<=D;D--){var C=A[D];C&&C.valueAxis==B&&this.removeGraph(C)}A=this.valueAxes;for(D=A.length-1;0<=D;D--){A[D]==B&&A.splice(D,1)}this.validateData()},addGraph:function(A){this.graphs.push(A);this.chooseGraphColor(A,this.graphs.length-1);this.validateData()},removeGraph:function(B){var A=this.graphs,C;for(C=A.length-1;0<=C;C--){A[C]==B&&(A.splice(C,1),B.destroy())}this.validateData()},processValueAxes:function(){var B=this.valueAxes,A;for(A=0;A<B.length;A++){var C=B[A],C=AmCharts.processObject(C,AmCharts.ValueAxis,this.theme);B[A]=C;C.chart=this;C.id||(C.id="valueAxisAuto"+A+"_"+(new Date).getTime());void 0===C.usePrefixes&&(C.usePrefixes=this.usePrefixes)}},processGuides:function(){var B=this.guides,A=this.categoryAxis;if(B){for(var E=0;E<B.length;E++){var D=B[E];(void 0!==D.category||void 0!==D.date)&&A&&A.addGuide(D);D.id||(D.id="guideAuto"+E+"_"+(new Date).getTime());var C=D.valueAxis;C?(AmCharts.isString(C)&&(C=this.getValueAxisById(C)),C?C.addGuide(D):this.valueAxes[0].addGuide(D)):isNaN(D.value)||this.valueAxes[0].addGuide(D)}}},processGraphs:function(){var B=this.graphs,A;for(A=0;A<B.length;A++){var C=B[A],C=AmCharts.processObject(C,AmCharts.AmGraph,this.theme);B[A]=C;this.chooseGraphColor(C,A);C.chart=this;AmCharts.isString(C.valueAxis)&&(C.valueAxis=this.getValueAxisById(C.valueAxis));C.valueAxis||(C.valueAxis=this.valueAxes[0]);C.id||(C.id="graphAuto"+A+"_"+(new Date).getTime())}},formatString:function(B,A,E){var D=A.graph,C=D.valueAxis;C.duration&&A.values.value&&(C=AmCharts.formatDuration(A.values.value,C.duration,"",C.durationUnits,C.maxInterval,C.numberFormatter),B=B.split("[[value]]").join(C));B=AmCharts.massReplace(B,{"[[title]]":D.title,"[[description]]":A.description});B=E?AmCharts.fixNewLines(B):AmCharts.fixBrakes(B);return B=AmCharts.cleanFromEmpty(B)},getBalloonColor:function(B,A,E){var D=B.lineColor,C=B.balloonColor;E&&(C=D);E=B.fillColorsR;"object"==typeof E?D=E[0]:void 0!==E&&(D=E);A.isNegative&&(E=B.negativeLineColor,B=B.negativeFillColors,"object"==typeof B?E=B[0]:void 0!==B&&(E=B),void 0!==E&&(D=E));void 0!==A.color&&(D=A.color);void 0===C&&(C=D);return C},getGraphById:function(A){return AmCharts.getObjById(this.graphs,A)},getValueAxisById:function(A){return AmCharts.getObjById(this.valueAxes,A)},processFields:function(B,A,G){if(B.itemColors){var F=B.itemColors,E=A.index;A.color=E<F.length?F[E]:AmCharts.randomColor()}F="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" ");for(E=0;E<F.length;E++){var D=F[E],C=B[D+"Field"];C&&(C=G[C],AmCharts.isDefined(C)&&(A[D]=C))}A.dataContext=G},chooseGraphColor:function(B,A){if(B.lineColor){B.lineColorR=B.lineColor}else{var C;C=this.colors.length>A?this.colors[A]:AmCharts.randomColor();B.lineColorR=C}B.fillColorsR=B.fillColors?B.fillColors:B.lineColorR;B.bulletBorderColorR=B.bulletBorderColor?B.bulletBorderColor:B.useLineColorForBulletBorder?B.lineColorR:B.bulletColor;B.bulletColorR=B.bulletColor?B.bulletColor:B.lineColorR;if(C=this.patterns){B.pattern=C[A]}},handleLegendEvent:function(B){var A=B.type;B=B.dataItem;if(!this.legend.data&&B){var D=B.hidden,C=B.showBalloon;switch(A){case"clickMarker":this.textClickEnabled&&(C?this.hideGraphsBalloon(B):this.showGraphsBalloon(B));break;case"clickLabel":C?this.hideGraphsBalloon(B):this.showGraphsBalloon(B);break;case"rollOverItem":D||this.highlightGraph(B);break;case"rollOutItem":D||this.unhighlightGraph();break;case"hideItem":this.hideGraph(B);break;case"showItem":this.showGraph(B)}}},highlightGraph:function(B){var A=this.graphs,E,D=0.2;this.legend&&(D=this.legend.rollOverGraphAlpha);if(1!=D){for(E=0;E<A.length;E++){var C=A[E];C!=B&&C.changeOpacity(D)}}},unhighlightGraph:function(){var B;this.legend&&(B=this.legend.rollOverGraphAlpha);if(1!=B){B=this.graphs;var A;for(A=0;A<B.length;A++){B[A].changeOpacity(1)}}},showGraph:function(A){A.switchable&&(A.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(A){A.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),A.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(A){A.showBalloon=!1;this.updateLegend()},showGraphsBalloon:function(A){A.showBalloon=!0;this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var B=this.graphs;if(B){var A;for(A=0;A<B.length;A++){B[A].animationPlayed=!1}}},animateAgain:function(){this.resetAnimation();this.validateNow()}});AmCharts.AmSlicedChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(A){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice");AmCharts.AmSlicedChart.base.construct.call(this,A);this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" ");this.alpha=1;this.groupPercent=0;this.groupedTitle="Other";this.groupedPulled=!1;this.groupedAlpha=1;this.marginLeft=0;this.marginBottom=this.marginTop=10;this.marginRight=0;this.hoverAlpha=1;this.outlineColor="#FFFFFF";this.outlineAlpha=0;this.outlineThickness=1;this.startAlpha=0;this.startDuration=1;this.startEffect="bounce";this.sequencedAnimation=!0;this.pullOutDuration=1;this.pullOutEffect="bounce";this.pullOnHover=this.pullOutOnlyOne=!1;this.labelsEnabled=!0;this.labelTickColor="#000000";this.labelTickAlpha=0.2;this.hideLabelsPercent=0;this.urlTarget="_self";this.autoMarginOffset=10;this.gradientRatio=[];this.maxLabelWidth=200;AmCharts.applyTheme(this,A,"AmSlicedChart")},initChart:function(){AmCharts.AmSlicedChart.base.initChart.call(this);this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData));this.drawChart()},handleLegendEvent:function(B){var A=B.type,E=B.dataItem,D=this.legend;if(!D.data&&E){var C=E.hidden;B=B.event;switch(A){case"clickMarker":C||D.switchable||this.clickSlice(E,B);break;case"clickLabel":C||this.clickSlice(E,B,!1);break;case"rollOverItem":C||this.rollOverSlice(E,!1,B);break;case"rollOutItem":C||this.rollOutSlice(E,B);break;case"hideItem":this.hideSlice(E,B);break;case"showItem":this.showSlice(E,B)}}},invalidateVisibility:function(){this.recalculatePercents();this.initChart();var A=this.legend;A&&A.invalidateSize()},addEventListeners:function(B,A){var C=this;B.mouseover(function(D){C.rollOverSlice(A,!0,D)}).mouseout(function(D){C.rollOutSlice(A,D)}).touchend(function(D){C.rollOverSlice(A,D);C.panEventsEnabled&&C.clickSlice(A,D)}).touchstart(function(D){C.rollOverSlice(A,D)}).click(function(D){C.clickSlice(A,D)}).contextmenu(function(D){C.handleRightClick(A,D)})},formatString:function(B,A,C){B=AmCharts.formatValue(B,A,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);B=AmCharts.formatValue(B,A,["percents"],this.pf);B=AmCharts.massReplace(B,{"[[title]]":A.title,"[[description]]":A.description});-1!=B.indexOf("[[")&&(B=AmCharts.formatDataContextValue(B,A.dataContext));B=C?AmCharts.fixNewLines(B):AmCharts.fixBrakes(B);return B=AmCharts.cleanFromEmpty(B)},startSlices:function(){var A;for(A=0;A<this.chartData.length;A++){0<this.startDuration&&this.sequencedAnimation?this.setStartTO(A):this.startSlice(this.chartData[A])}},setStartTO:function(B){var A=this;B=setTimeout(function(){A.startSequenced.call(A)},A.startDuration/A.chartData.length*500*B);A.timeOuts.push(B)},pullSlices:function(B){var A=this.chartData,D;for(D=0;D<A.length;D++){var C=A[D];C.pulled&&this.pullSlice(C,1,B)}},startSequenced:function(){var B=this.chartData,A;for(A=0;A<B.length;A++){if(!B[A].started){this.startSlice(this.chartData[A]);break}}},startSlice:function(B){B.started=!0;var A=B.wedge,C=this.startDuration;A&&0<C&&(0<B.alpha&&A.show(),A.translate(B.startX,B.startY),A.animate({opacity:1,translate:"0,0"},C,this.startEffect))},showLabels:function(){var B=this.chartData,A;for(A=0;A<B.length;A++){var D=B[A];if(0<D.alpha){var C=D.label;C&&C.show();(D=D.tick)&&D.show()}}},showSlice:function(A){isNaN(A)?A.hidden=!1:this.chartData[A].hidden=!1;this.invalidateVisibility()},hideSlice:function(A){isNaN(A)?A.hidden=!0:this.chartData[A].hidden=!0;this.hideBalloon();this.invalidateVisibility()},rollOverSlice:function(B,A,G){isNaN(B)||(B=this.chartData[B]);clearTimeout(this.hoverInt);if(!B.hidden){this.pullOnHover&&this.pullSlice(B,1);1>this.hoverAlpha&&B.wedge&&B.wedge.attr({opacity:this.hoverAlpha});var F=B.balloonX,E=B.balloonY;B.pulled&&(F+=B.pullX,E+=B.pullY);var D=this.formatString(this.balloonText,B,!0),C=this.balloonFunction;C&&(D=C(B,D));C=AmCharts.adjustLuminosity(B.color,-0.15);D?this.showBalloon(D,C,A,F,E):this.hideBalloon();B={type:"rollOverSlice",dataItem:B,chart:this,event:G};this.fire(B.type,B)}},rollOutSlice:function(B,A){isNaN(B)||(B=this.chartData[B]);B.wedge&&B.wedge.attr({opacity:1});this.hideBalloon();var C={type:"rollOutSlice",dataItem:B,chart:this,event:A};this.fire(C.type,C)},clickSlice:function(B,A,C){isNaN(B)||(B=this.chartData[B]);B.pulled?this.pullSlice(B,0):this.pullSlice(B,1);AmCharts.getURL(B.url,this.urlTarget);C||(B={type:"clickSlice",dataItem:B,chart:this,event:A},this.fire(B.type,B))},handleRightClick:function(B,A){isNaN(B)||(B=this.chartData[B]);var C={type:"rightClickSlice",dataItem:B,chart:this,event:A};this.fire(C.type,C)},drawTicks:function(){var B=this.chartData,A;for(A=0;A<B.length;A++){var D=B[A];if(D.label){var C=D.ty,C=AmCharts.line(this.container,[D.tx0,D.tx,D.tx2],[D.ty0,C,C],this.labelTickColor,this.labelTickAlpha);AmCharts.setCN(this,C,this.type+"-tick");AmCharts.setCN(this,C,D.className,!0);D.tick=C;D.wedge.push(C)}}},initialStart:function(){var B=this,A=B.startDuration,C=setTimeout(function(){B.showLabels.call(B)},1000*A);B.timeOuts.push(C);B.chartCreated?B.pullSlices(!0):(B.startSlices(),0<A?(A=setTimeout(function(){B.pullSlices.call(B)},1200*A),B.timeOuts.push(A)):B.pullSlices(!0))},pullSlice:function(B,A,D){var C=this.pullOutDuration;!0===D&&(C=0);(D=B.wedge)&&(0<C?D.animate({translate:A*B.pullX+","+A*B.pullY},C,this.pullOutEffect):D.translate(A*B.pullX,A*B.pullY));1==A?(B.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(B.index),B={type:"pullOutSlice",dataItem:B,chart:this}):(B.pulled=!1,B={type:"pullInSlice",dataItem:B,chart:this});this.fire(B.type,B)},pullInAll:function(B){var A=this.chartData,C;for(C=0;C<this.chartData.length;C++){C!=B&&A[C].pulled&&this.pullSlice(A[C],0)}},pullOutAll:function(B){B=this.chartData;var A;for(A=0;A<B.length;A++){B[A].pulled||this.pullSlice(B[A],1)}},parseData:function(){var B=[];this.chartData=B;var A=this.dataProvider;isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha);if(void 0!==A){var H=A.length,G=0,F,E,D;for(F=0;F<H;F++){E={};var C=A[F];E.dataContext=C;E.value=Number(C[this.valueField]);(D=C[this.titleField])||(D="");E.title=D;E.pulled=AmCharts.toBoolean(C[this.pulledField],!1);(D=C[this.descriptionField])||(D="");E.description=D;E.labelRadius=Number(C[this.labelRadiusField]);E.switchable=!0;E.className=C[this.classNameField];E.url=C[this.urlField];D=C[this.patternField];!D&&this.patterns&&(D=this.patterns[F]);E.pattern=D;E.visibleInLegend=AmCharts.toBoolean(C[this.visibleInLegendField],!0);D=C[this.alphaField];E.alpha=void 0!==D?Number(D):this.alpha;D=C[this.colorField];void 0!==D&&(E.color=AmCharts.toColor(D));E.labelColor=AmCharts.toColor(C[this.labelColorField]);G+=E.value;E.hidden=!1;B[F]=E}for(F=A=0;F<H;F++){E=B[F],E.percents=E.value/G*100,E.percents<this.groupPercent&&A++}1<A&&(this.groupValue=0,this.removeSmallSlices(),B.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/G*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}}));H=this.baseColor;H||(H=this.pieBaseColor);G=this.brightnessStep;G||(G=this.pieBrightnessStep);for(F=0;F<B.length;F++){H?D=AmCharts.adjustLuminosity(H,F*G/100):(D=this.colors[F],void 0===D&&(D=AmCharts.randomColor())),void 0===B[F].color&&(B[F].color=D)}this.recalculatePercents()}},recalculatePercents:function(){var B=this.chartData,A=0,D,C;for(D=0;D<B.length;D++){C=B[D],!C.hidden&&0<C.value&&(A+=C.value)}for(D=0;D<B.length;D++){C=this.chartData[D],C.percents=!C.hidden&&0<C.value?100*C.value/A:0}},removeSmallSlices:function(){var B=this.chartData,A;for(A=B.length-1;0<=A;A--){B[A].percents<this.groupPercent&&(this.groupValue+=B[A].value,B.splice(A,1))}},animateAgain:function(){var B=this;B.startSlices();for(var A=0;A<B.chartData.length;A++){var D=B.chartData[A];D.started=!1;var C=D.wedge;C&&C.translate(D.startX,D.startY)}A=B.startDuration;0<A?(A=setTimeout(function(){B.pullSlices.call(B)},1200*A),B.timeOuts.push(A)):B.pullSlices()},measureMaxLabel:function(){var B=this.chartData,A=0,F;for(F=0;F<B.length;F++){var E=B[F],D=this.formatString(this.labelText,E),C=this.labelFunction;C&&(D=C(E,D));E=AmCharts.text(this.container,D,this.color,this.fontFamily,this.fontSize);D=E.getBBox().width;D>A&&(A=D);E.remove()}return A}});AmCharts.AmRectangularChart=AmCharts.Class({inherits:AmCharts.AmCoordinateChart,construct:function(A){AmCharts.AmRectangularChart.base.construct.call(this,A);this.theme=A;this.createEvents("zoomed");this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20;this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0;this.heightMultiplier=this.widthMultiplier=1;this.plotAreaFillColors="#FFFFFF";this.plotAreaFillAlphas=0;this.plotAreaBorderColor="#000000";this.plotAreaBorderAlpha=0;this.zoomOutButtonImageSize=17;this.zoomOutButtonImage="lens.png";this.zoomOutText="Show all";this.zoomOutButtonColor="#e5e5e5";this.zoomOutButtonAlpha=0;this.zoomOutButtonRollOverAlpha=1;this.zoomOutButtonPadding=8;this.trendLines=[];this.autoMargins=!0;this.marginsUpdated=!1;this.autoMarginOffset=10;AmCharts.applyTheme(this,A,"AmRectangularChart")},initChart:function(){AmCharts.AmRectangularChart.base.initChart.call(this);this.updateDxy();var A=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),A=!1);this.processScrollbars();this.updateMargins();this.updatePlotArea();this.updateScrollbars();this.updateTrendLines();this.updateChartCursor();this.updateValueAxes();A&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){AmCharts.AmRectangularChart.base.drawChart.call(this);this.drawPlotArea();if(AmCharts.ifArray(this.chartData)){var A=this.chartCursor;A&&A.draw();A=this.zoomOutText;""!==A&&A&&this.drawZoomOutButton()}},resetMargins:function(){var B={},A;if("serial"==this.type){var E=this.valueAxes;for(A=0;A<E.length;A++){var D=E[A];D.ignoreAxisWidth||(D.setOrientation(this.rotate),D.fixAxisPosition(),B[D.position]=!0)}(A=this.categoryAxis)&&!A.ignoreAxisWidth&&(A.setOrientation(!this.rotate),A.fixAxisPosition(),A.fixAxisPosition(),B[A.position]=!0)}else{D=this.xAxes;E=this.yAxes;for(A=0;A<D.length;A++){var C=D[A];C.ignoreAxisWidth||(C.setOrientation(!0),C.fixAxisPosition(),B[C.position]=!0)}for(A=0;A<E.length;A++){D=E[A],D.ignoreAxisWidth||(D.setOrientation(!1),D.fixAxisPosition(),B[D.position]=!0)}}B.left&&(this.marginLeft=0);B.right&&(this.marginRight=0);B.top&&(this.marginTop=0);B.bottom&&(this.marginBottom=0);this.fixMargins=B},measureMargins:function(){var J=this.valueAxes,I,H=this.autoMarginOffset,G=this.fixMargins,F=this.realWidth,E=this.realHeight,D=H,C=H,B=F;I=E;var A;for(A=0;A<J.length;A++){I=this.getAxisBounds(J[A],D,B,C,I),D=Math.round(I.l),B=Math.round(I.r),C=Math.round(I.t),I=Math.round(I.b)}if(J=this.categoryAxis){I=this.getAxisBounds(J,D,B,C,I),D=Math.round(I.l),B=Math.round(I.r),C=Math.round(I.t),I=Math.round(I.b)}G.left&&D<H&&(this.marginLeft=Math.round(-D+H));G.right&&B>=F-H&&(this.marginRight=Math.round(B-F+H));G.top&&C<H+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-C+H+this.titleHeight));G.bottom&&I>E-H&&(this.marginBottom=Math.round(this.marginBottom+I-E+H));this.initChart()},getAxisBounds:function(B,A,G,F,E){if(!B.ignoreAxisWidth){var D=B.labelsSet,C=B.tickLength;B.inside&&(C=0);if(D){switch(D=B.getBBox(),B.position){case"top":B=D.y;F>B&&(F=B);break;case"bottom":B=D.y+D.height;E<B&&(E=B);break;case"right":B=D.x+D.width+C+3;G<B&&(G=B);break;case"left":B=D.x-C,A>B&&(A=B)}}}return{l:A,t:F,r:G,b:E}},drawZoomOutButton:function(){var M=this,L=M.container.set();M.zoomButtonSet.push(L);var K=M.color,J=M.fontSize,I=M.zoomOutButtonImageSize,H=M.zoomOutButtonImage,G=AmCharts.lang.zoomOutText||M.zoomOutText,F=M.zoomOutButtonColor,E=M.zoomOutButtonAlpha,D=M.zoomOutButtonFontSize,C=M.zoomOutButtonPadding;isNaN(D)||(J=D);(D=M.zoomOutButtonFontColor)&&(K=D);var D=M.zoomOutButton,B;D&&(D.fontSize&&(J=D.fontSize),D.color&&(K=D.color),D.backgroundColor&&(F=D.backgroundColor),isNaN(D.backgroundAlpha)||(M.zoomOutButtonRollOverAlpha=D.backgroundAlpha));var A=D=0;void 0!==M.pathToImages&&H&&(B=M.container.image(M.pathToImages+H,0,0,I,I),AmCharts.setCN(M,B,"zoom-out-image"),L.push(B),B=B.getBBox(),D=B.width+5);void 0!==G&&(K=AmCharts.text(M.container,G,K,M.fontFamily,J,"start"),AmCharts.setCN(M,K,"zoom-out-label"),J=K.getBBox(),A=B?B.height/2-3:J.height/2,K.translate(D,A),L.push(K));B=L.getBBox();K=1;AmCharts.isModern||(K=0);F=AmCharts.rect(M.container,B.width+2*C+5,B.height+2*C-2,F,1,1,F,K);F.setAttr("opacity",E);F.translate(-C,-C);AmCharts.setCN(M,F,"zoom-out-bg");L.push(F);F.toBack();M.zbBG=F;B=F.getBBox();L.translate(M.marginLeftReal+M.plotAreaWidth-B.width+C,M.marginTopReal+C);L.hide();L.mouseover(function(){M.rollOverZB()}).mouseout(function(){M.rollOutZB()}).click(function(){M.clickZB()}).touchstart(function(){M.rollOverZB()}).touchend(function(){M.rollOutZB();M.clickZB()});for(E=0;E<L.length;E++){L[E].attr({cursor:"pointer"})}M.zbSet=L},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0;this.zoom()},drawPlotArea:function(){var J=this.dx,I=this.dy,H=this.marginLeftReal,G=this.marginTopReal,F=this.plotAreaWidth-1,E=this.plotAreaHeight-1,D=this.plotAreaFillColors,C=this.plotAreaFillAlphas,B=this.plotAreaBorderColor,A=this.plotAreaBorderAlpha;this.trendLinesSet.clipRect(H,G,F,E);"object"==typeof C&&(C=C[0]);D=AmCharts.polygon(this.container,[0,F,F,0,0],[0,0,E,E,0],D,C,1,B,A,this.plotAreaGradientAngle);AmCharts.setCN(this,D,"plot-area");D.translate(H+J,G+I);this.set.push(D);0!==J&&0!==I&&(D=this.plotAreaFillColors,"object"==typeof D&&(D=D[0]),D=AmCharts.adjustLuminosity(D,-0.15),F=AmCharts.polygon(this.container,[0,J,F+J,F,0],[0,I,I,0,0],D,C,1,B,A),AmCharts.setCN(this,F,"plot-area-bottom"),F.translate(H,G+E),this.set.push(F),J=AmCharts.polygon(this.container,[0,0,J,J,0],[0,E,E+I,I,0],D,C,1,B,A),AmCharts.setCN(this,J,"plot-area-left"),J.translate(H,G),this.set.push(J));(H=this.bbset)&&this.scrollbarOnly&&H.remove()},updatePlotArea:function(){var B=this.updateWidth(),A=this.updateHeight(),C=this.container;this.realWidth=B;this.realWidth=A;C&&this.container.setSize(B,A);B=B-this.marginLeftReal-this.marginRightReal-this.dx;A=A-this.marginTopReal-this.marginBottomReal;1>B&&(B=1);1>A&&(A=1);this.plotAreaWidth=Math.round(B);this.plotAreaHeight=Math.round(A)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180));this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180));this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180));this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var A=this.getTitleHeight();this.titleHeight=A;this.marginTopReal=this.marginTop-this.dy+A;this.marginBottomReal=this.marginBottom;this.marginLeftReal=this.marginLeft;this.marginRightReal=this.marginRight},updateValueAxes:function(){var B=this.valueAxes,A=this.marginLeftReal,G=this.marginTopReal,F=this.plotAreaHeight,E=this.plotAreaWidth,D;for(D=0;D<B.length;D++){var C=B[D];C.axisRenderer=AmCharts.RecAxis;C.guideFillRenderer=AmCharts.RecFill;C.axisItemRenderer=AmCharts.RecItem;C.dx=this.dx;C.dy=this.dy;C.viW=E-1;C.viH=F-1;C.marginsChanged=!0;C.viX=A;C.viY=G;this.updateObjectSize(C)}},updateObjectSize:function(A){A.width=(this.plotAreaWidth-1)*this.widthMultiplier;A.height=(this.plotAreaHeight-1)*this.heightMultiplier;A.x=this.marginLeftReal+this.horizontalPosition;A.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var B=this.graphs,A;for(A=0;A<B.length;A++){var C=B[A];C.x=this.marginLeftReal+this.horizontalPosition;C.y=this.marginTopReal+this.verticalPosition;C.width=this.plotAreaWidth*this.widthMultiplier;C.height=this.plotAreaHeight*this.heightMultiplier;C.index=A;C.dx=this.dx;C.dy=this.dy;C.rotate=this.rotate}},updateChartCursor:function(){var A=this.chartCursor;A&&(A=AmCharts.processObject(A,AmCharts.ChartCursor,this.theme),this.addChartCursor(A),A.x=this.marginLeftReal,A.y=this.marginTopReal,A.width=this.plotAreaWidth-1,A.height=this.plotAreaHeight-1,A.chart=this)},processScrollbars:function(){var A=this.chartScrollbar;A&&(A=AmCharts.processObject(A,AmCharts.ChartScrollbar,this.theme),this.addChartScrollbar(A))},updateScrollbars:function(){},addChartCursor:function(A){AmCharts.callMethod("destroy",[this.chartCursor]);A&&(this.listenTo(A,"changed",this.handleCursorChange),this.listenTo(A,"zoomed",this.handleCursorZoom));this.chartCursor=A},removeChartCursor:function(){AmCharts.callMethod("destroy",[this.chartCursor]);this.chartCursor=null},zoomTrendLines:function(){var B=this.trendLines,A;for(A=0;A<B.length;A++){var C=B[A];C.valueAxis.recalculateToPercents?C.set&&C.set.hide():(C.x=this.marginLeftReal+this.horizontalPosition,C.y=this.marginTopReal+this.verticalPosition,C.draw())}},addTrendLine:function(A){this.trendLines.push(A)},removeTrendLine:function(B){var A=this.trendLines,C;for(C=A.length-1;0<=C;C--){A[C]==B&&A.splice(C,1)}},adjustMargins:function(B,A){var C=B.scrollbarHeight+B.offset;"top"==B.position?A?this.marginLeftReal+=C:this.marginTopReal+=C:A?this.marginRightReal+=C:this.marginBottomReal+=C},getScrollbarPosition:function(B,A,C){B.position=A?"bottom"==C||"left"==C?"bottom":"top":"top"==C||"right"==C?"bottom":"top"},updateChartScrollbar:function(B,A){if(B){B.rotate=A;var H=this.marginTopReal,G=this.marginLeftReal,F=B.scrollbarHeight,E=this.dx,D=this.dy,C=B.offset;"top"==B.position?A?(B.y=H,B.x=G-F-C):(B.y=H-F+D-1-C,B.x=G+E):A?(B.y=H+D,B.x=G+this.plotAreaWidth+E+C):(B.y=H+this.plotAreaHeight+C,B.x=this.marginLeftReal)}},showZB:function(B){var A=this.zbSet;A&&(B?A.show():A.hide(),this.rollOutZB())},handleReleaseOutside:function(A){AmCharts.AmRectangularChart.base.handleReleaseOutside.call(this,A);(A=this.chartCursor)&&A.handleReleaseOutside()},handleMouseDown:function(B){AmCharts.AmRectangularChart.base.handleMouseDown.call(this,B);var A=this.chartCursor;A&&A.handleMouseDown(B)},handleCursorChange:function(A){}});AmCharts.TrendLine=AmCharts.Class({construct:function(A){this.cname="TrendLine";this.createEvents("click");this.isProtected=!1;this.dashLength=0;this.lineColor="#00CC00";this.lineThickness=this.lineAlpha=1;AmCharts.applyTheme(this,A,this.cname)},draw:function(){var T=this;T.destroy();var S=T.chart,R=S.container,Q,P,O,N,M=T.categoryAxis,L=T.initialDate,K=T.initialCategory,J=T.finalDate,I=T.finalCategory,H=T.valueAxis,F=T.valueAxisX,G=T.initialXValue,D=T.finalXValue,A=T.initialValue,B=T.finalValue,E=H.recalculateToPercents,C=S.dataDateFormat;M&&(L&&(L instanceof Date||(L=C?AmCharts.stringToDate(L,C):new Date(L)),T.initialDate=L,Q=M.dateToCoordinate(L)),K&&(Q=M.categoryToCoordinate(K)),J&&(J instanceof Date||(J=C?AmCharts.stringToDate(J,C):new Date(J)),T.finalDate=J,P=M.dateToCoordinate(J)),I&&(P=M.categoryToCoordinate(I)));F&&!E&&(isNaN(G)||(Q=F.getCoordinate(G)),isNaN(D)||(P=F.getCoordinate(D)));H&&!E&&(isNaN(A)||(O=H.getCoordinate(A)),isNaN(B)||(N=H.getCoordinate(B)));isNaN(Q)||isNaN(P)||isNaN(O)||isNaN(O)||(S.rotate?(M=[O,N],P=[Q,P]):(M=[Q,P],P=[O,N]),O=T.lineColor,Q=AmCharts.line(R,M,P,O,T.lineAlpha,T.lineThickness,T.dashLength),N=M,L=P,I=M[1]-M[0],H=P[1]-P[0],0===I&&(I=0.01),0===H&&(H=0.01),K=I/Math.abs(I),J=H/Math.abs(H),H=I*H/Math.abs(I*H)*Math.sqrt(Math.pow(I,2)+Math.pow(H,2)),I=Math.asin(I/H),H=90*Math.PI/180-I,I=Math.abs(5*Math.cos(H)),H=Math.abs(5*Math.sin(H)),N.push(M[1]-K*H,M[0]-K*H),L.push(P[1]+J*I,P[0]+J*I),M=AmCharts.polygon(R,N,L,O,0.005,0),R=R.set([M,Q]),R.translate(S.marginLeftReal,S.marginTopReal),S.trendLinesSet.push(R),AmCharts.setCN(S,Q,"trend-line"),AmCharts.setCN(S,Q,"trend-line-"+T.id),T.line=Q,T.set=R,M.mouseup(function(){T.handleLineClick()}).mouseover(function(){T.handleLineOver()}).mouseout(function(){T.handleLineOut()}),M.touchend&&M.touchend(function(){T.handleLineClick()}))},handleLineClick:function(){var A={type:"click",trendLine:this,chart:this.chart};this.fire(A.type,A)},handleLineOver:function(){var A=this.rollOverColor;void 0!==A&&this.line.attr({stroke:A})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){AmCharts.remove(this.set)}});AmCharts.circle=function(I,H,G,F,E,D,C,B,A){if(void 0==E||0===E){E=0.01}void 0===D&&(D="#000000");void 0===C&&(C=0);F={fill:G,stroke:D,"fill-opacity":F,"stroke-width":E,"stroke-opacity":C};I=isNaN(A)?I.circle(0,0,H).attr(F):I.ellipse(0,0,H,A).attr(F);B&&I.gradient("radialGradient",[G,AmCharts.adjustLuminosity(G,-0.6)]);return I};AmCharts.text=function(B,A,H,G,F,E,D,C){E||(E="middle");"right"==E&&(E="end");"left"==E&&(E="start");isNaN(C)&&(C=1);void 0!==A&&(A=String(A),AmCharts.isIE&&!AmCharts.isModern&&(A=A.replace("&amp;","&"),A=A.replace("&","&amp;")));H={fill:H,"font-family":G,"font-size":F,opacity:C};!0===D&&(H["font-weight"]="bold");H["text-anchor"]=E;return B.text(A,H)};AmCharts.polygon=function(M,L,K,J,I,H,G,F,E,D,C){isNaN(H)&&(H=0.01);isNaN(F)&&(F=I);var B=J,A=!1;"object"==typeof B&&1<B.length&&(A=!0,B=B[0]);void 0===G&&(G=B);I={fill:B,stroke:G,"fill-opacity":I,"stroke-width":H,"stroke-opacity":F};void 0!==C&&0<C&&(I["stroke-dasharray"]=C);C=AmCharts.dx;H=AmCharts.dy;M.handDrawn&&(K=AmCharts.makeHD(L,K,M.handDrawScatter),L=K[0],K=K[1]);G=Math.round;D&&(G=AmCharts.doNothing);D="M"+(G(L[0])+C)+","+(G(K[0])+H);for(F=1;F<L.length;F++){D+=" L"+(G(L[F])+C)+","+(G(K[F])+H)}M=M.path(D+" Z").attr(I);A&&M.gradient("linearGradient",J,E);return M};AmCharts.rect=function(O,N,M,L,K,J,I,H,G,F,E){isNaN(J)&&(J=0);void 0===G&&(G=0);void 0===F&&(F=270);isNaN(K)&&(K=0);var D=L,C=!1;"object"==typeof D&&(D=D[0],C=!0);void 0===I&&(I=D);void 0===H&&(H=K);N=Math.round(N);M=Math.round(M);var A=0,B=0;0>N&&(N=Math.abs(N),A=-N);0>M&&(M=Math.abs(M),B=-M);A+=AmCharts.dx;B+=AmCharts.dy;K={fill:D,stroke:I,"fill-opacity":K,"stroke-opacity":H};void 0!==E&&0<E&&(K["stroke-dasharray"]=E);O=O.rect(A,B,N,M,G,J).attr(K);C&&O.gradient("linearGradient",L,F);return O};AmCharts.bullet=function(L,K,J,I,H,G,F,E,D,C,B){var A;"circle"==K&&(K="round");switch(K){case"round":A=AmCharts.circle(L,J/2,I,H,G,F,E);break;case"square":A=AmCharts.polygon(L,[-J/2,J/2,J/2,-J/2],[J/2,J/2,-J/2,-J/2],I,H,G,F,E,C-180);break;case"rectangle":A=AmCharts.polygon(L,[-J,J,J,-J],[J/2,J/2,-J/2,-J/2],I,H,G,F,E,C-180);break;case"diamond":A=AmCharts.polygon(L,[-J/2,0,J/2,0],[0,-J/2,0,J/2],I,H,G,F,E);break;case"triangleUp":A=AmCharts.triangle(L,J,0,I,H,G,F,E);break;case"triangleDown":A=AmCharts.triangle(L,J,180,I,H,G,F,E);break;case"triangleLeft":A=AmCharts.triangle(L,J,270,I,H,G,F,E);break;case"triangleRight":A=AmCharts.triangle(L,J,90,I,H,G,F,E);break;case"bubble":A=AmCharts.circle(L,J/2,I,H,G,F,E,!0);break;case"line":A=AmCharts.line(L,[-J/2,J/2],[0,0],I,H,G,F,E);break;case"yError":A=L.set();A.push(AmCharts.line(L,[0,0],[-J/2,J/2],I,H,G));A.push(AmCharts.line(L,[-D,D],[-J/2,-J/2],I,H,G));A.push(AmCharts.line(L,[-D,D],[J/2,J/2],I,H,G));break;case"xError":A=L.set(),A.push(AmCharts.line(L,[-J/2,J/2],[0,0],I,H,G)),A.push(AmCharts.line(L,[-J/2,-J/2],[-D,D],I,H,G)),A.push(AmCharts.line(L,[J/2,J/2],[-D,D],I,H,G))}A&&A.pattern(B);return A};AmCharts.triangle=function(I,H,G,F,E,D,C,B){if(void 0===D||0===D){D=1}void 0===C&&(C="#000");void 0===B&&(B=0);F={fill:F,stroke:C,"fill-opacity":E,"stroke-width":D,"stroke-opacity":B};H/=2;var A;0===G&&(A=" M"+-H+","+H+" L0,"+-H+" L"+H+","+H+" Z");180==G&&(A=" M"+-H+","+-H+" L0,"+H+" L"+H+","+-H+" Z");90==G&&(A=" M"+-H+","+-H+" L"+H+",0 L"+-H+","+H+" Z");270==G&&(A=" M"+-H+",0 L"+H+","+H+" L"+H+","+-H+" Z");return I.path(A).attr(F)};AmCharts.line=function(K,J,I,H,G,F,E,D,C,B,A){if(K.handDrawn&&!A){return AmCharts.handDrawnLine(K,J,I,H,G,F,E,D,C,B,A)}F={fill:"none","stroke-width":F};void 0!==E&&0<E&&(F["stroke-dasharray"]=E);isNaN(G)||(F["stroke-opacity"]=G);H&&(F.stroke=H);H=Math.round;B&&(H=AmCharts.doNothing);B=AmCharts.dx;G=AmCharts.dy;E="M"+(H(J[0])+B)+","+(H(I[0])+G);for(D=1;D<J.length;D++){E+=" L"+(H(J[D])+B)+","+(H(I[D])+G)}if(AmCharts.VML){return K.path(E,void 0,!0).attr(F)}C&&(E+=" M0,0 L0,0");return K.path(E).attr(F)};AmCharts.makeHD=function(N,M,L){for(var K=[],J=[],I=1;I<N.length;I++){for(var H=Number(N[I-1]),G=Number(M[I-1]),F=Number(N[I]),E=Number(M[I]),D=Math.sqrt(Math.pow(F-H,2)+Math.pow(E-G,2)),D=Math.round(D/50)+1,F=(F-H)/D,E=(E-G)/D,C=0;C<=D;C++){var B=H+C*F+Math.random()*L,A=G+C*E+Math.random()*L;K.push(B);J.push(A)}}return[K,J]};AmCharts.handDrawnLine=function(O,N,M,L,K,J,I,H,G,F,E){var D=O.set();for(E=1;E<N.length;E++){for(var C=[N[E-1],N[E]],A=[M[E-1],M[E]],A=AmCharts.makeHD(C,A,O.handDrawScatter),C=A[0],A=A[1],B=1;B<C.length;B++){D.push(AmCharts.line(O,[C[B-1],C[B]],[A[B-1],A[B]],L,K,J+Math.random()*O.handDrawThickness-O.handDrawThickness/2,I,H,G,F,!0))}}return D};AmCharts.doNothing=function(A){return A};AmCharts.wedge=function(AD,AC,AB,AA,v,s,o,Z,Y,X,W,V){var U=Math.round;s=U(s);o=U(o);Z=U(Z);var Q=U(o/s*Z),S=AmCharts.VML,M=359.5+s/100;359.94<M&&(M=359.94);v>=M&&(v=M);var E=1/180*Math.PI,M=AC+Math.sin(AA*E)*Z,J=AB-Math.cos(AA*E)*Q,N=AC+Math.sin(AA*E)*s,L=AB-Math.cos(AA*E)*o,F=AC+Math.sin((AA+v)*E)*s,T=AB-Math.cos((AA+v)*E)*o,P=AC+Math.sin((AA+v)*E)*Z,E=AB-Math.cos((AA+v)*E)*Q,R={fill:AmCharts.adjustLuminosity(X.fill,-0.2),"stroke-opacity":0,"fill-opacity":X["fill-opacity"]},K=0;180<Math.abs(v)&&(K=1);AA=AD.set();var O;S&&(M=U(10*M),N=U(10*N),F=U(10*F),P=U(10*P),J=U(10*J),L=U(10*L),T=U(10*T),E=U(10*E),AC=U(10*AC),Y=U(10*Y),AB=U(10*AB),s*=10,o*=10,Z*=10,Q*=10,1>Math.abs(v)&&1>=Math.abs(F-N)&&1>=Math.abs(T-L)&&(O=!0));v="";var G;V&&(R["fill-opacity"]=0,R["stroke-opacity"]=X["stroke-opacity"]/2,R.stroke=X.stroke);0<Y&&(G=" M"+M+","+(J+Y)+" L"+N+","+(L+Y),S?(O||(G+=" A"+(AC-s)+","+(Y+AB-o)+","+(AC+s)+","+(Y+AB+o)+","+N+","+(L+Y)+","+F+","+(T+Y)),G+=" L"+P+","+(E+Y),0<Z&&(O||(G+=" B"+(AC-Z)+","+(Y+AB-Q)+","+(AC+Z)+","+(Y+AB+Q)+","+P+","+(Y+E)+","+M+","+(Y+J)))):(G+=" A"+s+","+o+",0,"+K+",1,"+F+","+(T+Y)+" L"+P+","+(E+Y),0<Z&&(G+=" A"+Z+","+Q+",0,"+K+",0,"+M+","+(J+Y))),G=AD.path(G+" Z",void 0,void 0,"1000,1000").attr(R),AA.push(G),G=AD.path(" M"+M+","+J+" L"+M+","+(J+Y)+" L"+N+","+(L+Y)+" L"+N+","+L+" L"+M+","+J+" Z",void 0,void 0,"1000,1000").attr(R),Y=AD.path(" M"+F+","+T+" L"+F+","+(T+Y)+" L"+P+","+(E+Y)+" L"+P+","+E+" L"+F+","+T+" Z",void 0,void 0,"1000,1000").attr(R),AA.push(G),AA.push(Y));S?(O||(v=" A"+U(AC-s)+","+U(AB-o)+","+U(AC+s)+","+U(AB+o)+","+U(N)+","+U(L)+","+U(F)+","+U(T)),s=" M"+U(M)+","+U(J)+" L"+U(N)+","+U(L)+v+" L"+U(P)+","+U(E)):s=" M"+M+","+J+" L"+N+","+L+(" A"+s+","+o+",0,"+K+",1,"+F+","+T)+" L"+P+","+E;0<Z&&(S?O||(s+=" B"+(AC-Z)+","+(AB-Q)+","+(AC+Z)+","+(AB+Q)+","+P+","+E+","+M+","+J):s+=" A"+Z+","+Q+",0,"+K+",0,"+M+","+J);AD.handDrawn&&(AC=AmCharts.line(AD,[M,N],[J,L],X.stroke,X.thickness*Math.random()*AD.handDrawThickness,X["stroke-opacity"]),AA.push(AC));AD=AD.path(s+" Z",void 0,void 0,"1000,1000").attr(X);if(W){AC=[];for(AB=0;AB<W.length;AB++){AC.push(AmCharts.adjustLuminosity(X.fill,W[AB]))}0<AC.length&&AD.gradient("linearGradient",AC)}AD.pattern(V);AA.wedge=AD;AA.push(AD);return AA};AmCharts.adjustLuminosity=function(B,A){B=String(B).replace(/[^0-9a-f]/gi,"");6>B.length&&(B=String(B[0])+String(B[0])+String(B[1])+String(B[1])+String(B[2])+String(B[2]));A=A||0;var E="#",D,C;for(C=0;3>C;C++){D=parseInt(B.substr(2*C,2),16),D=Math.round(Math.min(Math.max(0,D+D*A),255)).toString(16),E+=("00"+D).substr(D.length)}return E};AmCharts.Bezier=AmCharts.Class({construct:function(J,I,H,G,F,E,D,C,B,A){"object"==typeof D&&(D=D[0]);"object"==typeof C&&(C=C[0]);E={fill:D,"fill-opacity":C,"stroke-width":E};void 0!==B&&0<B&&(E["stroke-dasharray"]=B);isNaN(F)||(E["stroke-opacity"]=F);G&&(E.stroke=G);G="M"+Math.round(I[0])+","+Math.round(H[0]);F=[];for(B=0;B<I.length;B++){F.push({x:Number(I[B]),y:Number(H[B])})}1<F.length&&(I=this.interpolate(F),G+=this.drawBeziers(I));A?G+=A:AmCharts.VML||(G+="M0,0 L0,0");this.path=J.path(G).attr(E);this.node=this.path.node},interpolate:function(I){var H=[];H.push({x:I[0].x,y:I[0].y});var G=I[1].x-I[0].x,F=I[1].y-I[0].y,E=AmCharts.bezierX,D=AmCharts.bezierY;H.push({x:I[0].x+G/E,y:I[0].y+F/D});var C;for(C=1;C<I.length-1;C++){var B=I[C-1],A=I[C],F=I[C+1];isNaN(F.x)&&(F=A);isNaN(A.x)&&(A=B);isNaN(B.x)&&(B=A);G=F.x-A.x;F=F.y-B.y;B=A.x-B.x;B>G&&(B=G);H.push({x:A.x-B/E,y:A.y-F/D});H.push({x:A.x,y:A.y});H.push({x:A.x+B/E,y:A.y+F/D})}F=I[I.length-1].y-I[I.length-2].y;G=I[I.length-1].x-I[I.length-2].x;H.push({x:I[I.length-1].x-G/E,y:I[I.length-1].y-F/D});H.push({x:I[I.length-1].x,y:I[I.length-1].y});return H},drawBeziers:function(B){var A="",C;for(C=0;C<(B.length-1)/3;C++){A+=this.drawBezierMidpoint(B[3*C],B[3*C+1],B[3*C+2],B[3*C+3])}return A},drawBezierMidpoint:function(J,I,H,G){var F=Math.round,E=this.getPointOnSegment(J,I,0.75),D=this.getPointOnSegment(G,H,0.75),C=(G.x-J.x)/16,B=(G.y-J.y)/16,A=this.getPointOnSegment(J,I,0.375);J=this.getPointOnSegment(E,D,0.375);J.x-=C;J.y-=B;I=this.getPointOnSegment(D,E,0.375);I.x+=C;I.y+=B;H=this.getPointOnSegment(G,H,0.375);C=this.getMiddle(A,J);E=this.getMiddle(E,D);D=this.getMiddle(I,H);A=" Q"+F(A.x)+","+F(A.y)+","+F(C.x)+","+F(C.y);A+=" Q"+F(J.x)+","+F(J.y)+","+F(E.x)+","+F(E.y);A+=" Q"+F(I.x)+","+F(I.y)+","+F(D.x)+","+F(D.y);return A+=" Q"+F(H.x)+","+F(H.y)+","+F(G.x)+","+F(G.y)},getMiddle:function(B,A){return{x:(B.x+A.x)/2,y:(B.y+A.y)/2}},getPointOnSegment:function(B,A,C){return{x:B.x+(A.x-B.x)*C,y:B.y+(A.y-B.y)*C}}});AmCharts.AmDraw=AmCharts.Class({construct:function(B,A,E,D){AmCharts.SVG_NS="http://www.w3.org/2000/svg";AmCharts.SVG_XLINK="http://www.w3.org/1999/xlink";AmCharts.hasSVG=!!document.createElementNS&&!!document.createElementNS(AmCharts.SVG_NS,"svg").createSVGRect;1>A&&(A=10);1>E&&(E=10);this.div=B;this.width=A;this.height=E;this.rBin=document.createElement("div");if(AmCharts.hasSVG){AmCharts.SVG=!0;var C=this.createSvgElement("svg");C.style.position="absolute";C.style.width=A+"px";C.style.height=E+"px";A=this.createSvgElement("desc");A.appendChild(document.createTextNode("JavaScript chart by amCharts "+D.version));C.appendChild(A);AmCharts.rtl&&(C.setAttribute("direction","rtl"),C.style.left="auto",C.style.right="0px");C.setAttribute("version","1.1");B.appendChild(C);this.container=C;this.R=new AmCharts.SVGRenderer(this)}else{AmCharts.isIE&&AmCharts.VMLRenderer&&(AmCharts.VML=!0,AmCharts.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(C=document.createStyleSheet(),C.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),AmCharts.vmlStyleSheet=C):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=B,this.R=new AmCharts.VMLRenderer(this,D),this.R.disableSelection(B))}},createSvgElement:function(A){return document.createElementNS(AmCharts.SVG_NS,A)},circle:function(B,A,E,D){var C=new AmCharts.AmDObject("circle",this);C.attr({r:E,cx:B,cy:A});this.addToContainer(C.node,D);return C},ellipse:function(B,A,F,E,D){var C=new AmCharts.AmDObject("ellipse",this);C.attr({rx:F,ry:E,cx:B,cy:A});this.addToContainer(C.node,D);return C},setSize:function(B,A){0<B&&0<A&&(this.container.style.width=B+"px",this.container.style.height=A+"px")},rect:function(B,A,H,G,F,E,D){var C=new AmCharts.AmDObject("rect",this);AmCharts.VML&&(F=Math.round(100*F/Math.min(H,G)),H+=2*E,G+=2*E,C.bw=E,C.node.style.marginLeft=-E,C.node.style.marginTop=-E);1>H&&(H=1);1>G&&(G=1);C.attr({x:B,y:A,width:H,height:G,rx:F,ry:F,"stroke-width":E});this.addToContainer(C.node,D);return C},image:function(B,A,G,F,E,D){var C=new AmCharts.AmDObject("image",this);C.attr({x:A,y:G,width:F,height:E});this.R.path(C,B);this.addToContainer(C.node,D);return C},addToContainer:function(B,A){A||(A=this.container);A.appendChild(B)},text:function(B,A,C){return this.R.text(B,A,C)},path:function(B,A,E,D){var C=new AmCharts.AmDObject("path",this);D||(D="100,100");C.attr({cs:D});E?C.attr({dd:B}):C.attr({d:B});this.addToContainer(C.node,A);return C},set:function(A){return this.R.set(A)},remove:function(B){if(B){var A=this.rBin;A.appendChild(B);A.innerHTML=""}},renderFix:function(){var B=this.container,A=B.style,D;try{D=B.getScreenCTM()||B.createSVGMatrix()}catch(C){D=B.createSVGMatrix()}B=1-D.e%1;D=1-D.f%1;0.5<B&&--B;0.5<D&&--D;B&&(A.left=B+"px");D&&(A.top=D+"px")},update:function(){this.R.update()}});AmCharts.AmDObject=AmCharts.Class({construct:function(B,A){this.D=A;this.R=A.R;this.node=this.R.create(this,B);this.y=this.x=0;this.scale=1},attr:function(A){this.R.attr(this,A);return this},getAttr:function(A){return this.node.getAttribute(A)},setAttr:function(B,A){this.R.setAttr(this,B,A);return this},clipRect:function(B,A,D,C){this.R.clipRect(this,B,A,D,C)},translate:function(B,A,D,C){C||(B=Math.round(B),A=Math.round(A));this.R.move(this,B,A,D);this.x=B;this.y=A;this.scale=D;this.angle&&this.rotate(this.angle)},rotate:function(B,A){this.R.rotate(this,B,A);this.angle=B},animate:function(B,A,F){for(var E in B){if(B.hasOwnProperty(E)){var D=E,C=B[E];F=AmCharts.getEffect(F);this.R.animate(this,D,C,A,F)}}},push:function(B){if(B){var A=this.node;A.appendChild(B.node);var C=B.clipPath;C&&A.appendChild(C);(B=B.grad)&&A.appendChild(B)}},text:function(A){this.R.setText(this,A)},remove:function(){this.R.remove(this)},clear:function(){var A=this.node;if(A.hasChildNodes()){for(;1<=A.childNodes.length;){A.removeChild(A.firstChild)}}},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var B=this.node;if(B){this.prevNextNode=B.nextSibling;var A=B.parentNode;A&&A.appendChild(B)}},toPrevious:function(){var A=this.node;A&&this.prevNextNode&&(A=A.parentNode)&&A.insertBefore(this.prevNextNode,null)},toBack:function(){var B=this.node;if(B){this.prevNextNode=B.nextSibling;var A=B.parentNode;if(A){var C=A.firstChild;C&&A.insertBefore(B,C)}}},mouseover:function(A){this.R.addListener(this,"mouseover",A);return this},mouseout:function(A){this.R.addListener(this,"mouseout",A);return this},click:function(A){this.R.addListener(this,"click",A);return this},dblclick:function(A){this.R.addListener(this,"dblclick",A);return this},mousedown:function(A){this.R.addListener(this,"mousedown",A);return this},mouseup:function(A){this.R.addListener(this,"mouseup",A);return this},touchstart:function(A){this.R.addListener(this,"touchstart",A);return this},touchend:function(A){this.R.addListener(this,"touchend",A);return this},contextmenu:function(A){this.node.addEventListener?this.node.addEventListener("contextmenu",A,!0):this.R.addListener(this,"contextmenu",A);return this},stop:function(A){AmCharts.removeFromArray(this.R.animations,this.an_x);AmCharts.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(B,A,C){this.R.gradient(this,B,A,C)},pattern:function(B,A){B&&this.R.pattern(this,B,A)}});AmCharts.VMLRenderer=AmCharts.Class({construct:function(B,A){this.chart=A;this.D=B;this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"};this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(B,A){var E;if("group"==A){E=document.createElement("div"),B.type="div"}else{if("text"==A){E=document.createElement("div"),B.type="text"}else{if("image"==A){E=document.createElement("img"),B.type="image"}else{B.type="shape";B.shapeType=this.cNames[A];E=document.createElement("amvml:"+this.cNames[A]);var D=document.createElement("amvml:stroke");E.appendChild(D);B.stroke=D;var C=document.createElement("amvml:fill");E.appendChild(C);B.fill=C;C.className="amvml";D.className="amvml";E.className="amvml"}}}E.style.position="absolute";E.style.top=0;E.style.left=0;return E},path:function(B,A){B.node.setAttribute("src",A)},setAttr:function(B,A,H){if(void 0!==H){var G;8===document.documentMode&&(G=!0);var F=B.node,E=B.type,D=F.style;"r"==A&&(D.width=2*H,D.height=2*H);"oval"==B.shapeType&&("rx"==A&&(D.width=2*H),"ry"==A&&(D.height=2*H));"roundrect"==B.shapeType&&("width"!=A&&"height"!=A||--H);"cursor"==A&&(D.cursor=H);"cx"==A&&(D.left=H-AmCharts.removePx(D.width)/2);"cy"==A&&(D.top=H-AmCharts.removePx(D.height)/2);var C=this.styleMap[A];void 0!==C&&(D[C]=H);"text"==E&&("text-anchor"==A&&(B.anchor=H,C=F.clientWidth,"end"==H&&(D.marginLeft=-C+"px"),"middle"==H&&(D.marginLeft=-(C/2)+"px",D.textAlign="center"),"start"==H&&(D.marginLeft="0px")),"fill"==A&&(D.color=H),"font-weight"==A&&(D.fontWeight=H));if(D=B.children){for(C=0;C<D.length;C++){D[C].setAttr(A,H)}}if("shape"==E){"cs"==A&&(F.style.width="100px",F.style.height="100px",F.setAttribute("coordsize",H));"d"==A&&F.setAttribute("path",this.svgPathToVml(H));"dd"==A&&F.setAttribute("path",H);E=B.stroke;B=B.fill;"stroke"==A&&(G?E.color=H:E.setAttribute("color",H));"stroke-width"==A&&(G?E.weight=H:E.setAttribute("weight",H));"stroke-opacity"==A&&(G?E.opacity=H:E.setAttribute("opacity",H));"stroke-dasharray"==A&&(D="solid",0<H&&3>H&&(D="dot"),3<=H&&6>=H&&(D="dash"),6<H&&(D="longdash"),G?E.dashstyle=D:E.setAttribute("dashstyle",D));if("fill-opacity"==A||"opacity"==A){0===H?G?B.on=!1:B.setAttribute("on",!1):G?B.opacity=H:B.setAttribute("opacity",H)}"fill"==A&&(G?B.color=H:B.setAttribute("color",H));"rx"==A&&(G?F.arcSize=H+"%":F.setAttribute("arcsize",H+"%"))}}},attr:function(B,A){for(var C in A){A.hasOwnProperty(C)&&this.setAttr(B,C,A[C])}},text:function(B,A,E){var D=new AmCharts.AmDObject("text",this.D),C=D.node;C.style.whiteSpace="pre";C.innerHTML=B;this.D.addToContainer(C,E);this.attr(D,A);return D},getBBox:function(A){return this.getBox(A.node)},getBox:function(K){var J=K.offsetLeft,I=K.offsetTop,H=K.offsetWidth,G=K.offsetHeight,F;if(K.hasChildNodes()){var E,D,C;for(C=0;C<K.childNodes.length;C++){F=this.getBox(K.childNodes[C]);var B=F.x;isNaN(B)||(isNaN(E)?E=B:B<E&&(E=B));var A=F.y;isNaN(A)||(isNaN(D)?D=A:A<D&&(D=A));B=F.width+B;isNaN(B)||(H=Math.max(H,B));F=F.height+A;isNaN(F)||(G=Math.max(G,F))}0>E&&(J+=E);0>D&&(I+=D)}return{x:J,y:I,width:H,height:G}},setText:function(B,A){var C=B.node;C&&(C.innerHTML=A);this.setAttr(B,"text-anchor",B.anchor)},addListener:function(B,A,C){B.node["on"+A]=C},move:function(B,A,E){var D=B.node,C=D.style;"text"==B.type&&(E-=AmCharts.removePx(C.fontSize)/2-1);"oval"==B.shapeType&&(A-=AmCharts.removePx(C.width)/2,E-=AmCharts.removePx(C.height)/2);B=B.bw;isNaN(B)||(A-=B,E-=B);isNaN(A)||isNaN(E)||(D.style.left=A+"px",D.style.top=E+"px")},svgPathToVml:function(N){var M=N.split(" ");N="";var L,K=Math.round,J;for(J=0;J<M.length;J++){var I=M[J],H=I.substring(0,1),I=I.substring(1),G=I.split(","),F=K(G[0])+","+K(G[1]);"M"==H&&(N+=" m "+F);"L"==H&&(N+=" l "+F);"Z"==H&&(N+=" x e");if("Q"==H){var E=L.length,D=L[E-1],C=G[0],B=G[1],F=G[2],A=G[3];L=K(L[E-2]/3+2/3*C);D=K(D/3+2/3*B);C=K(2/3*C+F/3);B=K(2/3*B+A/3);N+=" c "+L+","+D+","+C+","+B+","+F+","+A}"A"==H&&(N+=" wa "+I);"B"==H&&(N+=" at "+I);L=G}return N},animate:function(B,A,H,G,F){var E=B.node,D=this.chart;if("translate"==A){A=H.split(",");H=A[1];var C=E.offsetTop;D.animate(B,"left",E.offsetLeft,A[0],G,F,"px");D.animate(B,"top",C,H,G,F,"px")}},clipRect:function(B,A,E,D,C){B=B.node;0===A&&0===E?(B.style.width=D+"px",B.style.height=C+"px",B.style.overflow="hidden"):B.style.clip="rect("+E+"px "+(A+D)+"px "+(E+C)+"px "+A+"px)"},rotate:function(I,H,G){if(0!==Number(H)){var F=I.node;I=F.style;G||(G=this.getBGColor(F.parentNode));I.backgroundColor=G;I.paddingLeft=1;G=H*Math.PI/180;var E=Math.cos(G),D=Math.sin(G),C=AmCharts.removePx(I.left),B=AmCharts.removePx(I.top),A=F.offsetWidth,F=F.offsetHeight;H/=Math.abs(H);I.left=C+A/2-A/2*Math.cos(G)-H*F/2*Math.sin(G)+3;I.top=B-H*A/2*Math.sin(G)+H*F/2*Math.sin(G);I.cssText=I.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+E+"', M12='"+-D+"', M21='"+D+"', M22='"+E+"', sizingmethod='auto expand');"}},getBGColor:function(B){var A="#FFFFFF";if(B.style){var C=B.style.backgroundColor;""!==C?A=C:B.parentNode&&(A=this.getBGColor(B.parentNode))}return A},set:function(B){var A=new AmCharts.AmDObject("group",this.D);this.D.container.appendChild(A.node);if(B){var C;for(C=0;C<B.length;C++){A.push(B[C])}}return A},gradient:function(B,A,G,F){var E="";"radialGradient"==A&&(A="gradientradial",G.reverse());"linearGradient"==A&&(A="gradient");var D;for(D=0;D<G.length;D++){var C=Math.round(100*D/(G.length-1)),E=E+(C+"% "+G[D]);D<G.length-1&&(E+=",")}B=B.fill;90==F?F=0:270==F?F=180:180==F?F=90:0===F&&(F=270);8===document.documentMode?(B.type=A,B.angle=F):(B.setAttribute("type",A),B.setAttribute("angle",F));E&&(B.colors.value=E)},remove:function(A){A.clipPath&&this.D.remove(A.clipPath);this.D.remove(A.node)},disableSelection:function(A){void 0!==typeof A.onselectstart&&(A.onselectstart=function(){return !1});A.style.cursor="default"},pattern:function(B,A){var E=B.node,D=B.fill,C="none";A.color&&(C=A.color);E.fillColor=C;8===document.documentMode?(D.type="tile",D.src=A.url):(D.setAttribute("type","tile"),D.setAttribute("src",A.url))},update:function(){}});AmCharts.SVGRenderer=AmCharts.Class({construct:function(A){this.D=A;this.animations=[]},create:function(B,A){return document.createElementNS(AmCharts.SVG_NS,A)},attr:function(B,A){for(var C in A){A.hasOwnProperty(C)&&this.setAttr(B,C,A[C])}},setAttr:function(B,A,C){void 0!==C&&B.node.setAttribute(A,C)},animate:function(B,A,F,E,D){var C=B.node;B["an_"+A]&&AmCharts.removeFromArray(this.animations,B["an_"+A]);"translate"==A?(C=(C=C.getAttribute("transform"))?String(C).substring(10,C.length-1):"0,0",C=C.split(", ").join(" "),C=C.split(" ").join(","),0===C&&(C="0,0")):C=Number(C.getAttribute(A));F={obj:B,frame:0,attribute:A,from:C,to:F,time:E,effect:D};this.animations.push(F);B["an_"+A]=F},update:function(){var J,I=this.animations;for(J=I.length-1;0<=J;J--){var H=I[J],G=1000*H.time/AmCharts.updateRate,F=H.frame+1,E=H.obj,D=H.attribute,C,B,A;F<=G?(H.frame++,"translate"==D?(C=H.from.split(","),D=Number(C[0]),C=Number(C[1]),isNaN(C)&&(C=0),B=H.to.split(","),A=Number(B[0]),B=Number(B[1]),A=0===A-D?A:Math.round(AmCharts[H.effect](0,F,D,A-D,G)),H=0===B-C?B:Math.round(AmCharts[H.effect](0,F,C,B-C,G)),D="transform",H="translate("+A+","+H+")"):(B=Number(H.from),C=Number(H.to),A=C-B,H=AmCharts[H.effect](0,F,B,A,G),isNaN(H)&&(H=C),0===A&&this.animations.splice(J,1)),this.setAttr(E,D,H)):("translate"==D?(B=H.to.split(","),A=Number(B[0]),B=Number(B[1]),E.translate(A,B)):(C=Number(H.to),this.setAttr(E,D,C)),this.animations.splice(J,1))}},getBBox:function(B){if(B=B.node){try{return B.getBBox()}catch(A){}}return{width:0,height:0,x:0,y:0}},path:function(B,A){B.node.setAttributeNS(AmCharts.SVG_XLINK,"xlink:href",A)},clipRect:function(B,A,H,G,F){var E=B.node,D=B.clipPath;D&&this.D.remove(D);var C=E.parentNode;C&&(E=document.createElementNS(AmCharts.SVG_NS,"clipPath"),D=AmCharts.getUniqueId(),E.setAttribute("id",D),this.D.rect(A,H,G,F,0,0,E),C.appendChild(E),A="#",AmCharts.baseHref&&!AmCharts.isIE&&(A=this.removeTarget(window.location.href)+A),this.setAttr(B,"clip-path","url("+A+D+")"),this.clipPathC++,B.clipPath=E)},text:function(B,A,G){var F=new AmCharts.AmDObject("text",this.D);B=String(B).split("\n");var E=A["font-size"],D;for(D=0;D<B.length;D++){var C=this.create(null,"tspan");C.appendChild(document.createTextNode(B[D]));C.setAttribute("y",(E+2)*D+Math.round(E/2));C.setAttribute("x",0);C.style.fontSize=E+"px";F.node.appendChild(C)}F.node.setAttribute("y",Math.round(E/2));this.attr(F,A);this.D.addToContainer(F.node,G);return F},setText:function(B,A){var C=B.node;C&&(C.removeChild(C.firstChild),C.appendChild(document.createTextNode(A)))},move:function(B,A,D,C){isNaN(A)&&(A=0);isNaN(D)&&(D=0);A="translate("+A+","+D+")";C&&(A=A+" scale("+C+")");this.setAttr(B,"transform",A)},rotate:function(B,A){var D=B.node.getAttribute("transform"),C="rotate("+A+")";D&&(C=D+" "+C);this.setAttr(B,"transform",C)},set:function(B){var A=new AmCharts.AmDObject("g",this.D);this.D.container.appendChild(A.node);if(B){var C;for(C=0;C<B.length;C++){A.push(B[C])}}return A},addListener:function(B,A,C){B.node["on"+A]=C},gradient:function(J,I,H,G){var F=J.node,E=J.grad;E&&this.D.remove(E);I=document.createElementNS(AmCharts.SVG_NS,I);E=AmCharts.getUniqueId();I.setAttribute("id",E);if(!isNaN(G)){var D=0,C=0,B=0,A=0;90==G?B=100:270==G?A=100:180==G?D=100:0===G&&(C=100);I.setAttribute("x1",D+"%");I.setAttribute("x2",C+"%");I.setAttribute("y1",B+"%");I.setAttribute("y2",A+"%")}for(G=0;G<H.length;G++){D=document.createElementNS(AmCharts.SVG_NS,"stop"),C=100*G/(H.length-1),0===G&&(C=0),D.setAttribute("offset",C+"%"),D.setAttribute("stop-color",H[G]),I.appendChild(D)}F.parentNode.appendChild(I);H="#";AmCharts.baseHref&&!AmCharts.isIE&&(H=this.removeTarget(window.location.href)+H);F.setAttribute("fill","url("+H+E+")");J.grad=I},removeTarget:function(A){urlArr=A.split("#");return urlArr[0]},pattern:function(K,J,I){var H=K.node;isNaN(I)&&(I=1);var G=K.patternNode;G&&this.D.remove(G);var G=document.createElementNS(AmCharts.SVG_NS,"pattern"),F=AmCharts.getUniqueId(),E=J;J.url&&(E=J.url);var D=Number(J.width);isNaN(D)&&(D=4);var C=Number(J.height);isNaN(C)&&(C=4);D/=I;C/=I;I=J.x;isNaN(I)&&(I=0);var B=-Math.random()*Number(J.randomX);isNaN(B)||(I=B);B=J.y;isNaN(B)&&(B=0);var A=-Math.random()*Number(J.randomY);isNaN(A)||(B=A);G.setAttribute("id",F);G.setAttribute("width",D);G.setAttribute("height",C);G.setAttribute("patternUnits","userSpaceOnUse");G.setAttribute("xlink:href",E);J.color&&(A=document.createElementNS(AmCharts.SVG_NS,"rect"),A.setAttributeNS(null,"height",D),A.setAttributeNS(null,"width",C),A.setAttributeNS(null,"fill",J.color),G.appendChild(A));this.D.image(E,0,0,D,C,G).translate(I,B);E="#";AmCharts.baseHref&&!AmCharts.isIE&&(E=this.removeTarget(window.location.href)+E);H.setAttribute("fill","url("+E+F+")");K.patternNode=G;H.parentNode.appendChild(G)},remove:function(A){A.clipPath&&this.D.remove(A.clipPath);A.grad&&this.D.remove(A.grad);A.patternNode&&this.D.remove(A.patternNode);this.D.remove(A.node)}});AmCharts.AmDSet=AmCharts.Class({construct:function(A){this.create("g")},attr:function(A){this.R.attr(this.node,A)},move:function(B,A){this.R.move(this.node,B,A)}});AmCharts.AmLegend=AmCharts.Class({construct:function(A){this.cname="AmLegend";this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel");this.position="bottom";this.borderColor=this.color="#000000";this.borderAlpha=0;this.markerLabelGap=5;this.verticalGap=10;this.align="left";this.horizontalGap=0;this.spacing=10;this.markerDisabledColor="#AAB3B3";this.markerType="square";this.markerSize=16;this.markerBorderThickness=this.markerBorderAlpha=1;this.marginBottom=this.marginTop=0;this.marginLeft=this.marginRight=20;this.autoMargins=!0;this.valueWidth=50;this.switchable=!0;this.switchType="x";this.switchColor="#FFFFFF";this.rollOverColor="#CC0000";this.reversedOrder=!1;this.labelText="[[title]]";this.valueText="[[value]]";this.useMarkerColorForLabels=!1;this.rollOverGraphAlpha=1;this.textClickEnabled=!1;this.equalWidths=!0;this.dateFormat="DD-MM-YYYY";this.backgroundColor="#FFFFFF";this.backgroundAlpha=0;this.useGraphSettings=!1;this.showEntries=!0;AmCharts.applyTheme(this,A,this.cname)},setData:function(A){this.legendData=A;this.invalidateSize()},invalidateSize:function(){this.destroy();this.entries=[];this.valueLabels=[];(AmCharts.ifArray(this.legendData)||AmCharts.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var I=this.chart,H=this.position,G=this.width,F=I.divRealWidth,E=I.divRealHeight,D=this.div,C=this.legendData;this.data&&(C=this.data);isNaN(this.fontSize)&&(this.fontSize=I.fontSize);if("right"==H||"left"==H){this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10)}else{if(this.autoMargins){this.marginRight=I.marginRight;this.marginLeft=I.marginLeft;var B=I.autoMarginOffset;"bottom"==H?(this.marginBottom=B,this.marginTop=0):(this.marginTop=B,this.marginBottom=0)}}var A;void 0!==G?A=AmCharts.toCoordinate(G,F):"right"!=H&&"left"!=H&&(A=I.realWidth);"outside"==H?(A=D.offsetWidth,E=D.offsetHeight,D.clientHeight&&(A=D.clientWidth,E=D.clientHeight)):(isNaN(A)||(D.style.width=A+"px"),D.className="amChartsLegend "+I.classNamePrefix+"-legend-div");this.divWidth=A;(H=this.container)?(H.container.innerHTML="",D.appendChild(H.container),H.setSize(A,E)):H=new AmCharts.AmDraw(D,A,E,I);this.container=H;this.lx=0;this.ly=8;E=this.markerSize;E>this.fontSize&&(this.ly=E/2-1);0<E&&(this.lx+=E+this.markerLabelGap);this.titleWidth=0;if(E=this.title){E=AmCharts.text(this.container,E,this.color,I.fontFamily,this.fontSize,"start",!0),AmCharts.setCN(I,E,"legend-title"),E.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),I=E.getBBox(),this.titleWidth=I.width+15,this.titleHeight=I.height+6}this.index=this.maxLabelWidth=0;if(this.showEntries){for(I=0;I<C.length;I++){this.createEntry(C[I])}for(I=this.index=0;I<C.length;I++){this.createValue(C[I])}}this.arrangeEntries();this.updateValues()},arrangeEntries:function(){var AB=this.position,AA=this.marginLeft+this.titleWidth,v=this.marginRight,s=this.marginTop,o=this.marginBottom,Z=this.horizontalGap,Y=this.div,X=this.divWidth,W=this.maxColumns,V=this.verticalGap,U=this.spacing,T=X-v-AA,S=0,O=0,Q=this.container;this.set&&this.set.remove();var K=Q.set();this.set=K;var E=Q.set();K.push(E);var G=this.entries,L,J;for(J=0;J<G.length;J++){L=G[J].getBBox();var F=L.width;F>S&&(S=F);L=L.height;L>O&&(O=L)}var F=O=0,R=Z,N=0,P=0;for(J=0;J<G.length;J++){var I=G[J];this.reversedOrder&&(I=G[G.length-J-1]);L=I.getBBox();var M;this.equalWidths?M=Z+F*(S+U+this.markerLabelGap):(M=R,R=R+L.width+Z+U);L.height>P&&(P=L.height);M+L.width>T&&0<J&&0!==F&&(O++,F=0,M=Z,R=M+L.width+Z+U,N=N+P+V,P=0);I.translate(M,N);F++;!isNaN(W)&&F>=W&&(F=0,O++,N=N+P+V,P=0);E.push(I)}L=E.getBBox();W=L.height+2*V-1;"left"==AB||"right"==AB?(X=L.width+2*Z,Y.style.width=X+AA+v+"px"):X=X-AA-v-1;v=AmCharts.polygon(this.container,[0,X,X,0],[0,0,W,W],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);AmCharts.setCN(this.chart,v,"legend-bg");K.push(v);K.translate(AA,s);v.toBack();AA=Z;if("top"==AB||"bottom"==AB||"absolute"==AB||"outside"==AB){"center"==this.align?AA=Z+(X-L.width)/2:"right"==this.align&&(AA=Z+X-L.width)}E.translate(AA,V+1);this.titleHeight>W&&(W=this.titleHeight);AB=W+s+o+1;0>AB&&(AB=0);AB>this.chart.divRealHeight&&(Y.style.top="0px");Y.style.height=Math.round(AB)+"px";Q.setSize(this.divWidth,AB)},createEntry:function(O){if(!1!==O.visibleInLegend){var N=this.chart,M=O.markerType;O.legendEntryWidth=this.markerSize;M||(M=this.markerType);var L=O.color,K=O.alpha;O.legendKeyColor&&(L=O.legendKeyColor());O.legendKeyAlpha&&(K=O.legendKeyAlpha());var J;!0===O.hidden&&(J=L=this.markerDisabledColor);var I=O.pattern,H=O.customMarker;H||(H=this.customMarker);var G=this.container,F=this.markerSize,E=0,D=0,C=F/2;if(this.useGraphSettings){M=O.type;this.switchType=void 0;if("line"==M||"step"==M||"smoothedLine"==M||"ohlc"==M){I=G.set(),O.hidden||(L=O.lineColorR,J=O.bulletBorderColorR),E=AmCharts.line(G,[0,2*F],[F/2,F/2],L,O.lineAlpha,O.lineThickness,O.dashLength),AmCharts.setCN(N,E,"graph-line"),I.push(E),O.bullet&&(O.hidden||(L=O.bulletColorR),E=AmCharts.bullet(G,O.bullet,O.bulletSize,L,O.bulletAlpha,O.bulletBorderThickness,J,O.bulletBorderAlpha))&&(AmCharts.setCN(N,E,"graph-bullet"),E.translate(F+1,F/2),I.push(E)),C=0,E=F,D=F/3}else{var A;O.getGradRotation&&(A=O.getGradRotation());E=O.fillColorsR;!0===O.hidden&&(E=L);if(I=this.createMarker("rectangle",E,O.fillAlphas,O.lineThickness,L,O.lineAlpha,A,I)){C=F,I.translate(C,F/2)}E=F}AmCharts.setCN(N,I,"graph-"+M);AmCharts.setCN(N,I,"graph-"+O.id)}else{H?(N.path&&(H=N.path+H),I=G.image(H,0,0,F,F)):(I=this.createMarker(M,L,K,void 0,void 0,void 0,void 0,I))&&I.translate(F/2,F/2)}AmCharts.setCN(N,I,"legend-marker");this.addListeners(I,O);G=G.set([I]);this.switchable&&O.switchable&&G.setAttr("cursor","pointer");void 0!=O.id&&AmCharts.setCN(N,G,"legend-item-"+O.id);AmCharts.setCN(N,G,O.className,!0);(J=this.switchType)&&"none"!=J&&("x"==J?(M=this.createX(),M.translate(F/2,F/2)):M=this.createV(),M.dItem=O,!0!==O.hidden?"x"==J?M.hide():M.show():"x"!=J&&M.hide(),this.switchable||M.hide(),this.addListeners(M,O),O.legendSwitch=M,G.push(M),AmCharts.setCN(N,M,"legend-switch"));J=this.color;O.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(J=this.selectedColor);this.useMarkerColorForLabels&&(J=L);!0===O.hidden&&(J=this.markerDisabledColor);L=AmCharts.massReplace(this.labelText,{"[[title]]":O.title});M=this.fontSize;I&&(F<=M&&I.translate(C,F/2+this.ly-M/2+(M+2-F)/2-D),O.legendEntryWidth=I.getBBox().width);var B;L&&(L=AmCharts.fixBrakes(L),O.legendTextReal=L,B=this.labelWidth,B=isNaN(B)?AmCharts.text(this.container,L,J,N.fontFamily,M,"start"):AmCharts.wrappedText(this.container,L,J,N.fontFamily,M,"start",!1,B,0),AmCharts.setCN(N,B,"legend-label"),B.translate(this.lx+E,this.ly),G.push(B),N=B.getBBox().width,this.maxLabelWidth<N&&(this.maxLabelWidth=N));this.entries[this.index]=G;O.legendEntry=this.entries[this.index];O.legendLabel=B;this.index++}},addListeners:function(B,A){var C=this;B&&B.mouseover(function(D){C.rollOverMarker(A,D)}).mouseout(function(D){C.rollOutMarker(A,D)}).click(function(D){C.clickMarker(A,D)})},rollOverMarker:function(B,A){this.switchable&&this.dispatch("rollOverMarker",B,A);this.dispatch("rollOverItem",B,A)},rollOutMarker:function(B,A){this.switchable&&this.dispatch("rollOutMarker",B,A);this.dispatch("rollOutItem",B,A)},clickMarker:function(B,A){this.switchable&&(!0===B.hidden?this.dispatch("showItem",B,A):this.dispatch("hideItem",B,A));this.dispatch("clickMarker",B,A)},rollOverLabel:function(B,A){B.hidden||(this.textClickEnabled&&B.legendLabel&&B.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",B,A))},rollOutLabel:function(B,A){if(!B.hidden){if(this.textClickEnabled&&B.legendLabel){var C=this.color;void 0!==this.selectedColor&&B.showBalloon&&(C=this.selectedColor);this.useMarkerColorForLabels&&(C=B.lineColor,void 0===C&&(C=B.color));B.legendLabel.attr({fill:C})}this.dispatch("rollOutItem",B,A)}},clickLabel:function(B,A){this.textClickEnabled?B.hidden||this.dispatch("clickLabel",B,A):this.switchable&&(!0===B.hidden?this.dispatch("showItem",B,A):this.dispatch("hideItem",B,A))},dispatch:function(B,A,C){this.fire(B,{type:B,dataItem:A,target:this,event:C,chart:this.chart})},createValue:function(I){var H=this,G=H.fontSize,F=H.chart;if(!1!==I.visibleInLegend){var E=H.maxLabelWidth;H.equalWidths||(H.valueAlign="left");"left"==H.valueAlign&&(E=I.legendEntry.getBBox().width);var D=E;if(H.valueText&&0<H.valueWidth){var C=H.color;H.useMarkerColorForValues&&(C=I.color,I.legendKeyColor&&(C=I.legendKeyColor()));!0===I.hidden&&(C=H.markerDisabledColor);var B=H.valueText,E=E+H.lx+H.markerLabelGap+H.valueWidth,A="end";"left"==H.valueAlign&&(E-=H.valueWidth,A="start");C=AmCharts.text(H.container,B,C,H.chart.fontFamily,G,A);AmCharts.setCN(F,C,"legend-value");C.translate(E,H.ly);H.entries[H.index].push(C);D+=H.valueWidth+2*H.markerLabelGap;C.dItem=I;H.valueLabels.push(C)}H.index++;F=H.markerSize;F<G+7&&(F=G+7,AmCharts.VML&&(F+=3));G=H.container.rect(I.legendEntryWidth,0,D,F,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":0.005});G.dItem=I;H.entries[H.index-1].push(G);G.mouseover(function(J){H.rollOverLabel(I,J)}).mouseout(function(J){H.rollOutLabel(I,J)}).click(function(J){H.clickLabel(I,J)})}},createV:function(){var A=this.markerSize;return AmCharts.polygon(this.container,[A/5,A/2,A-A/5,A/2],[A/3,A-A/5,A/5,A/1.7],this.switchColor)},createX:function(){var B=(this.markerSize-4)/2,A={stroke:this.switchColor,"stroke-width":3},D=this.container,C=AmCharts.line(D,[-B,B],[-B,B]).attr(A),B=AmCharts.line(D,[-B,B],[B,-B]).attr(A);return this.container.set([C,B])},createMarker:function(J,I,H,G,F,E,D,C){var B=this.markerSize,A=this.container;F||(F=this.markerBorderColor);F||(F=I);isNaN(G)&&(G=this.markerBorderThickness);isNaN(E)&&(E=this.markerBorderAlpha);return AmCharts.bullet(A,J,B,I,H,G,F,E,B,D,C)},validateNow:function(){this.invalidateSize()},updateValues:function(){var I=this.valueLabels,H=this.chart,G,F=this.data;for(G=0;G<I.length;G++){var E=I[G],D=E.dItem,C=" ";if(F){D.value?E.text(D.value):E.text("")}else{if(void 0!==D.type){var B=D.currentDataItem,A=this.periodValueText;D.legendPeriodValueText&&(A=D.legendPeriodValueText);B?(C=this.valueText,D.legendValueText&&(C=D.legendValueText),C=H.formatString(C,B)):A&&(C=H.formatPeriodString(A,D))}else{C=H.formatString(this.valueText,D)}if(A=this.valueFunction){B&&(D=B),C=A(D,C)}E.text(C)}}},renderFix:function(){if(!AmCharts.VML){var A=this.container;A&&A.renderFix()}},destroy:function(){this.div.innerHTML="";AmCharts.remove(this.set)}});AmCharts.formatMilliseconds=function(B,A){if(-1!=B.indexOf("fff")){var D=A.getMilliseconds(),C=String(D);10>D&&(C="00"+D);10<=D&&100>D&&(C="0"+D);B=B.replace(/fff/g,C)}return B};AmCharts.extractPeriod=function(B){var A=AmCharts.stripNumbers(B),C=1;A!=B&&(C=Number(B.slice(0,B.indexOf(A))));return{period:A,count:C}};AmCharts.newDate=function(B,A){return"fff"==A?AmCharts.useUTC?new Date(B.getUTCFullYear(),B.getUTCMonth(),B.getUTCDate(),B.getUTCHours(),B.getUTCMinutes(),B.getUTCSeconds(),B.getUTCMilliseconds()):new Date(B.getFullYear(),B.getMonth(),B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),B.getMilliseconds()):new Date(B)};AmCharts.resetDateToMin=function(K,J,I,H){void 0===H&&(H=1);var G,F,E,D,C,B,A;AmCharts.useUTC?(G=K.getUTCFullYear(),F=K.getUTCMonth(),E=K.getUTCDate(),D=K.getUTCHours(),C=K.getUTCMinutes(),B=K.getUTCSeconds(),A=K.getUTCMilliseconds(),K=K.getUTCDay()):(G=K.getFullYear(),F=K.getMonth(),E=K.getDate(),D=K.getHours(),C=K.getMinutes(),B=K.getSeconds(),A=K.getMilliseconds(),K=K.getDay());switch(J){case"YYYY":G=Math.floor(G/I)*I;F=0;E=1;A=B=C=D=0;break;case"MM":F=Math.floor(F/I)*I;E=1;A=B=C=D=0;break;case"WW":0===K&&0<H&&(K=7);E=E-K+H;A=B=C=D=0;break;case"DD":A=B=C=D=0;break;case"hh":D=Math.floor(D/I)*I;A=B=C=0;break;case"mm":C=Math.floor(C/I)*I;A=B=0;break;case"ss":B=Math.floor(B/I)*I;A=0;break;case"fff":A=Math.floor(A/I)*I}AmCharts.useUTC?(K=new Date,K.setUTCFullYear(G,F,E),K.setUTCHours(D,C,B,A)):K=new Date(G,F,E,D,C,B,A);return K};AmCharts.getPeriodDuration=function(B,A){void 0===A&&(A=1);var C;switch(B){case"YYYY":C=31622400000;break;case"MM":C=2678400000;break;case"WW":C=604800000;break;case"DD":C=86400000;break;case"hh":C=3600000;break;case"mm":C=60000;break;case"ss":C=1000;break;case"fff":C=1}return C*A};AmCharts.intervals={s:{nextInterval:"ss",contains:1000},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:Infinity,count:3}};AmCharts.getMaxInterval=function(B,A){var C=AmCharts.intervals;return B>=C[A].contains?(B=Math.round(B/C[A].contains),A=C[A].nextInterval,AmCharts.getMaxInterval(B,A)):"ss"==A?C[A].nextInterval:A};AmCharts.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");AmCharts.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" ");AmCharts.monthNames="January February March April May June July August September October November December".split(" ");AmCharts.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");AmCharts.getWeekNumber=function(B){B=new Date(B);B.setHours(0,0,0);B.setDate(B.getDate()+4-(B.getDay()||7));var A=new Date(B.getFullYear(),0,1);return Math.ceil(((B-A)/86400000+1)/7)};AmCharts.stringToDate=function(J,I){var H={},G=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],F=!0,E=I.indexOf("AA");-1!=E&&(J.substr(E,2),"pm"==J.toLowerCase&&(F=!1));var E=I,D,C,B;for(B=0;B<G.length;B++){C=G[B].period,H[C]=0,"date"==C&&(H[C]=1)}for(B=0;B<G.length;B++){if(D=G[B].pattern,C=G[B].period,-1!=I.indexOf(D)){var A=AmCharts.getFromDateString(D,J,E);I=I.replace(D,"");if("KK"==D||"K"==D||"LL"==D||"L"==D){F||(A+=12)}H[C]=A}}AmCharts.useUTC?(G=new Date,G.setUTCFullYear(H.year,H.month,H.date),G.setUTCHours(H.hours,H.minutes,H.seconds,H.milliseconds)):G=new Date(H.year,H.month,H.date,H.hours,H.minutes,H.seconds,H.milliseconds);return G};AmCharts.getFromDateString=function(B,A,C){if(void 0!==A){return C=C.indexOf(B),A=A.substr(C,B.length),"0"==A.charAt(0)&&(A=A.substr(1,A.length-1)),A=Number(A),isNaN(A)&&(A=0),-1!=B.indexOf("M")&&A--,A}};AmCharts.formatDate=function(O,N,M){M||(M=AmCharts);var L,K,J,I,H,G,F,E=AmCharts.getWeekNumber(O);AmCharts.useUTC?(L=O.getUTCFullYear(),K=O.getUTCMonth(),J=O.getUTCDate(),I=O.getUTCDay(),H=O.getUTCHours(),G=O.getUTCMinutes(),F=O.getUTCSeconds(),O=O.getUTCMilliseconds()):(L=O.getFullYear(),K=O.getMonth(),J=O.getDate(),I=O.getDay(),H=O.getHours(),G=O.getMinutes(),F=O.getSeconds(),O=O.getMilliseconds());var D=String(L).substr(2,2),C=K+1;9>K&&(C="0"+C);var A="0"+I;N=N.replace(/W/g,E);E=H;24==E&&(E=0);var B=E;10>B&&(B="0"+B);N=N.replace(/JJ/g,B);N=N.replace(/J/g,E);B=H;0===B&&(B=24,-1!=N.indexOf("H")&&J--);E=J;10>J&&(E="0"+J);var P=B;10>P&&(P="0"+P);N=N.replace(/HH/g,P);N=N.replace(/H/g,B);B=H;11<B&&(B-=12);P=B;10>P&&(P="0"+P);N=N.replace(/KK/g,P);N=N.replace(/K/g,B);B=H;0===B&&(B=12);12<B&&(B-=12);P=B;10>P&&(P="0"+P);N=N.replace(/LL/g,P);N=N.replace(/L/g,B);B=G;10>B&&(B="0"+B);N=N.replace(/NN/g,B);N=N.replace(/N/g,G);G=F;10>G&&(G="0"+G);N=N.replace(/SS/g,G);N=N.replace(/S/g,F);F=O;10>F&&(F="00"+F);100>F&&(F="0"+F);G=O;10>G&&(G="00"+G);N=N.replace(/QQQ/g,F);N=N.replace(/QQ/g,G);N=N.replace(/Q/g,O);N=12>H?N.replace(/A/g,"am"):N.replace(/A/g,"pm");N=N.replace(/YYYY/g,"@IIII@");N=N.replace(/YY/g,"@II@");N=N.replace(/MMMM/g,"@XXXX@");N=N.replace(/MMM/g,"@XXX@");N=N.replace(/MM/g,"@XX@");N=N.replace(/M/g,"@X@");N=N.replace(/DD/g,"@RR@");N=N.replace(/D/g,"@R@");N=N.replace(/EEEE/g,"@PPPP@");N=N.replace(/EEE/g,"@PPP@");N=N.replace(/EE/g,"@PP@");N=N.replace(/E/g,"@P@");N=N.replace(/@IIII@/g,L);N=N.replace(/@II@/g,D);N=N.replace(/@XXXX@/g,M.monthNames[K]);N=N.replace(/@XXX@/g,M.shortMonthNames[K]);N=N.replace(/@XX@/g,C);N=N.replace(/@X@/g,K+1);N=N.replace(/@RR@/g,E);N=N.replace(/@R@/g,J);N=N.replace(/@PPPP@/g,M.dayNames[I]);N=N.replace(/@PPP@/g,M.shortDayNames[I]);N=N.replace(/@PP@/g,A);return N=N.replace(/@P@/g,I)};AmCharts.changeDate=function(B,A,F,E,D){if(AmCharts.useUTC){return AmCharts.changeUTCDate(B,A,F,E,D)}var C=-1;void 0===E&&(E=!0);void 0===D&&(D=!1);!0===E&&(C=1);switch(A){case"YYYY":B.setFullYear(B.getFullYear()+F*C);E||D||B.setDate(B.getDate()+1);break;case"MM":A=B.getMonth();B.setMonth(B.getMonth()+F*C);B.getMonth()>A+F*C&&B.setDate(B.getDate()-1);E||D||B.setDate(B.getDate()+1);break;case"DD":B.setDate(B.getDate()+F*C);break;case"WW":B.setDate(B.getDate()+F*C*7);break;case"hh":B.setHours(B.getHours()+F*C);break;case"mm":B.setMinutes(B.getMinutes()+F*C);break;case"ss":B.setSeconds(B.getSeconds()+F*C);break;case"fff":B.setMilliseconds(B.getMilliseconds()+F*C)}return B};AmCharts.changeUTCDate=function(B,A,F,E,D){var C=-1;void 0===E&&(E=!0);void 0===D&&(D=!1);!0===E&&(C=1);switch(A){case"YYYY":B.setUTCFullYear(B.getUTCFullYear()+F*C);E||D||B.setUTCDate(B.getUTCDate()+1);break;case"MM":A=B.getUTCMonth();B.setUTCMonth(B.getUTCMonth()+F*C);B.getUTCMonth()>A+F*C&&B.setUTCDate(B.getUTCDate()-1);E||D||B.setUTCDate(B.getUTCDate()+1);break;case"DD":B.setUTCDate(B.getUTCDate()+F*C);break;case"WW":B.setUTCDate(B.getUTCDate()+F*C*7);break;case"hh":B.setUTCHours(B.getUTCHours()+F*C);break;case"mm":B.setUTCMinutes(B.getUTCMinutes()+F*C);break;case"ss":B.setUTCSeconds(B.getUTCSeconds()+F*C);break;case"fff":B.setUTCMilliseconds(B.getUTCMilliseconds()+F*C)}return B};AmCharts.AmExport=AmCharts.Class({construct:function(B,A,C){var D=this;D.DEBUG=false;D.chart=B;D.canvas=null;D.svgs=[];D.userCFG=A;D.buttonIcon="export.png";D.exportPNG=true;D.exportPDF=false;D.exportJPG=false;D.exportSVG=false;D.right=0;D.top=0;D.buttonRollOverColor="#EFEFEF";D.textRollOverColor="#CC0000";D.buttonTitle="Save chart as an image";D.buttonAlpha=0.75;D.imageFileName="amChart";D.imageBackgroundColor="#FFFFFF";if(C){D.init()}},toCoordinate:function(A){if(A===undefined){return"auto"}if(String(A).indexOf("%")!=-1){return A}else{return A+"px"}},init:function(){var F=this;var G=[];if(F.exportPNG){G.push("png")}if(F.exportPDF){G.push("pdf")}if(F.exportJPG){G.push("jpg")}if(F.exportSVG){G.push("svg")}var A=[];if(G.length==1){var H=G[0];A.push({format:H,iconTitle:F.buttonTitle,icon:F.chart.pathToImages+F.buttonIcon})}else{if(G.length>1){var D=[];for(var C=0;C<G.length;C++){D.push({format:G[C],title:G[C].toUpperCase()})}A.push({onclick:function(){},icon:F.chart.pathToImages+F.buttonIcon,items:D})}}var B=F.color;if(B===undefined){B=F.chart.color}var I=F.buttonColor;if(I===undefined){I="transparent"}F.cfg={menuTop:F.toCoordinate(F.top),menuLeft:F.toCoordinate(F.left),menuRight:F.toCoordinate(F.right),menuBottom:F.toCoordinate(F.bottom),menuItems:A,menuItemStyle:{backgroundColor:I,opacity:F.buttonAlpha,rollOverBackgroundColor:F.buttonRollOverColor,color:B,rollOverColor:F.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:F.chart.fontFamily,fontSize:F.chart.fontSize+"px"},menuItemOutput:{backgroundColor:F.imageBackgroundColor,fileName:F.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(J,K,L){L.preventDefault();J.output(K)}},removeImagery:true};F.processing={buffer:[],drawn:0,timer:0};if(typeof (window.canvg)!="undefined"&&typeof (window.RGBColor)!="undefined"){F.cfg.menuItemOutput.render="canvg"}if(typeof (window.saveAs)!="undefined"){F.cfg.menuItemOutput.output="save"}if(AmCharts.isIE&&AmCharts.IEversion<10){F.cfg.menuItemOutput.output="dataurlnewwindow"}var E=F.userCFG;if(E){E.menuItemOutput=AmCharts.extend(F.cfg.menuItemOutput,E.menuItemOutput||{});E.menuItemStyle=AmCharts.extend(F.cfg.menuItemStyle,E.menuItemStyle||{});F.cfg=AmCharts.extend(F.cfg,E)}F.chart.AmExport=F;F.chart.addListener("rendered",function(){F.setup()});if(F.DEBUG){window.AmExport=F}},log:function(){console.log("AmExport: ",arguments)},setup:function(){var A=this;if(!AmCharts.isIE||(AmCharts.isIE&&AmCharts.IEversion>9)){A.generateButtons()}},generateBinaryArray:function(K){var H=K.length,E=new Uint8Array(H/4*3|0),G=0,J=0,L=[0,0],A=0,I=0,F,B,C,D=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);while(H--){B=K.charCodeAt(G++);F=D[B-43];if(F!==255&&F!==C){L[1]=L[0];L[0]=B;I=(I<<6)|F;A++;if(A===4){E[J++]=I>>>16;if(L[1]!==61){E[J++]=I>>>8}if(L[0]!==61){E[J++]=I}A=0}}}return E},generateBlob:function(E,C){var G=this,A=C!="image/svg+xml"?E.indexOf(",")+1:0,F=E.substring(0,A),D=E,B=new Blob();if(F.indexOf("base64")!=-1){D=G.generateBinaryArray(E.substring(A))}if(AmCharts.isIE&&AmCharts.IEversion<10){B.data=D;B.size=D.length;B.type=C;B.encoding="base64"}else{B=new Blob([D],{type:C})}return B},generatePDF:function(C){var F=this,B={output:function(){return""}},E=F.canvas.toDataURL("image/jpeg"),D=(F.canvas.width*25.4)/C.dpi,A=(F.canvas.height*25.4)/C.dpi;if(window.jsPDF){B=new jsPDF();if(B.addImage){B.addImage(E,"JPEG",0,0,D,A)}else{alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")}}else{alert("Missing jsPDF lib; Don't forget to add the addImage plugin.")}return B},output:function(A,C){var D=this;A=AmCharts.extend(AmCharts.extend({},D.cfg.menuItemOutput),A||{});if(D.chart.prepareForExport){D.chart.prepareForExport()}function B(){var F=null;var E;if(A.format=="image/svg+xml"||A.format=="svg"){F=D.generateSVG();E=D.generateBlob(F,"image/svg+xml");if(A.output=="save"){saveAs(E,A.fileName+".svg")}else{if(A.output=="datastring"||A.output=="datauristring"||A.output=="dataurlstring"){E="data:image/svg+xml;base64,"+btoa(F)}else{if(A.output=="dataurlnewwindow"){window.open("data:image/svg+xml;base64,"+btoa(F))}else{if(A.output=="datauri"||A.output=="dataurl"){location.href="data:image/svg+xml;base64,"+btoa(F)}else{if(A.output=="datastream"){location.href="data:image/octet-stream;base64,"+F}}}}}if(C){C.apply(D,[E])}}else{if(A.format=="application/pdf"||A.format=="pdf"){F=D.generatePDF(A).output("dataurlstring");E=D.generateBlob(F,"application/pdf");if(A.output=="save"){saveAs(E,A.fileName+".pdf")}else{if(A.output=="datastring"||A.output=="datauristring"||A.output=="dataurlstring"){E=F}else{if(A.output=="dataurlnewwindow"){window.open(F)}else{if(A.output=="datauri"||A.output=="dataurl"){location.href=F}else{if(A.output=="datastream"){location.href=F.replace("application/pdf","application/octet-stream")}}}}}if(C){C.apply(D,[E])}}else{if(A.format=="image/png"||A.format=="png"){F=D.canvas.toDataURL("image/png");E=D.generateBlob(F,"image/png");if(A.output=="save"){saveAs(E,A.fileName+".png")}else{if(A.output=="datastring"||A.output=="datauristring"||A.output=="dataurlstring"){E=F}else{if(A.output=="dataurlnewwindow"){window.open(F)}else{if(A.output=="datauri"||A.output=="dataurl"){location.href=F}else{if(A.output=="datastream"){location.href=F.replace("image/png","image/octet-stream")}}}}}if(C){C.apply(D,[E])}}else{if(A.format=="image/jpeg"||A.format=="jpeg"||A.format=="jpg"){F=D.canvas.toDataURL("image/jpeg");E=D.generateBlob(F,"image/jpeg");if(A.output=="save"){saveAs(E,A.fileName+".jpg")}else{if(A.output=="datastring"||A.output=="datauristring"||A.output=="dataurlstring"){E=F}else{if(A.output=="dataurlnewwindow"){window.open(F)}else{if(A.output=="datauri"||A.output=="dataurl"){location.href=F}else{if(A.output=="datastream"){location.href=F.replace("image/jpeg","image/octet-stream")}}}}}if(C){C.apply(D,[E])}}}}}}return D.generateOutput(A,B)},polifySVG:function(A){var C=this;function B(G,D){var F=G.getElementsByTagName(D);var I=F.length;while(I--){if(C.cfg.removeImagery){F[I].parentNode.removeChild(F[I])}else{var K=document.createElement("img");var H=document.createElement("canvas");var E=H.getContext("2d");H.width=F[I].getAttribute("width");H.height=F[I].getAttribute("height");K.src=F[I].getAttribute("xlink:href");K.width=F[I].getAttribute("width");K.height=F[I].getAttribute("height");try{E.drawImage(K,0,0,K.width,K.height);datastring=H.toDataURL()}catch(J){datastring=K.src;C.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!");throw new Error(J)}F[I].setAttribute("xlink:href",datastring)}}}if(AmCharts.IEversion==0){A.setAttribute("xmlns","http://www.w3.org/2000/svg");if(!C.cfg.removeImagery){A.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")}}B(A,"pattern");B(A,"image");C.svgs.push(A);return A},generateSVG:function(){var E=this;var B=document.createElement("svg");B.setAttribute("xmlns","http://www.w3.org/2000/svg");B.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(var A=0;A<E.processing.buffer.length;A++){var D=document.createElement("g"),C=E.processing.buffer[A];C[0].setAttribute("xmlns","http://www.w3.org/2000/svg");C[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");D.setAttribute("transform","translate("+C[1].x+","+C[1].y+")");D.appendChild(C[0]);B.appendChild(D)}return new XMLSerializer().serializeToString(B)},generateOutput:function(K,O){var J=this,A=[],N=[],D=document.createElement("canvas"),C=D.getContext("2d"),F={y:0,x:0},A=J.chart.div.getElementsByTagName("svg");for(var I=0;I<A.length;I++){N.push(A[I])}if(J.chart.legend&&J.chart.legend.position=="outside"){J.chart.legend.container.container.externalLegend=true;N.push(J.chart.legend.container.container);if(J.cfg.legendPosition=="left"){F.x=J.chart.legend.div.offsetWidth}else{if(J.cfg.legendPosition=="top"){F.y=J.chart.legend.div.offsetHeight}else{if(typeof J.cfg.legendPosition=="object"){F.y=J.cfg.legendPosition.chartTop;F.x=J.cfg.legendPosition.chartLeft}}}}J.processing.buffer=[];J.processing.drawn=0;J.canvas=D;J.svgs=[];var L={x:0,y:0};for(var I=0;I<N.length;I++){var M=N[I].parentNode,Q=Number(M.style.left.slice(0,-2)),P=Number(M.style.top.slice(0,-2)),H=J.polifySVG(N[I].cloneNode(true)),G=AmCharts.extend({},F);if(N[I].externalLegend){if(J.cfg.legendPosition=="right"){F.y=0;F.x=J.chart.divRealWidth}else{if(J.cfg.legendPosition=="bottom"){F.y=P?P:F.y}else{if(typeof J.cfg.legendPosition=="object"){F.x=J.cfg.legendPosition.left;F.y=J.cfg.legendPosition.top}else{F.x=0;F.y=0}}}}else{if(M.style.position=="relative"){F.x=Q?Q:F.x;F.y=P?P:F.y}else{F.x=Q+L.x;F.y=P+L.y}}J.processing.buffer.push([H,AmCharts.extend({},F)]);if(P&&Q){F=G}else{F.y+=P?0:M.offsetHeight}if(M.style.position=="absolute"&&M.getAttribute("class")=="amChartsLegend"){L.y+=M.parentNode.offsetHeight}}D.id=AmCharts.getUniqueId();D.width=J.chart.divRealWidth;D.height=J.chart.divRealHeight;if(J.chart.legend&&J.chart.legend.position=="outside"){if(["left","right"].indexOf(J.cfg.legendPosition)!=-1){D.width+=J.chart.legend.div.offsetWidth}else{if(typeof J.cfg.legendPosition=="object"){D.width+=J.cfg.legendPosition.width;D.height+=J.cfg.legendPosition.height}else{D.height+=J.chart.legend.div.offsetHeight}}}var E={width:false,height:false};if(J.chart.periodSelector){if(["left","right"].indexOf(J.chart.periodSelector.position)!=-1){D.width-=J.chart.periodSelector.div.offsetWidth+16;E.width=true}else{D.height-=J.chart.periodSelector.div.offsetHeight;E.height=true}}if(J.chart.dataSetSelector){if(["left","right"].indexOf(J.chart.dataSetSelector.position)!=-1){if(!E.width){D.width-=J.chart.dataSetSelector.div.offsetWidth+16}}else{D.height-=J.chart.dataSetSelector.div.offsetHeight}}if(K.backgroundColor||K.format=="image/jpeg"){C.fillStyle=K.backgroundColor||"#FFFFFF";C.fillRect(0,0,D.width,D.height)}function B(){var S,R,U,T;if(J.processing.buffer.length==J.processing.drawn||K.format=="svg"){return O()}else{R=J.processing.buffer[J.processing.drawn];T=new XMLSerializer().serializeToString(R[0]);U=R[1];if(K.render=="browser"){S=new Image();S.id=AmCharts.getUniqueId();T="data:image/svg+xml;base64,"+btoa(T);S.onload=function(){C.drawImage(this,R[1].x,R[1].y);J.processing.drawn++;B()};S.onerror=function(){C.drawImage(this,R[1].x,R[1].y);J.processing.drawn++;B()};S.src=T;if(S.complete||typeof (S.complete)=="undefined"||S.complete===undefined){S.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";S.src=T}}else{if(K.render=="canvg"){canvg(D,T,{offsetX:U.x,offsetY:U.y,ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,renderCallback:function(){J.processing.drawn++;B()}})}}}}return B()},generateButtons:function(){var D=this,A=0;var C;if(D.div){C=D.div;C.innerHTML=""}else{C=document.createElement("div"),D.div=C}function B(J){var I=document.createElement("ul");I.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var F=0;F<J.length;F++){var L=document.createElement("li"),G=document.createElement("img"),K=document.createElement("a"),M=J[F],E=null,H=AmCharts.extend(AmCharts.extend({},D.cfg.menuItemStyle),J[F]);M=AmCharts.extend(AmCharts.extend({},D.cfg.menuItemOutput),M);if(M.icon){G.alt="";G.src=M.icon;G.setAttribute("style","margin: 0 auto;border: none;outline: none");if(M.iconTitle){G.title=M.iconTitle}K.appendChild(G)}K.href="#";if(M.title){G.setAttribute("style","margin: 0px 5px;");K.innerHTML+=M.title}K.setAttribute("style","display: block;");AmCharts.extend(K.style,H);K.onclick=M.onclick.bind(K,D,M);L.appendChild(K);if(M.items){E=B(M.items);L.appendChild(E);L.onmouseover=function(){E.style.display="block"};L.onmouseout=function(){E.style.display="none"};E.style.display="none"}I.appendChild(L);K.onmouseover=function(){this.style.backgroundColor=H.rollOverBackgroundColor;this.style.color=H.rollOverColor;this.style.borderColor=H.rollOverBorderColor};K.onmouseout=function(){this.style.backgroundColor=H.backgroundColor;this.style.color=H.color;this.style.borderColor=H.borderColor}}A++;return I}C.setAttribute("style","position: absolute;top:"+D.cfg.menuTop+";right:"+D.cfg.menuRight+";bottom:"+D.cfg.menuBottom+";left:"+D.cfg.menuLeft+";");C.setAttribute("class","amExportButton");C.appendChild(B(D.cfg.menuItems));D.chart.containerDiv.appendChild(C)}});var jsPDF=(function(){if(typeof btoa==="undefined"){window.btoa=function(L){var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Q=H.split(""),G,F,E,P,O,N,M,R,K=0,S=0,J="",I=[],D;do{G=L.charCodeAt(K++);F=L.charCodeAt(K++);E=L.charCodeAt(K++);R=G<<16|F<<8|E;P=R>>18&63;O=R>>12&63;N=R>>6&63;M=R&63;I[S++]=Q[P]+Q[O]+Q[N]+Q[M]}while(K<L.length);J=I.join("");D=L.length%3;return(D?J.slice(0,D-3):J)+"===".slice(D||3)}}if(typeof atob==="undefined"){window.atob=function(K){var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",F,E,D,O,N,M,L,P,J=0,Q=0,H="",I=[];if(!K){return K}K+="";do{O=G.indexOf(K.charAt(J++));N=G.indexOf(K.charAt(J++));M=G.indexOf(K.charAt(J++));L=G.indexOf(K.charAt(J++));P=O<<18|N<<12|M<<6|L;F=P>>16&255;E=P>>8&255;D=P&255;if(M===64){I[Q++]=String.fromCharCode(F)}else{if(L===64){I[Q++]=String.fromCharCode(F,E)}else{I[Q++]=String.fromCharCode(F,E,D)}}}while(J<K.length);H=I.join("");return H}}var C=typeof Object.keys==="function"?function(D){return Object.keys(D).length}:function(D){var E=0,F;for(F in D){if(D.hasOwnProperty(F)){E++}}return E},A=function(D){this.topics={};this.context=D;this.publish=function(H,K){if(this.topics[H]){var I=this.topics[H],M=[],L,G,E,F,J=function(){};K=Array.prototype.slice.call(arguments,1);for(G=0,E=I.length;G<E;G++){F=I[G];L=F[0];if(F[1]){F[0]=J;M.push(G)}L.apply(this.context,K)}for(G=0,E=M.length;G<E;G++){I.splice(M[G],1)}}};this.subscribe=function(E,G,F){if(!this.topics[E]){this.topics[E]=[[G,F]]}else{this.topics[E].push([G,F])}return{topic:E,callback:G}};this.unsubscribe=function(H){if(this.topics[H.topic]){var F=this.topics[H.topic],G,E;for(G=0,E=F.length;G<E;G++){if(F[G][0]===H.callback){F.splice(G,1)}}}}};function B(c,AH,p,y){if(typeof c==="undefined"){c="p"}else{c=c.toString().toLowerCase()}if(typeof AH==="undefined"){AH="mm"}if(typeof p==="undefined"){p="a4"}if(typeof y==="undefined"&&typeof zpipe==="undefined"){y=false}var AU=p.toString().toLowerCase(),AQ="0.9.0rc2",R=[],e=0,AW=y,x="1.3",q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]},AG="0 g",g="0 G",G=0,F=[],L=2,T=false,b=[],AK={},t={},AL=16,D,X=0.200025,J=1.15,Z,a,AM,r={title:"",subject:"",author:"",keywords:"",creator:""},u=0,w=0,s={},f=new A(s),AI,AS,N=function(k){return k.toFixed(2)},M=function(k){return k.toFixed(3)},Y=function(k){var AX=(k).toFixed(0);if(k<10){return"0"+AX}else{return AX}},P=function(k){var AX=(k).toFixed(0);if(AX.length<10){return new Array(11-AX.length).join("0")+AX}else{return AX}},AE=function(k){if(T){F[G].push(k)}else{R.push(k);e+=k.length+1}},U=function(){L++;b[L]=e;AE(L+" 0 obj");return L},m=function(k){AE("stream");AE(k);AE("endstream")},AO,v,AR,AN,AD=function(){AO=a*AM;v=Z*AM;var Ad,Ac,k,AX,AY,Aa,AZ;for(Ad=1;Ad<=G;Ad++){U();AE("<</Type /Page");AE("/Parent 1 0 R");AE("/Resources 2 0 R");AE("/Contents "+(L+1)+" 0 R>>");AE("endobj");Ac=F[Ad].join("\n");U();if(AW){k=[];for(AY=0;AY<Ac.length;++AY){k[AY]=Ac.charCodeAt(AY)}AZ=adler32cs.from(Ac);Aa=new Deflater(6);Aa.append(new Uint8Array(k));Ac=Aa.flush();k=[new Uint8Array([120,156]),new Uint8Array(Ac),new Uint8Array([AZ&255,(AZ>>8)&255,(AZ>>16)&255,(AZ>>24)&255])];Ac="";for(AY in k){if(k.hasOwnProperty(AY)){Ac+=String.fromCharCode.apply(null,k[AY])}}AE("<</Length "+Ac.length+" /Filter [/FlateDecode]>>")}else{AE("<</Length "+Ac.length+">>")}m(Ac);AE("endobj")}b[1]=e;AE("1 0 obj");AE("<</Type /Pages");AR="/Kids [";for(AY=0;AY<G;AY++){AR+=(3+2*AY)+" 0 R "}AE(AR+"]");AE("/Count "+G);AE("/MediaBox [0 0 "+N(AO)+" "+N(v)+"]");AE(">>");AE("endobj")},AA=function(k){k.objectNumber=U();AE("<</BaseFont/"+k.PostScriptName+"/Type/Font");if(typeof k.encoding==="string"){AE("/Encoding/"+k.encoding)}AE("/Subtype/Type1>>");AE("endobj")},l=function(){var k;for(k in AK){if(AK.hasOwnProperty(k)){AA(AK[k])}}},o=function(){f.publish("putXobjectDict")},V=function(){AE("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");AE("/Font <<");var k;for(k in AK){if(AK.hasOwnProperty(k)){AE("/"+k+" "+AK[k].objectNumber+" 0 R")}}AE(">>");AE("/XObject <<");o();AE(">>")},H=function(){l();f.publish("putResources");b[2]=e;AE("2 0 obj");AE("<<");V();AE(">>");AE("endobj");f.publish("postPutResources")},K=function(AY,AX,AZ){var k;if(t[AX]===k){t[AX]={}}t[AX][AZ]=AY},AV={},S=function(k,AZ,Ac,AY){var Aa="F"+(C(AK)+1).toString(10),AX=AK[Aa]={id:Aa,PostScriptName:k,fontName:AZ,fontStyle:Ac,encoding:AY,metadata:{}};K(Aa,AZ,Ac);f.publish("addFont",AX);return Aa},E=function(){var k="helvetica",Ah="times",Aj="courier",Ag="normal",Af="bold",Ae="italic",Ai="bolditalic",AX="StandardEncoding",Aa=[["Helvetica",k,Ag],["Helvetica-Bold",k,Af],["Helvetica-Oblique",k,Ae],["Helvetica-BoldOblique",k,Ai],["Courier",Aj,Ag],["Courier-Bold",Aj,Af],["Courier-Oblique",Aj,Ae],["Courier-BoldOblique",Aj,Ai],["Times-Roman",Ah,Ag],["Times-Bold",Ah,Af],["Times-Italic",Ah,Ae],["Times-BoldItalic",Ah,Ai]],Ad,AY,Ac,AZ;for(Ad=0,AY=Aa.length;Ad<AY;Ad++){Ac=S(Aa[Ad][0],Aa[Ad][1],Aa[Ad][2],AX);AZ=Aa[Ad][0].split("-");K(Ac,AZ[0],AZ[1]||"")}f.publish("addFonts",{fonts:AK,dictionary:t})},Q=function(Ai,AY){var Ae,Ac,Aa,AZ,Ag,Af,AX,Ah,k,Ad;if(AY===Aa){AY={}}AZ=AY.sourceEncoding?AZ:"Unicode";Af=AY.outputEncoding;if((AY.autoencode||Af)&&AK[D].metadata&&AK[D].metadata[AZ]&&AK[D].metadata[AZ].encoding){Ag=AK[D].metadata[AZ].encoding;if(!Af&&AK[D].encoding){Af=AK[D].encoding}if(!Af&&Ag.codePages){Af=Ag.codePages[0]}if(typeof Af==="string"){Af=Ag[Af]}if(Af){Ah=false;AX=[];for(Ae=0,Ac=Ai.length;Ae<Ac;Ae++){k=Af[Ai.charCodeAt(Ae)];if(k){AX.push(String.fromCharCode(k))}else{AX.push(Ai[Ae])}if(AX[Ae].charCodeAt(0)>>8){Ah=true}}Ai=AX.join("")}}Ae=Ai.length;while(Ah===Aa&&Ae!==0){if(Ai.charCodeAt(Ae-1)>>8){Ah=true}Ae--}if(!Ah){return Ai}else{AX=AY.noBOM?[]:[254,255];for(Ae=0,Ac=Ai.length;Ae<Ac;Ae++){k=Ai.charCodeAt(Ae);Ad=k>>8;if(Ad>>8){throw new Error("Character at position "+Ae.toString(10)+" of string '"+Ai+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}AX.push(Ad);AX.push(k-(Ad<<8))}return String.fromCharCode.apply(Aa,AX)}},AC=function(AX,k){return Q(AX,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},AB=function(){AE("/Producer (jsPDF "+AQ+")");if(r.title){AE("/Title ("+AC(r.title)+")")}if(r.subject){AE("/Subject ("+AC(r.subject)+")")}if(r.author){AE("/Author ("+AC(r.author)+")")}if(r.keywords){AE("/Keywords ("+AC(r.keywords)+")")}if(r.creator){AE("/Creator ("+AC(r.creator)+")")}var k=new Date();AE("/CreationDate (D:"+[k.getFullYear(),Y(k.getMonth()+1),Y(k.getDate()),Y(k.getHours()),Y(k.getMinutes()),Y(k.getSeconds())].join("")+")")},z=function(){AE("/Type /Catalog");AE("/Pages 1 0 R");AE("/OpenAction [3 0 R /FitH null]");AE("/PageLayout /OneColumn");f.publish("putCatalog")},I=function(){AE("/Size "+(L+1));AE("/Root "+L+" 0 R");AE("/Info "+(L-1)+" 0 R")},AT=function(){G++;T=true;F[G]=[]},AJ=function(){AT();AE(N(X*AM)+" w");AE(g);if(u!==0){AE(u.toString(10)+" J")}if(w!==0){AE(w.toString(10)+" j")}f.publish("addPage",{pageNumber:G})},W=function(AY,Aa){var k,AX;if(AY===AX){AY=AK[D].fontName}if(Aa===AX){Aa=AK[D].fontStyle}try{k=t[AY][Aa]}catch(AZ){k=AX}if(!k){throw new Error("Unable to look up font label for font '"+AY+"', '"+Aa+"'. Refer to getFontList() for available fonts.")}return k},O=function(){T=false;R=[];b=[];AE("%PDF-"+x);AD();H();U();AE("<<");AB();AE(">>");AE("endobj");U();AE("<<");z();AE(">>");AE("endobj");var AX=e,k;AE("xref");AE("0 "+(L+1));AE("0000000000 65535 f ");for(k=1;k<=L;k++){AE(P(b[k])+" 00000 n ")}AE("trailer");AE("<<");I();AE(">>");AE("startxref");AE(AX);AE("%%EOF");T=true;return R.join("\n")},AF=function(k){var AX="S";if(k==="F"){AX="f"}else{if(k==="FD"||k==="DF"){AX="B"}}return AX},h=function(Aa,AX){var AZ,Ad,Ac,Ae,AY,k;switch(Aa){case AZ:return O();case"save":if(navigator.getUserMedia){if(window.URL===undefined){return s.output("dataurlnewwindow")}else{if(window.URL.createObjectURL===undefined){return s.output("dataurlnewwindow")}}}Ad=O();Ac=Ad.length;Ae=new Uint8Array(new ArrayBuffer(Ac));for(AY=0;AY<Ac;AY++){Ae[AY]=Ad.charCodeAt(AY)}k=new Blob([Ae],{type:"application/pdf"});saveAs(k,AX);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(O());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(O());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(O()));break;default:throw new Error('Output type "'+Aa+'" is not supported.')}};if(AH==="pt"){AM=1}else{if(AH==="mm"){AM=72/25.4}else{if(AH==="cm"){AM=72/2.54}else{if(AH==="in"){AM=72}else{throw ("Invalid unit: "+AH)}}}}if(q.hasOwnProperty(AU)){Z=q[AU][1]/AM;a=q[AU][0]/AM}else{try{Z=p[1];a=p[0]}catch(AP){throw ("Invalid format: "+p)}}if(c==="p"||c==="portrait"){c="p";if(a>Z){AI=a;a=Z;Z=AI}}else{if(c==="l"||c==="landscape"){c="l";if(Z>a){AI=a;a=Z;Z=AI}}else{throw ("Invalid orientation: "+c)}}s.internal={pdfEscape:AC,getStyle:AF,getFont:function(){return AK[W.apply(s,arguments)]},getFontSize:function(){return AL},getLineHeight:function(){return AL*J},btoa:btoa,write:function(k,AZ,AY,AX){AE(arguments.length===1?k:Array.prototype.join.call(arguments," "))},getCoordinateString:function(k){return N(k*AM)},getVerticalCoordinateString:function(k){return N((Z-k)*AM)},collections:{},newObject:U,putStream:m,events:f,scaleFactor:AM,pageSize:{width:a,height:Z},output:function(AX,k){return h(AX,k)},getNumberOfPages:function(){return F.length-1},pages:F};s.addPage=function(){AJ();return this};s.text=function(Ah,Ag,Ae,AX){var AY,Ac,Aa,Af,k,Ad,AZ;if(typeof Ah==="number"){Ac=Ae;Aa=Ah;Af=Ag;Ah=Ac;Ag=Aa;Ae=Af}if(typeof Ah==="string"&&Ah.match(/[\n\r]/)){Ah=Ah.split(/\r\n|\r|\n/g)}if(typeof AX==="undefined"){AX={noBOM:true,autoencode:true}}else{if(AX.noBOM===AY){AX.noBOM=true}if(AX.autoencode===AY){AX.autoencode=true}}if(typeof Ah==="string"){Ad=AC(Ah,AX)}else{if(Ah instanceof Array){k=Ah.concat();for(AZ=k.length-1;AZ!==-1;AZ--){k[AZ]=AC(k[AZ],AX)}Ad=k.join(") Tj\nT* (")}else{throw new Error('Type of text must be string or Array. "'+Ah+'" is not recognized.')}}AE("BT\n/"+D+" "+AL+" Tf\n"+(AL*J)+" TL\n"+AG+"\n"+N(Ag*AM)+" "+N((Z-Ae)*AM)+" Td\n("+Ad+") Tj\nET");return this};s.line=function(AX,AZ,k,AY){AE(N(AX*AM)+" "+N((Z-AZ)*AM)+" m "+N(k*AM)+" "+N((Z-AY)*AM)+" l S");return this};s.lines=function(k,Ai,Ah,Ar,An,Ac){var AZ,Ap,Af,Ag,Ae,Ad,Am,Aj,Aq,Ao,Aa,Al,AY,Ak,AX;if(typeof k==="number"){Ap=Ah;Af=k;Ag=Ai;k=Ap;Ai=Af;Ah=Ag}An=AF(An);Ar=Ar===AZ?[1,1]:Ar;AE(M(Ai*AM)+" "+M((Z-Ah)*AM)+" m ");Ae=Ar[0];Ad=Ar[1];Aj=k.length;Ak=Ai;AX=Ah;for(Am=0;Am<Aj;Am++){Aq=k[Am];if(Aq.length===2){Ak=Aq[0]*Ae+Ak;AX=Aq[1]*Ad+AX;AE(M(Ak*AM)+" "+M((Z-AX)*AM)+" l")}else{Ao=Aq[0]*Ae+Ak;Aa=Aq[1]*Ad+AX;Al=Aq[2]*Ae+Ak;AY=Aq[3]*Ad+AX;Ak=Aq[4]*Ae+Ak;AX=Aq[5]*Ad+AX;AE(M(Ao*AM)+" "+M((Z-Aa)*AM)+" "+M(Al*AM)+" "+M((Z-AY)*AM)+" "+M(Ak*AM)+" "+M((Z-AX)*AM)+" c")}}if(Ac==true){AE(" h")}AE(An);return this};s.rect=function(k,Ac,AX,AZ,AY){var Aa=AF(AY);AE([N(k*AM),N((Z-Ac)*AM),N(AX*AM),N(-AZ*AM),"re",Aa].join(" "));return this};s.triangle=function(AZ,Ad,AX,Aa,k,AY,Ac){this.lines([[AX-AZ,Aa-Ad],[k-AX,AY-Aa],[AZ-k,Ad-AY]],AZ,Ad,[1,1],Ac,true);return this};s.roundedRect=function(AX,Ae,AY,Aa,Ad,Ac,AZ){var k=4/3*(Math.SQRT2-1);this.lines([[(AY-2*Ad),0],[(Ad*k),0,Ad,Ac-(Ac*k),Ad,Ac],[0,(Aa-2*Ac)],[0,(Ac*k),-(Ad*k),Ac,-Ad,Ac],[(-AY+2*Ad),0],[-(Ad*k),0,-Ad,-(Ac*k),-Ad,-Ac],[0,(-Aa+2*Ac)],[0,-(Ac*k),(Ad*k),-Ac,Ad,-Ac]],AX+Ad,Ae,[1,1],AZ);return this};s.ellipse=function(k,Ae,Ac,Aa,AX){var Ad=AF(AX),AZ=4/3*(Math.SQRT2-1)*Ac,AY=4/3*(Math.SQRT2-1)*Aa;AE([N((k+Ac)*AM),N((Z-Ae)*AM),"m",N((k+Ac)*AM),N((Z-(Ae-AY))*AM),N((k+AZ)*AM),N((Z-(Ae-Aa))*AM),N(k*AM),N((Z-(Ae-Aa))*AM),"c"].join(" "));AE([N((k-AZ)*AM),N((Z-(Ae-Aa))*AM),N((k-Ac)*AM),N((Z-(Ae-AY))*AM),N((k-Ac)*AM),N((Z-Ae)*AM),"c"].join(" "));AE([N((k-Ac)*AM),N((Z-(Ae+AY))*AM),N((k-AZ)*AM),N((Z-(Ae+Aa))*AM),N(k*AM),N((Z-(Ae+Aa))*AM),"c"].join(" "));AE([N((k+AZ)*AM),N((Z-(Ae+Aa))*AM),N((k+Ac)*AM),N((Z-(Ae+AY))*AM),N((k+Ac)*AM),N((Z-Ae)*AM),"c",Ad].join(" "));return this};s.circle=function(k,AZ,AY,AX){return this.ellipse(k,AZ,AY,AY,AX)};s.setProperties=function(k){var AX;for(AX in r){if(r.hasOwnProperty(AX)&&k[AX]){r[AX]=k[AX]}}return this};s.setFontSize=function(k){AL=k;return this};s.setFont=function(k,AX){D=W(k,AX);return this};s.setFontStyle=s.setFontType=function(AX){var k;D=W(k,AX);return this};s.getFontList=function(){var AY={},AX,AZ,k;for(AX in t){if(t.hasOwnProperty(AX)){AY[AX]=k=[];for(AZ in t[AX]){if(t[AX].hasOwnProperty(AZ)){k.push(AZ)}}}}return AY};s.setLineWidth=function(k){AE((k*AM).toFixed(2)+" w");return this};s.setDrawColor=function(Aa,AZ,AY,k){var AX;if(AZ===undefined||(k===undefined&&Aa===AZ===AY)){if(typeof Aa==="string"){AX=Aa+" G"}else{AX=N(Aa/255)+" G"}}else{if(k===undefined){if(typeof Aa==="string"){AX=[Aa,AZ,AY,"RG"].join(" ")}else{AX=[N(Aa/255),N(AZ/255),N(AY/255),"RG"].join(" ")}}else{if(typeof Aa==="string"){AX=[Aa,AZ,AY,k,"K"].join(" ")}else{AX=[N(Aa),N(AZ),N(AY),N(k),"K"].join(" ")}}}AE(AX);return this};s.setFillColor=function(Aa,AZ,AY,k){var AX;if(AZ===undefined||(k===undefined&&Aa===AZ===AY)){if(typeof Aa==="string"){AX=Aa+" g"}else{AX=N(Aa/255)+" g"}}else{if(k===undefined){if(typeof Aa==="string"){AX=[Aa,AZ,AY,"rg"].join(" ")}else{AX=[N(Aa/255),N(AZ/255),N(AY/255),"rg"].join(" ")}}else{if(typeof Aa==="string"){AX=[Aa,AZ,AY,k,"k"].join(" ")}else{AX=[N(Aa),N(AZ),N(AY),N(k),"k"].join(" ")}}}AE(AX);return this};s.setTextColor=function(AZ,AY,k){var Ac=/#[0-9A-Fa-f]{6}/;if((typeof AZ=="string")&&Ac.test(AZ)){var AX=AZ.replace("#","");var Aa=parseInt(AX,16);AZ=(Aa>>16)&255;AY=(Aa>>8)&255;k=Aa&255}if((AZ===0&&AY===0&&k===0)||(typeof AY==="undefined")){AG=M(AZ/255)+" g"}else{AG=[M(AZ/255),M(AY/255),M(k/255),"rg"].join(" ")}return this};s.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};s.setLineCap=function(k){var AX=this.CapJoinStyles[k];if(AX===undefined){throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}u=AX;AE(AX.toString(10)+" J");return this};s.setLineJoin=function(k){var AX=this.CapJoinStyles[k];if(AX===undefined){throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}w=AX;AE(AX.toString(10)+" j");return this};s.output=h;s.save=function(k){s.output("save",k)};for(AS in B.API){if(B.API.hasOwnProperty(AS)){if(AS==="events"&&B.API.events.length){(function(AY,Aa){var AZ,AX,k;for(k=Aa.length-1;k!==-1;k--){AZ=Aa[k][0];AX=Aa[k][1];AY.subscribe.apply(AY,[AZ].concat(typeof AX==="function"?[AX]:AX))}}(f,B.API.events))}else{s[AS]=B.API[AS]}}}E();D="F1";AJ();f.publish("initialized");return s}B.API={events:[]};return B}());(function(F){var C="addImage_";var E=function(L){var K,H;if(!L.charCodeAt(0)===255||!L.charCodeAt(1)===216||!L.charCodeAt(2)===255||!L.charCodeAt(3)===224||!L.charCodeAt(6)==="J".charCodeAt(0)||!L.charCodeAt(7)==="F".charCodeAt(0)||!L.charCodeAt(8)==="I".charCodeAt(0)||!L.charCodeAt(9)==="F".charCodeAt(0)||!L.charCodeAt(10)===0){throw new Error("getJpegSize requires a binary jpeg file")}var I=L.charCodeAt(4)*256+L.charCodeAt(5);var J=4,G=L.length;while(J<G){J+=I;if(L.charCodeAt(J)!==255){throw new Error("getJpegSize could not find the size of the image")}if(L.charCodeAt(J+1)===192||L.charCodeAt(J+1)===193||L.charCodeAt(J+1)===194||L.charCodeAt(J+1)===195||L.charCodeAt(J+1)===196||L.charCodeAt(J+1)===197||L.charCodeAt(J+1)===198||L.charCodeAt(J+1)===199){H=L.charCodeAt(J+5)*256+L.charCodeAt(J+6);K=L.charCodeAt(J+7)*256+L.charCodeAt(J+8);return[K,H]}else{J+=2;I=L.charCodeAt(J)*256+L.charCodeAt(J+1)}}},B=function(G){var L=this.internal.newObject(),H=this.internal.write,K=this.internal.putStream;G.n=L;H("<</Type /XObject");H("/Subtype /Image");H("/Width "+G.w);H("/Height "+G.h);if(G.cs==="Indexed"){H("/ColorSpace [/Indexed /DeviceRGB "+(G.pal.length/3-1)+" "+(L+1)+" 0 R]")}else{H("/ColorSpace /"+G.cs);if(G.cs==="DeviceCMYK"){H("/Decode [1 0 1 0 1 0 1 0]")}}H("/BitsPerComponent "+G.bpc);if("f" in G){H("/Filter /"+G.f)}if("dp" in G){H("/DecodeParms <<"+G.dp+">>")}if("trns" in G&&G.trns.constructor==Array){var J="";for(var I=0;I<G.trns.length;I++){J+=(G[J][I]+" "+G.trns[I]+" ");H("/Mask ["+J+"]")}}if("smask" in G){H("/SMask "+(L+1)+" 0 R")}H("/Length "+G.data.length+">>");K(G.data);H("endobj")},D=function(){var G=this.internal.collections[C+"images"];for(var H in G){B.call(this,G[H])}},A=function(){var G=this.internal.collections[C+"images"],H=this.internal.write,J;for(var I in G){J=G[I];H("/I"+J.i,J.n,"0","R")}};F.addImage=function(G,R,P,O,S,K){if(typeof G==="object"&&G.nodeType===1){var I=document.createElement("canvas");I.width=G.clientWidth;I.height=G.clientHeight;var T=I.getContext("2d");if(!T){throw ("addImage requires canvas to be supported by browser.")}T.drawImage(G,0,0,I.width,I.height);G=I.toDataURL("image/jpeg");R="JPEG"}if(R.toUpperCase()!=="JPEG"){throw new Error("addImage currently only supports format 'JPEG', not '"+R+"'")}var H,M=this.internal.collections[C+"images"],L=this.internal.getCoordinateString,N=this.internal.getVerticalCoordinateString;if(G.substring(0,23)==="data:image/jpeg;base64,"){G=atob(G.replace("data:image/jpeg;base64,",""))}if(M){H=Object.keys?Object.keys(M).length:(function(W){var U=0;for(var V in W){if(W.hasOwnProperty(V)){U++}}return U})(M)}else{H=0;this.internal.collections[C+"images"]=M={};this.internal.events.subscribe("putResources",D);this.internal.events.subscribe("putXobjectDict",A)}var Q=E(G);var J={w:Q[0],h:Q[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:H,data:G};M[H]=J;if(!S&&!K){S=-96;K=-96}if(S<0){S=(-1)*J.w*72/S/this.internal.scaleFactor}if(K<0){K=(-1)*J.h*72/K/this.internal.scaleFactor}if(S===0){S=K*J.w/J.h}if(K===0){K=S*J.h/J.w}this.internal.write("q",L(S),"0 0",L(K),L(P),N(O+K),"cm /I"+J.i,"Do Q");return this}})(jsPDF.API);if(AmCharts.isModern){var saveAs=saveAs||(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator))||(function(H){var R=H.document,L=function(){return H.URL||H.webkitURL||H},E=H.URL||H.webkitURL||H,N=R.createElementNS("http://www.w3.org/1999/xhtml","a"),G=!H.externalHost&&"download" in N,J=function(T){var S=R.createEvent("MouseEvents");S.initMouseEvent("click",true,false,H,0,0,0,0,0,false,false,false,false,0,null);T.dispatchEvent(S)},O=H.webkitRequestFileSystem,P=H.requestFileSystem||O||H.mozRequestFileSystem,M=function(S){(H.setImmediate||H.setTimeout)(function(){throw S},0)},C="application/octet-stream",K=0,B=[],I=function(){var T=B.length;while(T--){var S=B[T];if(typeof S==="string"){E.revokeObjectURL(S)}else{S.remove()}}B.length=0},Q=function(T,S,W){S=[].concat(S);var V=S.length;while(V--){var X=T["on"+S[V]];if(typeof X==="function"){try{X.call(T,W||T)}catch(U){M(U)}}}},F=function(T,V){var W=this,c=T.type,g=false,Y,X,S=function(){var h=L().createObjectURL(T);B.push(h);return h},b=function(){Q(W,"writestart progress write writeend".split(" "))},f=function(){if(g||!Y){Y=S(T)}if(X){X.location.href=Y}else{window.open(Y,"_blank")}W.readyState=W.DONE;b()},a=function(h){return function(){if(W.readyState!==W.DONE){return h.apply(this,arguments)}}},Z={create:true,exclusive:false},e;W.readyState=W.INIT;if(!V){V="download"}if(G){Y=S(T);R=H.document;N=R.createElementNS("http://www.w3.org/1999/xhtml","a");N.href=Y;N.download=V;var U=R.createEvent("MouseEvents");U.initMouseEvent("click",true,false,H,0,0,0,0,0,false,false,false,false,0,null);N.dispatchEvent(U);W.readyState=W.DONE;b();return }if(H.chrome&&c&&c!==C){e=T.slice||T.webkitSlice;T=e.call(T,0,T.size,C);g=true}if(O&&V!=="download"){V+=".download"}if(c===C||O){X=H}if(!P){f();return }K+=T.size;P(H.TEMPORARY,K,a(function(h){h.root.getDirectory("saved",Z,a(function(k){var l=function(){k.getFile(V,Z,a(function(m){m.createWriter(a(function(o){o.onwriteend=function(p){X.location.href=m.toURL();B.push(m);W.readyState=W.DONE;Q(W,"writeend",p)};o.onerror=function(){var p=o.error;if(p.code!==p.ABORT_ERR){f()}};"writestart progress write abort".split(" ").forEach(function(p){o["on"+p]=W["on"+p]});o.write(T);W.abort=function(){o.abort();W.readyState=W.DONE};W.readyState=W.WRITING}),f)}),f)};k.getFile(V,{create:false},a(function(m){m.remove();l()}),a(function(m){if(m.code===m.NOT_FOUND_ERR){l()}else{f()}}))}),f)}),f)},D=F.prototype,A=function(S,T){return new F(S,T)};D.abort=function(){var S=this;S.readyState=S.DONE;Q(S,"abort")};D.readyState=D.INIT=0;D.WRITING=1;D.DONE=2;D.error=D.onwritestart=D.onprogress=D.onwrite=D.onabort=D.onerror=D.onwriteend=null;H.addEventListener("unload",I,false);return A}(this.self||this.window||this.content));if(typeof module!=="undefined"){module.exports=saveAs}}AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(B){this.type="serial";AmCharts.AmSerialChart.base.construct.call(this,B);this.cname="AmSerialChart";this.theme=B;this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=0.8;this.updateScrollbar=!0;var A=new AmCharts.CategoryAxis(B);A.chart=this;this.categoryAxis=A;this.zoomOutOnDataUpdate=!0;this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1;this.minSelectedTime=0;AmCharts.applyTheme(this,B,this.cname)},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this);this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis");this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var B=this.chartCursor;B&&(B.updateData(),B.fullWidth&&(B.fullRectSet=this.cursorLineSet));var B=this.countColumns(),A=this.graphs,C;for(C=0;C<A.length;C++){A[C].columnCount=B}this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(I,H){if(!this.wheelBusy){var F=this.categoryAxis,G=F.parseDates,E=F.minDuration(),D=F=1;this.mouseWheelZoomEnabled?H||(F=-1):H&&(F=-1);var B=this.chartData.length,A=this.lastTime,C=this.firstTime;0>I?G?(B=this.endTime-this.startTime,G=this.startTime+F*E,E=this.endTime+D*E,0<D&&0<F&&E>=A&&(E=A,G=A-B),this.zoomToDates(new Date(G),new Date(E))):(0<D&&0<F&&this.end>=B-1&&(F=D=0),G=this.start+F,E=this.end+D,this.zoomToIndexes(G,E)):G?(B=this.endTime-this.startTime,G=this.startTime-F*E,E=this.endTime-D*E,0<D&&0<F&&G<=C&&(G=C,E=C+B),this.zoomToDates(new Date(G),new Date(E))):(0<D&&0<F&&1>this.start&&(F=D=0),G=this.start-F,E=this.end-D,this.zoomToIndexes(G,E))}},validateData:function(A){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!A&&(this.endTime=this.end=this.startTime=this.start=NaN);AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var B=this.chartData;if(AmCharts.ifArray(B)){var A=this.chartScrollbar;A&&A.draw();if(0<this.realWidth&&0<this.realHeight){var B=B.length-1,C,A=this.categoryAxis;if(A.parseDates&&!A.equalSpacing){if(A=this.startTime,C=this.endTime,isNaN(A)||isNaN(C)){A=this.firstTime,C=this.lastTime}}else{if(A=this.start,C=this.end,isNaN(A)||isNaN(C)){A=0,C=B}}this.endTime=this.startTime=this.end=this.start=void 0;this.zoom(A,C)}}else{this.cleanChart()}this.dispDUpd();this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(B,A,C){B.chart=this;B.id=C;B.rotate=A;B.axisRenderer=AmCharts.RecAxis;B.guideFillRenderer=AmCharts.RecFill;B.axisItemRenderer=AmCharts.RecItem;B.setOrientation(!this.rotate);B.x=this.marginLeftReal;B.y=this.marginTopReal;B.dx=this.dx;B.dy=this.dy;B.width=this.plotAreaWidth-1;B.height=this.plotAreaHeight-1;B.viW=this.plotAreaWidth-1;B.viH=this.plotAreaHeight-1;B.viX=this.marginLeftReal;B.viY=this.marginTopReal;B.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var B=this.valueAxes,A;for(A=0;A<B.length;A++){var C=B[A],D=this.rotate;C.rotate=D;C.setOrientation(D);D=this.categoryAxis;if(!D.startOnAxis||D.parseDates){C.expandMinMax=!0}}},updateData:function(){this.parseData();var B=this.graphs,A,C=this.chartData;for(A=0;A<B.length;A++){B[A].data=C}0<C.length&&(this.firstTime=this.getStartTime(C[0].time),this.lastTime=this.getEndTime(C[C.length-1].time))},getStartTime:function(B){var A=this.categoryAxis;return AmCharts.resetDateToMin(new Date(B),A.minPeriod,1,A.firstDayOfWeek).getTime()},getEndTime:function(B){var A=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(B),A.period,A.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var A=this.chartScrollbar;A&&(this.getScrollbarPosition(A,this.rotate,this.categoryAxis.position),this.adjustMargins(A,this.rotate))},updateScrollbars:function(){AmCharts.AmSerialChart.base.updateScrollbars.call(this);this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(B,A){var C=this.categoryAxis;C.parseDates&&!C.equalSpacing?this.timeZoom(B,A):this.indexZoom(B,A);this.updateLegendValues()},timeZoom:function(B,A){var F=this.maxSelectedTime;isNaN(F)||(A!=this.endTime&&A-B>F&&(B=A-F,this.updateScrollbar=!0),B!=this.startTime&&A-B>F&&(A=B+F,this.updateScrollbar=!0));var H=this.minSelectedTime;if(0<H&&A-B<H){var E=Math.round(B+(A-B)/2),H=Math.round(H/2);B=E-H;A=E+H}var D=this.chartData,E=this.categoryAxis;if(AmCharts.ifArray(D)&&(B!=this.startTime||A!=this.endTime)){var C=E.minDuration(),H=this.firstTime,G=this.lastTime;B||(B=H,isNaN(F)||(B=G-F));A||(A=G);B>G&&(B=G);A<H&&(A=H);B<H&&(B=H);A>G&&(A=G);A<B&&(A=B+C);A-B<C/5&&(A<G?A=B+C/5:B=A-C/5);this.startTime=B;this.endTime=A;F=D.length-1;C=this.getClosestIndex(D,"time",B,!0,0,F);D=this.getClosestIndex(D,"time",A,!1,C,F);E.timeZoom(B,A);E.zoom(C,D);this.start=AmCharts.fitToBounds(C,0,F);this.end=AmCharts.fitToBounds(D,0,F);this.zoomAxesAndGraphs();this.zoomScrollbar();B!=H||A!=G?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},indexZoom:function(B,A){var C=this.maxSelectedSeries;isNaN(C)||(A!=this.end&&A-B>C&&(B=A-C,this.updateScrollbar=!0),B!=this.start&&A-B>C&&(A=B+C,this.updateScrollbar=!0));if(B!=this.start||A!=this.end){var D=this.chartData.length-1;isNaN(B)&&(B=0,isNaN(C)||(B=D-C));isNaN(A)&&(A=D);A<B&&(A=B);A>D&&(A=D);B>D&&(B=D-1);0>B&&(B=0);this.start=B;this.end=A;this.categoryAxis.zoom(B,A);this.zoomAxesAndGraphs();this.zoomScrollbar();0!==B||A!=this.chartData.length-1?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var B=this.graphs,A;for(A=0;A<B.length;A++){var C=B[A];C.columnWidthReal=this.columnWidth;C.categoryAxis=this.categoryAxis;AmCharts.isString(C.fillToGraph)&&(C.fillToGraph=this.getGraphById(C.fillToGraph))}},updateColumnsDepth:function(){var B,A=this.graphs,D;AmCharts.remove(this.columnsSet);this.columnsArray=[];for(B=0;B<A.length;B++){D=A[B];var E=D.columnsArray;if(E){var C;for(C=0;C<E.length;C++){this.columnsArray.push(E[C])}}}this.columnsArray.sort(this.compareDepth);if(0<this.columnsArray.length){A=this.container.set();this.columnSet.push(A);for(B=0;B<this.columnsArray.length;B++){A.push(this.columnsArray[B].column.set)}D&&A.translate(D.x,D.y);this.columnsSet=A}},compareDepth:function(B,A){return B.depth>A.depth?1:-1},zoomScrollbar:function(){var B=this.chartScrollbar,A=this.categoryAxis;B&&this.updateScrollbar&&(B.dragger.stop(),A.parseDates&&!A.equalSpacing?B.timeZoom(this.startTime,this.endTime):B.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var B=this.trendLines,A;for(A=0;A<B.length;A++){var C=B[A],C=AmCharts.processObject(C,AmCharts.TrendLine,this.theme);B[A]=C;C.chart=this;C.id||(C.id="trendLineAuto"+A+"_"+(new Date).getTime());AmCharts.isString(C.valueAxis)&&(C.valueAxis=this.getValueAxisById(C.valueAxis));C.valueAxis||(C.valueAxis=this.valueAxes[0]);C.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var B=this.valueAxes,A;for(A=0;A<B.length;A++){B[A].zoom(this.start,this.end)}B=this.graphs;for(A=0;A<B.length;A++){B[A].zoom(this.start,this.end)}this.zoomTrendLines();(A=this.chartCursor)&&A.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var I=0,H=this.valueAxes.length,F=this.graphs.length,G,E,D=!1,B,A;for(A=0;A<H;A++){E=this.valueAxes[A];var C=E.stackType;if("100%"==C||"regular"==C){for(D=!1,B=0;B<F;B++){G=this.graphs[B],G.tcc=1,G.valueAxis==E&&"column"==G.type&&(!D&&G.stackable&&(I++,D=!0),(!G.stackable&&G.clustered||G.newStack)&&I++,G.columnIndex=I-1,G.clustered||(G.columnIndex=0))}}if("none"==C||"3d"==C){D=!1;for(B=0;B<F;B++){G=this.graphs[B],G.valueAxis==E&&"column"==G.type&&(G.clustered?(G.tcc=1,G.newStack&&(I=0),G.hidden||(G.columnIndex=I,I++)):G.hidden||(D=!0,G.tcc=1,G.columnIndex=0))}D&&0==I&&(I=1)}if("3d"==C){E=1;for(A=0;A<F;A++){G=this.graphs[A],G.newStack&&E++,G.depthCount=E,G.tcc=I}I=E}}return I},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this);this.parseSerialData()},getCategoryIndexByValue:function(B){var A=this.chartData,C,D;for(D=0;D<A.length;D++){A[D].category==B&&(C=D)}return C},handleCursorChange:function(A){this.updateLegendValues(A.index)},handleCursorZoom:function(A){this.updateScrollbar=!0;this.zoom(A.start,A.end)},handleScrollbarZoom:function(A){this.updateScrollbar=!1;this.zoom(A.start,A.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var B={type:"zoomed"};B.startDate=new Date(this.startTime);B.endDate=new Date(this.endTime);B.startIndex=this.start;B.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=B.startDate;this.endDate=B.endDate;this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var A=this.categoryAxis,C=AmCharts.extractPeriod(A.minPeriod).period,A=A.dateFormatsObject[C];B.startValue=AmCharts.formatDate(B.startDate,A,this);B.endValue=AmCharts.formatDate(B.endDate,A,this);B.chart=this;B.target=this;this.fire(B.type,B)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start;this.endIndex=this.end;var B=this.chartData;if(AmCharts.ifArray(B)&&!isNaN(this.start)&&!isNaN(this.end)){var A={chart:this,target:this,type:"zoomed"};A.startIndex=this.start;A.endIndex=this.end;A.startValue=B[this.start].category;A.endValue=B[this.end].category;this.categoryAxis.parseDates&&(this.startTime=B[this.start].time,this.endTime=B[this.end].time,A.startDate=new Date(this.startTime),A.endDate=new Date(this.endTime));this.prevStartIndex=this.start;this.prevEndIndex=this.end;this.fire(A.type,A)}}},updateLegendValues:function(B){var A=this.graphs,C;for(C=0;C<A.length;C++){var D=A[C];isNaN(B)?D.currentDataItem=void 0:D.currentDataItem=this.chartData[B].axes[D.valueAxis.id].graphs[D.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(B,A,F,H,E,D){0>E&&(E=0);D>B.length-1&&(D=B.length-1);var C=E+Math.round((D-E)/2),G=B[C][A];if(1>=D-E){if(H){return E}H=B[D][A];return Math.abs(B[E][A]-F)<Math.abs(H-F)?E:D}return F==G?C:F<G?this.getClosestIndex(B,A,F,H,E,C):this.getClosestIndex(B,A,F,H,C,D)},zoomToIndexes:function(B,A){this.updateScrollbar=!0;var C=this.chartData;if(C){var D=C.length;0<D&&(0>B&&(B=0),A>D-1&&(A=D-1),D=this.categoryAxis,D.parseDates&&!D.equalSpacing?this.zoom(C[B].time,this.getEndTime(C[A].time)):this.zoom(B,A))}},zoomToDates:function(B,A){this.updateScrollbar=!0;var C=this.chartData;if(this.categoryAxis.equalSpacing){var D=this.getClosestIndex(C,"time",B.getTime(),!0,0,C.length);A=AmCharts.resetDateToMin(A,this.categoryAxis.minPeriod,1);C=this.getClosestIndex(C,"time",A.getTime(),!1,0,C.length);this.zoom(D,C)}else{this.zoom(B.getTime(),A.getTime())}},zoomToCategoryValues:function(B,A){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(B),this.getCategoryIndexByValue(A))},formatPeriodString:function(AD,AC){if(AC){var AA=["value","open","low","high","close"],AB="value open low high close average sum count".split(" "),s=AC.valueAxis,o=this.chartData,Y=AC.numberFormatter;Y||(Y=this.nf);for(var U=0;U<AA.length;U++){for(var Z=AA[U],X=0,W=0,V,L,I,M,T,H=0,P=0,S,R,J,G,O,N=this.start;N<=this.end;N++){var E=o[N];if(E&&(E=E.axes[s.id].graphs[AC.id])){if(E.values){var Q=E.values[Z];if(this.rotate){if(0>E.x||E.x>E.graph.height){Q=NaN}}else{if(0>E.x||E.x>E.graph.width){Q=NaN}}if(!isNaN(Q)){isNaN(V)&&(V=Q);L=Q;if(isNaN(I)||I>Q){I=Q}if(isNaN(M)||M<Q){M=Q}T=AmCharts.getDecimals(X);var K=AmCharts.getDecimals(Q),X=X+Q,X=AmCharts.roundTo(X,Math.max(T,K));W++;T=X/W}}if(E.percents&&(E=E.percents[Z],!isNaN(E))){isNaN(S)&&(S=E);R=E;if(isNaN(J)||J>E){J=E}if(isNaN(G)||G<E){G=E}O=AmCharts.getDecimals(H);Q=AmCharts.getDecimals(E);H+=E;H=AmCharts.roundTo(H,Math.max(O,Q));P++;O=H/P}}}H={open:S,close:R,high:G,low:J,average:O,sum:H,count:P};AD=AmCharts.formatValue(AD,{open:V,close:L,high:M,low:I,average:T,sum:X,count:W},AB,Y,Z+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);AD=AmCharts.formatValue(AD,H,AB,this.pf,"percents\\."+Z+"\\.")}}return AD=AmCharts.cleanFromEmpty(AD)},formatString:function(B,A,F){var G=A.graph;if(-1!=B.indexOf("[[category]]")){var E=A.serialDataItem.category;if(this.categoryAxis.parseDates){var D=this.balloonDateFormat,C=this.chartCursor;C&&(D=C.categoryBalloonDateFormat);-1!=B.indexOf("[[category]]")&&(D=AmCharts.formatDate(E,D,this),-1!=D.indexOf("fff")&&(D=AmCharts.formatMilliseconds(D,E)),E=D)}B=B.replace(/\[\[category\]\]/g,String(E))}G=G.numberFormatter;G||(G=this.nf);E=A.graph.valueAxis;(D=E.duration)&&!isNaN(A.values.value)&&(E=AmCharts.formatDuration(A.values.value,D,"",E.durationUnits,E.maxInterval,G),B=B.replace(RegExp("\\[\\[value\\]\\]","g"),E));E="value open low high close total".split(" ");D=this.pf;B=AmCharts.formatValue(B,A.percents,E,D,"percents\\.");B=AmCharts.formatValue(B,A.values,E,G,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);B=AmCharts.formatValue(B,A.values,["percents"],D);-1!=B.indexOf("[[")&&(B=AmCharts.formatDataContextValue(B,A.dataContext));return B=AmCharts.AmSerialChart.base.formatString.call(this,B,A,F)},addChartScrollbar:function(A){AmCharts.callMethod("destroy",[this.chartScrollbar]);A&&(A.chart=this,this.listenTo(A,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===A.width&&(A.width=A.scrollbarHeight):void 0===A.height&&(A.height=A.scrollbarHeight);this.chartScrollbar=A},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]);this.chartScrollbar=null},handleReleaseOutside:function(A){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,A);AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}});AmCharts.Cuboid=AmCharts.Class({construct:function(N,L,J,K,I,H,F,B,G,E,D,C,P,O,Q,A,M){this.set=N.set();this.container=N;this.h=Math.round(J);this.w=Math.round(L);this.dx=K;this.dy=I;this.colors=H;this.alpha=F;this.bwidth=B;this.bcolor=G;this.balpha=E;this.dashLength=O;this.topRadius=A;this.pattern=Q;this.rotate=P;this.bcn=M;P?0>L&&0===D&&(D=180):0>J&&270==D&&(D=90);this.gradientRotation=D;0===K&&0===I&&(this.cornerRadius=C);this.draw()},draw:function(){var AZ=this.set;AZ.clear();var AY=this.container,AW=AY.chart,AX=this.w,AV=this.h,AU=this.dx,AS=this.dy,AO=this.colors,AT=this.alpha,AR=this.bwidth,AQ=this.bcolor,AP=this.balpha,AJ=this.gradientRotation,AH=this.cornerRadius,AK=this.dashLength,AN=this.pattern,AG=this.topRadius,AL=this.bcn,AD=AO,AM=AO;"object"==typeof AO&&(AD=AO[0],AM=AO[AO.length-1]);var AI,AF,AB,AA,AE,AC,o,V,U,Q=AT;AN&&(AT=0);var s,Z,Y,X,W=this.rotate;if(0<Math.abs(AU)||0<Math.abs(AS)){if(isNaN(AG)){o=AM,AM=AmCharts.adjustLuminosity(AD,-0.2),AM=AmCharts.adjustLuminosity(AD,-0.2),AI=AmCharts.polygon(AY,[0,AU,AX+AU,AX,0],[0,AS,AS,0,0],AM,AT,1,AQ,0,AJ),0<AP&&(U=AmCharts.line(AY,[0,AU,AX+AU],[0,AS,AS],AQ,AP,AR,AK)),AF=AmCharts.polygon(AY,[0,0,AX,AX,0],[0,AV,AV,0,0],AM,AT,1,AQ,0,AJ),AF.translate(AU,AS),0<AP&&(AB=AmCharts.line(AY,[AU,AU],[AS,AS+AV],AQ,AP,AR,AK)),AA=AmCharts.polygon(AY,[0,0,AU,AU,0],[0,AV,AV+AS,AS,0],AM,AT,1,AQ,0,AJ),AE=AmCharts.polygon(AY,[AX,AX,AX+AU,AX+AU,AX],[0,AV,AV+AS,AS,0],AM,AT,1,AQ,0,AJ),0<AP&&(AC=AmCharts.line(AY,[AX,AX+AU,AX+AU,AX],[0,AS,AV+AS,AV],AQ,AP,AR,AK)),AM=AmCharts.adjustLuminosity(o,0.2),o=AmCharts.polygon(AY,[0,AU,AX+AU,AX,0],[AV,AV+AS,AV+AS,AV,AV],AM,AT,1,AQ,0,AJ),0<AP&&(V=AmCharts.line(AY,[0,AU,AX+AU],[AV,AV+AS,AV+AS],AQ,AP,AR,AK))}else{var T,S,R;W?(T=AV/2,AM=AU/2,R=AV/2,S=AX+AU/2,Z=Math.abs(AV/2),s=Math.abs(AU/2)):(AM=AX/2,T=AS/2,S=AX/2,R=AV+AS/2+1,s=Math.abs(AX/2),Z=Math.abs(AS/2));Y=s*AG;X=Z*AG;0.1<s&&0.1<s&&(AI=AmCharts.circle(AY,s,AD,AT,AR,AQ,AP,!1,Z),AI.translate(AM,T));0.1<Y&&0.1<Y&&(o=AmCharts.circle(AY,Y,AmCharts.adjustLuminosity(AD,0.5),AT,AR,AQ,AP,!1,X),o.translate(S,R))}}AT=Q;1>Math.abs(AV)&&(AV=0);1>Math.abs(AX)&&(AX=0);!isNaN(AG)&&(0<Math.abs(AU)||0<Math.abs(AS))?(AO=[AD],AO={fill:AO,stroke:AQ,"stroke-width":AR,"stroke-opacity":AP,"fill-opacity":AT},W?(AT="M0,0 L"+AX+","+(AV/2-AV/2*AG),AR=" B",0<AX&&(AR=" A"),AmCharts.VML?(AT+=AR+Math.round(AX-Y)+","+Math.round(AV/2-X)+","+Math.round(AX+Y)+","+Math.round(AV/2+X)+","+AX+",0,"+AX+","+AV,AT=AT+(" L0,"+AV)+(AR+Math.round(-s)+","+Math.round(AV/2-Z)+","+Math.round(s)+","+Math.round(AV/2+Z)+",0,"+AV+",0,0")):(AT+="A"+Y+","+X+",0,0,0,"+AX+","+(AV-AV/2*(1-AG))+"L0,"+AV,AT+="A"+s+","+Z+",0,0,1,0,0"),s=90):(AR=AX/2-AX/2*AG,AT="M0,0 L"+AR+","+AV,AmCharts.VML?(AT="M0,0 L"+AR+","+AV,AR=" B",0>AV&&(AR=" A"),AT+=AR+Math.round(AX/2-Y)+","+Math.round(AV-X)+","+Math.round(AX/2+Y)+","+Math.round(AV+X)+",0,"+AV+","+AX+","+AV,AT+=" L"+AX+",0",AT+=AR+Math.round(AX/2+s)+","+Math.round(Z)+","+Math.round(AX/2-s)+","+Math.round(-Z)+","+AX+",0,0,0"):(AT+="A"+Y+","+X+",0,0,0,"+(AX-AX/2*(1-AG))+","+AV+"L"+AX+",0",AT+="A"+s+","+Z+",0,0,1,0,0"),s=180),AY=AY.path(AT).attr(AO),AY.gradient("linearGradient",[AD,AmCharts.adjustLuminosity(AD,-0.3),AmCharts.adjustLuminosity(AD,-0.3),AD],s),W?AY.translate(AU/2,0):AY.translate(0,AS/2)):AY=0===AV?AmCharts.line(AY,[0,AX],[0,0],AQ,AP,AR,AK):0===AX?AmCharts.line(AY,[0,0],[0,AV],AQ,AP,AR,AK):0<AH?AmCharts.rect(AY,AX,AV,AO,AT,AR,AQ,AP,AH,AJ,AK):AmCharts.polygon(AY,[0,0,AX,AX,0],[0,AV,AV,0,0],AO,AT,AR,AQ,AP,AJ,!1,AK);AX=isNaN(AG)?0>AV?[AI,U,AF,AB,AA,AE,AC,o,V,AY]:[o,V,AF,AB,AA,AE,AI,U,AC,AY]:W?0<AX?[AI,AY,o]:[o,AY,AI]:0>AV?[AI,AY,o]:[o,AY,AI];AmCharts.setCN(AW,AY,AL+"front");AmCharts.setCN(AW,AF,AL+"back");AmCharts.setCN(AW,o,AL+"top");AmCharts.setCN(AW,AI,AL+"bottom");AmCharts.setCN(AW,AA,AL+"left");AmCharts.setCN(AW,AE,AL+"right");for(AI=0;AI<AX.length;AI++){if(AF=AX[AI]){AZ.push(AF),AmCharts.setCN(AW,AF,AL+"element")}}AN&&AY.pattern(AN)},width:function(A){isNaN(A)&&(A=0);this.w=Math.round(A);this.draw()},height:function(A){isNaN(A)&&(A=0);this.h=Math.round(A);this.draw()},animateHeight:function(B,A){var C=this;C.easing=A;C.totalFrames=Math.round(1000*B/AmCharts.updateRate);C.rh=C.h;C.frame=0;C.height(1);setTimeout(function(){C.updateHeight.call(C)},AmCharts.updateRate)},updateHeight:function(){var B=this;B.frame++;var A=B.totalFrames;B.frame<=A&&(A=B.easing(0,B.frame,1,B.rh-1,A),B.height(A),setTimeout(function(){B.updateHeight.call(B)},AmCharts.updateRate))},animateWidth:function(B,A){var C=this;C.easing=A;C.totalFrames=Math.round(1000*B/AmCharts.updateRate);C.rw=C.w;C.frame=0;C.width(1);setTimeout(function(){C.updateWidth.call(C)},AmCharts.updateRate)},updateWidth:function(){var B=this;B.frame++;var A=B.totalFrames;B.frame<=A&&(A=B.easing(0,B.frame,1,B.rw-1,A),B.width(A),setTimeout(function(){B.updateWidth.call(B)},AmCharts.updateRate))}});AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(A){this.cname="CategoryAxis";AmCharts.CategoryAxis.base.construct.call(this,A);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={};this.nextPeriod.fff="ss";this.nextPeriod.ss="mm";this.nextPeriod.mm="hh";this.nextPeriod.hh="DD";this.nextPeriod.DD="MM";this.nextPeriod.MM="YYYY";AmCharts.applyTheme(this,A,this.cname)},draw:function(){AmCharts.CategoryAxis.base.draw.call(this);this.generateDFObject();var AB=this.chart.chartData;this.data=AB;if(AmCharts.ifArray(AB)){var AA,o=this.chart;"scrollbar"!=this.id?(AmCharts.setCN(o,this.set,"category-axis"),AmCharts.setCN(o,this.labelsSet,"category-axis"),AmCharts.setCN(o,this.axisLine.axisSet,"category-axis")):this.bcn=this.id+"-";var s=this.start,Z=this.labelFrequency,Y=0;AA=this.end-s+1;var W=this.gridCountR,S=this.showFirstLabel,X=this.showLastLabel,V,U="",T=AmCharts.extractPeriod(this.minPeriod);V=AmCharts.getPeriodDuration(T.period,T.count);var J,H,K,R,G,N;J=this.rotate;var Q=this.firstDayOfWeek,P=this.boldPeriodBeginning,AB=AmCharts.resetDateToMin(new Date(AB[AB.length-1].time+1.05*V),this.minPeriod,1,Q).getTime(),I;this.endTime>AB&&(this.endTime=AB);N=this.minorGridEnabled;var F,AB=this.gridAlpha,M;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime;s=this.choosePeriod(0);Z=s.period;J=s.count;H=AmCharts.getPeriodDuration(Z,J);H<V&&(Z=T.period,J=T.count,H=V);K=Z;"WW"==K&&(K="DD");this.stepWidth=this.getStepWidth(this.timeDifference);var W=Math.ceil(this.timeDifference/H)+5,L=U=AmCharts.resetDateToMin(new Date(this.startTime-H),Z,J,Q).getTime();K==Z&&1==J&&this.centerLabelOnFullPeriod&&(G=H*this.stepWidth);this.cellWidth=V*this.stepWidth;AA=Math.round(U/H);s=-1;AA/2==Math.round(AA/2)&&(s=-2,U-=H);var E=o.firstTime,O=0;N&&1<J&&(F=this.chooseMinorFrequency(J),M=AmCharts.getPeriodDuration(Z,F));if(0<this.gridCountR){for(AA=s;AA<=W;AA++){T=E+H*(AA+Math.floor((L-E)/H))-O;"DD"==Z&&(T+=3600000);T=AmCharts.resetDateToMin(new Date(T),Z,J,Q).getTime();"MM"==Z&&(N=(T-U)/H,1.5<=(T-U)/H&&(T=T-(N-1)*H+AmCharts.getPeriodDuration("DD",3),T=AmCharts.resetDateToMin(new Date(T),Z,1).getTime(),O+=H));V=(T-this.startTime)*this.stepWidth;N=!1;this.nextPeriod[K]&&(N=this.checkPeriodChange(this.nextPeriod[K],1,T,U,K));I=!1;N&&this.markPeriodChange?(N=this.dateFormatsObject[this.nextPeriod[K]],this.twoLineMode&&(N=this.dateFormatsObject[K]+"\n"+N,N=AmCharts.fixBrakes(N)),I=!0):N=this.dateFormatsObject[K];P||(I=!1);U=AmCharts.formatDate(new Date(T),N,o);if(AA==s&&!S||AA==W&&!X){U=" "}this.labelFunction&&(U=this.labelFunction(U,new Date(T),this,Z,J,R).toString());this.boldLabels&&(I=!0);R=new this.axisItemRenderer(this,V,U,!1,G,0,!1,I);this.pushAxisItem(R);R=U=T;if(!isNaN(F)){for(V=1;V<J;V+=F){this.gridAlpha=this.minorGridAlpha,N=T+M*V,N=AmCharts.resetDateToMin(new Date(N),Z,F,Q).getTime(),N=new this.axisItemRenderer(this,(N-this.startTime)*this.stepWidth),this.pushAxisItem(N)}}this.gridAlpha=AB}}}else{if(!this.parseDates){if(this.cellWidth=this.getStepWidth(AA),AA<W&&(W=AA),Y+=this.start,this.stepWidth=this.getStepWidth(AA),0<W){for(P=Math.floor(AA/W),F=this.chooseMinorFrequency(P),V=Y,V/2==Math.round(V/2)&&V--,0>V&&(V=0),W=0,this.end-V+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),AA=V;AA<=this.end+2;AA++){R=!1;0<=AA&&AA<this.data.length?(K=this.data[AA],U=K.category,R=K.forceShow):U="";if(N&&!isNaN(F)){if(AA/F==Math.round(AA/F)||R){AA/P==Math.round(AA/P)||R||(this.gridAlpha=this.minorGridAlpha,U=void 0)}else{continue}}else{if(AA/P!=Math.round(AA/P)&&!R){continue}}V=this.getCoordinate(AA-Y);R=0;"start"==this.gridPosition&&(V-=this.cellWidth/2,R=this.cellWidth/2);Q=!0;L=R;"start"==this.tickPosition&&(L=0,Q=!1,R=0);if(AA==s&&!S||AA==this.end&&!X){U=void 0}Math.round(W/Z)!=W/Z&&(U=void 0);W++;G=this.cellWidth;J&&(G=NaN);this.labelFunction&&K&&(U=this.labelFunction(U,K,this));U=AmCharts.fixBrakes(U);I=!1;this.boldLabels&&(I=!0);AA>this.end&&"start"==this.tickPosition&&(U=" ");R=new this.axisItemRenderer(this,V,U,Q,G,R,void 0,I,L,!1,K.labelColor,K.className);R.serialDataItem=K;this.pushAxisItem(R);this.gridAlpha=AB}}}else{if(this.parseDates&&this.equalSpacing){Y=this.start;this.startTime=this.data[this.start].time;this.endTime=this.data[this.end].time;this.timeDifference=this.endTime-this.startTime;s=this.choosePeriod(0);Z=s.period;J=s.count;H=AmCharts.getPeriodDuration(Z,J);H<V&&(Z=T.period,J=T.count,H=V);K=Z;"WW"==K&&(K="DD");this.stepWidth=this.getStepWidth(AA);W=Math.ceil(this.timeDifference/H)+1;U=AmCharts.resetDateToMin(new Date(this.startTime-H),Z,J,Q).getTime();this.cellWidth=this.getStepWidth(AA);AA=Math.round(U/H);s=-1;AA/2==Math.round(AA/2)&&(s=-2,U-=H);V=this.start;V/2==Math.round(V/2)&&V--;0>V&&(V=0);G=this.end+2;G>=this.data.length&&(G=this.data.length);M=!1;M=!S;this.previousPos=-1000;20<this.labelRotation&&(this.safeDistance=5);H=V;if(this.data[V].time!=AmCharts.resetDateToMin(new Date(this.data[V].time),Z,J,Q).getTime()){for(Q=0,I=U,AA=V;AA<G;AA++){T=this.data[AA].time,this.checkPeriodChange(Z,J,T,I)&&(Q++,2<=Q&&(H=AA,AA=G),I=T)}}N&&1<J&&(F=this.chooseMinorFrequency(J),AmCharts.getPeriodDuration(Z,F));if(0<this.gridCountR){for(AA=V;AA<G;AA++){if(T=this.data[AA].time,this.checkPeriodChange(Z,J,T,U)&&AA>=H){V=this.getCoordinate(AA-this.start);N=!1;this.nextPeriod[K]&&(N=this.checkPeriodChange(this.nextPeriod[K],1,T,U,K));I=!1;N&&this.markPeriodChange?(N=this.dateFormatsObject[this.nextPeriod[K]],I=!0):N=this.dateFormatsObject[K];U=AmCharts.formatDate(new Date(T),N,o);if(AA==s&&!S||AA==W&&!X){U=" "}M?M=!1:(P||(I=!1),V-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(U=this.labelFunction(U,new Date(T),this,Z,J,R)),this.boldLabels&&(I=!0),R=new this.axisItemRenderer(this,V,U,void 0,void 0,void 0,void 0,I),N=R.graphics(),this.pushAxisItem(R),R=N.getBBox().width,AmCharts.isModern||(R-=V),this.previousPos=V+R));R=U=T}else{isNaN(F)||(this.checkPeriodChange(Z,F,T,L)&&(this.gridAlpha=this.minorGridAlpha,V=this.getCoordinate(AA-this.start),N=new this.axisItemRenderer(this,V),this.pushAxisItem(N),L=T),this.gridAlpha=AB)}}}}}}for(AA=0;AA<this.data.length;AA++){if(S=this.data[AA]){X=this.parseDates&&!this.equalSpacing?Math.round((S.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(AA-Y),S.x[this.id]=X}}S=this.guides.length;for(AA=0;AA<S;AA++){X=this.guides[AA],P=P=P=AB=s=NaN,F=X.above,X.toCategory&&(P=o.getCategoryIndexByValue(X.toCategory),isNaN(P)||(s=this.getCoordinate(P-Y),X.expand&&(s+=this.cellWidth/2),R=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,X),this.pushAxisItem(R,F))),X.category&&(P=o.getCategoryIndexByValue(X.category),isNaN(P)||(AB=this.getCoordinate(P-Y),X.expand&&(AB-=this.cellWidth/2),P=(s-AB)/2,R=new this.axisItemRenderer(this,AB,X.label,!0,NaN,P,X),this.pushAxisItem(R,F))),X.toDate&&(X.toDate instanceof Date||(X.toDate=AmCharts.stringToDate(X.toDate,o.dataDateFormat)),this.equalSpacing?(P=o.getClosestIndex(this.data,"time",X.toDate.getTime(),!1,0,this.data.length-1),isNaN(P)||(s=this.getCoordinate(P-Y))):s=(X.toDate.getTime()-this.startTime)*this.stepWidth,R=new this.axisItemRenderer(this,s,"",!0,NaN,NaN,X),this.pushAxisItem(R,F)),X.date&&(X.date instanceof Date||(X.date=AmCharts.stringToDate(X.date,o.dataDateFormat)),this.equalSpacing?(P=o.getClosestIndex(this.data,"time",X.date.getTime(),!1,0,this.data.length-1),isNaN(P)||(AB=this.getCoordinate(P-Y))):AB=(X.date.getTime()-this.startTime)*this.stepWidth,P=(s-AB)/2,R="H"==this.orientation?new this.axisItemRenderer(this,AB,X.label,!1,2*P,NaN,X):new this.axisItemRenderer(this,AB,X.label,!1,NaN,P,X),this.pushAxisItem(R,F)),(0<s||0<AB)&&(s<this.width||AB<this.width)&&(s=new this.guideFillRenderer(this,AB,s,X),AB=s.graphics(),this.pushAxisItem(s,F),X.graphics=AB,AB.index=AA,X.balloonText&&this.addEventListeners(AB,X))}}this.axisCreated=!0;o=this.x;Y=this.y;this.set.translate(o,Y);this.labelsSet.translate(o,Y);this.positionTitle();(o=this.axisLine.set)&&o.toFront();o=this.getBBox().height;2<o-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1);this.previousHeight=o},chooseMinorFrequency:function(B){for(var A=10;0<A;A--){if(B/A==Math.round(B/A)){return B/A}}},choosePeriod:function(B){var A=AmCharts.getPeriodDuration(this.periods[B].period,this.periods[B].count),C=Math.ceil(this.timeDifference/A),D=this.periods;return this.timeDifference<A&&0<B?D[B-1]:C<=this.gridCountR?D[B]:B+1<D.length?this.choosePeriod(B+1):D[B]},getStepWidth:function(B){var A;this.startOnAxis?(A=this.axisWidth/(B-1),1==B&&(A=this.axisWidth)):A=this.axisWidth/B;return A},getCoordinate:function(A){A*=this.stepWidth;this.startOnAxis||(A+=this.stepWidth/2);return Math.round(A)},timeZoom:function(B,A){this.startTime=B;this.endTime=A},minDuration:function(){var A=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(A.period,A.count)},checkPeriodChange:function(B,A,F,G,E){F=new Date(F);var D=new Date(G),C=this.firstDayOfWeek;G=A;"DD"==B&&(A=1);F=AmCharts.resetDateToMin(F,B,A,C).getTime();A=AmCharts.resetDateToMin(D,B,A,C).getTime();return"DD"==B&&"hh"!=E&&F-A<=AmCharts.getPeriodDuration(B,G)?!1:F!=A?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var B;for(B=0;B<this.dateFormats.length;B++){var A=this.dateFormats[B];this.dateFormatsObject[A.period]=A.format}},xToIndex:function(B){var A=this.data,E=this.chart,F=E.rotate,D=this.stepWidth;this.parseDates&&!this.equalSpacing?(B=this.startTime+Math.round(B/D)-this.minDuration()/2,E=E.getClosestIndex(A,"time",B,!1,this.start,this.end+1)):(this.startOnAxis||(B-=D/2),E=this.start+Math.round(B/D));var E=AmCharts.fitToBounds(E,0,A.length-1),C;A[E]&&(C=A[E].x[this.id]);F?C>this.height+1&&E--:C>this.width+1&&E--;0>C&&E++;return E=AmCharts.fitToBounds(E,0,A.length-1)},dateToCoordinate:function(A){return this.parseDates&&!this.equalSpacing?(A.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(A=this.chart.getClosestIndex(this.data,"time",A.getTime(),!1,0,this.data.length-1),this.getCoordinate(A-this.start)):NaN},categoryToCoordinate:function(A){return this.chart?(A=this.chart.getCategoryIndexByValue(A),this.getCoordinate(A-this.start)):NaN},coordinateToDate:function(A){return this.equalSpacing?(A=this.xToIndex(A),new Date(this.data[A].time)):new Date(this.startTime+A/this.stepWidth)}});AmCharts.AmPieChart=AmCharts.Class({inherits:AmCharts.AmSlicedChart,construct:function(A){this.type="pie";AmCharts.AmPieChart.base.construct.call(this,A);this.cname="AmPieChart";this.pieBrightnessStep=30;this.minRadius=10;this.depth3D=0;this.startAngle=90;this.angle=this.innerRadius=0;this.startRadius="500%";this.pullOutRadius="20%";this.labelRadius=20;this.labelText="[[title]]: [[percents]]%";this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]";this.previousScale=1;AmCharts.applyTheme(this,A,this.cname)},drawChart:function(){AmCharts.AmPieChart.base.drawChart.call(this);var X=this.chartData;if(AmCharts.ifArray(X)){if(0<this.realWidth&&0<this.realHeight){AmCharts.VML&&(this.startAlpha=1);var W=this.startDuration,Z=this.container,o=this.updateWidth();this.realWidth=o;var T=this.updateHeight();this.realHeight=T;var Y=AmCharts.toCoordinate,S=Y(this.marginLeft,o),s=Y(this.marginRight,o),I=Y(this.marginTop,T)+this.getTitleHeight(),R=Y(this.marginBottom,T),F,E,V,G=AmCharts.toNumber(this.labelRadius),N=this.measureMaxLabel();N>this.maxLabelWidth&&(N=this.maxLabelWidth);this.labelText&&this.labelsEnabled||(G=N=0);F=void 0===this.pieX?(o-S-s)/2+S:Y(this.pieX,this.realWidth);E=void 0===this.pieY?(T-I-R)/2+I:Y(this.pieY,T);V=Y(this.radius,o,T);V||(o=0<=G?o-S-s-2*N:o-S-s,T=T-I-R,V=Math.min(o,T),T<o&&(V/=1-this.angle/90,V>o&&(V=o)),T=AmCharts.toCoordinate(this.pullOutRadius,V),V=(0<=G?V-1.8*(G+T):V-1.8*T)/2);V<this.minRadius&&(V=this.minRadius);T=Y(this.pullOutRadius,V);I=AmCharts.toCoordinate(this.startRadius,V);Y=Y(this.innerRadius,V);Y>=V&&(Y=V-1);R=AmCharts.fitToBounds(this.startAngle,0,360);0<this.depth3D&&(R=270<=R?270:90);R-=90;o=V-V*this.angle/90;for(S=0;S<X.length;S++){if(s=X[S],!0!==s.hidden&&0<s.percents){var P=360*s.percents/100,N=Math.sin((R+P/2)/180*Math.PI),D=-Math.cos((R+P/2)/180*Math.PI)*(o/V),Q=this.outlineColor;Q||(Q=s.color);var O=this.alpha;isNaN(s.alpha)||(O=s.alpha);Q={fill:s.color,stroke:Q,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":O};s.url&&(Q.cursor="pointer");Q=AmCharts.wedge(Z,F,E,R,P,V,o,Y,this.depth3D,Q,this.gradientRatio,s.pattern);AmCharts.setCN(this,Q,"pie-item");AmCharts.setCN(this,Q.wedge,"pie-slice");AmCharts.setCN(this,Q,s.className,!0);this.addEventListeners(Q,s);s.startAngle=R;X[S].wedge=Q;0<W&&(this.chartCreated||Q.setAttr("opacity",this.startAlpha));s.ix=N;s.iy=D;s.wedge=Q;s.index=S;if(this.labelsEnabled&&this.labelText&&s.percents>=this.hideLabelsPercent){var U=R+P/2;360<U&&(U-=360);var L=G;isNaN(s.labelRadius)||(L=s.labelRadius);var P=F+N*(V+L),O=E+D*(V+L),M,H=0;if(0<=L){var K;90>=U&&0<=U?(K=0,M="start",H=8):90<=U&&180>U?(K=1,M="start",H=8):180<=U&&270>U?(K=2,M="end",H=-8):270<=U&&360>U&&(K=3,M="end",H=-8);s.labelQuarter=K}else{M="middle"}var U=this.formatString(this.labelText,s),J=this.labelFunction;J&&(U=J(s,U));J=s.labelColor;J||(J=this.color);""!=U&&(U=AmCharts.wrappedText(Z,U,J,this.fontFamily,this.fontSize,M,!1,this.maxLabelWidth),AmCharts.setCN(this,U,"pie-label"),AmCharts.setCN(this,U,s.className,!0),U.translate(P+1.5*H,O),U.node.style.pointerEvents="none",s.tx=P+1.5*H,s.ty=O,0<=L?(L=U.getBBox(),J=AmCharts.rect(Z,L.width+5,L.height+5,"#FFFFFF",0.005),J.translate(P+1.5*H+L.x,O+L.y),s.hitRect=J,Q.push(U),Q.push(J)):this.freeLabelsSet.push(U),s.label=U);s.tx=P;s.tx2=P+H;s.tx0=F+N*V;s.ty0=E+D*V}P=Y+(V-Y)/2;s.pulled&&(P+=this.pullOutRadiusReal);s.balloonX=N*P+F;s.balloonY=D*P+E;s.startX=Math.round(N*I);s.startY=Math.round(D*I);s.pullX=Math.round(N*T);s.pullY=Math.round(D*T);this.graphsSet.push(Q);(0===s.alpha||0<W&&!this.chartCreated)&&Q.hide();R+=360*s.percents/100}}0<G&&!this.labelRadiusField&&this.arrangeLabels();this.pieXReal=F;this.pieYReal=E;this.radiusReal=V;this.innerRadiusReal=Y;0<G&&this.drawTicks();this.initialStart();this.setDepths()}(X=this.legend)&&X.invalidateSize()}else{this.cleanChart()}this.dispDUpd();this.chartCreated=!0},setDepths:function(){var C=this.chartData,B;for(B=0;B<C.length;B++){var D=C[B],A=D.wedge,D=D.startAngle;0<=D&&180>D?A.toFront():180<=D&&A.toBack()}},arrangeLabels:function(){var C=this.chartData,B=C.length,D,A;for(A=B-1;0<=A;A--){D=C[A],0!==D.labelQuarter||D.hidden||this.checkOverlapping(A,D,0,!0,0)}for(A=0;A<B;A++){D=C[A],1!=D.labelQuarter||D.hidden||this.checkOverlapping(A,D,1,!1,0)}for(A=B-1;0<=A;A--){D=C[A],2!=D.labelQuarter||D.hidden||this.checkOverlapping(A,D,2,!0,0)}for(A=0;A<B;A++){D=C[A],3!=D.labelQuarter||D.hidden||this.checkOverlapping(A,D,3,!1,0)}},checkOverlapping:function(E,D,G,H,C){var F,B,I=this.chartData,J=I.length,A=D.label;if(A){if(!0===H){for(B=E+1;B<J;B++){I[B].labelQuarter==G&&(F=this.checkOverlappingReal(D,I[B],G))&&(B=J)}}else{for(B=E-1;0<=B;B--){I[B].labelQuarter==G&&(F=this.checkOverlappingReal(D,I[B],G))&&(B=0)}}!0===F&&100>C&&(F=D.ty+3*D.iy,D.ty=F,A.translate(D.tx2,F),D.hitRect&&(A=A.getBBox(),D.hitRect.translate(D.tx2+A.x,F+A.y)),this.checkOverlapping(E,D,G,H,C+1))}},checkOverlappingReal:function(D,C,F){var A=!1,B=D.label,E=C.label;D.labelQuarter!=F||D.hidden||C.hidden||!E||(B=B.getBBox(),F={},F.width=B.width,F.height=B.height,F.y=D.ty,F.x=D.tx,D=E.getBBox(),E={},E.width=D.width,E.height=D.height,E.y=C.ty,E.x=C.tx,AmCharts.hitTest(F,E)&&(A=!0));return A}});var GroupingAxis=Base.extend({id:"",title:"",displayAxis:false,showTitle:true,labelRotation:0,constructor:function(B,A){this.inherit();this.id=B;this.title=A},setConfig:function(B){for(var A in B){if(B.hasOwnProperty(A)&&A!="id"&&A!="title"){this[A]=B[A]}}}});var DataAxis=GroupingAxis.extend({type:"column",lineAlpha:1,lineThickness:1,fillAlphas:1,bullet:"none",bulletAlpha:1,valueAxis:null,currencyCode:"",constructor:function(A,C,B){this.inherit();this.type=A;if(A=="bar"){this.type="column"}else{if(A=="line"){this.fillAlphas=0;this.lineThickness=3;this.bullet="round"}else{if(A=="area"){this.type="line";this.bullet="round";this.bulletAlpha=0}else{if(A=="plot"){this.type="line";this.fillAlphas=0;this.lineAlpha=0;this.bullet="round"}else{this.type=A}}}}this.id=C;this.title=B},setConfig:function(B){for(var A in B){if(B.hasOwnProperty(A)){if(A=="displayAxis"&&B[A]){if(!this.valueAxis){this.valueAxis=new ValueAxis()}this.valueAxis.displayAxis=true}else{if(A!="type"&&A!="id"&&A!="title"){this[A]=B[A]}}}}},setCurrencyCode:function(A){this.currencyCode=A},setUnitTitle:function(A){this.unitTitle=A}});var ValueAxis=Base.extend({gridAlpha:0,axisAlpha:1,title:"",constructor:function(B,A){this.inherit();if(typeof (B)!="undefined"&&B!=""){this.title=B}else{this.title=""}if(typeof (A)!="undefined"&&A!=""){this.position=A}else{this.position="left"}}});var ExportConfig=Base.extend({menuTop:"60px",menuBottom:"auto",menuRight:"50px",backgroundColor:"#efefef",menuItemStyle:{backgroundColor:"#EFEFEF",rollOverBackgroundColor:"#DDDDDD"},menuItems:[{textAlign:"center",icon:"/archibus/schema/ab-core/libraries/amcharts/images/export.png",iconTitle:"Save chart as an image",items:[{title:"JPG",format:"jpg"},{title:"PNG",format:"png"},{title:"PDF",format:"pdf",output:"datastring",onclick:function(A,B,C){A.output(B,function(D){data=A.canvas.toDataURL("image/jpeg"),screenWidth=A.canvas.width;screenHeight=A.canvas.height;if(screenWidth>screenHeight){pdf=new jsPDF("landscape");ratioX=A.canvas.width/11;ratioY=A.canvas.height/8.5;if(ratioX>ratioY){pdf.addImage(data,"JPEG",10,10,280,280*screenHeight/screenWidth);pdf.save("amChart.pdf")}else{pdf.addImage(data,"JPEG",10,10,180*screenHeight/screenWidth,180);pdf.save("amChart.pdf")}}else{pdf=new jsPDF("portrait");ratioX=A.canvas.width/8.5;ratioY=A.canvas.height/11;if(ratioX>ratioY){pdf.addImage(data,"JPEG",10,10,180,180*screenWidth/screenHeight);pdf.save("amChart.pdf")}else{pdf.addImage(data,"JPEG",10,10,280*screenWidth/screenHeight,280);pdf.save("amChart.pdf")}}})}}]}],constructor:function(){this.inherit()}});var ChartConfig=Base.extend({width:"100%",height:"100%",backgroundColor:"#FFFFFF",chartType:this.CHARTTYPE_COLUMN,groupingAxis:[],secondaryGroupingAxis:[],dataAxis:[],valueAxis:[],showOnLoad:true,showLegendOnLoad:true,legendLocation:"bottom",showDataTips:true,zoomable:true,supportedTypes:[],showExportButton:false,showLabels:true,showUnitPrefixes:true,showUnitSuffixes:false,currencyFields:{},unitFields:{},colors:["#67b7dc","#e3c263","#f4d499","#4d90d6","#c7e38c","#9986c8","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"],hidden:false,constructor:function(){this.inherit();this.groupingAxis=[];this.secondaryGroupingAxis=[];this.dataAxis=[];this.valueAxis=[];if(this.supportedTypes.length<1){this.supportedTypes.push(this.CHARTTYPE_PIE,this.CHARTTYPE_PIE_3D,this.CHARTTYPE_LINE,this.CHARTTYPE_BAR,this.CHARTTYPE_BAR_3D,this.CHARTTYPE_STACKEDBAR,this.CHARTTYPE_COLUMN,this.CHARTTYPE_COLUMN_3D,this.CHARTTYPE_STACKEDCOLUMN,this.CHARTTYPE_AREA,this.CHARTTYPE_AREA_3D,this.CHARTTYPE_STACKEDAREA,this.CHARTTYPE_PLOT,this.CHARTTYPE_COLUMNLINE)}},addGroupingAxis:function(B,A){this.groupingAxis[0]=new GroupingAxis(B,A)},addSecondaryGroupingAxis:function(B,A){this.secondaryGroupingAxis[0]=new GroupingAxis(B,A)},addDataAxis:function(B,E,C){this.dataAxis[this.dataAxis.length]=new DataAxis(B,E,C);var A=this.currencyFields[E];if(A!=null&&A.length>0){this.dataAxis[this.dataAxis.length-1].setCurrencyCode(A)}if(this.showUnitSuffixes){var D=this.unitFields[E];if(D!=null&&D.length>0){this.dataAxis[this.dataAxis.length-1].setUnitTitle(D)}}else{this.dataAxis[this.dataAxis.length-1].setUnitTitle("")}},addValueAxis:function(A,B){this.dataAxis[A].valueAxis=new ValueAxis(B)},setChartType:function(A){this.chartType=getValidatedValue(this.supportedTypes,A,this.CHARTTYPE_COLUMN)},getDataAxisType:function(A){var B="column";if(this.chartType==this.CHARTTYPE_PIE||this.chartType==this.CHARTTYPE_PIE_3D){B="pie"}else{if(this.chartType==this.CHARTTYPE_LINE){B="line"}else{if(this.chartType==this.CHARTTYPE_BAR||this.chartType==this.CHARTTYPE_STACKEDBAR||this.chartType==this.CHARTTYPE_BAR_3D){B="bar"}else{if(this.chartType==this.CHARTTYPE_AREA||this.chartType==this.CHARTTYPE_STACKEDAREA){B="area"}else{if(this.chartType==this.CHARTTYPE_PLOT){B="plot"}else{if(this.chartType==this.CHARTTYPE_COLUMNLINE){if(A==1){B="line"}else{B="column"}}}}}}}return B},CHARTTYPE_PIE:"pieChart",CHARTTYPE_PIE_3D:"pieChart3D",CHARTTYPE_LINE:"lineChart",CHARTTYPE_BAR:"barChart",CHARTTYPE_BAR_3D:"barChart3D",CHARTTYPE_COLUMN:"columnChart",CHARTTYPE_COLUMN_3D:"columnChart3D",CHARTTYPE_AREA:"areaChart",CHARTTYPE_STACKEDBAR:"stackedBarChart",CHARTTYPE_STACKEDAREA:"stackedAreaChart",CHARTTYPE_STACKEDCOLUMN:"stackedColumnChart",CHARTTYPE_PLOT:"plotChart",CHARTTYPE_COLUMNLINE:"columnLineChart"});function getValidatedValue(A,D,B){if(valueExists(D)&&D!=""){for(var C=0;C<A.length;C++){if(A[C]==D){return D}}}return B}var BaseChartControl=Base.extend({id:"",config:null,canvas:null,data:[],prefixesOfBigNumbers:[{number:1000,prefix:"k"},{number:1000000,prefix:"M"},{number:1000000000,prefix:"G"}],isBuilt:false,constructor:function(B,A){this.id=B;this.config=A},build:function(){if(this.config.secondaryGroupingAxis.length>1&&this.data.length<1){return }if(this.config.showOnLoad){this.canvas.dataProvider=this.data}else{this.canvas.dataProvider=[]}this.canvas.colors=this.config.colors;this.setGroupingAxis();if(this.config.secondaryGroupingAxis.length<1){this.setValueAxis();this.addDataSeries()}else{this.canvas.columnSpacing=0;this.addSecondaryGroupingDataSeries()}this.setOutlineProperties();this.addCursor();if(this.config.showOnLoad&&this.config.showLegendOnLoad){this.addLegend()}this.addExportButton();this.setUnits();this.canvas.write(this.id);this.addZoomListener();this.syncHeight();if(this.config.hidden){document.getElementById(this.id).style.display="none"}else{document.getElementById(this.id).style.backgroundColor=this.config.backgroundColor}this.isBuilt=true},setData:function(A){this.data=A;this.canvas.dataProvider=this.data;if(!this.isBuilt){this.build()}if(this.data&&this.data.length>0){if(this.config.secondaryGroupingAxis.length>0){this.addSecondaryGroupingDataSeries()}this.showLegend(true)}else{this.showLegend(false)}this.canvas.validateData()},setUnits:function(){if(this.config.showUnitPrefixes){this.canvas.usePrefixes=true}else{this.canvas.usePrefixes=false}},addExportButton:function(){if(this.config.showExportButton){this.canvas.exportConfig=new ExportConfig();if(this.config.legendLocation=="top"){this.canvas.exportConfig.menuTop="40px"}}else{this.canvas.amExport={}}},getUnitTitle:function(A){if(this.config.showUnitSuffixes&&this.config.dataAxis[A].unitTitle!=undefined&&this.config.dataAxis[A].unitTitle!=""){return" "+this.config.dataAxis[A].unitTitle}else{return""}},addEventListener:function(A,B){this.canvas.addListener(A,B)},removeEventListener:function(A,B){this.canvas.removeListener(A,B)},syncHeight:function(){this.canvas.validateNow();this.canvas.invalidateSize()}});var SerialChartControl=BaseChartControl.extend({initialized:false,constructor:function(B,A){this.inherit(B,A);this.canvas=new AmCharts.AmSerialChart();if(this.config.chartType==this.config.CHARTTYPE_BAR||this.config.chartType==this.config.CHARTTYPE_STACKEDBAR||this.config.chartType==this.config.CHARTTYPE_BAR_3D){this.canvas.rotate=true}if(this.config.chartType==this.config.CHARTTYPE_COLUMN_3D||this.config.chartType==this.config.CHARTTYPE_BAR_3D){this.canvas.depth3D=20;this.canvas.angle=30}else{this.canvas.depth3D=0;this.canvas.angle=0}this.canvas.prefixesOfBigNumbers=this.prefixesOfBigNumbers},setGroupingAxis:function(){this.canvas.categoryField=this.config.groupingAxis[0].id;var A=this.canvas.categoryAxis;A.labelRotation=this.config.groupingAxis[0].labelRotation;A.gridPosition="start";if(this.config.groupingAxis[0].showTitle){A.title=this.config.groupingAxis[0].title}else{A.title=""}},setValueAxis:function(){var D=false;if(this.config.chartType==this.config.CHARTTYPE_STACKEDBAR||this.config.chartType==this.config.CHARTTYPE_STACKEDAREA||this.config.chartType==this.config.CHARTTYPE_STACKEDCOLUMN){D=true}for(var B=0;B<this.config.dataAxis.length;B++){var F=this.config.dataAxis[B].valueAxis;var A=(B==0)||(F&&F.displayAxis);if(!F&&A){F=new ValueAxis()}if(B==0){var C=this.config.dataAxis[0].valueAxis.title;if(typeof (C)!="undefined"&&C!=""){F.title=C}else{F.title=this.config.dataAxis[0].title}}if(F&&A&&!(B>0&&D)){var E=new AmCharts.ValueAxis();E.id="v"+B;E.position=(B%2?"right":"left");E.offset=Math.floor(B/2)*80;if(D){E.stackType="regular"}if(this.config.dataAxis[B].showTitle){E.title=F.title}else{E.title=""}E.gridAlpha=F.gridAlpha;E.axisAlpha=F.axisAlpha;E.unit=this.config.dataAxis[B].currencyCode;E.unitPosition="left";this.canvas.addValueAxis(E)}}},addDataSeries:function(){for(var B=0;B<this.config.dataAxis.length;B++){var C=new AmCharts.AmGraph();C.title=this.config.dataAxis[B].title;C.valueField=this.config.dataAxis[B].id;var A=this.config.dataAxis[B].currencyCode;if(this.config.showLabels){C.labelText=A+"[[value]]"+this.getUnitTitle(B)}else{C.labelText=""}if(this.config.showDataTips){C.balloonText="<b>[[title]]</b><br>[[category]]<br><b>"+A+"[[value]]"+this.getUnitTitle(B)+"</b>"}else{C.balloonText=""}if(typeof (this.config.dataAxis[B].type)==undefined){this.config.dataAxis[B].type="column"}C.type=this.config.dataAxis[B].type;C.lineAlpha=this.config.dataAxis[B].lineAlpha;C.fillAlphas=this.config.dataAxis[B].fillAlphas;C.lineThickness=this.config.dataAxis[B].lineThickness;C.bullet=this.config.dataAxis[B].bullet;C.bulletAlpha=this.config.dataAxis[B].bulletAlpha;C.valueAxis="v"+B;this.canvas.addGraph(C);if(this.config.dataAxis[B].dataSourceId==""){this.config.dataAxis[B].dataSourceId=this.config.dataSourceId}}},addSecondaryGroupingDataSeries:function(){var C=this.canvas.dataProvider[0];for(var A in C){if(A==this.config.groupingAxis[0].id){continue}var B=new AmCharts.AmGraph();B.title=A;B.valueField=A;B.balloonText="<b>[[title]]</b><br><span style='font-size:14px'>[[category]]: <b>[[value]]</b></span>";B.fillAlphas=0.8;B.labelText="[[value]]";B.lineAlpha=0.3;B.type=this.config.dataAxis[0].type;this.canvas.addGraph(B)}},addCursor:function(){if(this.config.showDataTips||this.config.zoomable){var A=new AmCharts.ChartCursor();A.cursorAlpha=0;A.zoomable=this.config.zoomable;A.cursorPosition="mouse";A.categoryBalloonEnabled=false;A.valueBalloonsEnabled=false;this.canvas.addChartCursor(A)}else{this.canvas.removeChartCursor()}},addLegend:function(){var A=new AmCharts.AmLegend();A.useGraphSettings=true;A.position="bottom";A.valueText="";this.canvas.addLegend(A)},addZoomListener:function(){if(this.config.zoomable){this.canvas.addListener("dataUpdated",this.zoomChart);this.canvas.panEventsEnabled=true}},showLegend:function(A){if(this.canvas&&typeof this.canvas.legend!="undefined"){this.canvas.legend.showEntries=A}},setPanSelect:function(){if(document.getElementById("rb1").checked){this.canvas.chartCursor.pan=false;this.canvas.chartCursor.zoomable=true}else{this.canvas.chartCursor.pan=true}this.canvas.validateNow()},zoomChart:function(A){var B=A.chart;if(B&&this.initialized){B.zoomToIndexes(B.chartData.length-40,B.chartData.length-1)}},setOutlineProperties:function(){}});var PieChartControl=BaseChartControl.extend({constructor:function(B,A){this.inherit(B,A);this.canvas=new AmCharts.AmPieChart();if(this.config.chartType==this.config.CHARTTYPE_PIE_3D){this.canvas.depth3D=20;this.canvas.angle=30}else{this.canvas.depth3D=0;this.canvas.angle=0}this.canvas.prefixesOfBigNumbers=this.prefixesOfBigNumbers},setGroupingAxis:function(){this.canvas.titleField=this.config.groupingAxis[0].id},addDataSeries:function(){this.canvas.valueField=this.config.dataAxis[0].id;this.canvas.labelsEnabled=this.config.showLabels;if(this.config.showDataTips){this.canvas.balloonText="[[title]]<br><b>[["+this.config.dataAxis[0].currencyCode+"value]]"+this.getUnitTitle(0)+"</b> ([[percents]]%)"}else{this.canvas.balloonText=""}},addLegend:function(){var A=new AmCharts.AmLegend();A.position="bottom";A.align="center";A.markerType="circle";A.valueText="";this.canvas.addLegend(A);this.showLegend(this.config.showLegendOnLoad)},showLegend:function(A){this.canvas.legendDiv.hidden=!A},setOutlineProperties:function(){this.canvas.outlineColor="#FFFFFF";this.canvas.outlineAlpha=0.8;this.canvas.outlineThickness=2},setValueAxis:function(){},addZoomListener:function(){},addCursor:function(){}});var ChartControl=Base.extend({chart:null,constructor:function(B,A){if(A.chartType==A.CHARTTYPE_PIE||A.chartType==A.CHARTTYPE_PIE_3D){this.chart=new PieChartControl(B,A)}else{this.chart=new SerialChartControl(B,A)}},build:function(){this.chart.build()},setData:function(A){this.chart.setData(A)},setGroupingAxis:function(){this.chart.setGroupingAxis()},addDataSeries:function(){this.chart.addDataSeries()},setValueAxis:function(){this.chart.setValueAxis()},addLegend:function(){this.chart.addLegend()},showLegend:function(A){this.chart.showLegend(A)},addZoomListener:function(){this.chart.addZoomListener()},addEventListener:function(A,B){if(typeof this.chart.addListener=="function"){this.chart.addListener(A,B)}else{if(typeof this.chart.canvas.addListener=="function"){this.chart.canvas.addListener(A,B)}}},removeEventListener:function(A,B){if(typeof this.chart.removeListener=="function"){this.chart.removeListener(A,B)}else{if(typeof this.chart.canvas.removeListener=="function"){this.chart.canvas.removeListener(A,B)}}},syncHeight:function(){this.chart.syncHeight()},getAmExport:function(){return this.chart.canvas.AmExport},getImageBytes:function(){var A="";this.getAmExport().output({output:"datastring",format:"png"},function(B){A=B.substring(22)});return A}});Ab.namespace("chart");Ab.chart.HtmlChart=Ab.view.Component.extend({chartControl:null,configObj:null,refreshWorkflowRuleId:"",viewDef:"",dataSourceId:"",WORKFLOW_RULE_REFRESH:"AbCommonResources-getDataRecords",events:null,customEventListeners:null,constructor:function(K,D){this.inherit(K,"htmlChart",D);this.configObj=new ChartConfig();var E=D.getConfigParameter("controlType",this.configObj.CHARTTYPE_COLUMN);this.configObj.setChartType(E);this.configObj.width=D.getConfigParameterIfExists("width","100%");this.configObj.height=D.getConfigParameter("height","100%");this.configObj.showOnLoad=D.getConfigParameter("showOnLoad",true);this.configObj.showLegendOnLoad=D.getConfigParameter("showLegendOnLoad",true);this.configObj.legendLocation=D.getConfigParameter("legendLocation","bottom");this.configObj.showDataTips=D.getConfigParameter("showDataTips",true);this.configObj.showLabels=D.getConfigParameter("showLabels",true);this.configObj.showExportButton=D.getConfigParameter("showExportButton",false);this.configObj.showUnitPrefixes=D.getConfigParameter("showUnitPrefixes",true);this.configObj.showUnitSuffixes=D.getConfigParameter("showUnitSuffixes",false);var H=D.getConfigParameterIfExists("backgroundColor","#FFFFFF");if(valueExists(H)&&H!=""){this.configObj.backgroundColor=H}this.configObj.hidden=D.getConfigParameter("hidden",false);this.configObj.zoomable=D.getConfigParameter("zoomable",true);this.refreshWorkflowRuleId=D.getConfigParameter("refreshWorkflowRuleId",this.WORKFLOW_RULE_REFRESH);this.viewDef=D.getConfigParameter("viewDef","");this.dataSourceId=D.getConfigParameter("dataSourceId","");var A=D.getConfigParameter("fieldDefs");this.setCurrencyAndUnitFields(A);var G=D.getConfigParameter("groupingAxis");if(valueExists(G)&&G.length>0){this.configObj.addGroupingAxis(G[0].id,G[0].title);this.configObj.groupingAxis[0].setConfig(G[0]);if(this.dataSourceId==""){this.dataSourceId=G.dataSourceId}}var F=D.getConfigParameter("secondaryGroupingAxis");if(valueExists(F)&&F.length>0){this.configObj.addSecondaryGroupingAxis(F[0].id,F[0].title);this.configObj.secondaryGroupingAxis[0].setConfig(F[0])}var B=D.getConfigParameter("dataAxis");if(valueExists(B)&&B.length>0){for(var C=0;C<B.length;C++){this.configObj.addDataAxis(this.configObj.getDataAxisType(C),B[C].id,B[C].title);var I=D.getConfigParameter("dataAxisTitle");if(C==0&&valueExists(I)&&I!=""){this.configObj.dataAxis[C].valueAxis=new ValueAxis(I)}else{this.configObj.dataAxis[C].valueAxis=new ValueAxis(B[C].title)}this.configObj.dataAxis[C].setConfig(B[C])}}var J=D.getConfigParameter("events");if(valueExists(J)&&J!=null){this.events=J}this.evaluateExpressionsAfterLoad();this.chartControl=new ChartControl(this.id,this.configObj);this.chartControl.build();this.customEventListeners=new Ext.util.MixedCollection(true)},setCurrencyAndUnitFields:function(E){this.configObj.currencyFields={};this.configObj.unitFields={};if(valueExists(E)&&E!=null){var D=View.dataSources.get(this.dataSourceId);if(D!=null){var A=(valueExists(D.fieldDefs)&&D.fieldDefs!=null);this.fieldDefs=new Array();for(var C=0;C<E.length;C++){this.fieldDefs[C]=E[C];if(A){for(var B=0;B<D.fieldDefs.length;B++){if(E[C].id==D.fieldDefs.items[B].id){this.fieldDefs[C]=D.fieldDefs.items[B]}}}if(valueExists(this.fieldDefs[C].currency)){this.configObj.currencyFields[this.fieldDefs[C].id]=View.currencySymbolFor(this.fieldDefs[C].currency)}if(this.configObj.showUnitSuffixes){var F=this.fieldDefs[C].numericFormat;if(valueExists(F)){if(F=="area"){this.configObj.unitFields[this.fieldDefs[C].id]=View.user.areaUnits.title}else{if(F=="oppositeArea"){this.configObj.unitFields[this.fieldDefs[C].id]=View.user.areaUnits.oppositeTitle}else{if(F=="length"){this.configObj.unitFields[this.fieldDefs[C].id]=View.user.lengthUnits.title}else{if(F=="oppositeLength"){this.configObj.unitFields[this.fieldDefs[C].id]=View.user.lengthUnits.oppositeTitle}}}}}}}}}},addEventListener:function(A,D,B){this.inherit(A,D,B);if(!this.customEventListeners){return }var E=this.getEventListener(A);if(valueExists(E)){if(valueExists(B)){E=E.createDelegate(B)}if(this.customEventListeners.containsKey(A)){this.customEventListeners.replace(A,E)}else{this.customEventListeners.add(A,E)}}else{var C="The html chart listener for event "+A+" was not found";View.showMessage("message",C)}if(A==="onClickItem"){this.chartControl.addEventListener("clickGraphItem",function(G){var F=G.item;F.selectedChartData=G.item.dataContext;E.handle(F)})}else{this.chartControl.addEventListener(A,function(F){E(F.item)})}},getCustomEventListener:function(A){return this.customEventListeners.get(A)},removeCustomEventListener:function(A){this.customEventListeners.removeKey(A)},afterResize:function(){this.syncHeight()},syncHeight:function(){var B=Ext.get(this.id);if(B){var A=this.determineAvailableHeight()-this.getActionbarHeight()-this.getInstructionsHeight();B.setHeight(A);this.chartControl.syncHeight()}},evaluateExpressionsAfterLoad:function(A){var A=this.createEvaluationContext();if(valueExists(this.configObj.groupingAxis)){for(var B=0;B<this.configObj.groupingAxis.length;B++){var C=this.configObj.groupingAxis[B];C.title=View.evaluateString(C.title,A)}}if(valueExists(this.configObj.secondaryGroupingAxis)){for(var B=0;B<this.configObj.secondaryGroupingAxis.length;B++){var C=this.configObj.secondaryGroupingAxis[B];C.title=View.evaluateString(C.title,A)}}if(valueExists(this.configObj.dataAxis)){for(var B=0;B<this.configObj.dataAxis.length;B++){var C=this.configObj.dataAxis[B];C.title=View.evaluateString(C.title,A);var D=this.configObj.dataAxis[B].valueAxis;if(D){D.title=View.evaluateString(D.title,A)}}}},initialDataFetch:function(){if(this.showOnLoad){this.refresh(this.restriction);this.chartControl.initialized=true}if(this.getInstructionsEl()){this.showElement(this.getInstructionsEl(),true)}},refresh:function(A){if(valueExists(A)){this.restriction=A}this.chartControl.setData(this.getDataFromDataSources());this.afterRefresh()},getParameters:function(B){var E=this.config.getConfigParameter("groupingAxis");var C=this.config.getConfigParameter("dataAxis");var D={version:"2",viewName:this.viewDef,dataSourceId:this.dataSourceId,groupingAxis:toJSON(E),dataAxis:toJSON(C),type:"htmlChart"};var A=this.config.getConfigParameter("secondaryGroupingAxis");if(valueExists(A)&&A.length>0){D.secondaryGroupingAxis=toJSON(A)}if(valueExists(B)){D.restriction=toJSON(B)}Ext.apply(D,this.parameters);return D},getDataFromDataSources:function(){try{var B=this.getParameters(this.restriction);var A=Workflow.call(this.refreshWorkflowRuleId,B,120);return A.data}catch(C){Workflow.handleError(C)}},callReportJob:function(B){var C=B.outputType;if(C=="doc"||C=="docx"){C="png"}if(C=="png"||C=="jpg"){this.chartControl.chart.canvas.AmExport.output({format:C})}else{if(C=="pdf"){var A=new AmCharts.AmExport(this.chartControl.chart.canvas);A.init();screenWidth=A.width;A.output({output:"datastring",format:"jpg"},function(D){screenWidth=this.canvas.width;screenHeight=this.canvas.height;if(screenWidth>screenHeight){pdf=new jsPDF("landscape");ratioX=this.canvas.width/11;ratioY=this.canvas.height/8.5;if(ratioX>ratioY){pdf.addImage(D,"JPEG",10,10,280,280*screenHeight/screenWidth);pdf.save("amChart.pdf")}else{pdf.addImage(D,"JPEG",10,10,180*screenHeight/screenWidth,180);pdf.save("amChart.pdf")}}else{pdf=new jsPDF("portrait");ratioX=this.canvas.width/8.5;ratioY=this.canvas.height/11;if(ratioX>ratioY){pdf.addImage(D,"JPEG",10,10,180,180*screenWidth/screenHeight);pdf.save("amChart.pdf")}else{pdf.addImage(D,"JPEG",10,10,280*screenWidth/screenHeight,280);pdf.save("amChart.pdf")}}})}else{View.showMessage("error",C.toUpperCase()+" action is NOT supported for a HTML5 Chart panel. Please choose PNG, JPG or PDF format.")}}return null},getImageBytes:function(){return this.chartControl.getImageBytes()}});