<view version="2.0">
    <message name="validateMessage" translatable="true">Please select a valid</message>
    <message name="fieldNoNull" translatable="true">Units Type and Units can not be empty.</message>
    <message name="blIdMsg" translatable="true">Building Code</message>
    <message name="dpIdMsg" translatable="true">Department Code</message>
    <message name="dvIdMsg" translatable="true">Division Code</message>
    <message name="eqIdMsg" translatable="true">Equipment Code</message>
    <message name="flIdMsg" translatable="true">Floor Code</message>
    <message name="saveSuccess" translatable="true">Record was successfully saved</message>
    <message name="prIdMsg" translatable="true">Property Code</message>
    <message name="rmIdMsg" translatable="true">Room Code</message>
    <message name="siteIdMsg" translatable="true">Site Code</message>
    <message name="emIdMsg" translatable="true">Employee Name</message>
    <message name="contactIdMsg" translatable="true">Contact Code</message>
    <message name="disError" translatable="true">Shipped waste must be assigned to a Waste Disposition with Shipment type. Please choose a matching waste disposition.</message>
    <message name="quantityError" translatable="true">The entered quantity to ship can not be greater than the initial quantity.</message>
    <message name="quantityMsg" translatable="true">Quantity</message>
    <message name="numContainerMsg" translatable="true">Number of Containers</message>
    <message name="minusNotAllowed" translatable="true">cannot be minus.</message>
    <message name="and" translatable="true">and</message>
    <message name="checkMenifestMessage" translatable="true">The Generator Code that you selected is not the same as the one that exist for other Waste Shipments with the same Manifest Number. All waste records associated to a waste manifest must belong to the same generator.
    </message>
    <message name="transporterCode" translatable="true">Transporter Code</message>
    <message name="companyName" translatable="true">Transporter Name</message>
    <message name="phoneNumber" translatable="true">Phone Number</message>
    <message name="quantityEquals" translatable="true">You have requested a change in waste quantity. The difference in quantity will not be accounted for elsewhere in the system. Continue?</message>
    <message name="isHaz" translatable="true">This waste profile is identified as hazardous for transportation. Do you really want to complete the shipment without assigning it to a manifest?</message>
    <message name="checkQuantity" translatable="true">The entered quantity must be greater than zero.</message>
    <layout id="main">
        <north id="north" initialSize="30%" split="true"/>
        <center id="center"/>
        <south id="south" initialSize="50%" split="true"/>
    </layout>

    <title translatable="true">Track Waste Shipments</title>
   
    <dataSource id="abWasteTrackShipmentsConsoleDS">
        <table name="waste_out" role="main"/>
        <table name="waste_profiles" role="standard"/>
        
        <field table="waste_out" name="status"/>
        <field table="waste_out" name="pr_id"/>
        <field table="waste_out" name="date_shipped" />
        
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="bl_id"/>
        <field table="waste_out" name="date_end"/>
        
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="fl_id"/>  
        <field table="waste_profiles" name="waste_type"/>  
        <field table="waste_out" name="waste_disposition"/>  
        
        <field table="waste_out" name="storage_location"/>  
        <field table="waste_out" name="dv_id"/>  
        <field table="waste_out" name="waste_profile"/>  
        <field table="waste_out" name="facility_id"/>  
        
        <field table="waste_out" name="site_id"/>  
        <field table="waste_out" name="dp_id"/>  
        <field table="waste_profiles" name="waste_category"/>  
        <field table="waste_out" name="transporter_id"/>  
        
        <field table="waste_out" name="em_id"/>  
        <field table="waste_out" name="contact_id"/>  
    </dataSource>
    
    <panel type="console" columns="4" id="abWasteTrackShipmentsConsole" dataSource="abWasteTrackShipmentsConsoleDS" layoutRegion="north" >
        <title translatable="true">Filter</title>
        <action id="show">
            <title translatable="true">Show</title>
            <command type="showPanel" panelId="abWasteTrackShipmentsGrid"/>
            <command type="showPanel" panelId="abWasteTrackShipmentsForm" show="false"/>
        </action>
        
        <action id="clear">
            <title translatable="true">Clear</title>
            <command type="clearPanel" panelId="abWasteTrackShipmentsConsole"/>
        </action>
        
        <field table="waste_out" name="pr_id"/>
        <field name="date_shipped" alias="waste_out.date_shipped.from" op="&gt;=">
            <title translatable="true">Date Shipped From</title>
        </field>
        <field name="date_end" alias="waste_out.date_end.from" op="&gt;=">
            <title translatable="true">Generation Date From</title>
        </field>
        
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="bl_id">
            <action>
               <title>...</title>
               <tooltip translatable="true">Select Value</tooltip>
               <command type="selectValue" 
                        applyFilter="true"
                        fieldNames="waste_out.bl_id,waste_out.pr_id"
                        selectFieldNames="bl.bl_id,bl.pr_id"
                        visibleFieldNames="bl.bl_id,bl.name" 
                        >
                        <title>Building Code</title>
    	       </command>        
            </action>
        </field>
        
        <field name="date_shipped" alias="waste_out.date_shipped.to" op="&lt;=">
            <title translatable="true">Date Shipped To</title>
        </field>
        <field name="date_end"  alias="waste_out.date_end.to"  op="&lt;=">
            <title translatable="true">Generation Date To</title>
        </field>
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="fl_id"/>  
        <field table="waste_profiles" name="waste_type"/>  
        <field table="waste_out" name="waste_disposition" required="false">
            <action>
                <title></title>
                <command type="selectValue" 
                    fieldNames="waste_out.waste_disposition" 
                    applyFilter="false"
                    selectFieldNames="waste_dispositions.waste_disposition" 
                    visibleFieldNames="waste_dispositions.waste_disposition,waste_dispositions.disposition_type,waste_dispositions.description" restriction="waste_dispositions.disposition_type='S' ">
                </command>
            </action>
        </field>
        <field table="waste_out" name="storage_location">
           <action>
                <title>...</title>
                <command type="selectValue" 
                    fieldNames="waste_out.storage_location,waste_out.site_id" 
                    selectFieldNames="waste_areas.storage_location,waste_areas.site_id" 
                    visibleFieldNames="waste_areas.storage_location,waste_areas.area_type,waste_areas.site_id" >
                </command>
            </action>
        </field>  
        <field table="waste_out" name="dv_id"/>  
        <field table="waste_out" name="waste_profile" required="false">
           <action>
                <title>...</title>
                <command type="selectValue" 
                    fieldNames="waste_out.waste_profile" 
                    selectFieldNames="waste_profiles.waste_profile" 
                    visibleFieldNames="waste_profiles.waste_profile,waste_profiles.waste_name,waste_profiles.units_type" >
                </command>
            </action>
        </field>  
        <field table="waste_out" name="facility_id">
            <action>
                <title>...</title>
                <command 
                         type="selectValue"
                         fieldNames="waste_out.facility_id"
                         selectFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         visibleFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         applyFilter="false">
                </command>
                
            </action> 
        </field>  
        
        <field table="waste_out" name="site_id" required="false"/>  
        <field table="waste_out" name="dp_id"/>  
        <field table="waste_profiles" name="waste_category" required="false">
            <action>
                <title></title>
                <command type="selectValue" 
                    fieldNames="waste_profiles.waste_category" 
                    selectFieldNames="waste_categories.waste_category" 
                    visibleFieldNames="waste_categories.waste_category,waste_categories.description"   >
                </command>
            </action>
        
        </field>
        
        <field table="waste_out" name="transporter_id" required="false">
            <action>
             <title>...</title>
             <tooltip translatable="true">Select Value</tooltip>
                <command type="callFunction" functionName="selectValueTransporter('abWasteTrackShipmentsConsole')"/>
            </action>
        </field>
        <field table="waste_out" name="em_id"/>  
        <field table="waste_out" name="contact_id"/>  
    </panel>

    <dataSource id="abWasteTrackShipmentsGridDS">
        <table name="waste_out" role="main"/>
        <table name="waste_profiles" role="standard"/>
        <field table="waste_out" name="waste_id"/>  
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="shipment_id"/>
        
        <field table="waste_out" name="quantity"/>
        <field table="waste_out" name="units" />
        <field table="waste_out" name="waste_disposition"/>
        
        <field table="waste_out" name="date_end"/>
        <field table="waste_out" name="date_shipped" />
        <field table="waste_profiles" name="waste_name" />
        
        <field table="waste_profiles" name="waste_category"/>
        <field table="waste_out" name="storage_location"/>
        <field table="waste_out" name="generator_id"/>
        <field table="waste_out" name="status"/>
        <restriction type="sql" sql="waste_out.status ='S' or (waste_out.status ='D' and waste_out.waste_disposition in (select waste_dispositions.waste_disposition from waste_dispositions where waste_dispositions.disposition_type='S'))"/>
    </dataSource>
    
    <panel type="grid" id="abWasteTrackShipmentsGrid"  showOnLoad="false" dataSource="abWasteTrackShipmentsGridDS" layoutRegion="center" >
        <title translatable="true">Waste Shipment Details</title>
        <sortField table="waste_out" name="status" ascending="false"/>
        <sortField table="waste_out" name="manifest_number" ascending="true"/>
        <sortField table="waste_out" name="shipment_id" ascending="true"/>
        <sortField table="waste_out" name="quantity" ascending="true"/>
        <sortField table="waste_out" name="units" ascending="true"/>
        <sortField table="waste_out" name="waste_disposition" ascending="true"/>
        <sortField table="waste_out" name="date_shipped" ascending="true"/>
        <sortField table="waste_profiles" name="waste_name" ascending="true"/>
        <sortField table="waste_profiles" name="waste_category" ascending="true"/>
        <action id="addNew">
            <title translatable="true">Add New</title>
        </action>
        <field table="waste_out" name="manifest_number" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="shipment_id"  controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        
        
        <field table="waste_out" name="quantity"  controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="units" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="waste_disposition" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        
        
        <field table="waste_out" name="date_shipped" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_profiles" name="waste_name" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        
        <field table="waste_profiles" name="waste_category" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="storage_location" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="generator_id" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field table="waste_out" name="status" controlType="link" >
            <command type="callFunction" functionName="editWasteShipment()"/>
        </field>
        <field id="manifestDetail" controlType="button" enabled="${!(record['waste_out.manifest_number'] == '') }">
            <title translatable="true">View Manifest</title>
        </field>
        <field id="wasteDetail" controlType="button" >
            <title translatable="true">View Waste</title>
        </field>
        <field table="waste_out" name="waste_id" hidden="true"/>  
        <indexField table="waste_out" name="waste_id"/>
    </panel>
     
    <dataSource id="abWasteTrackShipmentsFormDS">
        <table name="waste_out" role="main"/>
        <table name="waste_dispositions" role="standard"/>
        
        <field table="waste_dispositions" name="disposition_type"/>
        <field table="waste_dispositions" name="waste_disposition"/>
        
        
        
        
        <field table="waste_out" name="waste_id"/>
        <field table="waste_out" name="waste_disposition"/>
        <field table="waste_out" name="bl_id"/>
        
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="date_start"/>  
        <field table="waste_out" name="fl_id"/>  
        
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="date_end"/>
        <field table="waste_out" name="rm_id"/>
        
        <field table="waste_out" name="quantity"/>
        <field table="waste_out" name="date_shipped"/>
        <field table="waste_out" name="eq_id"/>
        
        <field table="waste_out" name="units"/>
        <field table="waste_out" name="facility_id"/>
        <field table="waste_out" name="dv_id"/>
        
        <field table="waste_out" name="container_id"/>
        <field table="waste_out" name="number_containers"/>
        <field table="waste_out" name="transporter_id"/>
        <field table="waste_out" name="dp_id"/>
        
        <field table="waste_out" name="container_cat"/>
        <field table="waste_out" name="site_id"/>
        <field table="waste_out" name="method_code"/>
        
        <field table="waste_out" name="waste_profile"/>
        <field table="waste_out" name="pr_id"/>
        <field table="waste_out" name="status"/>
        
        <field table="waste_out" name="em_id"/>  
        <field table="waste_out" name="contact_id"/>  
        <field table="waste_out" name="notes"/>
        <field table="waste_out" name="generator_id"/>
        <field table="waste_out" name="units_type"/>
    </dataSource>
    <panel type="form" id="abWasteTrackShipmentsForm" columns="3" dataSource="abWasteTrackShipmentsFormDS" layoutRegion="south" showOnLoad="false">
        <title translatable="true">Edit Waste Shipment</title>
        <action id="addNewManifest" enabled="true">
            <title translatable="true">Define New Manifest</title>
        </action>
        <action id="save">
            <title translatable="true">Save</title>
        </action>
        <action id="delete" enabled="${!panel.newRecord}">
            <title translatable="true">Delete</title>
            <command type="deleteRecord"/>
            <command type="showPanel" panelId="abWasteTrackShipmentsForm" show="false"/>
            <command type="showPanel" panelId="abWasteTrackShipmentsGrid"  applyParentRestriction="false"/>
        </action>
        <action id="cancel">
            <title translatable="true">Cancel</title>
            <command type="showPanel" panelId="abWasteTrackShipmentsForm" show="false"/>
        </action>
        <field table="waste_out" name="waste_id"/>
        <field table="waste_out" name="container_id"/>
        <field table="waste_out" name="site_id"/>
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="container_cat">
            <title translatable="true">Container Category</title>
            <action>
                <title>...</title>
                <tooltip translatable="true">Select Value</tooltip>
                <command type="selectValue" 
                fieldNames="waste_out.container_cat"
                selectFieldNames="hazard_container_cat.container_cat"
                visibleFieldNames="hazard_container_cat.container_cat,hazard_container_cat.description"
                restriction="hazard_container_cat.activity_id = 'AbRiskWasteMgmt'" 
                >
                <title translatable="true">Container Category</title>
                </command>
            </action>
        </field>
        <field table="waste_out" name="pr_id"/> 
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="number_containers"/>
        <field table="waste_out" name="bl_id">
            <action>
               <title>...</title>
               <tooltip translatable="true">Select Value</tooltip>
               <command type="selectValue" 
                        applyFilter="true"
                        fieldNames="waste_out.bl_id,waste_out.pr_id"
                        selectFieldNames="bl.bl_id,bl.pr_id"
                        visibleFieldNames="bl.bl_id,bl.name" 
                        >
                        <title>Building Code</title>
               </command>        
            </action>
        </field>
        <field table="waste_out" name="waste_profile" >
        <action>
                <title>...</title>
                <command 
                         type="selectValue"
                         fieldNames="waste_out.waste_profile,waste_out.units_type"
                         selectFieldNames="waste_profiles.waste_profile,waste_profiles.units_type"
                         visibleFieldNames="waste_profiles.waste_profile,waste_profiles.waste_name,waste_profiles.units_type" 
                         actionListener="afterSelectProfile"
                         restriction="waste_profiles.status='A'" 
                         applyFilter="false">
                </command>
            </action>
        </field>
        <field table="waste_out" name="waste_disposition" required="true">
            <action>
                <title></title>
                <command type="selectValue" 
                    fieldNames="waste_out.waste_disposition,waste_dispositions.disposition_type" 
                    applyFilter="false"
                    selectFieldNames="waste_dispositions.waste_disposition,waste_dispositions.disposition_type" 
                    visibleFieldNames="waste_dispositions.waste_disposition,waste_dispositions.disposition_type,waste_dispositions.description" 
                    restriction="waste_dispositions.disposition_type='S' ">
                    <title>Waste Disposition</title>
                </command>
            </action>
        </field>
        <field table="waste_out" name="fl_id"/>  
        
        <field table="waste_out" name="date_start"/>  
        <field table="waste_out" name="method_code">
            <action>
                <title></title>
                <command type="selectValue" 
                    fieldNames="waste_out.method_code" 
                    selectFieldNames="waste_mgmt_methods.method_code" 
                    visibleFieldNames="waste_mgmt_methods.method_group,waste_mgmt_methods.method_code,waste_mgmt_methods.method_name" >
                    <title>Management Method Code</title>
                </command>
            </action>
        </field>
        <field table="waste_out" name="rm_id"/>
        
        <field table="waste_out" name="date_end" />
        <field table="waste_out" name="status" hidden="true" readOnly="true"/>
        <field table="waste_out" name="generator_id"/>
        <field table="waste_out" name="eq_id"/>
        <field table="waste_out" name="date_shipped" required="true"/>
        <field table="waste_out" name="facility_id">
            <action>
                <title>...</title>
                <command 
                         type="selectValue"
                         fieldNames="waste_out.facility_id"
                         selectFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         visibleFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         restriction="waste_facilities.status='A'" 
                         applyFilter="false">
                         <title translatable="true">Facility Code</title>
                </command>
            </action> 
        </field>  
        <field table="waste_out" name="dv_id"/>
        <field table="waste_out" name="quantity" required="true"/>
        <field table="waste_out" name="transporter_id">
            <action>
             <title>...</title>
             <tooltip translatable="true">Select Value</tooltip>
                <command type="callFunction" functionName="selectValueTransporterIsActive('abWasteTrackShipmentsForm')"/>
            </action>
        </field>
        
        <field table="waste_out" name="dp_id"/>
       
       
        
        <field table="waste_out" name="units_type" hidden="true"/>
        <field id="unitsType"  required="true">
        <title translatable="true">Units Type</title>
            <html>
                <select  name="unitsType" id="unitsType" onchange="fillUnit()">
                </select>
            </html>
        </field>
    	<field/>
        <field table="waste_out" name="em_id"  />  
        <field table="waste_out" name="units" hidden="true"/>
        <field id="units" required="true">
        <title translatable="true">Units</title>
            <html>
                <select  name="units" id="units">
                </select>
            </html>
        </field>
        <field/>
        <field table="waste_out" name="contact_id"  /> 
        
        <field table="waste_out" colspan="3" name="notes"/>
        <field table="waste_dispositions" name="disposition_type" hidden="true"/>
    </panel>
    
    <dataSource id="abWasteTrackShipmentsViewManifestDS">
        <table name="waste_manifests" role="main"/>
        <table name="waste_facilities" role="standard"/>
        
        <field table="waste_manifests" name="manifest_number"/>
        <field table="waste_manifests" name="signed_by"/>
        <field table="waste_manifests" name="manifest_reference_num"/>
        
        <field table="waste_manifests" name="port"/>
        <field table="waste_manifests" name="generator_id"  dataType="text" >
            <title translatable="true">Generator Code</title>
            <sql dialect="generic">
               (select generator_id from waste_out where waste_out.waste_id=${parameters['wasteId']})
            </sql>
        </field>
        <field table="waste_manifests" name="date_received"/>
        <field table="waste_manifests" name="facility_id"/>
        <field table="waste_manifests" name="international_shipments"/>
        <field table="waste_facilities" name="facility_name"/>
        
        <field table="waste_manifests" name="discrepancy_full_rejection"/>
        <field table="waste_facilities" name="vn_id"/>
        
        <field table="waste_manifests" name="discrepancy_partial_rejection"/>
        <field table="waste_manifests" name="discrepancy_type"/>
        <field table="waste_manifests" name="date_shipped"/>
        <field table="waste_manifests" name="discrepancy_qty"/>
        <field table="waste_manifests" name="date_country_departure"/>
        <field table="waste_manifests" name="discrepancy_residue"/>
        
        <field table="waste_manifests" name="date_acceptance"/>
        <field table="waste_manifests" name="facility_id_alt"/>
        <field table="waste_manifests" name="transporter_id"/>
        <field table="waste_manifests" name="date_alternate_facility"/>
        <field table="waste_manifests" name="date_transporter"/>
        <field table="waste_manifests" name="date_shipped_alt"/>
        <field table="waste_manifests" name="sign_transporter"/>

        <field table="waste_manifests" name="sign_transporter"/>
        <field table="waste_manifests" name="sign_facility"/>        
        <field table="waste_manifests" name="sign_alternate_facility" />
        <field table="waste_manifests" name="transporter_id_2"/>   
        <field table="waste_manifests" name="date_facility_contact"/>   
        <field table="waste_manifests" name="date_transporter_2"/>   
        <field table="waste_manifests" name="date_exception"/>   
        <field table="waste_manifests" name="sign_transporter_2"/>   
        
        <field table="waste_manifests" name="handling_instructions" />   
        <field table="waste_manifests" name="facility_contact_notes" />
        <field table="waste_manifests" name="exception_notes" />   
        <field table="waste_manifests" name="doc" />
        <parameter name="wasteId" dataType="text" value=""/>
    </dataSource>
    
    <panel type="form" id="abWasteTrackShipmentsViewManifestForm" columns="2" dataSource="abWasteTrackShipmentsViewManifestDS"  showOnLoad="false">
        <title translatable="true">Manifest Details</title>
        <field table="waste_manifests" name="manifest_number" readOnly="true"/>
        <field table="waste_manifests" name="signed_by" readOnly="true"/>
        <field table="waste_manifests" name="manifest_reference_num" readOnly="true"/>
        
        <field table="waste_manifests" name="port" readOnly="true"/>
        <field table="waste_manifests" name="generator_id" dataType="text" readOnly="true" >
            <title translatable="true">Generator Code</title>
        </field>
        <field table="waste_manifests" name="date_received" readOnly="true"/>
        <field table="waste_manifests" name="facility_id" readOnly="true"/>
        <field table="waste_manifests" name="international_shipments" readOnly="true"/>
        <field table="waste_facilities" name="facility_name" readOnly="true"/>
        
        <field table="waste_manifests" name="discrepancy_full_rejection" readOnly="true"/>
        <field table="waste_facilities" name="vn_id" readOnly="true">
        <title translatable="true">Facility Vendor Code</title>
        </field>
        <field table="waste_manifests" name="discrepancy_partial_rejection" readOnly="true"/> 
        
        <field table="waste_manifests" name="sign_facility" readOnly="true"/>   
        <field table="waste_manifests" name="discrepancy_type" readOnly="true"/>
        
        
        <field table="waste_manifests" name="date_shipped" readOnly="true"/>
        <field table="waste_manifests" name="discrepancy_qty" readOnly="true"/>
        <field table="waste_manifests" name="date_country_departure" readOnly="true"/>
        <field table="waste_manifests" name="discrepancy_residue" readOnly="true"/>
        
        <field table="waste_manifests" name="date_acceptance" readOnly="true"/>
        <field table="waste_manifests" name="facility_id_alt" readOnly="true"/>
        
        <field table="waste_manifests" name="transporter_id" readOnly="true"/>
        <field table="waste_manifests" name="date_alternate_facility" readOnly="true"/>
        <field table="waste_manifests" name="date_transporter" readOnly="true"/>
        <field table="waste_manifests" name="date_shipped_alt" readOnly="true"/> 
        <field table="waste_manifests" name="sign_transporter" readOnly="true"/> 
        <field table="waste_manifests" name="sign_alternate_facility" readOnly="true"/>
        <field table="waste_manifests" name="transporter_id_2" readOnly="true"/>   
        <field table="waste_manifests" name="date_facility_contact" readOnly="true"/>   
        <field table="waste_manifests" name="date_transporter_2" readOnly="true"/>   
        <field table="waste_manifests" name="date_exception" readOnly="true"/>   
        <field table="waste_manifests" name="sign_transporter_2" readOnly="true"/>
        <field table="waste_manifests" name="doc" readOnly="true"/>
        <field table="waste_manifests" name="handling_instructions" colspan="2" readOnly="true"/>   
  
        <field table="waste_manifests" name="facility_contact_notes" colspan="2" readOnly="true"/>
        <field table="waste_manifests" name="exception_notes" colspan="2" readOnly="true"/>   
        
    </panel>
    
    <dataSource id="abWasteTrackShipmentsViewWasteShipmentDS">
        <table name="waste_out" role="main"/>
        <table name="waste_facilities" role="standard"/>
        <table name="waste_profiles" role="standard"/>
        <table name="vn" role="standard"/>
        
        <field table="waste_out" name="waste_id"/>
        <field table="waste_out" name="site_id"/>
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="pr_id"/>
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="bl_id"/>
        <field table="waste_out" name="quantity"/>
        <field table="waste_out" name="fl_id"/>  
        <field table="waste_out" name="units"/>
        <field table="waste_out" name="dv_id"/>
        <field table="waste_out" name="waste_disposition"/>
        <field table="waste_out" name="dp_id"/>
        <field table="waste_out" name="em_id"/>  
        <field table="waste_out" name="contact_id"/>  
        
        <field table="waste_out" name="date_end"/>
        <field table="waste_facilities" name="facility_name"/>
        <field table="waste_out" name="date_shipped"/>
        <field table="vn" name="company"/>
        <field table="waste_profiles" name="waste_name"/>
        <field table="waste_out" name="waste_profile"/>
        <field table="waste_profiles" name="waste_category"/>
        <field table="waste_out" name="storage_location"/>
        
        <field table="waste_out" name="date_start"/>  
        
        <field table="waste_out" name="status"/>
        <field table="waste_profiles" name="waste_type"/>
        <field table="waste_out" name="transporter_id"/>
        
    </dataSource>
    
    <panel type="form" id="abWasteTrackShipmentsViewWasteShipmentForm" columns="2" dataSource="abWasteTrackShipmentsViewWasteShipmentDS"  showOnLoad="false">
        <title translatable="true">Waste Shipment Details</title>
        <field table="waste_out" name="waste_id" readOnly="true"/>
        <field table="waste_out" name="site_id" readOnly="true"/>
        <field table="waste_out" name="manifest_number" readOnly="true"/>  
        <field table="waste_out" name="pr_id" readOnly="true"/>
        <field table="waste_out" name="shipment_id" readOnly="true"/>
        <field table="waste_out" name="bl_id" readOnly="true"/>
        <field table="waste_out" name="quantity" readOnly="true"/>
        <field table="waste_out" name="fl_id" readOnly="true"/>  
        <field table="waste_out" name="units" readOnly="true"/>
        <field table="waste_out" name="dv_id" readOnly="true"/>
        <field table="waste_out" name="waste_disposition" readOnly="true"/>
        <field table="waste_out" name="dp_id" readOnly="true"/>
        <field table="waste_out" name="em_id" readOnly="true"/>  
        <field table="waste_out" name="contact_id" readOnly="true"/>  
        
        <field table="waste_out" name="date_end" readOnly="true"/>
        <field table="waste_facilities" name="facility_name" readOnly="true"/>
        <field table="waste_out" name="date_shipped" readOnly="true"/>
        <field table="vn" name="company">
            <title translatable="true">Transporter Name</title>
        </field>
        <field table="waste_profiles" name="waste_name" readOnly="true"/>
        <field table="waste_out" name="waste_profile" readOnly="true"/>
        <field table="waste_profiles" name="waste_category" readOnly="true"/>
        <field table="waste_out" name="storage_location" readOnly="true"/>
        
        <field table="waste_out" name="date_start" readOnly="true"/>  
        
        <field table="waste_out" name="status" readOnly="true"/>
        <field table="waste_profiles" name="waste_type" readOnly="true"/>
        <field table="waste_out" name="transporter_id" readOnly="true"/>
    </panel>
    
	<dataSource id="abWasteDefMainfestsType">
        <table name="bill_type" />
        <field table="bill_type" name="bill_type_id"/>
        <field table="bill_type" name="activity_id"/>
        <restriction type="sql" sql="activity_id='AbRiskWasteMgmt' and bill_type_id not like 'REPORTS%'" />
    </dataSource>
    <dataSource id="abWasteDefMainfestsUnit">
        <table name="bill_unit" />
        <field table="bill_unit" name="bill_unit_id"/>
        <field table="bill_unit" name="bill_type_id"/>
        <field table="bill_unit" name="is_dflt"/>
        <sortField table="bill_unit" name="is_dflt" ascending="false"/>
        <sortField table="bill_unit" name="bill_unit_id" ascending="true"/>
    </dataSource>
    <dataSource id="afmFieldsDS">
        <table name="afm_flds" />
        <field table="afm_flds" name="table_name"/>
        <field table="afm_flds" name="field_name"/>
        <field table="afm_flds" name="validate_data"/>
    </dataSource>
    
    <dataSource id="abWasteTrackWasteDS">
        <table name="waste_out" role="main"/>
        <field table="waste_out" name="waste_id"/>
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="generator_id"/>
    </dataSource>
    <dataSource id="wasteOutForJavaDs">
        <table name="waste_out" role="main"/>
        <table name="waste_dispositions" role="standard"/>
        
        <field table="waste_dispositions" name="disposition_type"/>
        <field table="waste_dispositions" name="waste_disposition"/>
        
        
        
        
        <field table="waste_out" name="waste_id"/>
        <field table="waste_out" name="waste_disposition"/>
        <field table="waste_out" name="storage_location"/>
        <field table="waste_out" name="bl_id"/>
        
        <field table="waste_out" name="manifest_number"/>  
        <field table="waste_out" name="date_start"/>  
        <field table="waste_out" name="fl_id"/>  
        
        <field table="waste_out" name="shipment_id"/>
        <field table="waste_out" name="date_end"/>
        <field table="waste_out" name="rm_id"/>
        
        <field table="waste_out" name="quantity"/>
        <field table="waste_out" name="date_shipped"/>
        <field table="waste_out" name="eq_id"/>
        
        <field table="waste_out" name="units"/>
        <field table="waste_out" name="facility_id"/>
        <field table="waste_out" name="dv_id"/>
        
        <field table="waste_out" name="container_id"/>
        <field table="waste_out" name="number_containers"/>
        <field table="waste_out" name="transporter_id"/>
        <field table="waste_out" name="dp_id"/>
        
        <field table="waste_out" name="container_cat"/>
        <field table="waste_out" name="site_id"/>
        <field table="waste_out" name="method_code"/>
        
        <field table="waste_out" name="waste_profile"/>
        <field table="waste_out" name="pr_id"/>
        <field table="waste_out" name="status"/>
        
        <field table="waste_out" name="em_id"/>  
        <field table="waste_out" name="contact_id"/>  
        <field table="waste_out" name="notes"/>
        <field table="waste_out" name="generator_id"/>
        <field table="waste_out" name="units_type"/>
        <field table="waste_out" name="time_end"/>  
        <field table="waste_out" name="time_start"/> 
    </dataSource>
    <dataSource id="wasteDispositionDS">
        <table name="waste_dispositions" />
        <field table="waste_dispositions" name="waste_disposition"/>
        <field table="waste_dispositions" name="disposition_type"/>
        <field table="waste_dispositions" name="description"/>
    </dataSource>
    <dataSource id="wasteProfileDS">
        <table name="waste_profiles" />
        <field table="waste_profiles" name="waste_profile"/>
        <field table="waste_profiles" name="transp_hazardous"/>
    </dataSource>
    <dataSource id="abWasteDefMainfestsFormDs">
        <table name="waste_manifests" role="main" />
        <table name="waste_facilities" role="standard" />
        <field table="waste_manifests" name="manifest_number" />
        <field table="waste_manifests" name="signed_by" />
        <field table="waste_manifests" name="manifest_reference_num" />
        <field table="waste_manifests" name="port" />
        <field table="waste_facilities" name="facility_id" />
        <field table="waste_manifests" name="date_received" />
        <field table="waste_manifests" name="facility_id" />
        <field table="waste_manifests" name="international_shipments" />
        <field table="waste_facilities" name="facility_name" />
        <field table="waste_manifests" name="discrepancy_full_rejection" />
        <field table="waste_facilities" name="vn_id" />
        <field table="waste_manifests" name="discrepancy_partial_rejection" />
        <field table="waste_manifests" name="sign_facility" />
        <field table="waste_manifests" name="discrepancy_type" />
        <field table="waste_manifests" name="date_shipped" />
        <field table="waste_manifests" name="discrepancy_qty" />
        <field table="waste_manifests" name="date_country_departure" />
        <field table="waste_manifests" name="discrepancy_residue" />
        <field table="waste_manifests" name="date_acceptance" />
        <field table="waste_manifests" name="facility_id_alt" />
        <field table="waste_manifests" name="transporter_id" />
        <field table="waste_manifests" name="date_alternate_facility" />
        <field table="waste_manifests" name="date_transporter" />
        <field table="waste_manifests" name="date_shipped_alt" />
        <field table="waste_manifests" name="sign_transporter" />
        <field table="waste_manifests" name="sign_alternate_facility" />
        <field table="waste_manifests" name="transporter_id_2" />
        <field table="waste_manifests" name="date_facility_contact" />
        <field table="waste_manifests" name="date_transporter_2" />
        <field table="waste_manifests" name="date_exception" />
        <field table="waste_manifests" name="sign_transporter_2" />
        
        <field table="waste_manifests" name="handling_instructions" />
        <field table="waste_manifests" name="facility_contact_notes" />
        <field table="waste_manifests" name="exception_notes" />
        <field table="waste_manifests" name="doc" />
    </dataSource>
    <panel type="form" columns="2" id="abWasteDefMainfestsForm" dataSource="abWasteDefMainfestsFormDs"
         showOnLoad="false" >
        <title translatable="true">Edit Waste Manifest</title>
        <action id="save">
            <title translatable="true">Save</title>
        </action>
        <action>
            <title translatable="true">Cancel</title>
            <command type="closeDialog"/>
        </action>
        <field table="waste_manifests" name="manifest_number" />
        <field table="waste_manifests" name="signed_by" />
        <field table="waste_manifests" name="manifest_reference_num" />
        <field table="waste_manifests" name="port" />
        <field id="generator_id" dataType="text" >
            <title translatable="true">Generator Code</title>
             <action>
                <title>...</title>
                <command 
                         type="selectValue"
                         fieldNames="generator_id"
                         selectFieldNames="waste_generators.generator_id"
                         visibleFieldNames="waste_generators.generator_id,waste_generators.type"
                         applyFilter="false">
                         <title translatable="true">Generator Code</title>
                </command>
                
            </action> 
        </field>
        <field table="waste_manifests" name="date_received" />
        <field table="waste_manifests" name="facility_id" >
           <action>
                <title>...</title>
                <command 
                         type="selectValue"
                         fieldNames="waste_manifests.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         selectFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         visibleFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id"
                         restriction="waste_facilities.status='A'" 
                         applyFilter="false">
                         <title translatable="true">Waste Facility Code</title>
                </command>
                
            </action> 
        </field>
        <field table="waste_manifests" name="international_shipments"/>
        
        <field table="waste_facilities" name="facility_name"  required="false" readOnly="false"/>
        <field table="waste_manifests" name="discrepancy_full_rejection" />
        <field table="waste_facilities" name="vn_id"  required="false" readOnly="false" showSelectValueAction="false"/>
        <field table="waste_manifests" name="discrepancy_partial_rejection" />
        <field table="waste_manifests" name="sign_facility" />
        <field table="waste_manifests" name="discrepancy_type" />
        <field table="waste_manifests" name="date_shipped" />
        <field table="waste_manifests" name="discrepancy_qty" />
        <field table="waste_manifests" name="date_country_departure" />
        <field table="waste_manifests" name="discrepancy_residue" />
        <field table="waste_manifests" name="date_acceptance" />
        <field table="waste_manifests" name="facility_id_alt">
            <action>
                <title></title>
                <command type="selectValue" 
                    fieldNames="waste_manifests.facility_id_alt" 
                    selectFieldNames="waste_facilities.facility_id" 
                    visibleFieldNames="waste_facilities.facility_id,waste_facilities.facility_name,waste_facilities.vn_id" 
                    restriction="waste_facilities.status='A' ">
                    <title>Waste Facility Code Alt</title>
                </command>
            </action>
        </field>
        <field table="waste_manifests" name="transporter_id" >
            <action>
             <title>...</title>
             <tooltip translatable="true">Select Value</tooltip>
                <command type="callFunction" functionName="selectValueTransporterIsActive('abWasteDefMainfestsForm','waste_manifests.transporter_id')"/>
            </action>
        </field>
        <field table="waste_manifests" name="date_alternate_facility" />
        <field table="waste_manifests" name="date_transporter" />
        <field table="waste_manifests" name="date_shipped_alt" />
        <field table="waste_manifests" name="sign_transporter" />
        <field table="waste_manifests" name="sign_alternate_facility" />
        <field table="waste_manifests" name="transporter_id_2" >
            <action>
             <title>...</title>
             <tooltip translatable="true">Select Value</tooltip>
                <command type="callFunction" functionName="selectValueTransporterIsActive('abWasteDefMainfestsForm','waste_manifests.transporter_id_2')"/>
            </action> 
        </field>
        <field table="waste_manifests" name="date_facility_contact" />
        <field table="waste_manifests" name="date_transporter_2" />
        <field table="waste_manifests" name="date_exception" />
        <field table="waste_manifests" name="sign_transporter_2" />
        <field table="waste_manifests" name="doc" />
        <field table="waste_manifests" name="handling_instructions" colspan="2"/>
        <field table="waste_manifests" name="facility_contact_notes" colspan="2"/>
        <field table="waste_manifests" name="exception_notes" colspan="2"/>
    </panel>
    <js file="ab-waste-track-shipments.js"/>
    <js file="ab-waste-common.js" />
</view>