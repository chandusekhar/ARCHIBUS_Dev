<view version="2.0">
    <js file="ab-ls-console-complete.js"/>
    <js file="ab-schema-utils.js"/>
    <js file="ab-repm-lsadmin-comm-log-common.js"/>
    
    <!-- Messages -->
    <message name="type_lease" translatable="true">Lease</message>
    <message name="type_building" translatable="true">Building</message>
    <message name="type_property" translatable="true">Property</message>
    <!-- message name="titleListPanel" translatable="true">Contacts associated with {0} {1}</message-->
    <message name="titleListPanel" translatable="true">Contacts</message>

    <message name="msgConfirmDelete" translatable="true">Do you want to delete contact?</message>
    <message name="msgConfirmUnassign" translatable="true">Do you want to unassign selected contact(s)?</message>
    <message name="errorNoSelection" translatable="true">You didn't select any contact.</message>
    <message name="titleAssign" translatable="true">Assign</message>

    <message name="error_delete" translatable="true">Could not delete selected item.</message>
    <message name="edit_base_rent" translatable="true">Edit Recurring Cost</message>
    <message name="add_base_rent" translatable="true">Add Recurring Cost</message>

    <message name="add_new_clause" translatable="true">Add Clause</message>
    <message name="edit_clause" translatable="true">Edit Clause</message>

    <message name="add_new_option" translatable="true">Add Option</message>
    <message name="edit_option" translatable="true">Edit Option</message>

    <message name="add_new_amendment" translatable="true">Add Amendment</message>
    <message name="edit_amendment" translatable="true">Edit Amendment</message>
    
    <message name="viewTitleReport" translatable="true">Communication Log Items Report</message>

    <message name="error_delete_one_bl_suite" translatable="true">This building has only one suite.You can not delete this suite</message>
    <message name="message_suite_confirmdelete" translatable="true">Are you sure you want to remove this suite?</message>
    <message name="error_delete_suite" translatable="true">Could not delete selected suite.</message>
    <message name="message_cancelconfirm" translatable="true">Are you sure you want to cancel?</message>
    <message name="title_bldg_grid" translatable="true">Suites for this Building</message>
    <message name="add_new" translatable="true">Add Suite</message>
    <message name="edit" translatable="true">Edit Suite</message>
    <message name="error_split" translatable="true">Can not perform the Split since there is a CAD drawing attached to that suite.</message>
    <message name="message_confirm_unassign" translatable="true">Are you sure you want to unassign the selected suite?</message>
    
    <message name="paramLabel_clause" translatable="true">Clause</message>
    <message name="paramLabel_option" translatable="true">Option</message>
    <message name="paramLabel_amendment" translatable="true">Amendment</message>
    <message name="paramLabel_comm_log" translatable="true">Communication Log</message>
    <message name="paramLabel_document" translatable="true">Lease Document</message>
    <message name="add_new_doc" translatable="true">Add Document</message>

    
    <!-- Lease details -->
    <dataSource id="abRepmLeaseDetailsComplete_ds">
        <table name="ls"/>
        <field name="ls_id"/>
        <field name="date_start"/>
        <field name="tn_name"/>
        <field name="description"/>
        <field name="date_move"/>
        <field name="tn_contact"/>
        <field name="bl_id"/>
        <field name="date_end"/>
        <field name="ls_id"/>
        <field name="ld_name"/>
        <field name="amount_security" dataType="number" size="20" decimals="2"  currency="${user.userCurrency.code}">
            <title>Amount - Security Dep.</title>
            <sql dialect="generic">
                (ls.amount_security * ${sql.exchangeRateFromBudgetToUser('Payment')})
            </sql>
        </field>
        <field name="description"/>
        <field name="ld_contact"/>
        <field name="qty_occupancy"/>       
        <field name="signed"/> 
        <field name="tn_name"/>
        <field name="floors"/>
        <field name="date_start"/>
        <field name="tn_contact"/>
        <field name="lease_sublease"/> 
        <field name="date_move"/>
        <field name="bl_id"/>
        <field name="landlord_tenant"/>
        <field name="date_end"/>
        <field name="pr_id"/>
        <field name="ls_parent_id"/>
        <field name="automatic_renewal"/>
        <field name="area_negotiated" numericFormat="area"/>
        <field name="area_rentable" numericFormat="area"/>
        <field name="comments"/>
    </dataSource>

    <panel type="form" id="abRepmLeaseDetailsComplete_info" dataSource="abRepmLeaseDetailsComplete_ds" layoutRegion="detailsPos" columns="3" showOnLoad="false">
        <title>General Lease Information</title>
        <action id="edit">
            <title>Edit</title>
        </action>
        <action id="details">
            <title>More</title>
            <command type="openDialog" panelId="abRepmLeaseDetailsComplete_details" width="1024" height="400" closeButton="true"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="date_start" readOnly="true"/>
        <field name="tn_name" readOnly="true"/>
        
        <field name="description" readOnly="true"/>
        <field name="date_move" readOnly="true"/>
        <field name="tn_contact" readOnly="true"/>
        
        <field name="bl_id" readOnly="true"/>
        <field name="date_end" readOnly="true"/>
        <field name="area_negotiated" numericFormat="area" readOnly="true"/>
        <field name="pr_id" hidden="true"/>
    </panel>
     
    <panel type="form" id="abRepmLeaseDetailsComplete_details" dataSource="abRepmLeaseDetailsComplete_ds" afterRefresh="formatCurrency" showOnLoad="false" hidden="true" layoutRegion="detailsPos"  columns="3">
        <title>More Details</title>
        <field name="ls_id" readOnly="true"/>
        <field name="ld_name" readOnly="true"/>
        <field name="amount_security" dataType="number" size="20" decimals="2"  currency="${user.userCurrency.code}" readOnly="true">
            <title>Amount - Security Dep.</title>
        </field>
        
        <field name="description" readOnly="true"/>
        <field name="ld_contact" readOnly="true"/>
        <field name="qty_occupancy" readOnly="true"/>       
        
        <field name="signed" readOnly="true"/> 
        <field name="tn_name" readOnly="true"/>
        <field name="floors" readOnly="true"/>
         
        <field name="date_start" readOnly="true"/>
        <field name="tn_contact" readOnly="true"/>
        <field name="lease_sublease" readOnly="true"/> 
        
        <field name="date_move" readOnly="true"/>
        <field name="bl_id" readOnly="true"/>
        <field name="landlord_tenant" readOnly="true"/>
        
        <field name="date_end" readOnly="true"/>
        <field name="pr_id" readOnly="true"/>
        <field name="ls_parent_id" readOnly="true"/>
        
        <field name="automatic_renewal" readOnly="true"/>
        <field name="area_negotiated" numericFormat="area" readOnly="true"/>
        <field name="area_rentable" numericFormat="area" readOnly="true"/>
        <field name="comments" colspan="3" readOnly="true"/>
    </panel>

    <!-- Contacts -->
    <dataSource id="abRepmContactComplete_ds">
        <table name="contact"/>
        <field name="contact_id"/>
        <field name="ls_id"/>
        <field name="bl_id"/>
        <field name="pr_id"/>
        <field name="contact_type"/>
        <field name="company"/>

        <field name="honorific"/>
        <field name="name_first"/>
        <field name="name_last"/>
        
        <field name="ctry_id"/>
        <field name="regn_id"/>
        <field name="state_id"/>
        <field name="county_id"/>
        <field name="city_id"/>

        <field name="address1"/>
        <field name="address2"/>
        <field name="phone"/>
        <field name="cellular_number"/>
        <field name="email"/>
        <field name="fax"/>
        <field name="status"/>
    </dataSource>

    <panel type="grid" id="abRepmContactComplete_list" dataSource="abRepmContactComplete_ds" multipleSelectionEnabled="true" showOnLoad="false">
        <sortField table="contact" name="contact_type" ascending="true"/>
        <sortField table="contact" name="contact_id" ascending="true"/>
        <title>Contacts</title>
        <action id="assign">
            <title>Assign</title>
        </action>
        <action id="unassign">
            <title>Unassign</title>
        </action>
        
        <field name="contact_id" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="name_first" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="name_last" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="contact_type" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="company" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="city_id" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="state_id" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
        <field name="ctry_id" controlType="link">
            <command type="openDialog" panelId="abRepmContactComplete_form" newRecord="false" width="1024"/>
        </field>
    </panel>
    
    
    <panel type="form" id="abRepmContactComplete_form" dataSource="abRepmContactComplete_ds" showOnLoad="false" hidden="true" columns="3">
        <title>Contact Details</title>
        <action id="save">
            <title>Save</title>
            <command type="saveForm" formId="abRepmContactComplete_form"/>
            <command type="callFunction" functionName="View.panels.get('abRepmContactComplete_list').refresh(View.panels.get('abRepmContactComplete_list').restriction);"/>
            <command type="closeDialog"/>
        </action>
        <!--action id="delete">
            <title>Delete</title>
        </action-->
        <action id="unAssign">
            <title>Unassign</title>
        </action>
        <field name="contact_id"/>
        <field name="contact_type"/>
        <field name="company"/>

        <field name="honorific"/>
        <field name="name_first"/>
        <field name="name_last"/>
        <field name="address1"/>
        <field name="address2"/>
        <field name="city_id"/>
        <field name="state_id"/>
        <field name="ctry_id"/>
        <field name="phone"/>
        <field name="cellular_number"/>
        <field name="email"/>
        <field name="fax"/>
        <field name="status"/>
        <field name="ls_id" hidden="true"/>
        <field name="bl_id" hidden="true"/>
        <field name="pr_id" hidden="true"/>
    </panel>

    <dataSource id="abRepmLsContactsComplete_ds">
        <table name="ls_contacts"/>
        <field name="ls_id"/>
        <field name="contact_id"/>
    </dataSource>
    
    <!-- Recurring costs -->
    <dataSource id="dsBaseRentsComplete" applyVpaRestrictions="false">
        <table name="cost_tran_recur" role="main"/>
        <field name="ls_id"/>
        <field name="bl_id"/>
        <field name="cost_tran_recur_id"/>
        <field name="amount_income"/>
        <field name="amount_expense"/>
        <field name="period"/>
        <field name="description"/>
        <field name="date_start"/>
        <field name="date_end"/>
        <field name="status_active"/>
        <field name="cost_cat_id"/>
        <field name="currency_budget"/>
        <field name="currency_payment"/>
        <field name="amount_income_base_payment"/>
        <field name="amount_income_vat_payment"/>
        <field name="amount_income_total_payment"/>
        <field name="amount_expense_base_payment"/>
        <field name="amount_expense_vat_payment"/>
        <field name="amount_expense_total_payment"/>
        <field name="ctry_id"/>
        <field name="vat_percent_value"/>
        <field name="vat_percent_override"/>
        <field name="vat_amount_override"/>
        <field name="exchange_rate_override"/>
    </dataSource>
    
    <panel type="grid" id="gridBaseRentsComplete" dataSource="dsBaseRentsComplete" showOnLoad="false">
        <title translatable="true">Recurring Costs</title>
        <action id="costProfile">
            <title translatable="true">Cost Profile</title>
        </action>
        <action id="new">
            <title translatable="true">Add New</title>
        </action>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="gridBaseRentsComplete" orientation="landscape"/>
        </action>
        <action id="exportDOCX">
            <title>DOCX</title>
            <command type="exportPanel" outputType="docx" panelId="gridBaseRentsComplete" orientation="landscape"/>
        </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="gridBaseRentsComplete"/>
        </action>
        <field name="cost_tran_recur_id" controlType="link">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="cost_cat_id">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        
        <field name="amount_expense" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 1}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_income" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 1}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        
        <field name="amount_income_base_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_income_vat_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_income_total_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_expense_base_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_expense_vat_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="amount_expense_total_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="currency_payment" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="ctry_id" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="vat_percent_value" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="vat_percent_override" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="vat_amount_override" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="exchange_rate_override" hidden="${View.activityParameters['AbCommonResources-EnableVatAndMultiCurrency'] == 0}">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>

        <field name="period">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="description">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="date_start">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="date_end">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
        <field name="status_active">
            <command type="callFunction" functionName="onEditCostComplete"/>
        </field>
    </panel> 
    
    <!-- Clauses -->
    <dataSource id="dsLeaseAdminClausesComplete">
        <table name="ls_resp" role="main"/>
        <field table="ls_resp" name="resp_id"/>
        <field table="ls_resp" name="clause_type_id"/>
        <field table="ls_resp" name="description"/>
        <field table="ls_resp" name="resp_party"/>
        <field table="ls_resp" name="dates_match_lease"/>
        <field table="ls_resp" name="date_start"/>
        <field table="ls_resp" name="date_end"/>
        <field table="ls_resp" name="reference_loc"/>
        <field table="ls_resp" name="ls_id"/>
        <field table="ls_resp" name="contact_id"/>
        <field table="ls_resp" name="doc"/>
    </dataSource>
    <panel type="grid" id="gridLeaseAdminClausesComplete" dataSource="dsLeaseAdminClausesComplete" showOnLoad="false">
        <title translatable="true">Clauses</title>
        
        <action id="costProfile">
            <title translatable="true">Cost Profile</title>
        </action>
        <action id="new">
            <title translatable="true">Add New</title>
        </action>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="gridLeaseAdminClausesComplete" orientation="landscape"/>
        </action>
        <action id="exportDOCX">
            <title>DOCX</title>
            <command type="exportPanel" outputType="docx" panelId="gridLeaseAdminClausesComplete" orientation="landscape"/>
        </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="gridLeaseAdminClausesComplete"/>
        </action>

        <field table="ls_resp" name="ls_id" hidden="true"/>
        
        <field table="ls_resp" name="resp_id" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="clause_type_id" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="description" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="resp_party" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="contact_id" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="dates_match_lease" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="date_start" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="date_end" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="reference_loc" controlType="link" onclick="onEditClauseComplete"/>
        <field table="ls_resp" name="doc" controlType="link" onclick="onEditClauseComplete"/>
    </panel>    
    
    <!-- Options -->
    <dataSource id="dsLeaseAdminOptionsComplete">
        <table name="op" role="main"/>
        <field table="op" name="op_id"/>
        <field table="op" name="description"/>
        <field table="op" name="op_type"/>
        <field table="op" name="date_exercised"/>
        <field table="op" name="date_exercising_applicable"/>
        <field table="op" name="comments"/>
        <field table="op" name="ls_id"/>
        <field table="op" name="doc"/>
        <field table="op" name="dates_match_lease"/>
        
        <field table="op" name="who_can_exercise"/>
        <field table="op" name="exercised_by"/>
        <field table="op" name="date_start"/>
        <field table="op" name="date_option"/>
        <field table="op" name="date_review"/>
    </dataSource>

    <panel type="grid" id="gridLeaseAdminOptionsComplete" dataSource="dsLeaseAdminOptionsComplete" showOnLoad="true">
        <title translatable="true">Options</title>

        <action id="new">
            <title translatable="true">Add New</title>
        </action>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="gridLeaseAdminOptionsComplete" orientation="landscape"/>
        </action>
        <action id="exportDOCX">
            <title>DOCX</title>
            <command type="exportPanel" outputType="docx" panelId="gridLeaseAdminOptionsComplete" orientation="landscape"/>
        </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="gridLeaseAdminOptionsComplete"/>
        </action>

        <field table="op" name="ls_id" hidden="true"/>
        
        <field table="op" name="op_id" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="description" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="doc" controlType="link" onclick="onOpenOptionDoc"/>
        <field table="op" name="op_type" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="who_can_exercise" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="exercised_by" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="date_exercised" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="date_exercising_applicable" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="date_start" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="date_option" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="date_review" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="comments" controlType="link" onclick="onEditOptionComplete"/>
        <field table="op" name="dates_match_lease" hidden="true" controlType="link" onclick="onEditOptionComplete"/>
    </panel>    

    <!-- Amendments -->
    <dataSource id="dsLeaseAdminAmendmentsComplete">
        <table name="ls_amendment" role="main"/>
        <field table="ls_amendment" name="ls_amend_id"/>
        <field table="ls_amendment" name="description"/>
        <field table="ls_amendment" name="date_requested"/>
        <field table="ls_amendment" name="date_effective"/>
        <field table="ls_amendment" name="exercised_by"/>
        <field table="ls_amendment" name="comments"/>
        <field table="ls_amendment" name="ls_id"/>
        <field table="ls_amendment" name="doc"/>
    </dataSource>
    <panel type="grid" id="gridLeaseAdminAmendmentsComplete" dataSource="dsLeaseAdminAmendmentsComplete" showOnLoad="true">
        <title translatable="true">Amendments</title>

        <action id="new">
            <title translatable="true">Add New</title>
        </action>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="gridLeaseAdminAmendmentsComplete" orientation="landscape"/>
        </action>
        <action id="exportDOCX">
            <title>DOCX</title>
            <command type="exportPanel" outputType="docx" panelId="gridLeaseAdminAmendmentsComplete" orientation="landscape"/>
        </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="gridLeaseAdminAmendmentsComplete"/>
        </action>

        <field table="ls_amendment" name="ls_amend_id" controlType="link" onclick="onEditAmendmentComplete"/>
        <field table="ls_amendment" name="description" controlType="link" onclick="onEditAmendmentComplete"/>
        <field table="ls_amendment" name="date_requested" controlType="link" onclick="onEditAmendmentComplete"/>
        <field table="ls_amendment" name="date_effective" controlType="link" onclick="onEditAmendmentComplete"/>
        <field table="ls_amendment" name="exercised_by" controlType="link" onclick="onEditAmendmentComplete"/>
        <field table="ls_amendment" name="doc" controlType="link" onclick="onOpenAmendment"/>
        <field table="ls_amendment" name="comments" controlType="link" onclick="onEditAmendmentComplete"/>
    </panel>
    
    <!-- Communication logs -->
    
    <dataSource id="abRepmLsadminCommLogCompleteDs">
        <table name="ls_comm" role="main"/>
        <table name="contact" role="standard"/>
        <field table="ls_comm" name="date_of_comm"/>
        <field table="ls_comm" name="time_of_comm"/>
        <field table="ls_comm" name="contact_id"/>
        <field table="contact" name="company"/>
        <field table="ls_comm" name="comm_id"/>
        <field table="ls_comm" name="description"/>
        <field table="ls_comm" name="ls_id"/>
        <field table="ls_comm" name="activity_log_id"/>
        <field table="ls_comm" name="auto_number"/>
        <field table="ls_comm" name="doc"/>
        <restriction type="sql" sql=" ls_comm.ls_id is not null"/>
    </dataSource>
    
    <panel type="grid" id="abRepmLsadminCommLogCompleteGrid" dataSource="abRepmLsadminCommLogCompleteDs" showOnLoad="true">
        <title>Communication Log Items</title>
        <action id="new">
            <title>Add New</title>
        </action>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmLsadminCommLogCompleteGrid"/>
        </action>
        <action id="exportDOCX">
            <title>DOCX</title>
            <command type="exportPanel" outputType="docx" panelId="abRepmLsadminCommLogCompleteGrid"/>
        </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmLsadminCommLogCompleteGrid"/>
        </action>
        
        
        <sortField table="ls_comm" name="date_of_comm" ascending="true" />
        <sortField table="ls_comm" name="time_of_comm" ascending="true" />
        
        <field table="ls_comm" name="date_of_comm" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="time_of_comm" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="comm_id" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="contact_id" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="contact" name="company" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="ls_id"/>
        <field table="ls_comm" name="activity_log_id" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="doc" controlType="link" onclick="onOpenCommLogDoc"/>
        <field table="ls_comm" name="description" controlType="link" onclick="onEditCommLogComplete"/>
        <field table="ls_comm" name="auto_number" hidden="true"/>
    </panel>
    
    <!-- Suite -->
    <dataSource id="abLsConsoleSuiteComplete_ds">
        <table name="su"/>
        <field name="su_id"/>
        <field name="ls_id"/>
        <field name="bl_id"/>
        <field name="name"/>
        <field name="description"/>
        <field name="facility_type_id"/>
        <field name="fl_id"/>
        <field name="area_manual"/>
        <field name="area_usable"/>
        <field name="area_rentable"/>
        <field name="area_comn"/>
    </dataSource>
    
    
    <panel type="grid" id="abLsConsoleSuiteCompleteAvailable_list" dataSource="abLsConsoleSuiteComplete_ds" showOnLoad="false">
        <instructions translatable="true">Use the Assign button to assign available suites to the selected lease/sublease.</instructions>
        <title>Available Suites - Not Yet Assigned</title>
        <action id="new">
            <title>Add New</title>
        </action>
        <field name="su_id"/>
        <field name="name"/>
        <field name="description"/>
        <field name="facility_type_id"/>
        <field name="fl_id"/>
        <field name="area_manual"/>
        <field name="area_usable"/>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>    
        <field controlType="button" id="split">
          <title translatable="true">Split</title>
        </field>    
        <field controlType="button" id="edit">
          <title translatable="true">Edit</title>
        </field>    
        <field controlType="button" id="assign">
          <title translatable="true">Assign</title>
        </field>    
        <field name="ls_id" hidden="true"/>
        <field name="bl_id" hidden="true"/>
    </panel>
    
    <panel type="grid" id="abLsConsoleSuiteCompleteAssigned_list" dataSource="abLsConsoleSuiteComplete_ds" showOnLoad="false">
        <title>Suites Assigned to the Selected Lease/Sublease</title>
        <field name="su_id"/>
        <field name="name"/>
        <field name="description"/>
        <field name="facility_type_id"/>
        <field name="fl_id"/>
        <field name="area_manual"/>
        <field name="area_usable"/>
        <field controlType="button" id="split">
          <title translatable="true">Split</title>
        </field>    
        <field controlType="button" id="edit">
          <title translatable="true">Edit</title>
        </field>    
        <field controlType="button" id="unassign">
          <title translatable="true">Unassign</title>
        </field>    
        <field name="ls_id" hidden="true"/>
        <field name="bl_id" hidden="true"/>
    </panel>
    
    <panel type="grid" id="abLsConsoleSuiteCompleteAssignedToOther_list" dataSource="abLsConsoleSuiteComplete_ds" showOnLoad="false">
        <title>Suites Assigned to Other Leases/Subleases</title>
        <field name="su_id"/>
        <field name="name"/>
        <field name="description"/>
        <field name="facility_type_id"/>
        <field name="fl_id"/>
        <field name="area_manual"/>
        <field name="area_usable"/>
        <field name="ls_id"/>
        <field name="bl_id" hidden="true"/>
    </panel>
    
    <dataSource id="dsLeaseComplete">
        <table name="ls"/>
        <field name="ls_id"/>
        <field name="bl_id"/>
        <field name="pr_id"/>
    </dataSource>
    
    <dataSource id="dsSuiteComplete">
        <table name="su"/>
        <field name="su_id"/>
        <field name="bl_id"/>
        <field name="fl_id"/>
    </dataSource>
    
    <!-- Documents -->
    
    <dataSource id="abLsConsoleCompleteDocs_ds" applyVpaRestrictions="false">
        <sql dialect="generic">
            SELECT 
                'clause' ${sql.as} type,
                ${parameters['typeLabelClause']} ${sql.as} type_label,
                ls_resp.doc ${sql.as} doc,
                ls_resp.ls_id ${sql.as} ls_id,
                ${sql.convertToString('ls_resp.resp_id')} ${sql.as} doc_pk,
                ls_resp.description ${sql.as} description,
                '' ${sql.as} name,
                '' ${sql.as} classification
            FROM ls_resp
            WHERE ${sql.getVpaRestrictionForTable('ls_resp')} AND ls_resp.ls_id = ${parameters['lsCode']}
            UNION
            SELECT 
                'option' ${sql.as} type,
                ${parameters['typeLabelOption']} ${sql.as} type_label,
                op.doc ${sql.as} doc,
                op.ls_id ${sql.as} ls_id,
                ${sql.convertToString('op.op_id')} ${sql.as} doc_pk,
                op.comments ${sql.as} description,
                '' ${sql.as} name,
                '' ${sql.as} classification
            FROM op
            WHERE ${sql.getVpaRestrictionForTable('op')} AND op.ls_id = ${parameters['lsCode']}
            UNION
            SELECT
                'amendment' ${sql.as} type,
                ${parameters['typeLabelAmendment']} ${sql.as} type_label,
                ls_amendment.doc ${sql.as} doc,
                ls_amendment.ls_id ${sql.as} ls_id,
                ${sql.convertToString('ls_amendment.ls_amend_id')} ${sql.as} doc_pk,
                description ${sql.as} description,
                '' ${sql.as} name,
                '' ${sql.as} classification
            FROM ls_amendment
            WHERE ${sql.getVpaRestrictionForTable('ls_amendment')} AND ls_amendment.ls_id = ${parameters['lsCode']}
            UNION
            SELECT
                'comm_log' ${sql.as} type,
                ${parameters['typeLabelCommLog']} ${sql.as} type_label,
                ls_comm.doc ${sql.as} doc,
                ls_comm.ls_id ${sql.as} ls_id,
                ${sql.convertToString('ls_comm.auto_number')} ${sql.as} doc_pk,
                ls_comm.description ${sql.as} description,
                '' ${sql.as} name,
                '' ${sql.as} classification
            FROM ls_comm
            WHERE ${sql.getVpaRestrictionForTable('ls_comm')} AND ls_comm.ls_id = ${parameters['lsCode']}
            UNION
            SELECT
                'document' ${sql.as} type,
                ${parameters['typeLabelDocument']} ${sql.as} type_label,
                docs_assigned.doc ${sql.as} doc,
                docs_assigned.ls_id ${sql.as} ls_id,
                ${sql.convertToString('docs_assigned.doc_id')} ${sql.as} doc_pk,
                docs_assigned.description ${sql.as} description,
                docs_assigned.name ${sql.as} name,
                docs_assigned.classification ${sql.as} classification
            FROM docs_assigned
            WHERE ${sql.getVpaRestrictionForTable('docs_assigned')} AND docs_assigned.ls_id = ${parameters['lsCode']}            
        </sql>
        <table name="docs_assigned" role="main"/>
        <table name="ls_resp" role="standard"/>
        <table name="op" role="standard"/>
        <table name="ls_amendment" role="standard"/>
        <table name="ls_comm" role="standard"/>
        <field name="doc"/>
        <field name="ls_id"/>
        <field name="name"/>
        <field name="classification"/>
        <field name="type" dataType="text"/>
        <field name="type_label" dataType="text"/>
        <field name="doc_pk" dataType="text"/>
        <field name="description" dataType="text"/>
        <parameter name="typeLabelClause" dataType="text" value=""/>
        <parameter name="typeLabelOption" dataType="text" value=""/>
        <parameter name="typeLabelAmendment" dataType="text" value=""/>
        <parameter name="typeLabelCommLog" dataType="text" value=""/>
        <parameter name="typeLabelDocument" dataType="text" value=""/>
        <parameter name="lsCode" dataType="text" value="001"/>
    </dataSource>
    
    <panel type="grid" id="abLsConsoleCompleteDocs_list" dataSource="abLsConsoleCompleteDocs_ds" showOnLoad="false">
        <title>Documents</title>
        <action id="new">
            <title>Add New</title>
        </action>
        <field name="type_label" dataType="text" controlType="link" onclick="onEditDocumentComplete">
            <title>Document Type</title>
        </field>
        <field name="classification" controlType="link" onclick="onEditDocumentComplete"/>
        <field name="name" controlType="link" onclick="onEditDocumentComplete"/>
        <field name="doc" controlType="link" onclick="onOpenDocumentComplete"/>
        <field name="description" dataType="text" controlType="link" onclick="onEditDocumentComplete">
            <title>Description</title>
        </field>
        <field name="ls_id" hidden="true"/>
        <field name="type" dataType="text" hidden="true"/>
        <field name="doc_pk" dataType="text" hidden="true"/>
    </panel>
    
    
    <dataSource id="abLsConsoleCompleteClause_ds">
        <table name="ls_resp"/>
        <field name="ls_id"/>
        <field name="resp_id"/>
        <field name="doc"/>
    </dataSource>
    
    <panel type="form" id="abLsConsoleCompleteClause_form" dataSource="abLsConsoleCompleteClause_ds" showOnLoad="false" hidden="true">
        <action id="close">
            <title>Close</title>
            <command type="callFunction" functionName="onClosePopupComplete"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="resp_id" readOnly="true"/>
        <field name="doc"/>
    </panel>
    
    <dataSource id="abLsConsoleCompleteOption_ds">
        <table name="op"/>
        <field name="ls_id"/>
        <field name="op_id"/>
        <field name="doc"/>
    </dataSource>
    
    <panel type="form" id="abLsConsoleCompleteOption_form" dataSource="abLsConsoleCompleteOption_ds" showOnLoad="false" hidden="true">
        <action id="close">
            <title>Close</title>
            <command type="callFunction" functionName="onClosePopupComplete"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="op_id" readOnly="true"/>
        <field name="doc"/>
    </panel>
    
    <dataSource id="abLsConsoleCompleteAmendment_ds">
        <table name="ls_amendment"/>
        <field name="ls_id"/>
        <field name="ls_amend_id"/>
        <field name="doc"/>
    </dataSource>
    
    <panel type="form" id="abLsConsoleCompleteAmendment_form" dataSource="abLsConsoleCompleteAmendment_ds" showOnLoad="false" hidden="true">
        <action id="close">
            <title>Close</title>
            <command type="callFunction" functionName="onClosePopupComplete"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="ls_amend_id" readOnly="true"/>
        <field name="doc"/>
    </panel>

    <dataSource id="abLsConsoleCompleteCommLog_ds">
        <table name="ls_comm"/>
        <field name="ls_id"/>
        <field name="auto_number"/>
        <field name="doc"/>
    </dataSource>
    
    <panel type="form" id="abLsConsoleCompleteCommLog_form" dataSource="abLsConsoleCompleteCommLog_ds" showOnLoad="false" hidden="true">
        <action id="close">
            <title>Close</title>
            <command type="callFunction" functionName="onClosePopupComplete"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="auto_number" readOnly="true"/>
        <field name="doc"/>
    </panel>

    <dataSource id="abLsConsoleCompleteDocAssigned_ds">
        <table name="docs_assigned"/>
        <field name="ls_id"/>
        <field name="doc_id"/>
        <field name="doc"/>
    </dataSource>
    
    <panel type="form" id="abLsConsoleCompleteDocAssigned_form" dataSource="abLsConsoleCompleteDocAssigned_ds" showOnLoad="false" hidden="true">
        <action id="close">
            <title>Close</title>
            <command type="callFunction" functionName="onClosePopupComplete"/>
        </action>
        <action id="delete">
            <title>Delete</title>
            <command type="deleteRecord" formId="abLsConsoleCompleteDocAssigned_form"/>
            <command type="callFunction" functionName="onClosePopupComplete"/>
            <command type="closeDialog"/>
        </action>
        <field name="ls_id" readOnly="true"/>
        <field name="doc_id" readOnly="true"/>
        <field name="doc"/>
    </panel>

    <!-- TODO: remove after core issue 3045082 is resolved. -->
    <css>#kb3045073_layoutWrapper { height: 0; overflow: hidden; }</css>
    <panel type="html" id="kb3045073">
    </panel>
</view>