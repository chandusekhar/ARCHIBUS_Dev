/*************************************************
 common javascript api for report and edit form
 *************************************************/
var arrTablesChildrenFrames = new Array();
//used by xsl to set up the info about refreshing children frames
//unqiuePathOfTable: id of table groups in same view (generated by XSLT)
//count: the number of frames to be refreshed
//frameName: the name of frame
//frameSource: the url for frame's refresh
function setUpTableSubFrameString(unqiuePathOfTable, count, frameName, frameSource)
{
	var numCounter	= parseInt(count) - 1;
	//two-d array to hold each table's children frame info
	arrTablesChildrenFrames[unqiuePathOfTable][numCounter]= 'parent.'+frameName+'.location.href="'+frameSource+'"';
}

//used by xsl
//unqiuePathOfTable: unique id for table group(generated by XSLT)
function setUpTablesArray(unqiuePathOfTable)
{
	//two-d array to hold each table's children frame info
	arrTablesChildrenFrames[unqiuePathOfTable] = new Array();
}

//called to refresh one specified afmTableGroup's all children frames
//unqiuePathOfTable: unique id for table group(generated by XSLT)
//strFrameName: frame's name to be refreshed
function onLoadTableRefreshChildren(unqiuePathOfTable, strFrameName)
{
	var strTemp = "";
	if(arrTablesChildrenFrames != null)
	{
		var arrSpecifiedTable = arrTablesChildrenFrames[unqiuePathOfTable];
		if(arrSpecifiedTable !=null && arrSpecifiedTable.length!=null)
		{
			//invoking to refresh each children frame in arrChildrenFrames[unqiuePathOfTable]
			for(var i=0;i<arrSpecifiedTable.length; i++ )
			{
				if(arrSpecifiedTable[i]!=null)
				{
					strTemp = arrSpecifiedTable[i];
					if(strTemp  != "")
					{
						// eval() works differently in IE and NN:
						//  IE replaces &lt; with <, etc., while NN preserves the original text
						//  To work in both browsers, we explicity do the replacement here
						strTemp = strTemp.replace(/&lt;/gi, '<');
						strTemp = strTemp.replace(/&gt;/gi, '>');
						////strTemp:parent.frameName.location.href="url" 
						//invoking refreshing child frame action
						if(strFrameName =="" || typeof strFrameName == "undefined")
						{
							eval(strTemp);
						}
						else
						{
							var bSearch = strTemp.search(strFrameName);
							if(!bSearch)
							{
								//if strFrameName is not found, refresh
								//the frame,else do nothing
								eval(strTemp);
							}
						}
					}
				}
			}
		}
	}
}



