<!-- CHANGE LOG -->
<!-- 2012/02/15 - ASO - Add a print button -->

<view version="2.0">

    <js file="uc-repm-addedit-lease-in-a-property-tab.js"/>

    <!--script type="text/javascript" src="/resource/uc-psAccountCode.js"></script>
    <script type="text/javascript" src="/resource/uc-psAccountCode.js"></script>
    <js file="uc-account-code-verify-save.js"/-->

    <layout type="borderLayout" id="mainLayout">
        <north split="true"  initialSize="95" minSize="95"/>
        <center autoScroll="true"/>
    </layout>
    <layout type="borderLayout" id="nestedLayout" containingLayout="mainLayout" region="center">
        <west autoScroll="false" split="true" initialSize="25%"/>
        <center autoScroll="false"/>
    </layout>

    <message name="message_confirm_delete" translatable="true">Are you sure you want to remove this record?</message>
    <message name="message_confirm_unassign" translatable="true">Are you sure you want to unassign the selected suite?</message>
   <message name="tree_panel_title" translatable="true">Leases:</message>
    <message name="err_selection" translatable="true">You must select a Property or a lease before adding a new lease or sublease</message>
    <message name="addNewDoc" translatable="true">Add Document</message>
    <message name="editDoc" translatable="true">Edit Document</message>
    <message name="title_select_contact" translatable="true">Select Contact</message>
    <message name="title_add_contact" translatable="true">Add New Contact</message>
    <message name="title_edit_lscontact" translatable="true">Edit Contact</message>
    <message name="title_add_company" translatable="true">Add New Company</message>
    <message name="addNewComm" translatable="true">Add New Communication Log</message>
    <message name="edit_base_rent" translatable="true">Edit Recurring Cost</message>
    <message name="add_base_rent" translatable="true">Add Recurring Cost</message>
    <message name="add_new_clause" translatable="true">Add Clause</message>
    <message name="edit_clause" translatable="true">Edit Clause</message>
    <message name="error_delete" translatable="true">Could not delete selected item.</message>
    <message name="add_new_option" translatable="true">Add Option</message>
    <message name="edit_option" translatable="true">Edit Option</message>
    <message name="error_no_description" translatable="true">A description must be entered.</message>
    <message name="add_new_amendment" translatable="true">Add Amendment</message>
    <message name="edit_amendment" translatable="true">Edit Amendment</message>
    <message name="add_new_suite" translatable="true">Add Suite</message>
    <message name="edit_suite" translatable="true">Edit Suite</message>
    <message name="err_ls_landlord" translatable="true">You cannot add a sublease to a lease where you are the landlord</message>
    <message name="err_no_lease" translatable="true">Enter Lease Code</message>
    <message name="err_lsId" translatable="true">You must choose another lease code, this one is already used.</message>
    <message name="error_date_end_before_date_start" translatable="true">The 'End Date' must be greater than the 'Start Date'.</message>
    <message name="error_date_move_before_date_start" translatable="true">The 'Move Date' must be greater than the 'Start Date'.</message>
    <message name="err_base_rent_dates" translatable="true">The 'End Date' must be greater than the 'Start Date'.</message>
    <message name="err_base_rent_seasonal_dates" translatable="true">The 'Seasonal End Date' must be greater than the 'Seasonal Start Date'.</message>
    <message name="err_options_dates" translatable="true">The 'Date Option Expires' must be greater than the 'Date Option Available'.</message>
    <message name="addNew_lease" translatable="true">Add New Lease/Sublease</message>
    <message name="addEdit_geographical" translatable="true">Add/Edit Geographical Locations</message>
    <message name="addEdit_bldgs" translatable="true">Add/Edit Propertys</message>

    <message name="add_new_comm" translatable="true">Add Communication Log</message>
    <message name="add_new_rm" translatable="true">Select Rooms</message>
    <message name="add_new_history" translatable="true">Add History</message>
    <message name="add_new_lien" translatable="true">Add Lien</message>
    <message name="edit_lien" translatable="true">Edit Lien</message>
    <message name="add_new_estoppel" translatable="true">Add Notice/Estoppel/SNDA</message>
    <message name="edit_estoppel" translatable="true">Edit Notice/Estoppel/SNDA</message>

    <message name="error_invalidAccount">The Account Code entered is invalid. </message>
    <message name="error_Account1">The Account Business Unit code entered is invalid.</message>
    <message name="error_Account2">The Account Fund code entered is invalid.</message>
    <message name="error_Account3">The Account Department Code entered is invalid.</message>
    <message name="error_Account4">The Account Code Acct entered is invalid.</message>
    <message name="error_Account5">The Account Program Code entered is invalid.</message>
    <message name="error_Account6">The Account Internal Code entered is invalid.</message>
    <message name="error_Account7">The Account Project Code entered is invalid.</message>
    <message name="error_Account8">The Account Activity Code entered is invalid.</message>
    <message name="error_Account99">There was a problem validating the account code. Please try saving again.</message>

    <dataSource id="abRepmAddEditLeaseInAPropertyConsole_ds">
        <table name="ls" role="main"/>
        <field table="ls" name="tn_name"/>
        <field table="ls" name="ld_name"/>
        <field table="ls" name="pr_id"/>
        <field table="ls" name="description"/>
        <field table="ls" name="ls_cat"/>
        <field table="ls" name="status"/>
    </dataSource>
    <panel type="console" id="abRepmAddEditLeaseInAPropertyConsole" dataSource="abRepmAddEditLeaseInAPropertyConsole_ds" columns="3" layout="mainLayout" region="north">
        <title translatable="true">Filter</title>
        <action id="show">
            <title translatable="true">Show</title>
            <command type="callFunction" functionName="filter"/>
        </action>
        <action id="clear">
            <title translatable="true">Clear</title>
			<command type ="callFunction" functionName = "clearConsole"></command>
            <command type="clearForm" panelId="abRepmAddEditLeaseInAPropertyConsole"/>
        </action>
        <field table="ls" name="tn_name"/>
        <field table="ls" name="ld_name"/>
        <field table="ls" name="pr_id"/>
        <field table="ls" name="ls_cat"/>
        <field>
			<title>Search</title>
			<html>
				<input type="text" id="searchField"></input>
			</html>
		</field>
        <field table="ls" name="status"/>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyCtry_ds">
		<table name="ctry" role="main"/>
		<field table="ctry" name="ctry_id"/>
		<restriction type="sql" sql="exists (select 1 from property where property.ctry_id = ctry.ctry_id and ${parameters['console']})"/>
		<parameter name="console" dataType="verbatim" value="1=1"/>
	</dataSource>

	<dataSource id="abRepmAddEditLeaseInAPropertyCity_ds">
		<table name="city" role="main"/>
		<field table="city" name="city_id"/>
		<restriction type="sql" sql="exists (select 1 from property where property.city_id = city.city_id and ${parameters['console']})"/>
		<parameter name="console" dataType="verbatim" value="1=1"/>
	</dataSource>

	<dataSource id="abRepmAddEditLeaseInAPropertyBl_ds">
		<table name="property" role="main"/>
		<field table="property" name="pr_id"/>
		<field table="property" name="name"/>
		<restriction type="sql" sql="${parameters['console']}"/>
		<parameter name="console" dataType="verbatim" value="1=1"/>
	</dataSource>

	<dataSource id="abRepmAddEditLeaseInAPropertyLs_ds" distinct="true">
		<sql dialect="generic">
			select ls.ls_id ${sql.as} ls_parent_id , ls.landlord_tenant, ls.pr_id, ls.tn_name, ls.uclass from ls where lease_sublease IN ('LEASE', 'N/A') and use_as_template = 0 and ${parameters['consolels']}
		</sql>

		<table name="ls" role="main"/>
		<field table="ls" name="ls_parent_id"/>
		<field table="ls" name="tn_name"/>
		<field table="ls" name="uclass"/>
		<field table="ls" name="landlord_tenant"/>
		<parameter name="consolels" dataType="verbatim" value="1=1"/>
	</dataSource>

	<dataSource id="abRepmAddEditLeaseInAPropertySublease_ds">
		<table name="ls" role="main"/>
		<field table="ls" name="ls_id"/>
		<field table="ls" name="tn_name"/>
		<field table="ls" name="uclass"/>
		<restriction type="parsed">
			<clause op="=" table="ls" name="use_as_template" value="0"/>
		</restriction>
		<parameter name="consolels" dataType="verbatim" value="1=1"/>
		<restriction type="sql" sql=" ${parameters['consolels']} "></restriction>
	</dataSource>


	<panel type="tree" id="abRepmAddEditLeaseInAPropertyCtryTree" dataSource="abRepmAddEditLeaseInAPropertyCtry_ds" layout="nestedLayout" region="west">
        <title translatable="true">Leases:</title>
		<action id="addEdit" hidden="true">
	        <title translatable="true">Add</title>
        </action>

		<event type="onClickNode">
			<command type="callFunction" functionName="showAddButton()"/>
		</event>

        <panel type="tree" id="abRepmAddEditLeaseInAPropertyCityTree" dataSource="abRepmAddEditLeaseInAPropertyCity_ds">
			<event type="onClickNode">
				<command type="callFunction" functionName="showAddButton()"/>
            </event>

		</panel>
		<panel type="tree" id="abRepmAddEditLeaseInAPropertyBlTree" dataSource="abRepmAddEditLeaseInAPropertyBl_ds">
            <event type="onClickNode">
				<command type="callFunction" functionName="showAddButton('lease')"/>
				<command type="callFunction" functionName="hidePanels"/>
				<command type="callFunction" functionName="setSelectedProperty"/>
            </event>
        </panel>
		<panel type="tree" id="abRepmAddEditLeaseInAPropertyLsTree" dataSource="abRepmAddEditLeaseInAPropertyLs_ds">
            <event type="onClickNode">
				<command type="callFunction" functionName="showAddButton('sub', 'form')"/>
            	<command type="callFunction" functionName="showDetails"/>
            </event>
        </panel>
		<panel type="tree" id="abRepmAddEditLeaseInAPropertySubleaseTree" dataSource="abRepmAddEditLeaseInAPropertySublease_ds">
			<field table="ls" name="tn_name"/>
			<field table="ls" name="uclass"/>

            <event type="onClickNode">
				<command type="callFunction" functionName="showAddButton()"/>
            	<command type="callFunction" functionName="showDetails"/>
            </event>
        </panel>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyLeaseInfo_ds">
        <table name="ls" role="main"/>
        <table name="bl" role="standard"/>
        <field table="ls" name="ls_id"/>
        <field table="ls" name="description"/>
        <field table="ls" name="date_start"/>
        <field table="ls" name="date_move"/>
        <field table="ls" name="date_end"/>
        <field table="ls" name="lease_sublease"/>
        <field table="ls" name="area_negotiated"/>
        <field table="ls" name="automatic_renewal"/>
        <field table="ls" name="comments"/>
		<field table="ls" name="comments_parking"/>
        <field table="ls" name="comments_secdep"/>
        <field table="ls" name="signed"/>
        <field table="ls" name="ld_name"/>
        <field table="ls" name="area_grossup"/>
        <field table="ls" name="area_usable"/>
        <field table="ls" name="ld_contact"/>
        <field table="ls" name="tn_name"/>
        <field table="ls" name="tn_contact"/>
        <field table="ls" name="amount_security"/>
        <field table="ls" name="qty_occupancy"/>
        <field table="ls" name="floors"/>
        <field table="ls" name="landlord_tenant"/>
        <field table="ls" name="ls_parent_id"/>
        <field table="ls" name="bl_id"/>
        <field table="ls" name="pr_id"/>
        <field table="ls" name="ac_id"/>
        <field table="ls" name="lease_type"/>
        <field table="ls" name="space_use"/>
        <field table="bl" name="regn_id"/>
        <field table="bl" name="site_id"/>

        <field table="ls" name="uclass"/>
        <field table="ls" name="parking_stalls"/>
        <field table="ls" name="phase"/>
        <field table="ls" name="ls_cat"/>
        <field table="ls" name="status"/>
        <field table="ls" name="date_ins_start"/>
        <field table="ls" name="date_ins_end"/>
        <field table="ls" name="ins_verified"/>
    </dataSource>

    <panel type="form" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form" dataSource="abRepmAddEditLeaseInAPropertyLeaseInfo_ds" columns="3" afterRefresh="abRepmAddEditLeaseInAPropertyLeaseInfo_form_afterRefresh" layout="nestedLayout" region="center" showOnLoad="false">
        <title translatable="true">General Lease Information</title>
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveLease(abRepmAddEditLeaseInAProperty_ctrl.abRepmAddEditLeaseInAPropertyLeaseInfo_form)"/>
            <!--command type="callFunction" functionName="checkAccountSaveLease('abRepmAddEditLeaseInAPropertyLeaseInfo_form', abRepmAddEditLeaseInAProperty_ctrl.abRepmAddEditLeaseInAPropertyLeaseInfo_form)"/-->
        </action>
		<action id="print">
            <title translatable="true">Print</title>
            <command type="callFunction" functionName="abRepmAddEditLeaseInAProperty_ctrl.openLeaseWindow();"/>
        </action>

        <!--action id="delete">
            <title translatable="true">Delete</title>
        </action-->
    <!-- First row -->
        <field table="ls" name="ls_id" readOnly="true"/>
        <field table="ls" name="signed"/>
		<field table="ls" name="phase"/>

    <!-- Second row -->
        <field table="ls" name="uclass"/>
        <field table="ls" name="ld_name" showSelectValueAction="true"/>
		<field table="ls" name="landlord_tenant"/>

        <field table="ls" name="qty_occupancy" hidden="true"/>
    <!-- third row -->
        <field table="ls" name="description"/>
        <field table="ls" name="ld_contact" showSelectValueAction="true"/>
        <field table="ls" name="area_usable"/>
        <field table="ls" name="floors" hidden="true"/>
    <!-- fourth row -->
        <field table="ls" name="pr_id" readOnly="true"/>
        <field table="ls" name="tn_name" showSelectValueAction="true"/>
		<field table="ls" name="area_negotiated"/>

    <!-- fifth row -->
        <field table="ls" name="date_start"/>
        <field table="ls" name="tn_contact" showSelectValueAction="true"/>
        <field table="ls" name="area_grossup"/>
        <field table="ls" name="ls_parent_id" readOnly="true" hidden="true"/>
    <!-- sixth row -->
        <field table="ls" name="date_move" ><title>Date Commencement</title></field>
		<field table="ls" name="lease_sublease" readOnly="true"/>
        <field table="ls" name="lease_type"/>
    <!-- seventh row -->
        <field table="ls" name="date_end"/>
        <field table="ls" name="ls_cat"/>
        <field table="ls" name="status"/>
    <!-- eight row -->
        <field table="ls" name="date_ins_start"/>
        <field table="ls" name="date_ins_end"/>
        <field table="ls" name="ins_verified"/>

		<field table="ls" name="amount_security"/>
		<field table="ls" name="comments_secdep" colspan="2" readOnly= "false"/>


		<field table="ls" name="parking_stalls"/>
		<field table="ls" name="comments_parking" colspan="2"  readOnly= "false"/>

    <!-- ninth row -->
        <field alias="abRepmAddEditLeaseInAPropertyLeaseInfo_form_account_code_fld" colspan="3" hidden="true">
            <title>Account Code</title>
            <html>
                <table border="0" style="margin-left:-4" cellpadding="0" cellspacing="0">
                    <tr>
                        <!--td><input type="button" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_autoSelAcctBtn" value="Auto-select Account" onclick="openAccountSelect('abRepmAddEditLeaseInAPropertyLeaseInfo_form')"/></td-->
                        <td>Bus. Unit<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part1" maxlength="5" size="5" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Fund<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part2" maxlength="2" size="2" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Dept<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part3" maxlength="5" size="4" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Acct<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part4" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Program<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part5" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Internal<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part6" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Proj<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part7" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Activity<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part8" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                    </tr>
                </table>
            </html>
        </field>
        <field table="ls" name="ac_id" hidden="true"/>

        <field table="ls" name="comments"  colspan="3"/>

        <field table="ls" name="automatic_renewal" hidden="true">
            <title translatable="true">Assume Renewal for KPI Calculations</title>
        </field>
        <field table="ls" name="space_use" hidden="true"/>
        <field hidden="true"/>
        <field hidden="true"/>
        <field table="bl" name="regn_id" hidden="true" required="false"/>
        <field table="bl" name="site_id" hidden="true" required="false"/>

    </panel>

    <panel type="form" id="abRepmAddEditLeaseInAPropertyAddLease_form" dataSource="abRepmAddEditLeaseInAPropertyLeaseInfo_ds" columns="3" newRecord="true" layout="nestedLayout" region="center" showOnLoad="false">
        <title translatable="true">Add New Lease</title>
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveLease(abRepmAddEditLeaseInAProperty_ctrl.abRepmAddEditLeaseInAPropertyAddLease_form, true)"/>
        </action>
        <action id="useTemplate">
            <title translatable="true">Use Template</title>
        </action>
   <!-- First row -->
        <field table="ls" name="ls_id"/>
        <field table="ls" name="signed"/>
		<field table="ls" name="phase"/>

    <!-- Second row -->
        <field table="ls" name="uclass"/>
        <field table="ls" name="ld_name" showSelectValueAction="true"/>
		<field table="ls" name="landlord_tenant"/>

        <field table="ls" name="qty_occupancy" hidden="true"/>
    <!-- third row -->
        <field table="ls" name="description"/>
        <field table="ls" name="ld_contact" showSelectValueAction="true"/>
        <field table="ls" name="area_usable"/>
        <field table="ls" name="floors" hidden="true"/>
    <!-- fourth row -->
        <field table="ls" name="pr_id" readOnly="true"/>
        <field table="ls" name="tn_name" showSelectValueAction="true"/>
		<field table="ls" name="area_negotiated"/>
    <!-- fifth row -->
        <field table="ls" name="date_start"/>
        <field table="ls" name="tn_contact" showSelectValueAction="true"/>
        <field table="ls" name="area_grossup" hidden = "true"/>
		<field/>
        <field table="ls" name="ls_parent_id" readOnly="true" hidden="true"/>
    <!-- sixth row -->
        <field table="ls" name="date_move" ><title>Date Commencement</title></field>
		<field table="ls" name="lease_sublease" readOnly="true"/>
        <field table="ls" name="lease_type"/>
    <!-- seventh row -->
        <field table="ls" name="date_end"/>
        <field table="ls" name="ls_cat"/>
        <field table="ls" name="status"/>
    <!-- eight row -->
        <field table="ls" name="date_ins_start"/>
        <field table="ls" name="date_ins_end"/>
        <field table="ls" name="ins_verified"/>

		<field table="ls" name="amount_security"/>
		<field table="ls" name="comments_secdep" colspan="2" readOnly= "false"/>


		<field table="ls" name="parking_stalls"/>
		<field table="ls" name="comments_parking" colspan="2"  readOnly= "false"/>

    <!-- ninth row -->
        <field alias="abRepmAddEditLeaseInAPropertyLeaseInfo_form_account_code_fld" colspan="3" hidden="true">
            <title>Account Code</title>
            <html>
                <table border="0" style="margin-left:-4" cellpadding="0" cellspacing="0">
                    <tr>
                        <!--td><input type="button" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_autoSelAcctBtn" value="Auto-select Account" onclick="openAccountSelect('abRepmAddEditLeaseInAPropertyLeaseInfo_form')"/></td-->
                        <td>Bus. Unit<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part1" maxlength="5" size="5" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Fund<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part2" maxlength="2" size="2" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Dept<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part3" maxlength="5" size="4" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Acct<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part4" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Program<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part5" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Internal<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part6" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Proj<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part7" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                        <td>Activity<br/><input type="text" id="abRepmAddEditLeaseInAPropertyLeaseInfo_form_ac_id_part8" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInAPropertyLeaseInfo_form');"/></td>
                    </tr>
                </table>
            </html>
        </field>
        <field table="ls" name="ac_id" hidden="true"/>

        <field table="ls" name="comments"  colspan="3"/>

        <field table="ls" name="automatic_renewal" hidden="true">
            <title translatable="true">Assume Renewal for KPI Calculations</title>
        </field>
        <field table="ls" name="space_use" hidden="true"/>
        <field hidden="true"/>
        <field hidden="true"/>
        <field table="bl" name="regn_id" hidden="true" required="false"/>
        <field table="bl" name="site_id" hidden="true" required="false"/>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyLsTmp_ds">
        <table name="ls" role="main"/>
        <field table="ls" name="ls_id"/>
        <field table="ls" name="description"/>
        <field table="ls" name="ld_name"/>
        <field table="ls" name="tn_name"/>
        <field table="ls" name="comments"/>
        <restriction type="parsed">
              <clause op="=" value="1" table="ls" name="use_as_template"/>
        </restriction>

    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyLsTmp_grid" dataSource="abRepmAddEditLeaseInAPropertyLsTmp_ds" showOnLoad="false">
        <title translatable="true">Select Lease Template</title>
        <sortField table="ls" name="ls_id"/>
        <field table="ls" name="ls_id" controlType="link" onclick="createNewLease"/>
        <!--field table="ls" name="description" controlType="link" onclick="createNewLease"/>
        <field table="ls" name="ld_name" controlType="link" onclick="createNewLease"/>
        <field table="ls" name="tn_name" controlType="link" onclick="createNewLease"/>
        <field table="ls" name="comments" controlType="link" onclick="createNewLease"/-->
    </panel>


    <dataSource id="abRepmAddEditLeaseInAPropertySuites_ds">
        <table name="su" role="main"/>
        <field table="su" name="su_id"/>
        <field table="su" name="name"/>
        <field table="su" name="description"/>
        <field table="su" name="facility_type_id"/>
        <field table="su" name="fl_id"/>
        <field table="su" name="area_manual"/>
        <field table="su" name="area_usable"/>
        <field table="su" name="ls_id"/>
        <field table="su" name="bl_id"/>
    </dataSource>
    <panel type="grid" id="abRepmAddEditLeaseInAPropertySuites_grid" dataSource="abRepmAddEditLeaseInAPropertySuites_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Suites Assigned to the Selected Lease/Sublease</title>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertySuitesEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertySuitesEdit_form').setTitle(getMessage('add_new_suite'))"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertySuitesEdit_form').setFieldValue('su.bl_id' , View.panels.get('abRepmAddEditLeaseInAPropertyLeaseInfo_form').getFieldValue('ls.bl_id'))"/>

        </action>
        <action id="assign">
            <title translatable="true">Assign Existing Suite</title>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertySelectSuites_grid').addParameter('selectedProperty' , View.panels.get('abRepmAddEditLeaseInAPropertyLeaseInfo_form').getFieldValue('ls.bl_id'))"/>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertySelectSuites_grid" applyParentRestriction="false"/>
        </action>
        <sortField name="su_id" table="su" ascending="true"/>
        <field table="su" name="su_id"/>
        <field table="su" name="name"/>
        <field table="su" name="description"/>
        <field table="su" name="facility_type_id"/>
        <field table="su" name="fl_id"/>
        <field table="su" name="area_manual"/>
        <field table="su" name="area_usable"/>
        <field controlType="button" id="edit">
            <title translatable="true">Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertySuitesEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertySuitesEdit_form').setTitle(getMessage('edit_suite'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Unassign</title>
        </field>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertySelectSuites_ds">
        <table name="su" role="main"/>
        <field table="su" name="su_id"/>
        <field table="su" name="fl_id"/>
        <field table="su" name="ls_id"/>
        <field table="su" name="bl_id"/>
        <parameter name="selectedProperty" dataType="verbatim" value=""/>
        <restriction type="sql" sql="su.bl_id = '${parameters['selectedProperty']}' and su.ls_id is null"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertySelectSuites_grid" dataSource="abRepmAddEditLeaseInAPropertySelectSuites_ds" multipleSelectionEnabled="true" showOnLoad="false">
        <title translatable="true">Select Suites</title>
        <action id="addSuites">
            <title translatable="true">Add Suite(s) to Lease</title>
        </action>
        <field table="su" name="su_id"/>
        <field table="su" name="fl_id"/>
        <field table="su" name="ls_id" hidden="true"/>
        <field table="su" name="bl_id" hidden="true"/>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertySuitesEdit_ds">
        <table name="su" role="main"/>
        <field table="su" name="su_id"/>
        <field table="su" name="ls_id"/>
        <field table="su" name="name"/>
        <field table="su" name="description"/>
        <field table="su" name="fl_id"/>
        <field table="su" name="area_manual"/>
        <field table="su" name="area_usable"/>
        <field table="su" name="facility_type_id"/>
        <field table="su" name="bl_id"/>
    </dataSource>
    <panel type="form" id="abRepmAddEditLeaseInAPropertySuitesEdit_form" dataSource="abRepmAddEditLeaseInAPropertySuitesEdit_ds" showOnLoad="false" columns="2">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="saveForm" panelId="abRepmAddEditLeaseInAPropertySuitesEdit_form"/>
            <command type="showPanel" panelId="abRepmAddEditLeaseInAPropertySuites_grid" applyParentRestriction="false"/>
            <command type="closeDialog"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="su" name="su_id"/>
        <field table="su" name="fl_id">
            <action onclick="selectFloor">
                <title>...</title>
                <tooltip>Select Value</tooltip>
            </action>
        </field>
        <field table="su" name="ls_id" readOnly="true"/>
        <field table="su" name="area_manual"/>

        <field table="su" name="name"/>
        <field table="su" name="facility_type_id"/>
        <field table="su" name="area_usable" />
        <field table="su" name="bl_id" required="false"  readOnly="true"/>
        <field table="su" name="description" colspan="2"/>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyTab_dsCompany">
        <table name="company" role="main"/>
        <field table="company" name="company"/>
        <field table="company" name="trade_name"/>
       <field table="company" name="address1"/>
        <field table="company" name="address2"/>
        <field table="company" name="comments"/>
        <field table="company" name="city_id"/>
        <field table="company" name="ctry_id"/>
        <field table="company" name="regn_id"/>
        <field table="company" name="state_id"/>
        <field table="company" name="zip"/>
    </dataSource>



    <dataSource id="abRepmAddEditLeaseInAPropertyContacts_ds">
        <table name="ls_contacts" role="main"/>
        <field table="ls_contacts" name="ls_id"/>
        <field table="ls_contacts" name="contact_id"/>
        <field table="ls_contacts" name="name_first"/>
        <field table="ls_contacts" name="name_last"/>
        <field table="ls_contacts" name="company"/>
        <field table="ls_contacts" name="email"/>
        <field table="ls_contacts" name="phone"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyContacts_grid" layout="nestedLayout" region="center" showOnLoad="false" dataSource="abRepmAddEditLeaseInAPropertyContacts_ds" useParentRestriction= "false">
        <title translatable="true">Contacts</title>
        <sortField table="ls_contacts" name="contact_id"/>
       <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInABuildingContacts_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInABuildingContacts_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Assign Contact(s)</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyContactsSelect_grid" applyParentRestriction = "false"/>
			<command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyContactsSelect_grid').setTitle(getMessage('title_select_contact'))"/>
        </action>
        <field table="ls_contacts" name="contact_id"/>
        <field table="ls_contacts" name="name_first"/>
        <field table="ls_contacts" name="name_last"/>
        <field table="ls_contacts" name="company"/>
        <field table="ls_contacts" name="email"/>
        <field table="ls_contacts" name="phone"/>
        <field controlType="button" id="edit">
          <title translatable="true">Edit</title>
          <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertylsContactsEdit_form" applyParentRestriction="true"/>
          <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertylsContactsEdit_form').setTitle(getMessage('title_edit_lscontact'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
    </panel>


	<dataSource id="abRepmAddEditLeaseInAPropertyContactsSelect_ds">
        <table name="contact" role="main"/>
        <field table="contact" name="contact_id"/>
        <field table="contact" name="contact_type"/>
        <field table="contact" name="company"/>
        <field table="contact" name="city_id"/>
        <field table="contact" name="honorific"/>
        <field table="contact" name="state_id"/>
        <field table="contact" name="name_last"/>
        <field table="contact" name="zip"/>
        <field table="contact" name="regn_id"/>
        <field table="contact" name="name_first"/>
        <field table="contact" name="county_id"/>
        <field table="contact" name="address1"/>
        <field table="contact" name="address2"/>
        <field table="contact" name="ctry_id"/>
        <field table="contact" name="phone"/>
        <field table="contact" name="cellular_number"/>
        <field table="contact" name="fax"/>
        <field table="contact" name="pager"/>
        <field table="contact" name="email"/>
        <field table="contact" name="status"/>
        <field table="contact" name="notes"/>
        <field table="contact" name="bl_id"/>
        <field table="contact" name="ls_id"/>
        <field table="contact" name="pr_id"/>
		<parameter name ="leaseID" dataType="verbatim" value = "''"/>
		<restrictions>
			<restriction type="sql" sql="not exists (select 1 from ls_contacts lc where contact.contact_id = lc.contact_id  and lc.ls_id in (${parameters['leaseID']}))"/>
		</restrictions>
	</dataSource>
	<panel type="grid" id="abRepmAddEditLeaseInAPropertyContactsSelect_grid" multipleSelectionEnabled = "true" dataSource="abRepmAddEditLeaseInAPropertyContactsSelect_ds" showOnLoad="false" useParentRestriction= "false">
		<action id="addNew">
			<title translatable="true">Add New</title>
			<command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyContactsEdit_form" newRecord="true"/>
			<command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyContactsEdit_form').setTitle(getMessage('title_add_contact'))"/>
		</action>
		<action id="assignContacts">
			<title translatable="true">Assign Contacts</title>
			<command type="callFunction" functionName="assignContacts"/>
			<!--command type="showPanel" panelId="abRepmAddEditLeaseInAPropertyContacts_grid" applyParentRestriction="false"/-->
			<command type="closeDialog"/>
		</action>
		<action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="contact" name="company" hidden="true"/>
        <field table="contact" name="honorific" hidden="true"/>
        <field table="contact" name="state_id" hidden="true"/>
        <field table="contact" name="zip" hidden="true"/>
        <field table="contact" name="address1" hidden="true"/>
        <field table="contact" name="address2" hidden="true"/>
        <field table="contact" name="ctry_id" hidden="true"/>
        <field table="contact" name="phone" hidden="true"/>
        <field table="contact" name="cellular_number" hidden="true"/>
        <field table="contact" name="fax" hidden="true"/>
        <field table="contact" name="email" hidden="true"/>



		<field table="contact" name="contact_id"/>
		<field table="contact" name="name_first"/>
		<field table="contact" name="name_last"/>
		<field table="contact" name="city_id"/>
		<field table="contact" name="contact_type"/>
		<field table="contact" name="status"/>
		<field table="contact" name="notes" colspan="2"/>
	</panel>

<!-- Add New Contact Form-->
    <panel type="form" id="abRepmAddEditLeaseInAPropertyContactsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyContactsSelect_ds" showOnLoad="false" columns="2">
        <action id="addNewComapny">
            <title translatable="true">Define Company</title>
			<command type="openDialog"  viewName="uc-rplm-companies-define.axvw" applyParentRestriction="false"/>
			<command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyAddCompany_form').setTitle(getMessage('title_add_company'))"/>
        </action>
		<action id="save">
            <title translatable="true">Save</title>
            <command type="saveForm" panelId="abRepmAddEditLeaseInAPropertyContactsEdit_form"/>
            <command type="showPanel" panelId="abRepmAddEditLeaseInAPropertyContactsSelect_grid" applyParentRestriction="false"/>
            <command type="closeDialog"/>
        </action>
		 <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>

        <field table="contact" name="contact_id"/>
        <field table="contact" name="company">
            <title translatable="true">Company</title>
            <action id="formAddEditContact_company">
                <title translatable="false">...</title>
                <tooltip translatable="true">Select Value</tooltip>
                <command
                    type="selectValue"
                    fieldNames="contact.company"
                    selectFieldNames="company.company"
                    visibleFieldNames="company.company,company.comments"
                    applyFilter="false"
                    actionListener="afterSelectCompany">
                </command>
            </action>
        </field>
		<field table="contact" name="ls_id" hidden="true"/>

		<field table="contact" name="name_first"/>
        <!--field table="contact" name="honorific"/-->
        <field table="contact" name="email"/>

		<field table="contact" name="name_last"/>
		<field table="contact" name="phone"/>

        <field table="contact" name="address1"/>
        <field table="contact" name="cellular_number"/>

        <field table="contact" name="address2"/>
        <field table="contact" name="fax"/>

        <field table="contact" name="city_id"/>
        <field table="contact" name="contact_type"/>

        <field table="contact" name="state_id">
			<title>State/Province Code</title>
		</field>
		<field table="contact" name="zip">
			<title>Postal/Zip Code</title>
		</field>


		<field table="contact" name="status"/>
		<field table="contact" name="notes" colspan="2"/>

		<!--field table="contact" name="pager"/>
        <field table="contact" name="regn_id"/>
        <field table="contact" name="ctry_id"/>
        <field table="contact" name="ls_id" readOnly="true"/-->

    </panel>

	<!--Add New Company-->
	<panel type="form" id="abRepmAddEditLeaseInAPropertyAddCompany_form" dataSource="abRepmAddEditLeaseInAPropertyTab_dsCompany" showOnLoad="false" columns="2">
		<action id="save">
			<title>Save</title>
			<command type="saveForm" panelId="abRepmAddEditLeaseInAPropertyAddCompany_form"/>
			<!--command type="closeDialog"/-->
		</action>
		<action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="company" name="company"/>
        <field table="company" name="trade_name"/>
        <field table="company" name="address1"/>
        <field table="company" name="address2"/>
        <field table="company" name="comments"/>
        <field table="company" name="city_id"/>
        <field table="company" name="ctry_id"/>
        <field table="company" name="regn_id"/>
        <field table="company" name="state_id"/>
        <field table="company" name="zip"/>
	</panel>

<!---Edit Lease Contact-->
	<dataSource id="abRepmAddEditLeaseInAPropertyContactsEdit_ds">
        <table name="ls_contacts" role="main"/>
        <field table="ls_contacts" name="contact_id"/>
        <field table="ls_contacts" name="contact_type"/>
        <field table="ls_contacts" name="company"/>
        <field table="ls_contacts" name="city_id"/>
        <field table="ls_contacts" name="honorific"/>
        <field table="ls_contacts" name="state_id"/>
        <field table="ls_contacts" name="name_last"/>
        <field table="ls_contacts" name="zip"/>
        <field table="ls_contacts" name="name_first"/>
        <field table="ls_contacts" name="address1"/>
        <field table="ls_contacts" name="address2"/>
        <field table="ls_contacts" name="ctry_id"/>
        <field table="ls_contacts" name="phone"/>
        <field table="ls_contacts" name="cellular_number"/>
        <field table="ls_contacts" name="fax"/>
        <field table="ls_contacts" name="email"/>
        <field table="ls_contacts" name="status"/>
        <field table="ls_contacts" name="notes"/>
        <field table="ls_contacts" name="ls_id"/>
    </dataSource>
	<panel type="form" id="abRepmAddEditLeaseInAPropertylsContactsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyContactsEdit_ds" showOnLoad="false" columns="2">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="saveForm" panelId="abRepmAddEditLeaseInAPropertyContactsEdit_form"/>
            <command type="showPanel" panelId="abRepmAddEditLeaseInAPropertyContacts_grid" applyParentRestriction="false"/>
            <command type="closeDialog"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>

        <field table="ls_contacts" name="contact_id" readOnly = "true" required="false"/>
		<field></field>
        <field table="ls_contacts" name="company"/>
		<field table="ls_contacts" name="ls_id" hidden="true"/>

		<field table="ls_contacts" name="name_first"/>
        <!--field table="contact" name="honorific"/-->
        <field table="ls_contacts" name="email"/>

		<field table="ls_contacts" name="name_last"/>
		<field table="ls_contacts" name="phone"/>

        <field table="ls_contacts" name="address1"/>
        <field table="ls_contacts" name="cellular_number"/>

        <field table="ls_contacts" name="address2"/>
        <field table="ls_contacts" name="fax"/>

        <field table="ls_contacts" name="city_id"/>
        <field table="ls_contacts" name="contact_type"/>

        <field table="ls_contacts" name="state_id">
			<title>State/Province Code</title>
		</field>
		<field table="ls_contacts" name="zip">
			<title>Postal/Zip Code</title>
		</field>


		<field table="ls_contacts" name="status"/>
		<field table="ls_contacts" name="notes" colspan="2"/>

    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyComm_ds">
        <table name="ls_comm" role="main"/>
        <field table="ls_comm" name="auto_number"/>
        <field table="ls_comm" name="ls_id"/>
        <field table="ls_comm" name="contact_id"/>
        <field table="ls_comm" name="description"/>
        <field table="ls_comm" name="comm_id"/>
        <field table="ls_comm" name="date_of_comm"/>
        <field table="ls_comm" name="summary"/>
        <field table="ls_comm" name="recorded_by"/>
        <field table="ls_comm" name="doc"/>
    </dataSource>
    <panel type="grid" id="abRepmAddEditLeaseInAPropertyComm_grid" dataSource="abRepmAddEditLeaseInAPropertyComm_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Communications Log</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyComm_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyComm_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyCommEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyCommEdit_form').setTitle(getMessage('addNewComm'))"/>
        </action>
        <field table="ls_comm" name="auto_number" hidden="true"/>
        <field table="ls_comm" name="ls_id" hidden="true"/>

		<field table="ls_comm" name="comm_id">
			<title>Who</title>
		</field>
        <field table="ls_comm" name="date_of_comm">
			<title>Date</title>
		</field>
        <field table="ls_comm" name="summary">
			<title>Comments</title>
		</field>

        <field table="ls_comm" name="recorded_by"/>
        <field table="ls_comm" name="doc" hidden="true"/>
        <field controlType="button" id="view" enabled="${record['ls_comm.doc'] != ''}">
          <title translatable="true">View Document</title>
        </field>
    </panel>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyCommEdit_form" dataSource="abRepmAddEditLeaseInAPropertyComm_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Communications Log</title>
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyCommEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyComm_grid'))"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="ls_comm" name="auto_number" hidden="true"/>
        <field table="ls_comm" name="ls_id" hidden="true"/>

		<field table="ls_comm" name="doc" hidden="true"/>

        <field table="ls_comm" name="comm_id">
			<title>Who</title>
		</field>
        <field table="ls_comm" name="date_of_comm" readOnly="true">
			<title>Date</title>
		</field>
		<field table="ls_comm" name="recorded_by" value="${user.employee.id}" readOnly="true">
			<title>Currently Logged In</title>
		</field>
        <field table="ls_comm" name="summary" required="true">
			<title>Comments</title>
		</field>
		<field table="ls_comm" name="doc" enabled="${record['ls_comm.comm_id'] != ''}"/>
		<!--field controlType="button" id="view" enabled="${record['ls_comm.comm_id'] != ''}">
          <title translatable="true">View Document</title>
        </field-->

    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyRm_ds">
        <table name="rm" role="main"/>
        <field table="rm" name="bl_id"/>
        <field table="rm" name="fl_id"/>
        <field table="rm" name="rm_id"/>
        <field table="rm" name="ls_id"/>
        <field table="rm" name="name"/>
        <field table="rm" name="comments"/>
        <field table="rm" name="area"/>
        <field table="rm" name="rm_type"/>
        <field table="rm" name="rm_cat"/>
    </dataSource>
    <!--panel type="grid" id="abRepmAddEditLeaseInAPropertyRm_grid" dataSource="abRepmAddEditLeaseInAPropertyRm_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Rooms</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyRm_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyRm_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertySelectRm_grid').addParameter('selectedProperty' , View.panels.get('abRepmAddEditLeaseInAPropertyLeaseInfo_form').getFieldValue('ls.bl_id'))"/>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertySelectRm_grid" applyParentRestriction="false"/>
        </action>
        <field table="rm" name="ls_id" hidden="true"/>
        <field table="rm" name="bl_id" hidden="true"/>
        <field table="rm" name="rm_id"/>
        <field table="rm" name="name"/>
        <field table="rm" name="comments">
			<title>Description</title>
		</field>
        <field table="rm" name="rm_type">
			<title>Space Classification</title>
		</field>
        <field table="rm" name="rm_cat">
			<title>Space Category</title>
		</field>
        <field table="rm" name="fl_id"/>
        <field table="rm" name="area"/>
        <field controlType="button" id="unassign">
          <title translatable="true">Unassign</title>
        </field>
    </panel-->
    <dataSource id="abRepmAddEditLeaseInAPropertySelectRm_ds">
        <table name="rm" role="main"/>
        <field table="rm" name="bl_id"/>
        <field table="rm" name="fl_id"/>
        <field table="rm" name="rm_id"/>
        <field table="rm" name="ls_id"/>
        <field table="rm" name="name"/>
        <field table="rm" name="comments"/>
        <field table="rm" name="area"/>
        <field table="rm" name="rm_type"/>
        <field table="rm" name="rm_cat"/>
        <parameter name="selectedProperty" dataType="verbatim" value=""/>
        <restriction type="sql" sql="rm.bl_id = '${parameters['selectedProperty']}' and rm.ls_id is null"/>
    </dataSource>
    <!--panel type="grid" id="abRepmAddEditLeaseInAPropertySelectRm_grid" dataSource="abRepmAddEditLeaseInAPropertySelectRm_ds" showOnLoad="false" multipleSelectionEnabled="true">
        <title translatable="true">Select Rooms</title>
        <action id="addRooms">
            <title translatable="true">Assign Room(s) to Lease</title>
        </action>
        <field table="rm" name="ls_id" hidden="true"/>
        <field table="rm" name="bl_id" hidden="true"/>
        <field table="rm" name="rm_id"/>
        <field table="rm" name="name"/>
        <field table="rm" name="comments">
			<title>Description</title>
		</field>
        <field table="rm" name="rm_type">
			<title>Space Classification</title>
		</field>
        <field table="rm" name="rm_cat">
			<title>Space Category</title>
		</field>
        <field table="rm" name="fl_id"/>
        <field table="rm" name="area"/>
    </panel-->



    <dataSource id="abRepmAddEditLeaseInAPropertyDocs_ds">
        <table name="docs_assigned" role="main"/>
        <field table="docs_assigned" name="doc_id"/>
        <field table="docs_assigned" name="ls_id"/>
        <field table="docs_assigned" name="bl_id"/>
        <field table="docs_assigned" name="pr_id"/>
        <field table="docs_assigned" name="doc"/>
        <field table="docs_assigned" name="name"/>
        <field table="docs_assigned" name="classification"/>
        <field table="docs_assigned" name="description"/>
    </dataSource>
    <panel type="grid" id="abRepmAddEditLeaseInAPropertyDocs_grid" dataSource="abRepmAddEditLeaseInAPropertyDocs_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Documents</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyDocs_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyDocs_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyDocsEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyDocsEdit_form').setTitle(getMessage('addNewDoc'))"/>
        </action>

        <field table="docs_assigned" name="name"/>
        <field table="docs_assigned" name="classification"  hidden="true"/>
        <field table="docs_assigned" name="description"/>
        <field table="docs_assigned" name="doc_id" hidden="true"/>
        <field controlType="button" id="edit">
            <title translatable="true">Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyDocsEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyDocsEdit_form').setTitle(getMessage('editDoc'))"/>
        </field>
        <field controlType="button" id="view" enabled="${record['docs_assigned.doc'] != ''}">
          <title translatable="true">View Document</title>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
    </panel>


    <dataSource id="abRepmAddEditLeaseInAPropertyDocsEdit_ds">
        <table name="docs_assigned" role="main"/>
        <field table="docs_assigned" name="doc_id"/>
        <field table="docs_assigned" name="name"/>
        <field table="docs_assigned" name="description"/>
        <field table="docs_assigned" name="classification"/>
        <field table="docs_assigned" name="doc"/>
        <field table="docs_assigned" name="ls_id"/>
    </dataSource>



    <panel type="form" id="abRepmAddEditLeaseInAPropertyDocsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyDocsEdit_ds" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyDocsEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyDocs_grid'))"/>
			<command type="showPanel" panelId = "abRepmAddEditLeaseInAPropertyDocs_grid"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="docs_assigned" name="name"/>
        <field table="docs_assigned" name="classification" hidden="true"/>
        <field table="docs_assigned" name="description"/>
        <field table="docs_assigned" name="doc"/>
        <field table="docs_assigned" name="doc_id" hidden="true"/>
        <field table="docs_assigned" name="ls_id" hidden="true"/>
    </panel>



    <dataSource id="abRepmAddEditLeaseInAPropertyBaseRents_ds">
        <table name="cost_tran_recur" role="main"/>
        <field table="cost_tran_recur" name="ls_id"/>
        <field table="cost_tran_recur" name="bl_id"/>
        <field table="cost_tran_recur" name="cost_tran_recur_id"/>
        <field table="cost_tran_recur" name="amount_income"/>
        <field table="cost_tran_recur" name="amount_expense"/>
        <field table="cost_tran_recur" name="period"/>
        <field table="cost_tran_recur" name="description"/>
        <field table="cost_tran_recur" name="date_start"/>
        <field table="cost_tran_recur" name="date_end"/>
        <field table="cost_tran_recur" name="status_active"/>
        <field table="cost_tran_recur" name="cost_cat_id"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyBaseRents_grid" dataSource="abRepmAddEditLeaseInAPropertyBaseRents_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Base Rents</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyBaseRents_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyBaseRents_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form').setTitle(getMessage('add_base_rent'))"/>
            <command type="callFunction" functionName="setCustomPeriodForBaseRentsEditPanel(View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form'))"/>
        </action>
        <field table="cost_tran_recur" name="cost_tran_recur_id"/>
        <field table="cost_tran_recur" name="amount_income"/>
        <field table="cost_tran_recur" name="amount_expense"/>
        <field table="cost_tran_recur" name="period"/>
        <field table="cost_tran_recur" name="description"/>
        <field table="cost_tran_recur" name="date_start"/>
        <field table="cost_tran_recur" name="date_end"/>
        <field table="cost_tran_recur" name="status_active"/>
        <field table="cost_tran_recur" name="cost_cat_id"/>
        <field controlType="button" id="edit">
            <title translatable="true">View/Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form').setTitle(getMessage('edit_base_rent'))"/>
            <command type="callFunction" functionName="setCustomPeriodForBaseRentsEditPanel(View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
    </panel>
	<panel type="view" id="costs" showOnLoad="false"   layout="nestedLayout" region="center">
		<title translatable="false">Costs</title>
	</panel>
		<tabs workflow="free" id="detailsTabs" tabRefreshPolicy="refreshOnLoad" layout="nestedLayout" region="center">
			<tab name="detailsTabs_0" file="ab-rplm-cost-mgmt-costs-recurring.axvw" useFrame="false" selected="true" hidden="true">
				<title translatable="false">Recurring Costs</title>
			</tab>
			<tab name="detailsTabs_1" file="uc-rplm-cost-mgmt-costs-scheduled.axvw" useFrame="false" hidden="true">
				<title translatable="false">Scheduled Costs</title>
			</tab>
			<tab name="detailsTabs_2" file="ab-rplm-cost-mgmt-costs-actual.axvw" useFrame="false" hidden="true">
				<title translatable="false">Approved Costs</title>
			</tab>
		</tabs>

    <dataSource id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_ds">
        <table name="cost_tran_recur" role="main"/>
        <field table="cost_tran_recur" name="cost_tran_recur_id"/>
        <field table="cost_tran_recur" name="amount_expense"/>
        <field table="cost_tran_recur" name="amount_income"/>
        <field table="cost_tran_recur" name="cost_cat_id"/>
        <field table="cost_tran_recur" name="period"/>
        <field table="cost_tran_recur" name="period_custom"/>
        <field table="cost_tran_recur" name="status_active"/>
        <field table="cost_tran_recur" name="description"/>
        <field table="cost_tran_recur" name="date_start"/>
        <field table="cost_tran_recur" name="date_end"/>
        <field table="cost_tran_recur" name="date_seasonal_start"/>
        <field table="cost_tran_recur" name="date_seasonal_end"/>
        <field table="cost_tran_recur" name="yearly_factor"/>
        <field table="cost_tran_recur" name="date_trans_created"/>
        <field table="cost_tran_recur" name="ac_id"/>
        <field table="cost_tran_recur" name="ls_id"/>
    </dataSource>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyBaseRentsEdit_ds" showOnLoad="false" newRecord="true" columns="2">
        <action id="save">
            <title translatable="true">Save</title>
            <!--command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form'), View.panels.get('abRepmAddEditLeaseInAPropertyBaseRents_grid'), {dates:[{startDateField:'cost_tran_recur.date_start',endDateField:'cost_tran_recur.date_end',errMessage:getMessage('err_base_rent_dates')},{startDateField:'cost_tran_recur.date_seasonal_start',endDateField:'cost_tran_recur.date_seasonal_end',errMessage:getMessage('err_base_rent_seasonal_dates')}]}, true)"/-->
			<command type="callFunction" functionName="checkAccountSaveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form'), View.panels.get('abRepmAddEditLeaseInAPropertyBaseRents_grid'), {dates:[{startDateField:'cost_tran_recur.date_start',endDateField:'cost_tran_recur.date_end',errMessage:getMessage('err_base_rent_dates')},{startDateField:'cost_tran_recur.date_seasonal_start',endDateField:'cost_tran_recur.date_seasonal_end',errMessage:getMessage('err_base_rent_seasonal_dates')}]}, true)"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="cost_tran_recur" name="cost_tran_recur_id"/>
        <field table="cost_tran_recur" name="date_start"/>
        <field table="cost_tran_recur" name="amount_expense"/>
        <field table="cost_tran_recur" name="date_end"/>
        <field table="cost_tran_recur" name="amount_income"/>
        <field table="cost_tran_recur" name="date_seasonal_start"/>
        <field table="cost_tran_recur" name="cost_cat_id"/>
        <field table="cost_tran_recur" name="date_seasonal_end"/>
        <field table="cost_tran_recur" name="period" onchange="setCustomPeriodForBaseRentsEditPanel(View.panels.get('abRepmAddEditLeaseInAPropertyBaseRentsEdit_form'))"/>
        <field table="cost_tran_recur" name="yearly_factor"/>
        <field table="cost_tran_recur" name="period_custom"/>
        <field table="cost_tran_recur" name="date_trans_created" readOnly="true"/>
        <field table="cost_tran_recur" name="status_active"/>
        <field />
        <field alias="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_account_code_fld" colspan="2" hidden="true">
            <title>Account Code</title>
            <html>
                <table border="0" style="margin-left:-4" cellpadding="0" cellspacing="0">
                    <tr>
                        <!--td><input type="button" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_autoSelAcctBtn" value="Auto-select Account" onclick="openAccountSelect('abRepmAddEditLeaseInABuildingBaseRentsEdit_form')"/></td-->
                        <td>Bus. Unit<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part1" maxlength="5" size="5" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Fund<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part2" maxlength="2" size="2" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Dept<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part3" maxlength="5" size="4" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Acct<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part4" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Program<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part5" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Internal<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part6" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Proj<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part7" maxlength="10" size="10" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                        <td>Activity<br/><input type="text" id="abRepmAddEditLeaseInAPropertyBaseRentsEdit_form_ac_id_part8" maxlength="8" size="8" onChange="afm_form_values_changed=true;updateAcctDesc('abRepmAddEditLeaseInABuildingBaseRentsEdit_form');"/></td>
                    </tr>
                </table>
            </html>
        </field>
        <field table="cost_tran_recur" name="ac_id" hidden="true"/>
        <field table="cost_tran_recur" name="ls_id" readOnly="true"/>
        <field/>
        <field table="cost_tran_recur" name="description" colspan="2"/>

    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyClauses_ds">
        <table name="ls_resp" role="main"/>
        <field table="ls_resp" name="resp_id"/>
        <field table="ls_resp" name="clause_type_id"/>
        <field table="ls_resp" name="description"/>
        <field table="ls_resp" name="resp_party"/>
        <field table="ls_resp" name="dates_match_lease"/>
        <field table="ls_resp" name="date_start"/>
        <field table="ls_resp" name="date_end"/>
        <field table="ls_resp" name="reference_loc"/>
        <field table="ls_resp" name="ls_id"/>
        <field table="ls_resp" name="doc"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyClauses_grid" dataSource="abRepmAddEditLeaseInAPropertyClauses_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Clauses</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyClauses_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyClauses_grid"/>
        </action>
        <!--action id="chrgAgreements">
            <title translatable="true">Create Chargeback Agreements</title>
            <command type="openDialog"  viewName="ab-rplm-lsadmin-clauses-chrbk-agree.axvw" width="1000" height="600"/>
        </action-->
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyClausesEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="checkClauseFields(View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form'))"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form').setTitle(getMessage('add_new_clause'))"/>
            <command type="callFunction" functionName="setAmenityButton"/>
        </action>
        <field table="ls_resp" name="doc" hidden="true"/>
        <field table="ls_resp" name="ls_id" hidden="true"/>
        <field table="ls_resp" name="resp_id"/>
        <field table="ls_resp" name="clause_type_id"/>
        <field table="ls_resp" name="description"/>
        <field table="ls_resp" name="resp_party"/>
        <field table="ls_resp" name="dates_match_lease"/>
        <field table="ls_resp" name="date_start"/>
        <field table="ls_resp" name="date_end"/>
        <field table="ls_resp" name="reference_loc"/>
        <field controlType="button" id="edit">
            <title translatable="true">View/Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyClausesEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="checkClauseFields(View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form'))"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form').setTitle(getMessage('edit_clause'))"/>
            <command type="callFunction" functionName="setAmenityButton"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
        <field controlType="button" id="document" enabled="${record['ls_resp.doc'] != ''}">
          <title translatable="true">View Document</title>
        </field>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyClausesEdit_ds">
        <table name="ls_resp" role="main"/>
        <field table="ls_resp" name="resp_id"/>
        <field table="ls_resp" name="dates_match_lease"/>
        <field table="ls_resp" name="clause_type_id"/>
        <field table="ls_resp" name="date_start"/>
        <field table="ls_resp" name="resp_party"/>
        <field table="ls_resp" name="date_end"/>
        <field table="ls_resp" name="doc"/>
        <field table="ls_resp" name="contact_id"/>
        <field table="ls_resp" name="reference_loc"/>
        <field table="ls_resp" name="description"/>
        <field table="ls_resp" name="ls_id" hidden ="true"/>
    </dataSource>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyClausesEdit_form" dataSource="abRepmAddEditLeaseInAPropertyClausesEdit_ds" columns="2" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form'), View.panels.get('abRepmAddEditLeaseInAPropertyClauses_grid'), {dates:[{startDateField:'ls_resp.date_start',endDateField:'ls_resp.date_end',errMessage:getMessage('error_date_end_before_date_start')}]}, false)"/>
			<!--command type="showPanel" panelId = "abRepmAddEditLeaseInAPropertyClauses_grid"/-->
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="ls_resp" name="resp_id"/>
        <field table="ls_resp" name="dates_match_lease" onchange="checkClauseFields(View.panels.get('abRepmAddEditLeaseInAPropertyClausesEdit_form'))"/>
        <field table="ls_resp" name="clause_type_id" onchange="setAmenityButton()">
            <action>
                <title>...</title>
                <tooltip>Select Value</tooltip>
                <command type="selectValue"
                    fieldNames="ls_resp.clause_type_id"
                    selectFieldNames="ls_clause_type.clause_type_id"
                    visibleFieldNames="ls_clause_type.clause_type_id"
                    actionListener="setAmenityButton"
                />
             </action>
        </field>
        <field table="ls_resp" name="date_start"/>
        <field table="ls_resp" name="resp_party"/>
        <field table="ls_resp" name="date_end"/>
        <field table="ls_resp" name="doc"/>
        <field table="ls_resp" name="contact_id"/>
        <field table="ls_resp" name="reference_loc"/>
        <field table="ls_resp" name="ls_id" required="false" readOnly="true"/>

        <field table="ls_resp" name="description" colspan="2">
             <!--action>
                <title>Add Amenity Description</title>
                <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyClausesAmntType').addParameter('bl_id' ,View.panels.get('abRepmAddEditLeaseInAPropertyLeaseInfo_form').getFieldValue('ls.bl_id'))"/>
                <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyClausesAmntType" applyParentRestriction="false"/>
            </action-->
        </field>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyClausesAmntType_ds">
        <sql dialect="generic">
            select prop_amenity.amenity_type ${sql.as} amenity_type, prop_amenity.comments ${sql.as} comments
                from prop_amenity where prop_amenity.pr_id IN (SELECT pr_id FROM bl WHERE bl.bl_id = '${parameters['bl_id']}')
            union
            select bl_amenity.amenity_type ${sql.as} amenity_type, bl_amenity.comments ${sql.as} comments
                from bl_amenity where bl_amenity.bl_id = '${parameters['bl_id']}'

        </sql>


        <table name="bl_amenity" role="main"/>
        <field table="bl_amenity" name="amenity_type" dataType="text"/>
        <field table="bl_amenity" name="comments" dataType="text"/>
        <parameter name="bl_id" dataType="verbatim" value=""/>

    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyClausesAmntType" dataSource="abRepmAddEditLeaseInAPropertyClausesAmntType_ds" multipleSelectionEnabled="true" showOnLoad="false">
        <title>Select Amenities</title>
        <action id="addAmenityType">
            <title>Add Amenities</title>
            <command type="callFunction" functionName="setAmenityType"/>
        </action>
        <field table="bl_amenity" name="amenity_type" dataType="text">
            <title>Amenity Type</title>
        </field>
        <field table="bl_amenity" name="comments" dataType="text">
            <title>Comments</title>
        </field>
    </panel>


    <dataSource id="abRepmAddEditLeaseInAPropertyOptions_ds">
        <table name="op" role="main"/>
        <field table="op" name="op_id"/>
        <field table="op" name="description"/>
        <field table="op" name="op_type"/>
        <field table="op" name="date_exercised"/>
        <field table="op" name="date_exercising_applicable"/>
        <field table="op" name="comments"/>
        <field table="op" name="ls_id"/>
        <field table="op" name="doc"/>
        <field table="op" name="dates_match_lease"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyOptions_grid" dataSource="abRepmAddEditLeaseInAPropertyOptions_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Options</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyOptions_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyOptions_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyOptionsEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="checkOptionFields(View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form'))"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form').setTitle(getMessage('add_new_option'))"/>
        </action>
        <field table="op" name="doc" hidden="true"/>
        <field table="op" name="ls_id" hidden="true"/>
        <field table="op" name="op_id"/>
        <field table="op" name="description"/>
        <field table="op" name="op_type"/>
        <field table="op" name="date_exercised"/>
        <field table="op" name="date_exercising_applicable"/>
        <field table="op" name="comments"/>
        <field table="op" name="dates_match_lease" hidden="true"/>
        <field controlType="button" id="edit">
            <title translatable="true">View/Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyOptionsEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="checkOptionFields(View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form'))"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form').setTitle(getMessage('edit_option'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
        <field controlType="button" id="document" enabled="${record['op.doc'] != ''}">
          <title translatable="true">View Document</title>
        </field>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyOptionsEdit_ds">
        <table name="op" role="main"/>
        <field table="op" name="op_id"/>
        <field table="op" name="date_option_introduced"/>
        <field table="op" name="description"/>
        <field table="op" name="dates_match_lease"/>
        <field table="op" name="op_type"/>
        <field table="op" name="date_start"/>
        <field table="op" name="who_can_exercise"/>
        <field table="op" name="date_option"/>
        <field table="op" name="date_exercised"/>
        <field table="op" name="doc"/>
        <field table="op" name="exercised_by"/>
        <field table="op" name="date_review"/>
        <field table="op" name="date_exercising_applicable"/>
        <field table="op" name="comments"/>
        <field table="op" name="ls_id"/>
    </dataSource>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyOptionsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyOptionsEdit_ds" columns="2" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form'), View.panels.get('abRepmAddEditLeaseInAPropertyOptions_grid'), {dates:[{startDateField:'op.date_start',endDateField:'op.date_option',errMessage:getMessage('err_options_dates')}]}, false)"/>
			<!--command type="showPanel" panelId = "abRepmAddEditLeaseInAPropertyOptions_grid"/-->
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="op" name="op_id"/>
        <field table="op" name="date_option_introduced"/>
        <field table="op" name="description" required="true"/>
        <field table="op" name="dates_match_lease" onchange="checkOptionFields(View.panels.get('abRepmAddEditLeaseInAPropertyOptionsEdit_form'))"/>
        <field table="op" name="op_type"/>
        <field table="op" name="date_start"/>
        <field table="op" name="who_can_exercise"/>
        <field table="op" name="date_option"/>
        <field table="op" name="date_exercised"/>
        <field table="op" name="doc"/>
        <field table="op" name="exercised_by"/>
        <field table="op" name="date_review"/>
        <field table="op" name="date_exercising_applicable"/>
        <field table="op" name="ls_id" hidden="true" required="false"/>
        <field table="op" name="comments" colspan="2"/>

    </panel>


    <dataSource id="abRepmAddEditLeaseInAPropertyAmendments_ds">
        <table name="ls_amendment" role="main"/>
        <field table="ls_amendment" name="ls_amend_id"/>
        <field table="ls_amendment" name="description"/>
        <field table="ls_amendment" name="date_requested"/>
        <field table="ls_amendment" name="date_effective"/>
        <field table="ls_amendment" name="exercised_by"/>
        <field table="ls_amendment" name="comments"/>
        <field table="ls_amendment" name="ls_id"/>
        <field table="ls_amendment" name="doc"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyAmendments_grid" dataSource="abRepmAddEditLeaseInAPropertyAmendments_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Amendments</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyAmendments_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyAmendments_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyAmendmentsEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyAmendmentsEdit_form').setTitle(getMessage('add_new_amendment'))"/>
        </action>
        <field table="ls_amendment" name="doc" hidden="true"/>
        <field table="ls_amendment" name="ls_amend_id"/>
        <field table="ls_amendment" name="description"/>
        <field table="ls_amendment" name="date_requested"/>
        <field table="ls_amendment" name="date_effective"/>
        <field table="ls_amendment" name="exercised_by"/>
        <field table="ls_amendment" name="comments"/>
        <field controlType="button" id="edit">
            <title translatable="true">Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyAmendmentsEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyAmendmentsEdit_form').setTitle(getMessage('edit_amendment'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
        <field controlType="button" id="document" enabled="${record['ls_amendment.doc'] != ''}">
          <title translatable="true">View Document</title>
        </field>
    </panel>

    <dataSource id="abRepmAddEditLeaseInAPropertyAmendmentsEdit_ds">
        <table name="ls_amendment" role="main"/>
        <field table="ls_amendment" name="ls_amend_id"/>
        <field table="ls_amendment" name="date_requested"/>
        <field table="ls_amendment" name="description"/>
        <field table="ls_amendment" name="date_effective"/>
        <field table="ls_amendment" name="doc"/>
        <field table="ls_amendment" name="exercised_by"/>
        <field table="ls_amendment" name="comments"/>
        <field table="ls_amendment" name="ls_id"/>
    </dataSource>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyAmendmentsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyAmendmentsEdit_ds" columns="2" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyAmendmentsEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyAmendments_grid'))"/>
			<command type="showPanel" panelId = "abRepmAddEditLeaseInAPropertyAmendments_grid"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="ls_amendment" name="ls_amend_id"/>
        <field table="ls_amendment" name="date_requested"/>
        <field table="ls_amendment" name="description" required="true"/>
        <field table="ls_amendment" name="date_effective"/>
        <field table="ls_amendment" name="doc"/>
        <field table="ls_amendment" name="exercised_by"/>
        <field table="ls_amendment" name="comments" colspan="2"/>
        <field table="ls_amendment" name="ls_id" hidden="true"/>
    </panel>


    <dataSource id="abRepmAddEditLeaseInAPropertyHistory_ds">
        <table name="lshistory" role="main"/>
        <field table="lshistory" name="lshistory_id"/>
        <field table="lshistory" name="ls_id"/>
        <field table="lshistory" name="change"/>
        <field table="lshistory" name="description"/>
    </dataSource>
    <panel type="grid" id="abRepmAddEditLeaseInAPropertyHistory_grid" dataSource="abRepmAddEditLeaseInAPropertyHistory_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">History</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyHistory_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyHistory_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyHistoryEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyHistoryEdit_form').setTitle(getMessage('add_new_history'))"/>
        </action>
        <field table="lshistory" name="lshistory_id" hidden="true"/>
        <field table="lshistory" name="ls_id" hidden="true"/>
        <field table="lshistory" name="change"/>
		<field table="lshistory" name="description"/>
		<field controlType ="button" enabled="${record['lshistory_id'] != ''}">
			<title>View</title>
			<command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyHistoryEdit_form" applyParentRestriction="true"/>
		</field>
    </panel>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyHistoryEdit_form" dataSource="abRepmAddEditLeaseInAPropertyHistory_ds" columns="1" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyHistoryEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyHistory_grid'))"/>
			<command type="closeDialog"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="lshistory" name="lshistory_id" hidden="true"/>
        <field table="lshistory" name="ls_id" hidden="true"/>
        <field table="lshistory" name="change"/>
        <field table="lshistory" name="description">
			<title>Description of Change</title>
		</field>
    </panel>



    <dataSource id="abRepmAddEditLeaseInAPropertyLiens_ds">
        <table name="lslien" role="main"/>
        <field table="lslien" name="lslien_id"/>
        <field table="lslien" name="ls_id"/>
        <field table="lslien" name="lien_type"/>
        <field table="lslien" name="description"/>
        <field table="lslien" name="date_applicable"/>
        <field table="lslien" name="applied"/>
    </dataSource>

    <panel type="grid" id="abRepmAddEditLeaseInAPropertyLiens_grid" dataSource="abRepmAddEditLeaseInAPropertyLiens_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Liens</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyLiens_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyLiens_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyLiensEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyLiensEdit_form').setTitle(getMessage('add_new_lien'))"/>
        </action>
        <field table="lslien" name="lslien_id" hidden="true"/>
        <field table="lslien" name="ls_id" hidden="true"/>
        <field table="lslien" name="lien_type"/>
        <field table="lslien" name="description"/>
        <field table="lslien" name="date_applicable">
			<title>Lien Applicable Date</title>
		</field>
        <field table="lslien" name="applied">
			<title>Lien Applied</title>
		</field>
        <field controlType="button" id="edit">
            <title translatable="true">Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyLiensEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyLiensEdit_form').setTitle(getMessage('edit_lien'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
    </panel>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyLiensEdit_form" dataSource="abRepmAddEditLeaseInAPropertyLiens_ds" columns="1" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyLiensEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyLiens_grid'))"/>
			 <command type="closeDialog"/>
		</action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="lslien" name="lslien_id" hidden="true"/>
        <field table="lslien" name="ls_id" hidden="true"/>
        <field table="lslien" name="lien_type" required="true"/>
        <field table="lslien" name="description" required="true"/>
        <field table="lslien" name="date_applicable" required="true">
			<title>Lien Applicable Date</title>
		</field>
        <field table="lslien" name="applied">
			<title>Lien Applied</title>
		</field>
    </panel>



    <dataSource id="abRepmAddEditLeaseInAPropertyEstoppels_ds">
        <table name="lsestoppel" role="main"/>
        <field table="lsestoppel" name="lsestoppel_id"/>
        <field table="lsestoppel" name="type"/>
        <field table="lsestoppel" name="ls_id"/>
        <field table="lsestoppel" name="date_of"/>
        <field table="lsestoppel" name="description"/>
        <field table="lsestoppel" name="doc1"/>
    </dataSource>
    <panel type="grid" id="abRepmAddEditLeaseInAPropertyEstoppels_grid" dataSource="abRepmAddEditLeaseInAPropertyEstoppels_ds" showOnLoad="false" layout="nestedLayout" region="center">
        <title translatable="true">Notices/Estoppels/SNDAs</title>
        <action id="exportPDF">
            <title>PDF</title>
            <command type="exportPanel" outputType="pdf" panelId="abRepmAddEditLeaseInAPropertyEstoppels_grid"/>
         </action>
        <action id="exportXLS">
            <title>XLS</title>
            <command type="exportPanel" outputType="xls" panelId="abRepmAddEditLeaseInAPropertyEstoppels_grid"/>
        </action>
        <action id="addNew">
            <title translatable="true">Add New</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyEstoppelsEdit_form" newRecord="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyEstoppelsEdit_form').setTitle(getMessage('add_new_estoppel'))"/>
        </action>

        <field table="lsestoppel" name="lsestoppel_id" hidden="true"/>
        <field table="lsestoppel" name="type"/>
        <field table="lsestoppel" name="ls_id" hidden="true"/>
        <field table="lsestoppel" name="description"/>
        <field table="lsestoppel" name="doc1" hidden="true"/>
        <field controlType="button" id="edit">
            <title translatable="true">Edit</title>
            <command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyEstoppelsEdit_form" applyParentRestriction="true"/>
            <command type="callFunction" functionName="View.panels.get('abRepmAddEditLeaseInAPropertyEstoppelsEdit_form').setTitle(getMessage('edit_estoppel'))"/>
        </field>
        <field controlType="button" id="delete">
          <title translatable="true">Delete</title>
        </field>
		<!--field controlType ="button" enabled="${record['lsestoppel_id'] != ''}">
			<title>View</title>
			<command type="openDialog" closeButton="false" panelId="abRepmAddEditLeaseInAPropertyEstoppelsEdit_form" applyParentRestriction="true"/>
		</field-->
        <field controlType="button" id="document" enabled="${record['lsestoppel.doc1'] != ''}">
          <title translatable="true">View Document</title>
        </field>
    </panel>
    <panel type="form" id="abRepmAddEditLeaseInAPropertyEstoppelsEdit_form" dataSource="abRepmAddEditLeaseInAPropertyEstoppels_ds" columns="1" showOnLoad="false">
        <action id="save">
            <title translatable="true">Save</title>
            <command type="callFunction" functionName="saveRecord(View.panels.get('abRepmAddEditLeaseInAPropertyEstoppelsEdit_form'),View.panels.get('abRepmAddEditLeaseInAPropertyEstoppels_grid'))"/>
			<command type="showPanel" panelId = "abRepmAddEditLeaseInAPropertyEstoppels_grid"/>
        </action>
        <action id="close">
            <title translatable="true">Close</title>
            <command type="closeDialog"/>
        </action>
        <field table="lsestoppel" name="lsestoppel_id" hidden="true" required="false"/>
        <field table="lsestoppel" name="type"/>
        <field table="lsestoppel" name="ls_id" hidden="true"/>
        <field table="lsestoppel" name="date_of"  required="true"/>
        <field table="lsestoppel" name="description"  required="true"/>
        <field table="lsestoppel" name="doc1" />
    </panel>
</view>